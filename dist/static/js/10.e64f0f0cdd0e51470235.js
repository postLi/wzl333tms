webpackJsonp([10,13,191,225,226,345],{"/B9f":function(e,t,i){"use strict";var r={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"dep-maintain"},[i("PopFrame",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"pickpopDepMain",attrs:{title:t.popTitle,isShow:t.popVisible},on:{close:t.closeMe}},[i("template",{staticClass:"pickRelationPop-content",slot:"content"},[i("div",{staticClass:"depmain-div"},[i("el-form",{ref:"ruleForm",attrs:{inline:!0,model:t.getMentInfo,"label-width":t.formLabelWidth,rules:t.rules}},[i("div",{staticClass:"_pick_center"},[t._v("是否生成托运单？")]),t._v(" "),i("div",{staticClass:"_pick_input_Main"},[i("el-form-item",{attrs:{label:"生成票数",prop:"dictNum"}},[i("el-input",{attrs:{placeholder:"请输入内容"},model:{value:t.getMentInfo.dictNum,callback:function(e){t.$set(t.getMentInfo,"dictNum",t._n(e))},expression:"getMentInfo.dictNum"}})],1)],1)])],1)]),t._v(" "),i("div",{staticClass:"dialog-footer-frame",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:function(e){t.submitForm("ruleForm")}}},[t._v("生成")]),t._v(" "),i("el-button",{on:{click:function(e){t.pickFinish("ruleForm")}}},[t._v("提货完成")])],1)],2)],1)},staticRenderFns:[]};t.a=r},"/n+A":function(e,t,i){"use strict";var r={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"popRight-center",class:{showPopRight:e.isShow},style:{zIndex:e.zIndex}},[i("div",{staticClass:"popRight-header"},[e._t("title",[e._v(e._s(e.title))]),e._v(" "),i("i",{staticClass:"el-icon-close",attrs:{title:"关闭"},on:{click:e.close}})],2),e._v(" "),e.shouldRender?i("div",{staticClass:"popRight-content"},[e._t("content",[e._v("内容")])],2):e._e(),e._v(" "),i("div",{staticClass:"popRight-footer"},[e._t("footer",[e._v("底部")])],2)])},staticRenderFns:[]};t.a=r},"0Q33":function(e,t){},"3EPC":function(e,t,i){"use strict";var r=i("qYK6"),s=i("/n+A");var a=function(e){i("f3wf")},o=i("VU/8")(r.a,s.a,a,null,null);t.a=o.exports},"5cRp":function(e,t,i){"use strict";var r=i("Jg9y");t.a={name:"orderpickUp",components:{Sender:r.default},props:{isShow:{type:Boolean,default:!1}},data:function(){return{component:"Sender"}}}},"71e1":function(e,t,i){e.exports=i("+dzQ")(43)},BamZ:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i("RB0d"),s=i("uwB8");var a=function(e){i("ceGR")},o=i("VU/8")(r.a,s.a,a,null,null);t.default=o.exports},EPeO:function(e,t,i){"use strict";var r=i("//Fk"),n=i.n(r),s=i("mvHQ"),a=i.n(s),o=(i("UDRQ"),i("t5DY")),c=i("0xDb"),l=i("71e1"),u=i.n(l),d=i("Vo7i");t.a={name:"singleImageUpload",props:{value:[String,Array],title:{type:String,default:""},tip:{type:String,default:"（jpg/png。小于5M）"},size:{type:String,default:"mini"},showFileList:{type:Boolean,default:!1},limit:{type:Number,default:1},listtype:{type:String,default:"picture",enum:["text","picture","picture-card"]},disabled:{type:Boolean,default:!1},twocode:{type:Boolean,default:!1}},computed:{imageUrl:function(){return this.value}},data:function(){return{tempUrl:"",dataObj:{token:"",key:""},upload:{key:"",policy:"",OSSAccessKeyId:"",success_action_status:"201",signature:""},uploadUrl:"",dir:"",filelist:[],showtc:!1,showtwocdetip:!0,twocodeurl:""}},watch:{showtc:function(){this.showtc?this.changeTwocode():clearInterval(this.uptimer)},value:{handler:function(e){if(this.showFileList){var t=Array.isArray(e)?e:e?e.split(","):[];t=t.filter(function(e){return e}),this.filelist=[],this.filelist=t.map(function(e){var t={};return t.url=e,t})}else this.filelist=e?[{url:e}]:[]},immediate:!0}},mounted:function(){},updated:function(){console.log("single image updated~~~")},beforeDestroy:function(){console.log("beforeDestroy"),clearInterval(this.uptimer)},methods:{init:function(){var t=this;return Object(o.m)().then(function(e){t.upload.OSSAccessKeyId=e.accessid,t.upload.policy=e.policy,t.upload.signature=e.signature,t.uploadUrl=e.host,t.dir=e.dir}).catch(function(){})},rmImage:function(t){this.filelist=this.filelist.filter(function(e){return e.url!==t}),this.emitInput(""),this.showtc=!1},onexceed:function(e,t){this.$message.error("最多上传 "+this.limit+" 张!")},handleRemove:function(e,t){console.log("handleRemove:",e,t),this.filelist=t,this.emitInput()},random_string:function(e){e=e||32;for(var t="ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz2345678",i=t.length,r="",s=0;s<e;s++)r+=t.charAt(Math.floor(Math.random()*i));return r},emitInput:function(e){e&&this.filelist.push({url:e}),this.$emit("input",this.showFileList?this.filelist.map(function(e){return e.url}).join(","):e)},handleImageScucess:function(e){var t="";-1!==e.indexOf("Location")&&(t=(t=e.match(/<Location>([^<]+)<\/Location>/m))?t[1]:""),this.emitInput(t)},handleError:function(e){this.$message.error("上传错误："+a()(e)),this.$emit("error",e)},handleUpload:function(a){var o=this;return new n.a(function(r,s){var e=a.file.name,t=(e=e||Math.random()+".jpg").match(/([^\.]+)$/);t=t?"."+t[1]:"";var i=function(e){var t=new FormData,i=o.uploadUrl;t.append("key",o.upload.key),t.append("success_action_status","201"),t.append("OSSAccessKeyId",o.upload.OSSAccessKeyId),t.append("policy",o.upload.policy),t.append("signature",o.upload.signature),t.append("file",e),d.b.post(i,t,{headers:{"Content-Type":"multipart/form-data"}}).then(function(e){r(e)}).catch(function(e){s(e),o._handlerCatchMsg(e,"上传失败:")})};/\.jpe?g/.test(t)?lrz(a.file,{width:1024}).then(function(e){i(e.file)}).catch(function(e){s(e),o._handlerCatchMsg(e,"上传失败：")}):i(a.file)})},beforeUpload:function(e){var i=this,r=/image\/\w+/.test(e.type)&&/(jpe?g|png)/i.test(e.type),s=e.size/1024/1024<5,a=e.name.match(/([^\.]+)$/);return a=a?"."+a[1]:"",new n.a(function(t,e){r?s?i.init().then(function(e){i.upload.key=i.dir+Object(c.parseTime)(new Date,"{y}{m}{d}")+"/"+i.random_string()+a,t(!0)}).catch(function(e){i._handlerCatchMsg(e),t(!1)}):(i.$message.error("上传头像图片大小不能超过 5MB!"),e(!1)):(i.$message.error("上传头像图片只能是 JPG/PNG 格式!"),e(!1))})},changeTwocode:function(){var i=this;clearInterval(this.uptimer),Object(o.k)().then(function(e){i.upid=e.data,i.startFetchData();var t="http://"+location.host+"/static/upload.html?len=1&access_token="+i.access_token+"&id="+e.data+"&url="+(window.tms_testapiurl||"");console.log("url:",t),u.a.toDataURL(t,{rendererOpts:{margin:0}}).then(function(e){i.twocodeurl=e})}).catch(function(e){i.$message.error("生成二维码出错了~")})},startFetchData:function(){var i=this;clearInterval(this.uptimer);var e=0;this.uptimer=setInterval(function(){if(57e4<(e+=5e3))return i.$message.info("二维码过期了，已重新生成~"),i.changeTwocode(),!1;Object(o.l)(i.upid).then(function(e){var t=e.data;t&&t.id===i.upid&&t.url&&(clearInterval(i.uptimer),i.showtc=!1,i.emitInput(decodeURIComponent(t.url)))}).catch(function(e){i.$message.info("二维码过期了，请重新扫描上传~")})},5e3)}}}},IqyV:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i("y2FZ"),s=i("hGvi"),a=i("VU/8")(r.a,s.a,null,null,null);t.default=a.exports},Jg9y:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i("efm1"),s=i("pA2h"),a=i("VU/8")(r.a,s.a,null,null,null);t.default=a.exports},QbVN:function(e,t,i){"use strict";var r=i("EPeO"),s=i("jxZV");var a=function(e){i("0Q33"),i("xU5l")},o=i("VU/8")(r.a,s.a,a,"data-v-de7091b2",null);t.a=o.exports},RB0d:function(e,t,i){"use strict";i("E4LH");var r=i("3EPC"),s=i("pAQG"),a=i("OYTF");t.a={components:{PopFrame:r.a,querySelect:s.a},props:{popVisible:{type:Boolean,default:!1},isDepMain:{type:Boolean,default:!1},dotInfo:{type:Object,default:!1},createrId:[Number,String]},data:function(){var r=this,e=function(e,t,i){""!==r.formInline.shipSn||""!==r.formInline.shipGoodsSn?i():i(new Error("运单号或货号必填其中一项"))};return{selected:[],rules:{shipSn:[{validator:e}],shipGoodsSn:[{validator:e}]},formLabelWidth:"90",usersArr:[],checked1:!0,popTitle:"关联运单",loading:!1,formInline:{shipSn:"",shipGoodsSn:"",pickupFee:""},getMentInfo:{pickupBatchNumber:"",truckFee:"",truckIdNumber:"",driverName:""},sendId:{pickupId:"",shipId:"",pickupFee:""}}},computed:{isShow:{get:function(){return this.popVisible},set:function(){}}},watch:{dotInfo:function(e){this.infoData(this.dotInfo)},popVisible:function(e){this.fetchData()}},mounted:function(){this.popVisible&&(this.sendId.pickupId=this.dotInfo.id)},methods:{infoData:function(e){this.getMentInfo.pickupBatchNumber=e.pickupBatchNumber,this.getMentInfo.driverName=e.driverName,this.getMentInfo.truckIdNumber=e.truckIdNumber,this.getMentInfo.getMentInfo=e.getMentInfo,this.getMentInfo.truckFee=e.truckFee,this.sendId.pickupId=e.id},search:function(e){return!e.pickupBatchNumber},fetchFindByShipSnOrGoodSn:function(){var t=this;return this.loading=!0,Object(a.d)(this.dotInfo.id).then(function(e){t.usersArr=e,t.loading=!1}).catch(function(e){t.loading=!1,t._handlerCatchMsg(e)})},fetchData:function(){this.fetchFindByShipSnOrGoodSn()},getShipSn:function(e){e&&(this.formInline.shipGoodsSn=e.shipGoodsSn,this.sendId.shipId=e.id)},getShipGoodsSn:function(e){e&&(this.formInline.shipSn=e.shipSn,this.sendId.shipId=e.id)},closeMe:function(e){this.reset(),this.$emit("update:popVisible",!1),"function"==typeof e&&e()},reset:function(){this.formInline={}},setObject:function(e,t){for(var i in e)e[i]=t?t[i]:"";return e},submitForm:function(e){var s=this;this.$refs[e].validate(function(e){if(!e)return!1;s.loading=!0,s.sendId.pickupFee=s.formInline.pickupFee;var t=s.sendId.pickupFee||"";console.log(s.formInline,"this.formInline");var i=""===s.formInline.shipSn?""===s.formInline.shipSn:void 0===s.formInline.shipSn,r=""===s.formInline.shipGoodsSn?""===s.formInline.shipGoodsSn:void 0===s.formInline.shipGoodsSn;if(i&&r)return s.$message.error("运单号或货号必填其中一项"),s.loading=!1;Object(a.f)(s.sendId.pickupId,s.sendId.shipId,t).then(function(e){s.loading=!1,s.$message({message:"添加成功~",type:"success"}),delete s.sendId.shipId,s.fetchData(),s.reset(),s.$emit("success")}).catch(function(e){s._handlerCatchMsg(e),s.loading=!1})})},removeList:function(){var t=this;return this.selected.length?1<this.selected.length?(this.$message({message:"每次只能选择单条数据~",type:"warning"}),!1):void Object(a.g)(this.selected[0].id,this.selected[0].shipId).then(function(e){t.loading=!1,t.$message.success("保存成功"),t.fetchData(),t.$emit("success")}).catch(function(e){t._handlerCatchMsg(e),t.loading=!1}):(this.$message({message:"请选择要操作的列表项~",type:"warning"}),!1)},clickDetails:function(e,t,i){this.$refs.multipleTable.toggleRowSelection(e)},getSelection:function(e){this.selected=e}}}},W2Aq:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i("XIz/"),s=i("/B9f");var a=function(e){i("zxPM")},o=i("VU/8")(r.a,s.a,a,null,null);t.default=o.exports},"XIz/":function(e,t,i){"use strict";var r=i("E4LH"),s=i("3EPC"),a=i("OYTF");t.a={components:{PopFrame:s.a},props:{popVisible:{type:Boolean,default:!1},dotInfo:[Object,Array],isDepMain:{type:Boolean,default:!1},createrId:[Object,Number,String]},data:function(){return{rules:{dictNum:[{pattern:r.a.ONLY_NUMBER,trigger:"blur",message:"只能输入1-10的整数"},{validator:function(e,t,i){10<t?i(new Error("最多可生成10票")):t<1?i(new Error("最少可生成1票")):i()},trigger:"blur"}]},formLabelWidth:"90",input:"",checked1:!0,popTitle:"提示",loading:!1,getMentInfo:{dictNum:1,pickupId:""},orderId:""}},computed:{isShow:{get:function(){return this.popVisible},set:function(){}}},watch:{isDepMain:function(){this.isDepMain},dotInfo:function(e){this.getMentInfo.pickupId=this.dotInfo.id},popVisible:function(e){},createrId:function(e){}},mounted:function(){},methods:{validNum:function(e){console.log(e)},reset:function(){this.getMentInfo.dictNum=1},closeMe:function(e){this.$emit("update:popVisible",!1),"function"==typeof e&&e()},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;t.loading=!0,Object(a.h)(t.getMentInfo.pickupId).then(function(e){t.loading=!1,t.$emit("success"),t.eventBus.$emit("showCreateOrder",{batchid:t.dotInfo.pickupBatchNumber,ordernum:t.getMentInfo.dictNum,batchobj:t.dotInfo}),t.closeMe(),t.reset()}).catch(function(e){t._handlerCatchMsg(e),t.loading=!1})})},pickFinish:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;t.loading=!0,Object(a.h)(t.getMentInfo.pickupId).then(function(e){t.loading=!1,t.$message({message:"提货完成~",type:"success"}),t.closeMe(),t.$emit("success"),t.reset()}).catch(function(e){t._handlerCatchMsg(e),t.loading=!1})})}}}},ceGR:function(e,t){},efm1:function(e,t,i){"use strict";var r=i("Dd8w"),s=i.n(r),a=(i("Vi15"),i("OYTF")),o=i("IqyV"),n=i("puNT"),c=i("nwVq"),l=i("W2Aq"),u=i("BamZ"),d=i("NYxO"),m=i("1onU"),p=i("0xDb"),h=i("UQm2");t.a={components:{SearchForm:o.default,Pager:m.a,TableSetup:n.a,AddCustomer:c.default,PickupMain:l.default,PickupRelevance:u.default},computed:s()({},Object(d.mapGetters)(["otherinfo"]),{orgid:function(){return this.isModify?this.selectInfo.orgid:this.searchQuery.vo.orgid||this.otherinfo.orgid}}),mounted:function(){this.searchQuery.vo.orgid=this.otherinfo.orgid},data:function(){var t=this;return{mykey:"",btnsize:"mini",usersArr:[],total:0,tablekey:0,loading:!0,setupTableVisible:!1,AddCustomerVisible:!1,pickMaintainisible:!1,releMaintainisible:!1,isModify:!1,isDepMain:!1,isDbclick:!1,selectInfo:{},selected:[],searchQuery:{currentPage:1,pageSize:100,vo:{orgid:1,pickupStatus:"",startTime:"",pickupBatchNumber:"",truckIdNumber:"",driverName:""}},tableColumn:[{label:"序号",prop:"number",width:"70",fixed:!0,slot:function(e){return(t.searchQuery.currentPage-1)*t.searchQuery.pageSize+e.$index+1}},{label:"提货批次",prop:"pickupBatchNumber",width:"110",fixed:!0},{label:"提货状态",prop:"pickupStatusName",width:"110",fixed:!0},{label:"发货人",prop:"customerName",width:"120",fixed:!1},{label:"手机号",prop:"customerMobile",width:"130",fixed:!1},{label:"提货地址",prop:"detailedAddress",width:"170",fixed:!1},{label:"货品名",prop:"pickupName",width:"120",fixed:!1},{label:"件数",prop:"pickupAmount",width:"80",fixed:!1},{label:"重量",prop:"pickupWeight",width:"80",fixed:!1},{label:"体积",prop:"pickupVolume",width:"80",fixed:!1},{label:"实际载重量",prop:"realWeight",width:"120",fixed:!1},{label:"差额重量",prop:"differWeight",width:"110",fixed:!1},{label:"实际载体积",prop:"realVolume",width:"120",fixed:!1},{label:"差额体积",prop:"differVolume",width:"120",fixed:!1},{label:"关联运单号",prop:"shipSns",width:"180",fixed:!1},{label:"关联提货费",prop:"pickupFee",width:"120",fixed:!1},{label:"到站",prop:"toCityName",width:"150",fixed:!1},{label:"付款方式",prop:"payMethodName",width:"120",fixed:!1},{label:"备注",prop:"remark",width:"120",fixed:!1},{label:"运费",prop:"carriage",width:"80",fixed:!1},{label:"代收费用",prop:"collectionFee",width:"110",fixed:!1},{label:"车牌号",prop:"truckIdNumber",width:"120",fixed:!1},{label:"车费",prop:"truckFee",width:"80",fixed:!1},{label:"车辆单位",prop:"truckUnit",width:"110",fixed:!1},{label:"司机姓名",prop:"driverName",width:"110",fixed:!1},{label:"司机手机",prop:"driverMobile",width:"110",fixed:!1},{label:"车辆类型",prop:"truckTypeName",width:"110",fixed:!1},{label:"出车时间",prop:"outTime",width:"160",fixed:!1},{label:"要求到达时间",prop:"arriveTime",width:"160",fixed:!1}]}},methods:{getSumLeft:function(e,t){return Object(p.getSummaries)(e,p.operationPropertyCalc)},fetchAllCustomer:function(){var t=this;return this.loading=!0,Object(a.c)(this.searchQuery).then(function(e){t.usersArr=e.list,t.total=e.total,t.loading=!1}).catch(function(e){t.loading=!1,t._handlerCatchMsg(e)})},fetchData:function(){this.fetchAllCustomer()},handlePageChange:function(e){this.searchQuery.currentPage=e.pageNum,this.searchQuery.pageSize=e.pageSize,this.fetchAllCustomer()},getSearchParam:function(e){this.searchQuery.currentPage=this.$options.data().searchQuery.currentPage,this.searchQuery.pageSize=this.$options.data().searchQuery.pageSize,this.searchQuery.vo=Object(p.objectMerge2)(this.searchQuery.vo,e),this.fetchAllCustomer()},showImport:function(){},doAction:function(e){var t=this;if(!this.selected.length&&"add"!==e&&"export"!==e&&"print"!==e)return this.closeAddCustomer(),this.$message({message:"请选择要操作的项~",type:"warning"}),!1;switch(e){case"export":Object(h.g)({data:this.selected.length?this.selected:this.usersArr,columns:this.tableColumn,name:"提货-"+Object(p.parseTime)(new Date,"{y}{m}{d}{h}{i}{s}")}),this.$refs.multipleTable.clearSelection();break;case"print":Object(h.d)({data:this.selected.length?this.selected:this.usersArr,columns:this.tableColumn,name:"提货-"+Object(p.parseTime)(new Date,"{y}{m}{d}{h}{i}{s}")});break;case"add":this.closeAddCustomer(),this.isModify=!1,this.isDbclick=!1,this.selectInfo={},this.openAddCustomer();break;case"modify":if(this.closeAddCustomer(),this.isModify=!0,this.isDbclick=!1,1<this.selected.length)return this.$message({message:"每次只能修改单条数据~",type:"warning"}),!1;if(237===this.selected[0].pickupStatus)return this.$message({message:"提货完成不能修改~",type:"warning"}),this.$refs.multipleTable.clearSelection(),!1;this.selectInfo=this.selected[0],this.openAddCustomer();break;case"finishPick":if(this.closeAddCustomer(),1<this.selected.length)return this.$message({message:"每次只能生成单条数据~",type:"warning"}),!1;if(237===this.selected[0].pickupStatus)return this.$message({message:"已经提货完成了~",type:"warning"}),this.$refs.multipleTable.clearSelection(),!1;this.selectInfo=this.selected[0],this.openpickMaintainisible();break;case"relevance":if(this.closeAddCustomer(),1<this.selected.length)return this.$message({message:"每次只能生成单条数据~",type:"warning"}),!1;this.selectInfo=this.selected[0],this.openpickReletainisible();break;case"delete":var i=this.selected.filter(function(e){return"提货中"===e.pickupStatusName}).map(function(e){return e.id});if(!i.length)return this.$message({type:"info",message:"提货完成的提货单不能删除!"}),!1;i=i.join(","),this.$confirm("确定要删除提货批次吗？","提示",{confirmButtonText:"删除",cancelButtonText:"取消",type:"warning"}).then(function(){Object(a.a)(i).then(function(e){t.$message({type:"success",message:"删除成功!"}),t.fetchData()}).catch(function(e){t._handlerCatchMsg(e)})})}this.$refs.multipleTable.clearSelection()},setTable:function(){this.setupTableVisible=!0},closeSetupTable:function(){this.setupTableVisible=!1},openAddCustomer:function(){this.AddCustomerVisible=!0},closeAddCustomer:function(){this.AddCustomerVisible=!1},openpickMaintainisible:function(){this.pickMaintainisible=!0,this.releMaintainisible=!1},openpickReletainisible:function(){this.releMaintainisible=!0,this.pickMaintainisible=!1},clickDetails:function(e,t,i){this.$refs.multipleTable.toggleRowSelection(e)},getSelection:function(e){this.selected=e},getDbClick:function(e,t){this.selectInfo=e,this.isModify=!1,this.isDbclick=!0,this.openAddCustomer(),this.$refs.multipleTable.clearSelection()},setColumn:function(e){this.tableColumn=e,this.tablekey=Math.random()}}}},f3wf:function(e,t){},fY6L:function(e,t,i){"use strict";var r={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("pop-right",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"addPickUpPop",attrs:{title:t.popTitle,isShow:t.popVisible},on:{close:t.closeMe}},[i("template",{staticClass:"addPickUpPop-content",slot:"content"},[i("el-form",{key:t.valkey,ref:"ruleForm",staticClass:"pickup_lrl",attrs:{model:t.form,rules:t.rules,"label-width":"90px","show-message":t.checkShowMessage,inline:!0,"label-position":"right",size:"mini"}},[i("div",{staticClass:"info_date",staticStyle:{"margin-top":"10px"}},[t._v("提货信息")]),t._v(" "),i("div",{staticClass:"pickUp-top"},[i("el-form-item",{attrs:{label:"提货批次",prop:"customerUnit"}},[i("el-input",{attrs:{"auto-complete":"off",disabled:""},model:{value:t.pickupBatchNumber,callback:function(e){t.pickupBatchNumber=e},expression:"pickupBatchNumber"}})],1),t._v(" "),i("el-form-item",{staticClass:"senderName_lrl",attrs:{label:"发货人",prop:""}},[i("querySelect",{attrs:{search:"customerName",type:"sender",valuekey:"customerName",disabled:t.isDbclick},on:{change:t.setSender},model:{value:t.form.tmsCustomer.customerName,callback:function(e){t.$set(t.form.tmsCustomer,"customerName",e)},expression:"form.tmsCustomer.customerName"}})],1),t._v(" "),i("el-form-item",{staticClass:"senderName_lrl",attrs:{label:"手机号",prop:"tmsCustomer.customerMobile"}},[i("querySelect",{attrs:{search:"customerMobile",type:"sender",valuekey:"customerMobile",disabled:t.isDbclick},on:{change:t.setSender},model:{value:t.form.tmsCustomer.customerMobile,callback:function(e){t.$set(t.form.tmsCustomer,"customerMobile",e)},expression:"form.tmsCustomer.customerMobile"}})],1),t._v(" "),i("el-form-item",{staticClass:"senderAddr_lrl",attrs:{label:"提货地址",prop:"tmsCustomer.detailedAddress"}},[i("querySelect",{attrs:{search:"detailedAddress",type:"sender",valuekey:"detailedAddress",disabled:t.isDbclick},on:{change:t.setSender},model:{value:t.form.tmsCustomer.detailedAddress,callback:function(e){t.$set(t.form.tmsCustomer,"detailedAddress",e)},expression:"form.tmsCustomer.detailedAddress"}})],1)],1),t._v(" "),i("div",{staticClass:"info_date"},[t._v("货物信息")]),t._v(" "),i("div",{staticClass:"pickUp-order"},[i("el-form-item",{attrs:{label:"货品名",prop:"tmsOrderPickup.pickupName"}},[i("querySelect",{attrs:{search:"value",valuekey:"value",maxlength:8,type:"cargoName",remote:!0,disabled:t.isDbclick},model:{value:t.form.tmsOrderPickup.pickupName,callback:function(e){t.$set(t.form.tmsOrderPickup,"pickupName",e)},expression:"form.tmsOrderPickup.pickupName"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"件数",prop:"tmsOrderPickup.pickupAmount"}},[i("input",{directives:[{name:"number-only",rawName:"v-number-only"}],staticClass:"nativeinput",attrs:{maxlength:8,"auto-complete":"off",clearable:"",disabled:t.isDbclick,type:"text"},domProps:{value:t.form.tmsOrderPickup.pickupAmount},on:{change:function(e){t.setInputVal(e.target.value,"pickupAmount")}}})]),t._v(" "),i("el-form-item",{attrs:{label:"体积",prop:""}},[i("input",{directives:[{name:"number-only",rawName:"v-number-only:point",arg:"point"}],staticClass:"nativeinput",attrs:{maxlength:8,"auto-complete":"off",clearable:"",disabled:t.isDbclick,type:"text"},domProps:{value:t.form.tmsOrderPickup.pickupVolume},on:{change:function(e){t.setInputVal(e.target.value,"pickupVolume")}}})]),t._v(" "),i("el-form-item",{attrs:{label:"重量",prop:"tmsOrderPickup.pickupWeight"}},[i("input",{directives:[{name:"number-only",rawName:"v-number-only:point",arg:"point"}],staticClass:"nativeinput",attrs:{maxlength:8,"auto-complete":"off",clearable:"",disabled:t.isDbclick,type:"text"},domProps:{value:t.form.tmsOrderPickup.pickupWeight},on:{change:function(e){t.setInputVal(e.target.value,"pickupWeight")}}})]),t._v(" "),i("el-form-item",{attrs:{label:"运费",prop:"tmsOrderPickup.carriage"}},[i("input",{directives:[{name:"number-only",rawName:"v-number-only:point",arg:"point"}],staticClass:"nativeinput",attrs:{maxlength:8,"auto-complete":"off",clearable:"",disabled:t.isDbclick,type:"text"},domProps:{value:t.form.tmsOrderPickup.carriage},on:{change:function(e){t.setInputVal(e.target.value,"carriage")}}})]),t._v(" "),i("el-form-item",{attrs:{label:"付款方式"}},[i("SelectType",{staticClass:"pickup-way",attrs:{type:"ship_pay_way",disabled:t.isDbclick},model:{value:t.form.tmsOrderPickup.payMethod,callback:function(e){t.$set(t.form.tmsOrderPickup,"payMethod",e)},expression:"form.tmsOrderPickup.payMethod"}})],1),t._v(" "),i("el-form-item",{staticClass:"order_toCityCode",attrs:{required:"",prop:"tmsOrderPickup.toCityName",label:"到站"}},[i("queryCity",{attrs:{search:"longAddr",type:"city",remote:!0,disabled:t.isDbclick},on:{change:t.selectToCity},model:{value:t.form.tmsOrderPickup.toCityName,callback:function(e){t.$set(t.form.tmsOrderPickup,"toCityName",e)},expression:"form.tmsOrderPickup.toCityName"}})],1),t._v(" "),i("el-form-item",{staticClass:"order_remark",attrs:{label:"备注",prop:"tmsOrderPickup.remark"}},[i("el-input",{attrs:{type:"textarea","auto-complete":"off",disabled:t.isDbclick,maxlength:300},model:{value:t.form.tmsOrderPickup.remark,callback:function(e){t.$set(t.form.tmsOrderPickup,"remark",e)},expression:"form.tmsOrderPickup.remark"}})],1)],1),t._v(" "),i("div",{staticClass:"info_date"},[t._v("其他信息")]),t._v(" "),i("div",{staticClass:"pickUp-bottom"},[i("el-form-item",{attrs:{label:"车费",prop:"tmsOrderPickup.truckFee"}},[i("input",{directives:[{name:"number-only",rawName:"v-number-only:point",arg:"point"}],staticClass:"nativeinput",attrs:{maxlength:8,"auto-complete":"off",clearable:"",disabled:t.isDbclick,type:"text"},domProps:{value:t.form.tmsOrderPickup.truckFee},on:{change:function(e){t.setInputVal(e.target.value,"truckFee")}}})]),t._v(" "),i("el-form-item",{attrs:{label:"代收费用",prop:""}},[i("input",{directives:[{name:"number-only",rawName:"v-number-only:point",arg:"point"}],staticClass:"nativeinput",attrs:{maxlength:8,"auto-complete":"off",clearable:"",disabled:t.isDbclick,type:"text"},domProps:{value:t.form.tmsOrderPickup.collectionFee},on:{change:function(e){t.setInputVal(e.target.value,"collectionFee")}}})]),t._v(" "),i("el-form-item",{attrs:{label:"车牌号",prop:"tmsTruck.truckIdNumber"}},[i("querySelect",{attrs:{search:"truckIdNumber",valuekey:"truckIdNumber",type:"trunk",disabled:t.isDbclick,maxlength:8},on:{change:t.getTrunkName},model:{value:t.form.tmsTruck.truckIdNumber,callback:function(e){t.$set(t.form.tmsTruck,"truckIdNumber",e)},expression:"form.tmsTruck.truckIdNumber"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"司机姓名",prop:"tmsDriver.driverName"}},[i("querySelect",{attrs:{search:"driverName",valuekey:"driverName",type:"driver",remote:!0,disabled:t.isDbclick,maxlength:8},on:{change:t.getdriverName},model:{value:t.form.tmsDriver.driverName,callback:function(e){t.$set(t.form.tmsDriver,"driverName",e)},expression:"form.tmsDriver.driverName"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"车辆类型"}},[i("SelectType",{staticClass:"pickup-way",attrs:{type:"truck_type",placeholder:"请选择",disabled:t.isDbclick},model:{value:t.form.tmsTruck.truckType,callback:function(e){t.$set(t.form.tmsTruck,"truckType",e)},expression:"form.tmsTruck.truckType"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"司机手机",prop:"tmsDriver.driverMobile"}},[i("el-input",{attrs:{"auto-complete":"off",disabled:t.isDbclick},model:{value:t.form.tmsDriver.driverMobile,callback:function(e){t.$set(t.form.tmsDriver,"driverMobile",e)},expression:"form.tmsDriver.driverMobile"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"车辆单位",prop:"tmsTruck.truckUnit"}},[i("el-input",{attrs:{"auto-complete":"off",disabled:t.isDbclick,maxlength:18},model:{value:t.form.tmsTruck.truckUnit,callback:function(e){t.$set(t.form.tmsTruck,"truckUnit",e)},expression:"form.tmsTruck.truckUnit"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"提货状态",prop:"tmsOrderPickup.pickupStatus"}},[i("SelectType",{staticClass:"pickup-way",attrs:{filterfn:t.filterfn,type:"pickup_status",placeholder:"请选择",disabled:t.isDbclick},model:{value:t.form.tmsOrderPickup.pickupStatus,callback:function(e){t.$set(t.form.tmsOrderPickup,"pickupStatus",e)},expression:"form.tmsOrderPickup.pickupStatus"}})],1),t._v(" "),i("el-form-item",{staticClass:"customerunit",attrs:{label:"出车时间"}},[i("el-date-picker",{attrs:{align:"right",type:"date",placeholder:"选择日期","value-format":"timestamp","picker-options":t.pickOption,disabled:t.isDbclick},model:{value:t.form.tmsOrderPickup.outTime,callback:function(e){t.$set(t.form.tmsOrderPickup,"outTime",e)},expression:"form.tmsOrderPickup.outTime"}})],1),t._v(" "),i("el-form-item",{staticClass:"arrive-time",attrs:{label:"到达时间",prop:"tmsOrderPickup.arriveTime"}},[i("el-date-picker",{attrs:{align:"right",type:"date","picker-options":t.pickOption2,placeholder:"选择日期","value-format":"timestamp",disabled:t.isDbclick},model:{value:t.form.tmsOrderPickup.arriveTime,callback:function(e){t.$set(t.form.tmsOrderPickup,"arriveTime",e)},expression:"form.tmsOrderPickup.arriveTime"}})],1),t._v(" "),i("el-form-item",{staticClass:"checked"},[i("el-checkbox",{attrs:{disabled:""},model:{value:t.checked,callback:function(e){t.checked=e},expression:"checked"}},[t._v("发送短信给司机")])],1)],1)])],1),t._v(" "),t.isDbclick?i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:t.closeMe}},[t._v("关 闭")])],1):i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:function(e){t.submitForm("ruleForm")}}},[t._v("保 存")]),t._v(" "),i("el-button",{on:{click:t.closeMe}},[t._v("取 消")])],1)],2)},staticRenderFns:[]};t.a=r},gt6D:function(e,t){},hGvi:function(e,t,i){"use strict";var r={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("el-form",{staticClass:"staff_searchinfo clearfix",attrs:{inline:!0,size:t.btnsize,"label-position":"right","label-width":"70px",rules:t.rules,model:t.searchForm}},[i("div",{staticClass:"staff_searchinfo--input"},[i("el-form-item",{attrs:{label:"出车时间"}},[i("div",{staticClass:"block"},[i("el-date-picker",{attrs:{type:"daterange",align:"right",clearable:!1,"picker-options":t.pickerOptions,"start-placeholder":"开始日期","end-placeholder":"结束日期","unlink-panels":""},model:{value:t.searchCreatTime,callback:function(e){t.searchCreatTime=e},expression:"searchCreatTime"}})],1)]),t._v(" "),i("el-form-item",{attrs:{label:"提货状态"}},[i("SelectType",{attrs:{type:"pickup_status"},model:{value:t.searchForm.pickupStatus,callback:function(e){t.$set(t.searchForm,"pickupStatus",e)},expression:"searchForm.pickupStatus"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"提货批次"}},[i("el-input",{directives:[{name:"numberOnly",rawName:"v-numberOnly"}],key:t.formKey,attrs:{placeholder:"",maxlength:"15",clearable:""},on:{clear:function(e){t.clearFormItem("pickupBatchNumber")}},model:{value:t.searchForm.pickupBatchNumber,callback:function(e){t.$set(t.searchForm,"pickupBatchNumber",e)},expression:"searchForm.pickupBatchNumber"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"车牌号"}},[i("el-input",{attrs:{placeholder:"",maxlength:"8",clearable:""},model:{value:t.searchForm.truckIdNumber,callback:function(e){t.$set(t.searchForm,"truckIdNumber",e)},expression:"searchForm.truckIdNumber"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"司机姓名"}},[i("el-input",{attrs:{placeholder:"",maxlength:"8",clearable:""},model:{value:t.searchForm.driverName,callback:function(e){t.$set(t.searchForm,"driverName",e)},expression:"searchForm.driverName"}})],1)],1),t._v(" "),i("el-form-item",{staticClass:"staff_searchinfo--btn"},[i("el-button",{attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v("查询")]),t._v(" "),i("el-button",{attrs:{type:"info",plain:""},on:{click:t.clearForm}},[t._v("清空")])],1)],1)},staticRenderFns:[]};t.a=r},ismd:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i("5cRp"),s=i("mJJL"),a=i("VU/8")(r.a,s.a,null,null,null);t.default=a.exports},jxZV:function(e,t,i){"use strict";var r={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"upload-container",class:{uploadlist:t.showFileList}},[i("el-upload",{staticClass:"image-uploader",attrs:{data:t.upload,action:t.uploadUrl,multiple:!1,drag:!t.showFileList,"show-file-list":t.showFileList,"file-list":t.filelist,limit:t.limit,"before-upload":t.beforeUpload,"list-type":t.listtype,"on-exceed":t.onexceed,disabled:t.disabled,"on-remove":t.handleRemove,"on-error":t.handleError,"http-request":t.handleUpload,"on-success":t.handleImageScucess}},[t._t("content",[t.showtc?i("div",{staticClass:"twocodebox",on:{click:function(e){e.stopPropagation(),e.preventDefault()},mouseover:function(e){t.showtwocdetip=!0},mouseout:function(e){t.showtwocdetip=!1}}},[i("div",[i("img",{attrs:{src:t.twocodeurl,alt:""}})]),t._v(" "),i("el-button",{attrs:{size:t.size,type:"primary"},on:{click:function(e){t.showtc=!1}}},[t._v("本地上传")]),t._v(" "),i("el-button",{attrs:{size:t.size,type:"primary"},on:{click:t.changeTwocode}},[t._v("更换二维码")])],1):i("div",[t.title&&!t.showFileList?i("div",{staticClass:"upload__title"},[t._v(t._s(t.title))]):t._e(),t._v(" "),i("el-button",{attrs:{size:t.size,type:"primary"}},[t._v("点击上传")]),t._v(" "),t.twocode?i("el-button",{staticClass:"uploadtwocode",attrs:{size:t.size,type:"primary"},on:{click:function(e){e.stopPropagation(),e.preventDefault(),t.showtc=!0}}},[t._v("二维码上传")]):t._e(),t._v(" "),t.showFileList?t._e():i("div",{staticClass:"el-upload__text"},[t._v("将文件拖拽到此区域")]),t._v(" "),t.tip?i("div",{staticClass:"upload__tip"},[t._v(t._s(t.tip))]):t._e()],1)])],2),t._v(" "),t.imageUrl&&!t.showFileList?i("div",{staticClass:"image-preview"},[i("div",{staticClass:"image-preview-wrapper"},[i("img",{attrs:{src:t.imageUrl}}),t._v(" "),i("div",{staticClass:"image-preview-action"},[i("i",{staticClass:"el-icon-delete",on:{click:function(e){t.rmImage(t.imageUrl)}}})])])]):t._e()],1)},staticRenderFns:[]};t.a=r},mJJL:function(e,t,i){"use strict";var r={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"pickup-manager tab-wrapper tab-wrapper-100"},[t("keep-alive",[t(this.component,{tag:"component"})],1)],1)},staticRenderFns:[]};t.a=r},nwVq:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i("pcyF"),s=i("fY6L");var a=function(e){i("gt6D")},o=i("VU/8")(r.a,s.a,a,null,null);t.default=o.exports},pA2h:function(e,t,i){"use strict";var r={render:function(){var r=this,e=r.$createElement,s=r._self._c||e;return s("div",{directives:[{name:"loading",rawName:"v-loading",value:r.loading,expression:"loading"}],staticClass:"tab-content"},[s("SearchForm",{attrs:{orgid:r.otherinfo.orgid,issender:!0,btnsize:r.btnsize},on:{change:r.getSearchParam}}),r._v(" "),s("div",{staticClass:"tab_info"},[s("div",{staticClass:"btns_box"},[s("el-button",{directives:[{name:"has",rawName:"v-has:PICK_ADD",arg:"PICK_ADD"}],attrs:{type:"primary",size:r.btnsize,icon:"el-icon-circle-plus",plain:""},on:{click:function(e){r.doAction("add")}}},[r._v("新增提货\n      ")]),r._v(" "),s("el-button",{directives:[{name:"has",rawName:"v-has:PICK_EDIT",arg:"PICK_EDIT"}],attrs:{type:"primary",size:r.btnsize,icon:"el-icon-edit",plain:""},on:{click:function(e){r.doAction("modify")}}},[r._v("\n        修改\n      ")]),r._v(" "),s("el-button",{directives:[{name:"has",rawName:"v-has:PICK_DEL",arg:"PICK_DEL"}],attrs:{type:"danger",size:r.btnsize,icon:"el-icon-delete",plain:""},on:{click:function(e){r.doAction("delete")}}},[r._v("\n        删除\n      ")]),r._v(" "),s("el-button",{directives:[{name:"has",rawName:"v-has:PICK_FINASH",arg:"PICK_FINASH"}],attrs:{type:"success",size:r.btnsize,icon:"el-icon-success",plain:""},on:{click:function(e){r.doAction("finishPick")}}},[r._v("提货完成\n      ")]),r._v(" "),s("el-button",{directives:[{name:"has",rawName:"v-has:PICK_SEL",arg:"PICK_SEL"}],attrs:{type:"primary",size:r.btnsize,icon:"el-icon-menu",plain:""},on:{click:function(e){r.doAction("relevance")}}},[r._v("关联运单\n      ")]),r._v(" "),s("el-button",{directives:[{name:"has",rawName:"v-has:PICK_EXP",arg:"PICK_EXP"}],attrs:{type:"primary",size:r.btnsize,icon:"el-icon-download",plain:""},on:{click:function(e){r.doAction("export")}}},[r._v("导出\n      ")]),r._v(" "),s("el-button",{directives:[{name:"has",rawName:"v-has:PICK_PRI",arg:"PICK_PRI"}],attrs:{type:"primary",size:r.btnsize,icon:"el-icon-printer",plain:""},on:{click:function(e){r.doAction("print")}}},[r._v("打印\n      ")]),r._v(" "),s("el-button",{staticClass:"table_setup",attrs:{type:"primary",size:r.btnsize,icon:"el-icon-setting",plain:""},on:{click:r.setTable}},[r._v("\n        表格设置\n      ")])],1),r._v(" "),s("div",{staticClass:"info_tab"},[s("el-table",{key:r.tablekey,ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:r.usersArr,border:"",height:"100%","tooltip-effect":"dark","summary-method":r.getSumLeft,"show-summary":"","default-sort":{prop:"id",order:"ascending"},stripe:""},on:{"row-dblclick":r.getDbClick,"row-click":r.clickDetails,"selection-change":r.getSelection}},[s("el-table-column",{attrs:{fixed:"",sortable:"",type:"selection",width:"70"}}),r._v(" "),r._l(r.tableColumn,function(i){return[i.slot?s("el-table-column",{key:i.id,attrs:{fixed:i.fixed,sortable:"",label:i.label,width:i.width},scopedSlots:r._u([{key:"default",fn:function(t){return[i.click?s("span",{staticClass:"clickitem",domProps:{innerHTML:r._s(i.slot(t))},on:{click:function(e){e.stopPropagation(),i.click(t)}}}):s("span",{domProps:{innerHTML:r._s(i.slot(t))}})]}}])}):s("el-table-column",{key:i.id,attrs:{fixed:i.fixed,sortable:"",label:i.label,prop:i.prop,width:i.width}})]})],2)],1),r._v(" "),s("div",{staticClass:"info_tab_footer"},[r._v("共计:"+r._s(r.total)+"\n      "),s("div",{staticClass:"show_pager"},[s("Pager",{attrs:{total:r.total},on:{change:r.handlePageChange}})],1)])]),r._v(" "),s("AddCustomer",{key:r.mykey,attrs:{issender:!0,isModify:r.isModify,isDbclick:r.isDbclick,info:r.selectInfo,orgid:r.orgid,popVisible:r.AddCustomerVisible},on:{"update:popVisible":function(e){r.AddCustomerVisible=e},close:r.closeAddCustomer,success:r.fetchData}}),r._v(" "),s("TableSetup",{attrs:{popVisible:r.setupTableVisible,columns:r.tableColumn,code:"ORDER_PICK"},on:{close:r.closeSetupTable,success:r.setColumn}}),r._v(" "),s("PickupMain",{attrs:{popVisible:r.pickMaintainisible,isDepMain:r.isDepMain,dotInfo:r.selectInfo},on:{"update:popVisible":function(e){r.pickMaintainisible=e},close:r.openpickMaintainisible,success:r.fetchData}}),r._v(" "),s("PickupRelevance",{attrs:{popVisible:r.releMaintainisible,isDepMain:r.isDepMain,dotInfo:r.selectInfo},on:{"update:popVisible":function(e){r.releMaintainisible=e},close:r.openpickReletainisible,success:r.fetchData}})],1)},staticRenderFns:[]};t.a=r},pcyF:function(e,t,i){"use strict";var r=i("woOf"),s=i.n(r),a=i("Dd8w"),o=i.n(a),n=i("E4LH"),c=i("OYTF"),l=i("P5Di"),u=i("QbVN"),d=i("9UCZ"),m=i("66wn"),p=i("pAQG"),h=i("hq98"),f=i("NYxO"),b=i("0xDb");t.a={components:{popRight:l.a,Upload:u.a,querySelect:p.a,SelectType:d.a,queryCity:h.a,SelectCity:m.a},props:{popVisible:{type:Boolean,default:!1},orgid:{required:!0},isModify:{type:Boolean,default:!1},isDbclick:{type:Boolean,default:!1},info:{type:Object,default:function(){}},issender:{type:Boolean,dafault:!1}},computed:o()({},Object(f.mapGetters)(["otherinfo"])),data:function(){var r=this,t=this,e=function(e,t,i){n.a.Number_point.test(t)||!t?i():i(new Error("只能输入数字"))};return{rules:{"tmsOrderPickup.pickupName":[{required:!0,validator:this.validateIsEmpty("货品名不能为空")}],"tmsOrderPickup.pickupAmount":[{validator:function(e,t,i){n.a.ONLY_NUMBER.test(t)||!t?i():i(new Error("只能输入数字"))},trigger:"blur"},{required:!0,validator:this.validateIsEmpty("件数不能为空")}],"tmsOrderPickup.toCityName":[{required:!0,validator:this.validateIsEmpty("到站不能为空")}],"tmsOrderPickup.pickupVolume":[{validator:e,trigger:"blur"}],"tmsOrderPickup.pickupWeight":[{validator:e,trigger:"blur"}],"tmsOrderPickup.carriage":[{validator:e,mtrigger:"blur"}],"tmsOrderPickup.remark":[{max:300,message:"备注最多可输入300个字符",trigger:"blur"}],"tmsOrderPickup.truckFee":[{validator:e,trigger:"blur"}],"tmsOrderPickup.collectionFee":[{validator:e,trigger:"blur"}],"tmsTruck.truckIdNumber":[{required:!0,validator:this.validateIsEmpty("车牌号不能为空")}],"tmsDriver.driverName":[{required:!0,validator:this.validateIsEmpty("司机姓名不能为空")}],"tmsDriver.driverMobile":[{validator:function(e,t,i){n.a.MOBILE.test(t)||!t?i():r.isDbclick?i():i(new Error("请输入正确的手机号码~"))},trigger:"change"}],"tmsTruck.truckUnit":[{max:18,message:"车辆单位最多可输入18个字符",trigger:"blur"}],"tmsOrderPickup.arriveTime":[{required:!0,validator:this.validateIsEmpty("要求到达时间不能为空")}],"tmsCustomer.customerMobile":[{required:!0,validator:this.validateIsEmpty("发货人手机号不能为空")}],"tmsCustomer.detailedAddress":[{required:!0,validator:this.validateIsEmpty("提货地址不能为空")}]},pickOption:{firstDayOfWeek:1,disabledDate:function(e){return!!t.form.tmsOrderPickup.arriveTime&&e.getTime()>t.form.tmsOrderPickup.arriveTime}},pickOption2:{firstDayOfWeek:1,disabledDate:function(e){return!!t.form.tmsOrderPickup.outTime&&e.getTime()<t.form.tmsOrderPickup.outTime}},form:{tmsCustomer:{customerName:"",customerMobile:"",detailedAddress:"",customerId:""},tmsDriver:{driverName:"",driverMobile:"",driverId:""},tmsTruck:{truckIdNumber:"",truckType:"",truckUnit:"",truckId:""},tmsOrderPickup:{pickupBatchNumber:"",pickupName:"",pickupAmount:"",pickupVolume:"",pickupWeight:"",carriage:"",payMethod:76,toCityCode:"",toCityName:"",remark:"",truckFee:"",pickupStatus:236,collectionFee:"",outTime:"",arriveTime:""}},valkey:"",checked:!0,checkShowMessage:!1,formLabelWidth:"80px",popTitle:"提货派车单",loading:!1,inited:!1,pickupBatchNumber:"",sender:{},isChecked:!1,isCheckedShow:!1}},mounted:function(){this.inited||(this.inited=!0,this.initInfo())},watch:{popVisible:function(e,t){this.inited||(this.inited=!0,this.initInfo())},info:function(){this.$refs.ruleForm&&this.$refs.ruleForm.resetFields(),this.checkShowMessage=!1,this.isModify?(this.popTitle="修改派车单",this.infoData(this.info)):this.isDbclick?(this.popTitle="查看派车单",this.infoData(this.info)):(this.popTitle="提货派车单",this.reset(),this.fetchGetPickUp())},isModify:function(){this.$refs.ruleForm&&this.$refs.ruleForm.resetFields(),this.checkShowMessage=!1,this.isModify?(this.popTitle="修改派车单",this.infoData(this.info)):this.isDbclick?(this.popTitle="查看派车单",this.infoData(this.info)):(this.popTitle="提货派车单",this.reset(),this.fetchGetPickUp())},isDbclick:function(){this.$refs.ruleForm&&this.$refs.ruleForm.resetFields(),this.checkShowMessage=!1,this.isModify?(this.popTitle="修改派车单",this.infoData(this.info)):this.isDbclick?(this.popTitle="查看派车单",this.infoData(this.info)):(this.popTitle="提货派车单",this.reset(),this.fetchGetPickUp())}},methods:{setInputVal:function(e,t){this.$set(this.form.tmsOrderPickup,t,e)},watchInfo:function(){this.isModify?(this.popTitle="修改派车单",this.infoData(this.info)):this.isDbclick?(this.popTitle="查看派车单",this.infoData(this.info)):(this.popTitle="提货派车单",this.newInfoData(),this.fetchGetPickUp(),this.valkey=Math.random())},filterfn:function(e){return 235!==e.id},infoData:function(e){this.form.tmsOrderPickup.pickupName=e.pickupName,this.form.tmsOrderPickup.pickupAmount=e.pickupAmount,this.form.tmsOrderPickup.pickupWeight=e.pickupWeight,this.form.tmsOrderPickup.pickupVolume=e.pickupVolume,this.form.tmsOrderPickup.carriage=e.carriage,this.form.tmsOrderPickup.collectionFee=e.collectionFee,this.form.tmsOrderPickup.payMethod=e.payMethod,this.form.tmsOrderPickup.pickupStatus=e.pickupStatus,this.form.tmsOrderPickup.remark=e.remark,this.form.tmsOrderPickup.arriveTime=+new Date(e.arriveTime),this.form.tmsOrderPickup.outTime=+new Date(e.outTime),this.form.tmsOrderPickup.toCityName=e.toCityName,this.form.tmsOrderPickup.id=e.id,this.form.tmsOrderPickup.truckFee=e.truckFee,console.log("infoData",e),this.form.tmsTruck.truckIdNumber=e.truckIdNumber,this.form.tmsTruck.truckType=e.truckType,this.form.tmsTruck.truckUnit=e.truckUnit,this.form.tmsDriver.driverName=e.driverName,this.form.tmsDriver.driverMobile=e.driverMobile,this.form.tmsCustomer.customerName=e.customerName,this.form.tmsCustomer.customerMobile=e.customerMobile,this.form.tmsCustomer.detailedAddress=e.detailedAddress,this.pickupBatchNumber=e.pickupBatchNumber,this.valkey=Math.random()},validateIsEmpty:function(){var r=this,s=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"不能为空！";return function(e,t,i){t?i():(r.showMessage(s),i(new Error(s)))}},showMessage:function(e){this.isChecked&&!this.isCheckedShow&&(this.isCheckedShow=!0),this.isCheckedShow?this.checkShowMessage=!0:this.checkShowMessage=!1},setObject:function(e,t){for(var i in e)e[i]=t?t[i]:"";return e},fetchGetPickUp:function(){var t=this;return this.loading=!0,Object(c.b)().then(function(e){t.pickupBatchNumber=e.data,t.loading=!1}).catch(function(e){t._handlerCatchMsg(e)})},setSender:function(e,t){t=t?"customRece":"tmsCustomer",e&&(this.form[t].customerType="tmsCustomer"===t?1:2,this.form[t].customerName=e.customerName,this.form[t].customerMobile=e.customerMobile,this.form[t].detailedAddress=e.detailedAddress,this.form[t].customerId=e.customerId)},selectToCity:function(e,t){e&&(this.form.tmsOrderPickup.toCityCode=e.id,this.form.tmsOrderPickup.toCityName=e.longAddr)},getdriverName:function(e,t){e&&(this.form.tmsDriver.driverMobile?this.form.tmsDriver.driverMobile=s()(this.form.tmsDriver.driverMobile):(this.form.tmsDriver.driverName=e.driverName,this.form.tmsDriver.driverMobile=e.driverMobile,this.form.tmsDriver.driverId=e.id))},getTrunkName:function(e){e&&(""===this.form.tmsDriver.driverName||""===this.form.tmsDriver.driverMobile?(this.form.tmsDriver.driverName=e.driverName,this.form.tmsDriver.driverMobile=e.dirverMobile,this.form.tmsDriver.driverId=e.driverId):(this.form.tmsDriver.driverName=s()(this.form.tmsDriver.driverName),this.form.tmsDriver.driverMobile=s()(this.form.tmsDriver.driverMobile)),this.form.tmsTruck.truckId=e.truckId,this.form.tmsTruck.truckType=e.truckType,this.form.tmsTruck.truckUnit=e.truckUnit,this.form.tmsTruck.truckIdNumber=e.truckIdNumber)},initInfo:function(){this.loading=!1},submitForm:function(a){var o=this;this.isChecked=!0,this.isCheckedShow=!0,this.checkShowMessage=!0,this.$refs[a].validate(function(e){if(o.isChecked=!1,o.isCheckedShow=!1,!e||o.loading)return!1;o.loading=!0,o.form.tmsOrderPickup.pickupBatchNumber=o.pickupBatchNumber;var t=void 0,i=Object(b.objectMerge2)({},o.form);if(o.loading=!0,o.isModify)t=Object(c.i)(i);else{var r=!1;for(var s in i.tmsCustomer)o.sender[s]!==i.tmsCustomer[s]&&(r=!0);i.tmsCustomer.customerId=r?"":o.form.tmsCustomer.customerId,i.tmsOrderPickup.outTime=+new Date(o.form.tmsOrderPickup.outTime),t=Object(c.e)(i)}t.then(function(e){o.loading=!1,o.$refs[a].resetFields(),o.$emit("success"),o.closeMe(),o.$message.success("保存成功"),o.loading=!1}).catch(function(e){"提货批次已存在"===e.text?o.fetchGetPickUp():o._handlerCatchMsg(e),o.loading=!1})})},newInfoData:function(){this.form={tmsCustomer:{customerName:"",customerMobile:"",detailedAddress:"",customerId:""},tmsDriver:{driverName:"",driverMobile:"",driverId:""},tmsTruck:{truckIdNumber:"",truckType:"",truckUnit:"",truckId:""},tmsOrderPickup:{pickupBatchNumber:"",pickupName:"",pickupAmount:"",pickupVolume:"",pickupWeight:"",carriage:"",payMethod:76,toCityCode:"",toCityName:"",remark:"",truckFee:"",pickupStatus:236,collectionFee:"",outTime:new Date,arriveTime:""}}},reset:function(){this.watchInfo()},closeMe:function(e){this.reset(),this.$emit("update:popVisible",!1),"function"==typeof e&&e()}}}},qYK6:function(e,t,i){"use strict";t.a={props:{width:{type:String,default:"400"},title:{type:String,default:"标题"},isShow:{type:Boolean,default:!1}},watch:{isShow:{handler:function(){this.isShow&&(this.shouldRender=!0)},immediate:!0}},data:function(){return{zIndex:(window.tmsPopZindex?window.tmsPopZindex+=1:window.tmsPopZindex=1e3,window.tmsPopZindex),shouldRender:!1}},methods:{close:function(){this.$emit("close")}}}},uwB8:function(e,t,i){"use strict";var r={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"pick-maintain"},[i("PopFrame",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"pickpopDepMain",attrs:{title:t.popTitle,isShow:t.popVisible},on:{close:t.closeMe}},[i("template",{staticClass:"pickRelationPop-content",slot:"content"},[i("div",{staticClass:"depmain-div"},[i("el-form",{ref:"formName",staticClass:"demo-form-inline",attrs:{inline:!0,model:t.getMentInfo,"label-width":t.formLabelWidth}},[i("el-form-item",{attrs:{label:"提货批次"}},[i("el-input",{attrs:{disabled:""},model:{value:t.getMentInfo.pickupBatchNumber,callback:function(e){t.$set(t.getMentInfo,"pickupBatchNumber",e)},expression:"getMentInfo.pickupBatchNumber"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"派车费用"}},[i("el-input",{attrs:{disabled:""},model:{value:t.getMentInfo.truckFee,callback:function(e){t.$set(t.getMentInfo,"truckFee",e)},expression:"getMentInfo.truckFee"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"车牌号码"}},[i("el-input",{attrs:{disabled:""},model:{value:t.getMentInfo.truckIdNumber,callback:function(e){t.$set(t.getMentInfo,"truckIdNumber",e)},expression:"getMentInfo.truckIdNumber"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"司机姓名"}},[i("el-input",{attrs:{disabled:""},model:{value:t.getMentInfo.driverName,callback:function(e){t.$set(t.getMentInfo,"driverName",e)},expression:"getMentInfo.driverName"}})],1)],1),t._v(" "),i("el-table",{ref:"multipleTable",staticStyle:{width:"560px"},attrs:{data:t.usersArr,stripe:"",border:"",height:"145","tooltip-effect":"dark","default-sort":{prop:"id",order:"ascending"}},on:{"row-click":t.clickDetails,"selection-change":t.getSelection}},[i("el-table-column",{attrs:{fixed:"",sortable:"",type:"selection",width:"78"}}),t._v(" "),i("el-table-column",{attrs:{fixed:"",sortable:"",prop:"shipSn",label:"运单号",width:"160"}}),t._v(" "),i("el-table-column",{attrs:{fixed:"",sortable:"",prop:"shipGoodsSn",width:"160",label:"货号"}}),t._v(" "),i("el-table-column",{attrs:{fixed:"",sortable:"",prop:"pickupFee",width:"160",label:"实际提货费"}})],1),t._v(" "),i("el-form",{staticClass:"order_bottom",attrs:{inline:!0,"label-width":t.formLabelWidth,rules:t.rules,model:t.getMentInfo}},[i("el-form-item",{attrs:{label:"运单号",prop:"shipSn"}},[i("querySelect",{attrs:{searchFn:t.search,valuekey:"shipSn",param:{shipFromOrgid:t.otherinfo.orgid},search:"shipSn",type:"order"},on:{change:t.getShipSn},model:{value:t.formInline.shipSn,callback:function(e){t.$set(t.formInline,"shipSn",e)},expression:"formInline.shipSn"}})],1),t._v(" "),i("el-form-item",{staticClass:"ship_class",attrs:{label:"货号",prop:"shipGoodsSn"}},[i("querySelect",{attrs:{searchFn:t.search,param:{shipFromOrgid:t.otherinfo.orgid},valuekey:"shipGoodsSn",search:"shipGoodsSn",type:"order"},on:{change:t.getShipGoodsSn},model:{value:t.formInline.shipGoodsSn,callback:function(e){t.$set(t.formInline,"shipGoodsSn",e)},expression:"formInline.shipGoodsSn"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"本单提货费"}},[i("el-input",{directives:[{name:"numberOnly",rawName:"v-numberOnly"}],model:{value:t.formInline.pickupFee,callback:function(e){t.$set(t.formInline,"pickupFee",e)},expression:"formInline.pickupFee"}})],1)],1)],1)]),t._v(" "),i("div",{staticClass:"dialog-footer-frame",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:function(e){t.submitForm("formName")}}},[t._v("加入列表")]),t._v(" "),i("el-button",{on:{click:t.removeList}},[t._v("从列表移除")])],1)],2)],1)},staticRenderFns:[]};t.a=r},xU5l:function(e,t){},y2FZ:function(e,t,i){"use strict";var s=i("E4LH"),r=i("9UCZ"),a=i("0xDb");t.a={components:{SelectType:r.a},props:{btnsize:{type:[String,Object],default:"mini"},orgid:{type:Number},issender:{type:Boolean,dafault:!1}},computed:{title:function(){}},data:function(){var r=this;return{formKey:0,searchCreatTime:[Object(a.parseTime)(new Date-5184e6),Object(a.parseTime)(new Date)],searchForm:{pickupStatus:235,pickupBatchNumber:"",truckIdNumber:"",driverName:""},rules:{mobile:[{validator:function(e,t,i){r.searchForm.mobile=t.replace(s.a.NO_NUMBER,""),i()},trigger:"change"}]},pickerOptions:{shortcuts:a.pickerOptions2}}},watch:{orgid:function(e){this.searchForm.orgid=e}},mounted:function(){this.loading=!0,this.searchForm.orgid=this.orgid,this.onSubmit()},methods:{clearFormItem:function(e){this.searchForm[e]="",this.formKey=(new Date).getTime()},getOrgid:function(e){},onSubmit:function(){this.searchForm.startTime=this.searchCreatTime[0]?Object(a.parseTime)(this.searchCreatTime[0],"{y}-{m}-{d} ")+"00:00:00":"",this.searchForm.endTime=this.searchCreatTime[1]?Object(a.parseTime)(this.searchCreatTime[1],"{y}-{m}-{d} ")+"23:59:59":"",this.$emit("change",this.searchForm)},clearForm:function(){this.searchForm.startTime="",this.searchForm.endTime="",this.searchCreatTime=[+new Date-5184e6,+new Date],this.searchForm.pickupBatchNumber="",this.searchForm.truckIdNumber="",this.searchForm.driverName="",this.searchForm.pickupStatus=""}}}},zxPM:function(e,t){}});