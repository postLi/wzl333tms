webpackJsonp([195],{"0apj":function(t,e,i){"use strict";var s={render:function(){var i=this,t=i.$createElement,s=i._self._c||t;return s("div",{staticClass:"tags-view-container"},[s("scroll-pane",{ref:"scrollPane",staticClass:"tags-view-wrapper"},[s("router-link",{staticClass:"tags-view-item",class:i.isActive({path:"/dashboard"})?"active":"",attrs:{to:"/dashboard"},nativeOn:{contextmenu:function(t){t.preventDefault(),i.openMenu(i.$el,t,!0)}}},[i._v("\n      首页\n    ")]),i._v(" "),i._l(Array.from(i.visitedViews),function(e){return s("router-link",{key:e.path,ref:"tag",refInFor:!0,staticClass:"tags-view-item",class:i.isActive(e)?"active":"",attrs:{to:e.path},nativeOn:{contextmenu:function(t){t.preventDefault(),i.openMenu(e,t)}}},[i._v("\n      "+i._s(i.generateTitle(e.title))+"\n      "),s("span",{staticClass:"el-icon-close",on:{click:function(t){t.preventDefault(),t.stopPropagation(),i.closeSelectedTag(e)}}})])})],2),i._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:i.visible,expression:"visible"}],staticClass:"contextmenu-box",style:{left:i.left+"px",top:i.top+"px"}},[s("ul",{staticClass:"contextmenu"},[i.hideCloseCurrentMenu?i._e():s("li",{on:{click:function(t){i.closeSelectedTag(i.selectedTag)}}},[i._v("关闭")]),i._v(" "),s("li",{on:{click:i.closeOthersTags}},[i._v("关闭其他")]),i._v(" "),s("li",{on:{click:i.closeAllTags}},[i._v("关闭全部")])]),i._v(" "),s("div",{staticClass:"menu-line"}),i._v(" "),s("ul",{staticClass:"contextmenu contextmenu-list"},[s("router-link",{attrs:{tag:"li",to:"/dashboard"}},[s("i",{class:i.isActive({path:"/dashboard"})?"el-icon-check":""}),i._v("\n        首页\n      ")]),i._v(" "),i._l(Array.from(i.visitedViews),function(t){return s("router-link",{key:t.path,attrs:{tag:"li",to:t.path}},[s("i",{class:i.isActive(t)?"el-icon-check":""}),i._v("\n      "+i._s(i.generateTitle(t.title))+"\n      ")])})],2)])],1)},staticRenderFns:[]};e.a=s},"5uw4":function(t,e){},BumN:function(t,e,i){"use strict";var s={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{ref:"scrollContainer",staticClass:"scroll-container",on:{wheel:function(t){return t.preventDefault(),e.handleScroll(t)}}},[i("div",{ref:"scrollWrapper",staticClass:"scroll-wrapper",style:{left:e.left+"px"}},[e._t("default")],2)])},staticRenderFns:[]};e.a=s},CO0n:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i("UOdx"),n=i("0apj");var a=function(t){i("po0y"),i("aQft")},r=i("VU/8")(s.a,n.a,a,"data-v-2f238dec",null);e.default=r.exports},UOdx:function(t,e,i){"use strict";var s=i("BO1k"),l=i.n(s),n=i("sUix");e.a={components:{ScrollPane:n.a},data:function(){return{visible:!1,top:0,left:0,selectedTag:{},hideCloseCurrentMenu:!1}},computed:{visitedViews:function(){return this.$store.state.tagsView.visitedViews}},watch:{$route:function(){this.addViewTags(),this.moveToCurrentTag()},visible:function(t){t?document.body.addEventListener("click",this.closeMenu):document.body.removeEventListener("click",this.closeMenu)}},mounted:function(){this.addViewTags()},methods:{generateTitle:function(t){return t},generateRoute:function(){return!(!this.$route.name||"首页"===this.$route.name)&&this.$route},isActive:function(t){return t.path===this.$route.path||t.name===this.$route.name},addViewTags:function(){var t=this.generateRoute();if(!t)return!1;this.$store.dispatch("addVisitedViews",t)},moveToCurrentTag:function(){var r=this,o=this.$refs.tag;this.$nextTick(function(){var t=!0,e=!1,i=void 0;try{for(var s,n=l()(o);!(t=(s=n.next()).done);t=!0){var a=s.value;if(a.to===r.$route.path){r.$refs.scrollPane.moveToTarget(a.$el);break}}}catch(t){e=!0,i=t}finally{try{!t&&n.return&&n.return()}finally{if(e)throw i}}})},closeSelectedTag:function(i){var s=this;this.$store.dispatch("delVisitedViews",i).then(function(t){if(s.isActive(i)){var e=t.slice(-1)[0];e?s.$router.push(e.path):s.$router.push("/")}})},closeOthersTags:function(){var t=this;this.$router.push(this.selectedTag.path),this.$store.dispatch("delOthersViews",this.selectedTag).then(function(){t.moveToCurrentTag()})},closeAllTags:function(){this.$store.dispatch("delAllViews"),this.$router.push("/")},openMenu:function(t,e,i){this.visible=!0,this.selectedTag=t,this.left=e.clientX,this.top=e.clientY,this.hideCloseCurrentMenu=!!i},closeMenu:function(){this.visible=!1}}}},Z451:function(t,e,i){"use strict";e.a={name:"scrollPane",data:function(){return{left:0}},methods:{handleScroll:function(t){var e=t.wheelDelta||3*-t.deltaY,i=this.$refs.scrollContainer.offsetWidth,s=this.$refs.scrollWrapper.offsetWidth;0<e?this.left=Math.min(0,this.left+e):i-15<s?this.left<-(s-i+15)?this.left=this.left:this.left=Math.max(this.left+e,i-s-15):this.left=0},moveToTarget:function(t){var e=this.$refs.scrollContainer.offsetWidth,i=t.offsetLeft,s=t.offsetWidth;i<-this.left?this.left=15-i:i+15>-this.left&&i+s<-this.left+e-15||(this.left=-(i-(e-s)+15))}}}},aQft:function(t,e){},po0y:function(t,e){},sUix:function(t,e,i){"use strict";var s=i("Z451"),n=i("BumN");var a=function(t){i("5uw4")},r=i("VU/8")(s.a,n.a,a,"data-v-db83414c",null);e.a=r.exports}});