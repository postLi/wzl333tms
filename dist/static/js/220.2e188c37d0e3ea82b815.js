webpackJsonp([220],{"/n+A":function(e,t,n){"use strict";var i={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"popRight-center",class:{showPopRight:e.isShow},style:{zIndex:e.zIndex}},[n("div",{staticClass:"popRight-header"},[e._t("title",[e._v(e._s(e.title))]),e._v(" "),n("i",{staticClass:"el-icon-close",attrs:{title:"关闭"},on:{click:e.close}})],2),e._v(" "),e.shouldRender?n("div",{staticClass:"popRight-content"},[e._t("content",[e._v("内容")])],2):e._e(),e._v(" "),n("div",{staticClass:"popRight-footer"},[e._t("footer",[e._v("底部")])],2)])},staticRenderFns:[]};t.a=i},"3EPC":function(e,t,n){"use strict";var i=n("qYK6"),s=n("/n+A");var o=function(e){n("f3wf")},r=n("VU/8")(i.a,s.a,o,null,null);t.a=r.exports},BamZ:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n("RB0d"),s=n("uwB8");var o=function(e){n("ceGR")},r=n("VU/8")(i.a,s.a,o,null,null);t.default=r.exports},RB0d:function(e,t,n){"use strict";n("E4LH");var i=n("3EPC"),s=n("pAQG"),o=n("OYTF");t.a={components:{PopFrame:i.a,querySelect:s.a},props:{popVisible:{type:Boolean,default:!1},isDepMain:{type:Boolean,default:!1},dotInfo:{type:Object,default:!1},createrId:[Number,String]},data:function(){var i=this,e=function(e,t,n){""!==i.formInline.shipSn||""!==i.formInline.shipGoodsSn?n():n(new Error("运单号或货号必填其中一项"))};return{selected:[],rules:{shipSn:[{validator:e}],shipGoodsSn:[{validator:e}]},formLabelWidth:"90",usersArr:[],checked1:!0,popTitle:"关联运单",loading:!1,formInline:{shipSn:"",shipGoodsSn:"",pickupFee:""},getMentInfo:{pickupBatchNumber:"",truckFee:"",truckIdNumber:"",driverName:""},sendId:{pickupId:"",shipId:"",pickupFee:""}}},computed:{isShow:{get:function(){return this.popVisible},set:function(){}}},watch:{dotInfo:function(e){this.infoData(this.dotInfo)},popVisible:function(e){this.fetchData()}},mounted:function(){this.popVisible&&(this.sendId.pickupId=this.dotInfo.id)},methods:{infoData:function(e){this.getMentInfo.pickupBatchNumber=e.pickupBatchNumber,this.getMentInfo.driverName=e.driverName,this.getMentInfo.truckIdNumber=e.truckIdNumber,this.getMentInfo.getMentInfo=e.getMentInfo,this.getMentInfo.truckFee=e.truckFee,this.sendId.pickupId=e.id},search:function(e){return!e.pickupBatchNumber},fetchFindByShipSnOrGoodSn:function(){var t=this;return this.loading=!0,Object(o.d)(this.dotInfo.id).then(function(e){t.usersArr=e,t.loading=!1}).catch(function(e){t.loading=!1,t._handlerCatchMsg(e)})},fetchData:function(){this.fetchFindByShipSnOrGoodSn()},getShipSn:function(e){e&&(this.formInline.shipGoodsSn=e.shipGoodsSn,this.sendId.shipId=e.id)},getShipGoodsSn:function(e){e&&(this.formInline.shipSn=e.shipSn,this.sendId.shipId=e.id)},closeMe:function(e){this.reset(),this.$emit("update:popVisible",!1),"function"==typeof e&&e()},reset:function(){this.formInline={}},setObject:function(e,t){for(var n in e)e[n]=t?t[n]:"";return e},submitForm:function(e){var s=this;this.$refs[e].validate(function(e){if(!e)return!1;s.loading=!0,s.sendId.pickupFee=s.formInline.pickupFee;var t=s.sendId.pickupFee||"";console.log(s.formInline,"this.formInline");var n=""===s.formInline.shipSn?""===s.formInline.shipSn:void 0===s.formInline.shipSn,i=""===s.formInline.shipGoodsSn?""===s.formInline.shipGoodsSn:void 0===s.formInline.shipGoodsSn;if(n&&i)return s.$message.error("运单号或货号必填其中一项"),s.loading=!1;Object(o.f)(s.sendId.pickupId,s.sendId.shipId,t).then(function(e){s.loading=!1,s.$message({message:"添加成功~",type:"success"}),delete s.sendId.shipId,s.fetchData(),s.reset(),s.$emit("success")}).catch(function(e){s._handlerCatchMsg(e),s.loading=!1})})},removeList:function(){var t=this;return this.selected.length?1<this.selected.length?(this.$message({message:"每次只能选择单条数据~",type:"warning"}),!1):void Object(o.g)(this.selected[0].id,this.selected[0].shipId).then(function(e){t.loading=!1,t.$message.success("保存成功"),t.fetchData(),t.$emit("success")}).catch(function(e){t._handlerCatchMsg(e),t.loading=!1}):(this.$message({message:"请选择要操作的列表项~",type:"warning"}),!1)},clickDetails:function(e,t,n){this.$refs.multipleTable.toggleRowSelection(e)},getSelection:function(e){this.selected=e}}}},ceGR:function(e,t){},f3wf:function(e,t){},qYK6:function(e,t,n){"use strict";t.a={props:{width:{type:String,default:"400"},title:{type:String,default:"标题"},isShow:{type:Boolean,default:!1}},watch:{isShow:{handler:function(){this.isShow&&(this.shouldRender=!0)},immediate:!0}},data:function(){return{zIndex:(window.tmsPopZindex?window.tmsPopZindex+=1:window.tmsPopZindex=1e3,window.tmsPopZindex),shouldRender:!1}},methods:{close:function(){this.$emit("close")}}}},uwB8:function(e,t,n){"use strict";var i={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"pick-maintain"},[n("PopFrame",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"pickpopDepMain",attrs:{title:t.popTitle,isShow:t.popVisible},on:{close:t.closeMe}},[n("template",{staticClass:"pickRelationPop-content",slot:"content"},[n("div",{staticClass:"depmain-div"},[n("el-form",{ref:"formName",staticClass:"demo-form-inline",attrs:{inline:!0,model:t.getMentInfo,"label-width":t.formLabelWidth}},[n("el-form-item",{attrs:{label:"提货批次"}},[n("el-input",{attrs:{disabled:""},model:{value:t.getMentInfo.pickupBatchNumber,callback:function(e){t.$set(t.getMentInfo,"pickupBatchNumber",e)},expression:"getMentInfo.pickupBatchNumber"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"派车费用"}},[n("el-input",{attrs:{disabled:""},model:{value:t.getMentInfo.truckFee,callback:function(e){t.$set(t.getMentInfo,"truckFee",e)},expression:"getMentInfo.truckFee"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"车牌号码"}},[n("el-input",{attrs:{disabled:""},model:{value:t.getMentInfo.truckIdNumber,callback:function(e){t.$set(t.getMentInfo,"truckIdNumber",e)},expression:"getMentInfo.truckIdNumber"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"司机姓名"}},[n("el-input",{attrs:{disabled:""},model:{value:t.getMentInfo.driverName,callback:function(e){t.$set(t.getMentInfo,"driverName",e)},expression:"getMentInfo.driverName"}})],1)],1),t._v(" "),n("el-table",{ref:"multipleTable",staticStyle:{width:"560px"},attrs:{data:t.usersArr,stripe:"",border:"",height:"145","tooltip-effect":"dark","default-sort":{prop:"id",order:"ascending"}},on:{"row-click":t.clickDetails,"selection-change":t.getSelection}},[n("el-table-column",{attrs:{fixed:"",sortable:"",type:"selection",width:"78"}}),t._v(" "),n("el-table-column",{attrs:{fixed:"",sortable:"",prop:"shipSn",label:"运单号",width:"160"}}),t._v(" "),n("el-table-column",{attrs:{fixed:"",sortable:"",prop:"shipGoodsSn",width:"160",label:"货号"}}),t._v(" "),n("el-table-column",{attrs:{fixed:"",sortable:"",prop:"pickupFee",width:"160",label:"实际提货费"}})],1),t._v(" "),n("el-form",{staticClass:"order_bottom",attrs:{inline:!0,"label-width":t.formLabelWidth,rules:t.rules,model:t.getMentInfo}},[n("el-form-item",{attrs:{label:"运单号",prop:"shipSn"}},[n("querySelect",{attrs:{searchFn:t.search,valuekey:"shipSn",param:{shipFromOrgid:t.otherinfo.orgid},search:"shipSn",type:"order"},on:{change:t.getShipSn},model:{value:t.formInline.shipSn,callback:function(e){t.$set(t.formInline,"shipSn",e)},expression:"formInline.shipSn"}})],1),t._v(" "),n("el-form-item",{staticClass:"ship_class",attrs:{label:"货号",prop:"shipGoodsSn"}},[n("querySelect",{attrs:{searchFn:t.search,param:{shipFromOrgid:t.otherinfo.orgid},valuekey:"shipGoodsSn",search:"shipGoodsSn",type:"order"},on:{change:t.getShipGoodsSn},model:{value:t.formInline.shipGoodsSn,callback:function(e){t.$set(t.formInline,"shipGoodsSn",e)},expression:"formInline.shipGoodsSn"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"本单提货费"}},[n("el-input",{directives:[{name:"numberOnly",rawName:"v-numberOnly"}],model:{value:t.formInline.pickupFee,callback:function(e){t.$set(t.formInline,"pickupFee",e)},expression:"formInline.pickupFee"}})],1)],1)],1)]),t._v(" "),n("div",{staticClass:"dialog-footer-frame",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{type:"primary"},on:{click:function(e){t.submitForm("formName")}}},[t._v("加入列表")]),t._v(" "),n("el-button",{on:{click:t.removeList}},[t._v("从列表移除")])],1)],2)],1)},staticRenderFns:[]};t.a=i}});