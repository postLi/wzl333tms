webpackJsonp([271],{3805:function(e,r,t){"use strict";var i={render:function(){var r=this,e=r.$createElement,t=r._self._c||e;return t("pop-right",{directives:[{name:"loading",rawName:"v-loading",value:r.loading,expression:"loading"}],staticClass:"addDriverPop",attrs:{title:r.popTitle,isShow:r.popVisible},on:{close:r.closeMe}},[t("template",{staticClass:"addDriverPop-content",slot:"content"},[t("el-form",{ref:"ruleForm",attrs:{model:r.form,rules:r.rules,"label-width":r.formLabelWidth,inline:!0,"label-position":"right",size:"mini"}},[t("el-form-item",{attrs:{label:"司机姓名",prop:"driverName"}},[t("el-input",{attrs:{maxlength:10,"auto-complete":"off"},model:{value:r.form.driverName,callback:function(e){r.$set(r.form,"driverName",e)},expression:"form.driverName"}})],1),r._v(" "),t("el-form-item",{attrs:{label:"手机号码",prop:"driverMobile"}},[t("el-input",{directives:[{name:"numberOnly",rawName:"v-numberOnly"}],attrs:{maxlength:11,"auto-complete":"off"},model:{value:r.form.driverMobile,callback:function(e){r.$set(r.form,"driverMobile",e)},expression:"form.driverMobile"}})],1),r._v(" "),t("el-form-item",{attrs:{label:"归属网点",prop:"orgid"}},[t("SelectTree",{attrs:{orgid:r.otherinfo.orgid},model:{value:r.form.orgid,callback:function(e){r.$set(r.form,"orgid",e)},expression:"form.orgid"}})],1),r._v(" "),t("el-form-item",{attrs:{label:"身份证号",prop:"driverCardid"}},[t("el-input",{attrs:{maxlength:18,"auto-complete":"off"},model:{value:r.form.driverCardid,callback:function(e){r.$set(r.form,"driverCardid",e)},expression:"form.driverCardid"}})],1),r._v(" "),t("el-form-item",{attrs:{label:"驾驶证类型",prop:"licenseType"}},[t("SelectType",{attrs:{type:"driving_type",placeholder:"驾驶证类型"},model:{value:r.form.licenseType,callback:function(e){r.$set(r.form,"licenseType",e)},expression:"form.licenseType"}})],1),r._v(" "),t("el-form-item",{attrs:{label:"驾驶证有效期",prop:"validityDate"}},[t("el-date-picker",{attrs:{align:"right",type:"date","picker-options":r.pickOption2,placeholder:"选择日期","value-format":"timestamp"},model:{value:r.form.validityDate,callback:function(e){r.$set(r.form,"validityDate",e)},expression:"form.validityDate"}})],1),r._v(" "),t("el-form-item",{attrs:{label:"银行卡号",prop:"bankCardNumber"}},[t("el-input",{attrs:{maxlength:20,"auto-complete":"off"},model:{value:r.form.bankCardNumber,callback:function(e){r.$set(r.form,"bankCardNumber",e)},expression:"form.bankCardNumber"}})],1),r._v(" "),t("el-form-item",{attrs:{label:"银行名称",prop:"bankName"}},[t("el-input",{attrs:{maxlength:20,"auto-complete":"off"},model:{value:r.form.bankName,callback:function(e){r.$set(r.form,"bankName",e)},expression:"form.bankName"}})],1),r._v(" "),t("el-form-item",{attrs:{label:"开户行",prop:"openBank"}},[t("el-input",{attrs:{maxlength:20,"auto-complete":"off"},model:{value:r.form.openBank,callback:function(e){r.$set(r.form,"openBank",e)},expression:"form.openBank"}})],1),r._v(" "),t("el-form-item",{attrs:{label:"司机地址",prop:"driverAddress"}},[t("el-input",{attrs:{maxlength:50,"auto-complete":"off"},model:{value:r.form.driverAddress,callback:function(e){r.$set(r.form,"driverAddress",e)},expression:"form.driverAddress"}})],1),r._v(" "),t("el-form-item",{staticClass:"driverRemarks",attrs:{label:"备注",prop:"driverRemarks"}},[t("el-input",{attrs:{type:"textarea",maxlength:300},model:{value:r.form.driverRemarks,callback:function(e){r.$set(r.form,"driverRemarks",e)},expression:"form.driverRemarks"}})],1),r._v(" "),t("el-form-item",{staticClass:"clearfix uploadcard"},[t("div",{staticClass:"idcard"},[t("upload",{attrs:{title:"身份证"},model:{value:r.form.idcardPicture,callback:function(e){r.$set(r.form,"idcardPicture",e)},expression:"form.idcardPicture"}})],1),r._v(" "),t("div",{staticClass:"drviercard"},[t("upload",{attrs:{title:"驾驶证"},model:{value:r.form.drivingPicture,callback:function(e){r.$set(r.form,"drivingPicture",e)},expression:"form.drivingPicture"}})],1),r._v(" "),t("div",{staticClass:"certcard"},[t("upload",{attrs:{title:"从业资格证"},model:{value:r.form.certification,callback:function(e){r.$set(r.form,"certification",e)},expression:"form.certification"}})],1)])],1)],1),r._v(" "),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{type:"primary"},on:{click:function(e){r.submitForm("ruleForm")}}},[r._v("保 存")]),r._v(" "),t("el-button",{on:{click:r.closeMe}},[r._v("取 消")])],1)],2)},staticRenderFns:[]};r.a=i},"7KhR":function(e,r,t){"use strict";var i=t("woOf"),o=t.n(i),a=t("Dd8w"),l=t.n(a),s=t("E4LH"),n=t("9ani"),d=t("P5Di"),m=t("QbVN"),f=t("o9X6"),c=t("9UCZ"),p=t("NYxO");r.a={components:{popRight:d.a,Upload:m.a,SelectTree:f.a,SelectType:c.a},props:{popVisible:{type:Boolean,default:!1},orgid:{required:!0},isModifyDriver:{type:Boolean,default:!1},infoDriver:{type:Object,default:function(){}},licenseTypes:{type:Array,default:function(){return[]}}},computed:l()({},Object(p.mapGetters)(["otherinfo"])),data:function(){return{form:{bankCardNumber:"",bankName:"",certification:"",driverAddress:"",driverCardid:"",driverMobile:"",driverName:"",driverRemarks:"",drivingPicture:"",idcardPicture:"",licenseType:"",licenseTypeName:"",openBank:"",validityDate:"",orgid:0},formLabelWidth:"110px",tooltip:!1,rules:{driverName:[{required:!0,message:"请输入司机名称",trigger:"blur"}],orgid:[{required:!0,message:"请选择所属机构",trigger:"blur"}],driverMobile:[{required:!0,message:"请输入手机号码",trigger:"blur",pattern:s.a.MOBILE}]},popTitle:"新增司机",orgArr:[],rolesArr:[],departmentArr:[],loading:!1,roles:[],departments:[],groups:[],inited:!1,pickOption2:{firstDayOfWeek:1,disabledDate:function(e){return e.getTime()<Date.now()}}}},mounted:function(){this.form.orgid=this.orgid,this.inited||(this.inited=!0,this.initInfo())},watch:{popVisible:function(e,r){this.form.orgid=this.orgid,this.inited||(this.inited=!0,this.initInfo())},orgid:function(e){this.form.orgid=e},infoDriver:function(){if(this.isModifyDriver){this.popTitle="修改司机";var e=o()({},this.infoDriver);for(var r in this.form)this.form[r]=e[r];this.form.id=e.id}else{for(var t in this.popTitle="新增司机",this.form)this.form[t]="";delete this.form.id,this.form.orgid=this.orgid}}},methods:{initInfo:function(){this.loading=!1},getOrgid:function(e){this.form.orgid=e},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;t.loading=!0;var r=o()({},t.form);r.fixPhone=t.fixPhone;(t.isModifyDriver?Object(n.e)(r):Object(n.d)(r)).then(function(e){t.loading=!1,t.$message.success("保存成功"),t.closeMe(),t.$emit("success")}).catch(function(e){t._handlerCatchMsg(e),t.loading=!1})})},reset:function(){this.$refs.ruleForm.resetFields()},closeMe:function(e){this.reset(),this.$emit("update:popVisible",!1),"function"==typeof e&&e()}}}},"EF+7":function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var i=t("7KhR"),o=t("3805");var a=function(e){t("JxFO")},l=t("VU/8")(i.a,o.a,a,"data-v-77e37b06",null);r.default=l.exports},JxFO:function(e,r){}});