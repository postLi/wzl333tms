webpackJsonp([3,236,314,321,323,324,325,326,327],{"//Ie":function(e,t,o){"use strict";var r=o("woOf"),i=o.n(r),a=o("Dd8w"),s=o.n(a),n=o("E4LH"),l=o("Vi15"),c=o("P5Di"),m=o("QbVN"),d=o("o9X6"),f=o("NYxO");t.a={components:{popRight:c.a,Upload:m.a,SelectTree:d.a},props:{popVisible:{type:Boolean,default:!1},orgid:{required:!0},isModify:{type:Boolean,default:!1},info:{type:Object,default:function(){}},issender:{type:Boolean,dafault:!1}},computed:s()({},Object(f.mapGetters)(["otherinfo"]),{fixPhone:{get:function(){return this.phoneshort+"-"+this.phonelong},set:function(e){var t=e?e.split("-"):"";t?(this.phoneshort=t[1]?t[0]:"",this.phonelong=t[1]?t[1]:t[0]):(this.phoneshort="",this.phonelong="")}},customphoneisok:function(){}}),data:function(){return{phoneshort:"",phonelong:"",form:{bankCardNumber:"",bankName:"",companyName:"",companyType:2,customerMobile:"",customerName:"",customerType:this.issender?1:2,customerUnit:"",detailedAddress:"",fixPhone:"",idcardPositive:"",idcardVerso:"",idcard:"",legalPersonname:"",licensePicture:"",openBank:"",orgid:0,vipNum:""},formLabelWidth:"90px",tooltip:!1,rules:{companyName:[],orgid:[{required:!0,message:"请选择所属机构"}],customerMobile:[{required:!0,message:"请输入手机号码",trigger:"change"}],customerName:[{required:!0,message:"请输入联系人"},{max:30,message:"不能超过30个字符"}],vipNum:[{pattern:n.a.ONLY_NUMBER_AND_LETTER,trigger:"blur",message:"客户的VIP号只能输入字母和阿拉伯数字"}],idcard:[{pattern:n.a.ONLY_NUMBER_AND_LETTER,trigger:"blur",message:"身份证号码只能输入字母和数字"}]},popTitle:"新增发货人",orgArr:[],rolesArr:[],departmentArr:[],loading:!1,roles:[],departments:[],groups:[],inited:!1,isSaveAndAdd:!0}},mounted:function(){this.form.orgid=this.orgid,this.inited||(this.inited=!0,this.initInfo()),console.log(this.issender),console.log(this.popTitle)},watch:{"form.customerMobile":function(e){this.isSaveAndAdd&&(console.log("33333"),this.$refs.ruleForm.validateField("customerMobile"))},popVisible:function(e,t){this.inited||(this.inited=!0,this.initInfo()),e&&this.setTitle(),console.log(this.popTitle)},orgid:function(e){this.form.orgid=e},info:function(){if(this.isModify){this.popTitle="修改"+(this.issender?"发":"收")+"货人";var e=i()({},this.info);for(var t in this.form)this.form[t]=e[t];this.form.customerId=e.customerId,console.log("this.fixphone",this.fixPhone,this.form.fixPhone,e),this.fixPhone=this.form.fixPhone}else{for(var o in console.log(this.issender),this.popTitle="新增"+(this.issender?"发":"收")+"货人",this.form)this.form[o]="";delete this.form.customerId,this.form.companyType=2,this.form.customerType=this.issender?1:2,this.form.orgid=this.orgid,this.fixPhone=""}}},methods:{setTitle:function(){if(this.isModify){this.popTitle="修改"+(this.issender?"发":"收")+"货人";var e=i()({},this.info);for(var t in this.form)this.form[t]=e[t];this.form.customerId=e.customerId,console.log("this.fixphone",this.fixPhone,this.form.fixPhone,e),this.fixPhone=this.form.fixPhone}else{for(var o in console.log(this.issender),this.popTitle="新增"+(this.issender?"发":"收")+"货人",this.form)this.form[o]="";delete this.form.customerId,this.form.companyType=2,this.form.customerType=this.issender?1:2,this.form.orgid=this.orgid,this.fixPhone=""}},initInfo:function(){this.loading=!1},getOrgid:function(e){this.form.orgid=e},submitForm:function(e,o){var r=this;this.$refs[e].validate(function(e){if(!e)return!1;r.loading=!0;var t=i()({},r.form);t.fixPhone=r.fixPhone;(r.isModify?Object(l.e)(t):Object(l.d)(t)).then(function(e){r.loading=!1,r.$message.success("保存成功"),o||r.closeMe(),r.$emit("success"),r.reset()}).catch(function(e){r._handlerCatchMsg(e),r.loading=!1})})},reset:function(){var e=this;this.isSaveAndAdd=!1;var t=this.form.orgid;this.$refs.ruleForm.resetFields(),this.form.licensePicture="",this.form.idcardPositive="",this.form.idcardVerso="",this.fixPhone="",this.form.fixPhone="",this.form.customerMobile="",this.form.orgid=t,console.log(this.form,"///////////////"),this.$nextTick(function(){e.isSaveAndAdd=!0})},closeMe:function(e){this.reset(),this.$emit("update:popVisible",!1),"function"==typeof e&&e()}}}},"/v6R":function(e,t,o){"use strict";var r={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("pop-right",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"addTruckPop",attrs:{title:t.popTitle,isShow:t.popVisible},on:{close:t.closeMe}},[o("template",{staticClass:"addTruckPop-content",slot:"content"},[o("el-form",{ref:"ruleForm",attrs:{model:t.form,rules:t.rules,"label-width":t.formLabelWidth,inline:!0,"label-position":"right",size:"mini"}},[o("el-form-item",{attrs:{label:"车牌号码",prop:"truckIdNumber"}},[o("el-input",{attrs:{maxlength:8,"auto-complete":"off"},model:{value:t.form.truckIdNumber,callback:function(e){t.$set(t.form,"truckIdNumber",e)},expression:"form.truckIdNumber"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"车辆来源",prop:"truckSource"}},[o("SelectType",{attrs:{type:"truck_source",placeholder:"请选择"},model:{value:t.form.truckSource,callback:function(e){t.$set(t.form,"truckSource",e)},expression:"form.truckSource"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"车型",prop:"truckType"}},[o("SelectType",{attrs:{type:"truck_type",placeholder:"请选择"},model:{value:t.form.truckType,callback:function(e){t.$set(t.form,"truckType",e)},expression:"form.truckType"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"可载重",prop:"truckLoad"}},[o("el-input",{directives:[{name:"numberOnly",rawName:"v-numberOnly"}],attrs:{maxlength:6,"auto-complete":"off"},model:{value:t.form.truckLoad,callback:function(e){t.$set(t.form,"truckLoad",t._n(e))},expression:"form.truckLoad"}},[o("template",{slot:"append"},[t._v("千克")])],2)],1),t._v(" "),o("el-form-item",{attrs:{label:"可载体积",prop:"truckVolume"}},[o("el-input",{directives:[{name:"number-only",rawName:"v-number-only:point",arg:"point"}],attrs:{maxlength:18,"auto-complete":"off"},model:{value:t.form.truckVolume,callback:function(e){t.$set(t.form,"truckVolume",t._n(e))},expression:"form.truckVolume"}},[o("template",{slot:"append"},[t._v("方")])],2)],1),t._v(" "),o("el-form-item",{attrs:{label:"车长",prop:"truckLength"}},[o("el-input",{directives:[{name:"number-only",rawName:"v-number-only:point",arg:"point"}],attrs:{maxlength:18,"auto-complete":"off"},model:{value:t.form.truckLength,callback:function(e){t.$set(t.form,"truckLength",t._n(e))},expression:"form.truckLength"}},[o("template",{slot:"append"},[t._v("米")])],2)],1),t._v(" "),o("el-form-item",{attrs:{label:"车宽",prop:"truckWidth"}},[o("el-input",{directives:[{name:"number-only",rawName:"v-number-only:point",arg:"point"}],attrs:{maxlength:20,"auto-complete":"off"},model:{value:t.form.truckWidth,callback:function(e){t.$set(t.form,"truckWidth",t._n(e))},expression:"form.truckWidth"}},[o("template",{slot:"append"},[t._v("米")])],2)],1),t._v(" "),o("el-form-item",{attrs:{label:"车高",prop:"truckHeight"}},[o("el-input",{directives:[{name:"number-only",rawName:"v-number-only:point",arg:"point"}],attrs:{maxlength:20,"auto-complete":"off"},model:{value:t.form.truckHeight,callback:function(e){t.$set(t.form,"truckHeight",t._n(e))},expression:"form.truckHeight"}},[o("template",{slot:"append"},[t._v("米")])],2)],1),t._v(" "),o("el-form-item",{attrs:{label:"归属网点",prop:"orgid"}},[o("SelectTree",{attrs:{orgid:t.otherinfo.orgid},on:{change:t.getTreeOrgid},model:{value:t.form.orgid,callback:function(e){t.$set(t.form,"orgid",e)},expression:"form.orgid"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"车辆品牌",prop:"truckBrand"}},[o("el-input",{attrs:{maxlength:20,"auto-complete":"off"},model:{value:t.form.truckBrand,callback:function(e){t.$set(t.form,"truckBrand",e)},expression:"form.truckBrand"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"车辆注册时间",prop:"truckRegisterDate"}},[o("el-date-picker",{attrs:{align:"right",type:"date","picker-options":t.pickOption,placeholder:"选择日期","value-format":"timestamp"},model:{value:t.form.truckRegisterDate,callback:function(e){t.$set(t.form,"truckRegisterDate",e)},expression:"form.truckRegisterDate"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"车辆报废时间",prop:"truckScrapDate"}},[o("el-date-picker",{attrs:{align:"right",type:"date","picker-options":t.pickOption2,placeholder:"选择日期","value-format":"timestamp"},model:{value:t.form.truckScrapDate,callback:function(e){t.$set(t.form,"truckScrapDate",e)},expression:"form.truckScrapDate"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"车架号",prop:"frameNum"}},[o("el-input",{attrs:{maxlength:30,"auto-complete":"off"},model:{value:t.form.frameNum,callback:function(e){t.$set(t.form,"frameNum",e)},expression:"form.frameNum"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"发动机号",prop:"engineNum"}},[o("el-input",{attrs:{maxlength:30,"auto-complete":"off"},model:{value:t.form.engineNum,callback:function(e){t.$set(t.form,"engineNum",e)},expression:"form.engineNum"}})],1),t._v(" "),o("el-form-item",{staticClass:"truckRemarks",attrs:{label:"备注",prop:"truckRemarks"}},[o("el-input",{attrs:{type:"textarea",maxlength:300},model:{value:t.form.truckRemarks,callback:function(e){t.$set(t.form,"truckRemarks",e)},expression:"form.truckRemarks"}})],1),t._v(" "),o("div",{staticClass:"hr"}),t._v(" "),o("el-form-item",{attrs:{label:"车辆单位",prop:"truckUnit"}},[o("el-input",{attrs:{maxlength:20,"auto-complete":"off"},model:{value:t.form.truckUnit,callback:function(e){t.$set(t.form,"truckUnit",e)},expression:"form.truckUnit"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"单位电话",prop:"truckUnitMobile"}},[o("el-input",{directives:[{name:"numberOnly",rawName:"v-numberOnly"}],attrs:{maxlength:20,"auto-complete":"off"},model:{value:t.form.truckUnitMobile,callback:function(e){t.$set(t.form,"truckUnitMobile",e)},expression:"form.truckUnitMobile"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"司机",prop:"driverId"}},[o("el-select",{attrs:{filterable:"",placeholder:"请选择司机",clearable:""},on:{change:t.getDriverPhone},model:{value:t.form.driverId,callback:function(e){t.$set(t.form,"driverId",e)},expression:"form.driverId"}},t._l(t.DriverList,function(e){return o("el-option",{key:e.id,attrs:{label:e.driverName,value:e.id}})}))],1),t._v(" "),o("el-form-item",{attrs:{label:"司机电话",prop:"dirverMobile"}},[o("el-input",{directives:[{name:"numberOnly",rawName:"v-numberOnly"}],attrs:{maxlength:20,"auto-complete":"off",disabled:""},model:{value:t.form.dirverMobile,callback:function(e){t.$set(t.form,"dirverMobile",e)},expression:"form.dirverMobile"}})],1),t._v(" "),o("div",{staticClass:"hr"}),t._v(" "),o("el-form-item",{staticClass:"clearfix uploadcard"},[o("div",{staticClass:"idcard"},[o("upload",{attrs:{title:"行驶证"},model:{value:t.form.drivingLicense,callback:function(e){t.$set(t.form,"drivingLicense",e)},expression:"form.drivingLicense"}})],1),t._v(" "),o("div",{staticClass:"drviercard"},[o("upload",{attrs:{title:"营运执照"},model:{value:t.form.operatingLicense,callback:function(e){t.$set(t.form,"operatingLicense",e)},expression:"form.operatingLicense"}})],1),t._v(" "),o("div",{staticClass:"certcard"},[o("upload",{attrs:{title:"车辆照片"},model:{value:t.form.vehiclePic,callback:function(e){t.$set(t.form,"vehiclePic",e)},expression:"form.vehiclePic"}})],1)])],1)],1),t._v(" "),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t.isModify?t._e():o("el-button",{attrs:{type:"primary"},on:{click:function(e){t.submitForm("ruleForm",!0)}}},[t._v("保存并添加")]),t._v(" "),o("el-button",{attrs:{type:"primary"},on:{click:function(e){t.submitForm("ruleForm")}}},[t._v("保 存")]),t._v(" "),o("el-button",{on:{click:t.closeMe}},[t._v("取 消")])],1)],2)},staticRenderFns:[]};t.a=r},"0Qo4":function(e,t){},"1IKb":function(e,t,o){"use strict";var r=o("Dd8w"),i=o.n(r),a=o("t5DY"),s=o("O85W"),n=o("ttFD"),l=o("xbwg"),c=o("DAQk"),m=o("ftoq"),d=o("FKPH"),f=o("5F+j"),u=o("bZax"),p=o("NYxO");t.a={components:{progressbar:s.default,NewOrg:n.default,Newrole:l.default,Newuser:c.default,AddCustomer:m.default,Newdriver:d.default,Newtruck:f.default,Newcarrier:u.default},data:function(){return{info:{},ischecked:!1,showAni:!1,cancelAni:!1,dataset:[],type:1,showani:!1,viewKey:0,addDoTotShow:!1,addDoTotShow1:!1,addDoTotShow2:!1,addDoTotShow3:!1,addDoTotShow4:!1,addDoTotShow5:!1,addDoTotShow6:!1,addDoTotShow7:!1,addDoTotVisible:!1,addDoTotVisible1:!1,addDoTotVisible2:!1,addDoTotVisible3:!1,addDoTotVisible4:!1,addDoTotVisible5:!1,addDoTotVisible6:!1,addDoTotVisible7:!1,addDoTotVisible8:!1,dialogVisible:!1,dialogVisiblePerson:!1,popVisible:!1,contTitle:[],flog:!1,disabled:!1,countList:[{value:0,label:"orgCount",title:"网点管理",message:"网点"+this.valueCount+"个",message1:"你还没有添加网点，请点击右边添加按钮",message2:"需要增加点击右边增加按钮",button1:"增加",button2:"添加",code:"ORGTREELIST_ADD"},{value:0,label:"userCount",title:"员工管理",message:"已经有"+this.valueCount+"位员工",message1:"你还没有添加员工，请点击右边添加按钮",message2:"需要增加点击右边增加按钮",button1:"增加",button2:"添加",code:"ORGTREELIST_ADD"},{value:0,label:"senderCustomerCount",title:"发货客户",message:"已经有"+this.valueCount+"位发货客户",message1:"你还没有添加发货客户，请点击右边添加按钮",message2:"需要增加点击右边增加按钮",button1:"增加",button2:"添加",code:"SENDER_ADD"},{value:0,label:"receiverCustomerCount",title:"收货客户",message:"已经有"+this.valueCount+"位收货客户",message1:"你还没有添加收货客户，请点击右边添加按钮",message2:"需要增加点击右边增加按钮",button1:"增加",button2:"添加",code:"REVER_ADD"},{value:0,label:"driverCount",title:"司机管理",message:"已经有"+this.valueCount+"位司机",message1:"你还没有添加司机，请点击右边添加按钮",message2:"需要增加点击右边增加按钮",button1:"增加",button2:"添加",code:"DRIVER_ADD"},{value:0,label:"truckCount",title:"车辆管理",message:"已经有"+this.valueCount+"部车辆",message1:"你还没有添加车辆，请点击右边添加按钮",message2:"需要增加点击右边增加按钮",button1:"增加",button2:"添加",code:"TUNK_ADD"},{value:0,label:"carrierCount",title:"承运商管理",message:"已经有"+this.valueCount+"个承运商",message1:"你还没有添加承运商，请点击右边添加按钮",message2:"需要增加点击右边增加按钮",button1:"增加",button2:"添加",code:"CARRIER_ADD"},{value:0,label:"settingCount",title:"系统设置",message:"",message2:"打印机连接已连接，需要设置点击右边设置按钮",message1:"打印机连接还没连接，请点击右边设置按钮",button1:"设置",button2:"设置",code:"SETTING"},{value:0,label:"smsTemplateCount",title:"短信设置",message:"已经有"+this.valueCount+"个短信模板",message1:"你还没有维护短信模板，请点击右边设置按钮",message2:"需要设置点击右边设置按钮",button1:"设置",button2:"设置",code:"SMS"},{value:0,label:"fiSubjectCount",title:"财务科目设置",message:"已经有"+this.valueCount+"个财务科目",message1:"你还没有维护财务科目，请点击右边设置按钮",message2:"需要设置点击右边设置按钮",button1:"设置",button2:"设置",code:"INIT_SUBJECT_DEFINE"}],contTitleNull:!1}},watch:{contTitle:function(){0===this.contTitle.length?this.contTitleNull=!1:this.contTitleNull=!0}},computed:i()({},Object(p.mapGetters)(["otherinfo"]),{iscompany:function(){return this.otherinfo.orgid===this.otherinfo.companyId}}),mounted:function(){var r=this;this.isParentOrg(),Object(a.h)().then(function(e){if(e){r.dataset=e;var t=0;for(var o in e)"roleCount"!==o&&0===e[o]&&"smsTemplateCount"!==o&&(r.iscompany?t++:"orgCount"!==o&&t++,console.log("---total",t,o,e[o])),console.log(e[o],o,"数量");r.flog=!(0<t),r.$set(r.dataset,"totals",t)}}).catch(function(e){r._handlerCatchMsg(e)})},methods:{isParentOrg:function(){return console.log("isParentOrg是否是总公司：",this.otherinfo.orgid===this.otherinfo.companyId),this.otherinfo.orgid===this.otherinfo.companyId},fetchData:function(e){"addUser"===e&&this.initSystem(),"addOrg"===e&&this.initSystem(),"addRole"===e&&this.initSystem(),"addReciveCustomer"===e&&this.initSystem(),"addSendCustomer"===e&&this.initSystem(),"addDiver"===e&&this.initSystem(),"addTruck"===e&&this.initSystem(),"addCarrier"===e&&this.initSystem(),"addSetting"===e&&this.initSystem()},closeAddDot:function(e){console.log(e),this.addDoTotVisible=!1,this.addDoTotVisible1=!1,this.addDoTotVisible2=!1,this.addDoTotVisible3=!1,this.addDoTotVisible4=!1,this.addDoTotVisible5=!1,this.addDoTotVisible6=!1,this.addDoTotVisible7=!1,this.addDoTotVisible8=!1,this.dialogVisible=!1,this.dialogVisiblePerson=!1,this.popVisible=!1},doAction:function(e,t){var o=this;if(t&&!this.$_has_permission(t.code))return this.$message.warning("您没有权限，请联系管理员！"),!1;switch(e){case"init":this.initSystem();break;case"check":if(this.cancelAni=!this.cancelAni,this.cancelAni)clearInterval(this.timer);else{var r=0,i=this.countList,a=this.countList.length,s=0,n=this;n.timer=setInterval(function(){o.contTitleNull=!0,r<a?(n.contTitle=i[s++].title,r++):(clearInterval(n.timer),r=0)},150)}break;case"agane":this.type=3,this.ischecked=!1,this.initSystem();break;case"order":this.$router.push({path:"../../operation/order/createOrder"});break;case"orgCount":this.addDriverShow?this.addDoTotVisible=!0:(this.addDoTotShow=!0,setTimeout(function(){o.addDoTotVisible=!0}));break;case"roleCount":this.addDriverShow1?this.addDoTotVisible1=!0:(this.addDoTotShow1=!0,setTimeout(function(){o.addDoTotVisible1=!0}));break;case"userCount":this.addDriverShow2?this.addDoTotVisible2=!0:(this.addDoTotShow2=!0,setTimeout(function(){o.addDoTotVisible2=!0}));break;case"senderCustomerCount":this.addDriverShow3?this.addDoTotVisible3=!0:(this.addDoTotShow3=!0,setTimeout(function(){o.addDoTotVisible3=!0}));break;case"receiverCustomerCount":this.addDriverShow4?this.addDoTotVisible4=!0:(this.addDoTotShow4=!0,setTimeout(function(){o.addDoTotVisible4=!0}));break;case"driverCount":this.addDriverShow5?this.addDoTotVisible5=!0:(this.addDoTotShow5=!0,setTimeout(function(){o.addDoTotVisible5=!0}));break;case"truckCount":this.addDriverShow6?this.addDoTotVisible6=!0:(this.addDoTotShow6=!0,setTimeout(function(){o.addDoTotVisible6=!0}));break;case"carrierCount":this.addDriverShow7?this.addDoTotVisible7=!0:(this.addDoTotShow7=!0,setTimeout(function(){o.addDoTotVisible7=!0}));break;case"settingCount":this.$router.push({path:"../../company/systemSetup"});break;case"smsTemplateCount":this.$router.push({path:"../../company/smsManage/customized"});break;case"fiSubjectCount":this.$router.push({path:"../../finance/financeInfo/subjectInfo"})}},changeTitle:function(e){console.log(e+"uuuuu"),this.initSystem()},initSystem:function(){var c=this;this.viewKey=(new Date).getTime(),this.type=2,this.dataset={},this.countList=this.$options.data().countList,Object(a.h)().then(function(e){for(var t in c.showani=!0,c.dataset=e,c.countList)c.countList[t].value=e[c.countList[t].label],c.countList[t].message=c.countList[t].message.replace(/undefined/,String(c.countList[t].value));var o=0;for(var r in e)"roleCount"!==r&&0===e[r]&&o++;"2"===e.isNeededVoucher&&(c.countList=c.countList.filter(function(e,t){return"fiSubjectCount"!==e.label}));var i=0,a=c.countList,s=c.countList.length,n=0,l=c;l.timer=setInterval(function(){i<s?(l.contTitle=a[n++].title,i++):(clearInterval(l.timer),i=0)},150),c.$set(c.dataset,"totals",o)}).catch(function(e){c._handlerCatchMsg(e)})},checkSystem:function(){this.viewKey=Math.random(),this.type=1}}}},"5CI6":function(e,t,o){"use strict";t.e=function(e){return a.b.post("/api-system/system/role/v1/",e).then(function(e){return e.data?e.data:{}})},t.f=function(e){return a.b.put("/api-system/system/role/v1/",e).then(function(e){return e.data?e.data:{}})},t.a=function(e){return a.b.delete("/api-system/system/role/v1/"+e).then(function(e){return e.data?e.data:{}})},t.b=function(e,t){var o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1,r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:100,i=arguments[4];return a.b.post("/api-system/system/role/v1/findAllInfo",{currentPage:o,pageSize:r,vo:{orgid:e,rolesName:t},searchVo:i}).then(function(e){return e.data||{total:0,list:[]}})},t.d=function(e){return a.b.get("/api-system/system/menu/v1/menuTree/",{params:{role_id:e||0}}).then(function(e){return e.data||[]})},t.c=function(e){return Object(r.j)("menu_type",e)};var a=o("Vo7i"),r=o("t5DY")},"5F+j":function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=o("voDd"),i=o("/v6R");var a=function(e){o("sNUZ")},s=o("VU/8")(r.a,i.a,a,null,null);t.default=s.exports},"8Hxk":function(e,t){},"9l6W":function(e,t,o){"use strict";var r=o("woOf"),a=o.n(r),i=o("Dd8w"),s=o.n(i),n=o("E4LH"),l=o("9ani"),c=o("P5Di"),m=o("QbVN"),d=o("o9X6"),f=o("9UCZ"),u=o("NYxO"),p=o("0xDb");t.a={components:{popRight:c.a,Upload:m.a,SelectTree:d.a,SelectType:f.a},props:{popVisible:{type:Boolean,default:!1},orgid:{required:!0},isModify:{type:Boolean,default:!1},info:{type:Object,default:function(){}},licenseTypes:{type:Array,default:function(){return[]}}},computed:s()({},Object(u.mapGetters)(["otherinfo"])),data:function(){return{searchTime:[],form:{bankCardNumber:"",bankName:"",certification:"",driverAddress:"",driverCardid:"",driverMobile:"",driverName:"",driverRemarks:"",drivingPicture:"",idcardPicture:"",licenseType:"",licenseTypeName:"",openBank:"",validityDate:"",validityStartdate:"",orgid:0},formLabelWidth:"100px",tooltip:!1,rules:{driverName:[{required:!0,message:"请输入司机名称"}],orgid:[{required:!0,message:"请选择所属机构"}],driverMobile:[{required:!0,trigger:"change",validator:function(e,t,o){""!==t&&null!==t&&t&&void 0!==t?n.a.MOBILE.test(t)?o():o(new Error("请输入有效的手机号码")):o(new Error("不能为空"))}}],driverCardid:[{pattern:n.a.ONLY_NUMBER_AND_LETTER,message:"身份证号码只能输入字母和数字"}]},popTitle:"新增司机",orgArr:[],rolesArr:[],departmentArr:[],loading:!1,roles:[],departments:[],groups:[],inited:!1,pickOption2:{firstDayOfWeek:1,disabledDate:function(e){return e.getTime()<Date.now()}}}},mounted:function(){this.form.orgid=this.orgid,this.inited||(this.inited=!0,this.initInfo())},watch:{popVisible:{handler:function(e,t){this.inited||(this.inited=!0,this.initInfo())},immediate:!0},orgid:function(e){this.form.orgid=e},info:{handler:function(e,t){if(this.isModify){this.popTitle="修改司机";var o=a()({},e);for(var r in this.form)this.form[r]=o[r];e.validityStartdate&&this.$set(this.searchTime,0,e.validityStartdate),e.validityDate&&this.$set(this.searchTime,1,e.validityDate),console.log(e.validityStartdate,e.validityDate),this.form.id=o.id}else{for(var i in this.popTitle="新增司机",this.form)this.form[i]="";this.searchTime=this.$options.data().searchTime,delete this.form.id,this.form.orgid=this.orgid}},deep:!0}},methods:{initInfo:function(){this.loading=!1},getOrgid:function(e){this.form.orgid=e},submitForm:function(e,r){var i=this;this.$refs[e].validate(function(e){if(!e)return!1;i.loading=!0;var t=a()({},i.form);t.fixPhone=i.fixPhone,i.searchTime&&i.searchTime[0]&&i.searchTime[1]&&(t.validityStartdate=Object(p.parseTime)(i.searchTime[0],"{y}-{m}-{d} ")+" 00:00:00",t.validityDate=Object(p.parseTime)(i.searchTime[1],"{y}-{m}-{d} ")+" 23:59:59");var o=void 0;console.log(i.isModify),i.isModify?o=Object(l.e)(t):i.isModify||(o=Object(l.d)(t)),o.then(function(e){i.loading=!1,i.$message.success("保存成功"),i.reset(),r||i.closeMe(),i.$emit("success")}).catch(function(e){i._handlerCatchMsg(e),i.loading=!1})})},reset:function(){var e=this.form.orgid;this.$refs.ruleForm.resetFields(),this.form.driverMobile="",this.form.idcardPicture="",this.form.drivingPicture="",this.form.certification="",this.form.orgid=e,this.searchTime=[]},closeMe:function(e){this.$emit("update:popVisible",!1),"function"==typeof e&&e()}}}},ABFs:function(e,t,o){"use strict";var r={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"add-dot"},[o("pop-right",{staticClass:"addEmployeerPop",attrs:{title:t.popTitle,isShow:t.popVisible},on:{close:t.closeMe}},[o("template",{staticClass:"addEmployeerPop-content",slot:"content"},[t.companyId===t.form.id?o("el-form",{key:t.formKey,ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:t.form,rules:t.rules,inline:!0,"label-position":"right",size:"mini"}},[o("el-form-item",{attrs:{label:"公司名称","label-width":t.formLabelWidth,prop:"orgName"}},[o("el-input",{attrs:{"auto-complete":"off",disabled:t.companyId===t.form.id||31===t.form.status,maxlength:15},model:{value:t.form.orgName,callback:function(e){t.$set(t.form,"orgName",e)},expression:"form.orgName"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"网点类型","label-width":t.formLabelWidth}},[o("SelectType",{attrs:{type:"network_type",placeholder:"请选择",disabled:t.companyId===t.form.id||31===t.form.status},model:{value:t.form.orgType,callback:function(e){t.$set(t.form,"orgType",e)},expression:"form.orgType"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"公司状态","label-width":t.formLabelWidth,disabled:"disabled"}},[o("el-select",{attrs:{disabled:!(!t.isModify&&t.companyId===t.form.id||31===t.form.status)},model:{value:t.form.status,callback:function(e){t.$set(t.form,"status",e)},expression:"form.status"}},[o("el-option",{attrs:{label:"有效",value:32}}),t._v(" "),o("el-option",{attrs:{label:"无效",value:31}})],1)],1),t._v(" "),o("el-form-item",{attrs:{label:"公司代码","label-width":t.formLabelWidth,prop:"networkCode"}},[o("el-input",{attrs:{"auto-complete":"off ",disabled:31===t.form.status||t.companyId===t.form.id,maxlength:10,clearable:""},model:{value:t.form.networkCode,callback:function(e){t.$set(t.form,"networkCode",e)},expression:"form.networkCode"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"负责人","label-width":t.formLabelWidth,prop:"responsibleName"}},[o("el-input",{attrs:{"auto-complete":"off",disabled:31===t.form.status,clearable:""},model:{value:t.form.responsibleName,callback:function(e){t.$set(t.form,"responsibleName",e)},expression:"form.responsibleName"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"负责人电话","label-width":t.formLabelWidth,prop:"responsibleTelephone"}},[o("el-input",{attrs:{"auto-complete":"off",disabled:31===t.form.status},model:{value:t.form.responsibleTelephone,callback:function(e){t.$set(t.form,"responsibleTelephone",e)},expression:"form.responsibleTelephone"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"客服人员","label-width":t.formLabelWidth,prop:"serviceName"}},[o("el-input",{attrs:{"auto-complete":"off",disabled:31===t.form.status,clearable:""},model:{value:t.form.serviceName,callback:function(e){t.$set(t.form,"serviceName",e)},expression:"form.serviceName"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"客服电话","label-width":t.formLabelWidth,prop:"servicePhone",clearable:""}},[o("el-input",{attrs:{"auto-complete":"off",maxlength:30,disabled:31===t.form.status},model:{value:t.form.servicePhone,callback:function(e){t.$set(t.form,"servicePhone",e)},expression:"form.servicePhone"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"所在城市","label-width":t.formLabelWidth,prop:"city"}},[o("querySelect",{attrs:{filterable:"",show:"select",search:"longAddr",valuekey:"longAddr",disabled:t.companyId===t.form.id||31===t.form.status,type:"city",remote:!0,clearable:""},on:{change:t.getCity},model:{value:t.form.city,callback:function(e){t.$set(t.form,"city",e)},expression:"form.city"}})],1),t._v(" "),o("div",{staticClass:"rem-add-dot"},[o("el-form-item",{attrs:{label:"详细地址","label-width":t.formLabelWidth,prop:""}},[o("el-input",{attrs:{type:"textarea",rows:2,disabled:31===t.form.status,maxlength:50,placeholder:"不可超300字","auto-complete":"off"},model:{value:t.form.detailedAddr,callback:function(e){t.$set(t.form,"detailedAddr",e)},expression:"form.detailedAddr"}})],1)],1)],1):o("el-form",{key:t.formKey,ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:t.form,rules:t.rules,inline:!0,"label-position":"right",size:"mini"}},[o("el-form-item",{attrs:{label:"网点名称","label-width":t.formLabelWidth,prop:"orgName"}},[o("el-input",{attrs:{"auto-complete":"off",disabled:31===t.form.status,maxlength:15},model:{value:t.form.orgName,callback:function(e){t.$set(t.form,"orgName",e)},expression:"form.orgName"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"网点类型","label-width":t.formLabelWidth}},[o("SelectType",{attrs:{type:"network_type",placeholder:"请选择",disabled:t.isModify},model:{value:t.form.orgType,callback:function(e){t.$set(t.form,"orgType",e)},expression:"form.orgType"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"网点状态","label-width":t.formLabelWidth,disabled:"disabled"}},[o("el-select",{attrs:{disabled:!t.isModify},model:{value:t.form.status,callback:function(e){t.$set(t.form,"status",e)},expression:"form.status"}},[o("el-option",{attrs:{label:"有效",value:32}}),t._v(" "),o("el-option",{attrs:{label:"无效",value:31}})],1)],1),t._v(" "),o("el-form-item",{attrs:{label:"上级网点","label-width":t.formLabelWidth}},[o("SelectTree",{attrs:{disabled:t.isModify||31===t.form.status,orgid:t.form.parentId||t.otherinfo.orgid},on:{change:t.canadd},model:{value:t.form.parentId,callback:function(e){t.$set(t.form,"parentId",e)},expression:"form.parentId"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"经营类型","label-width":t.formLabelWidth}},[o("el-select",{attrs:{disabled:31===t.form.status},model:{value:t.form.manageType,callback:function(e){t.$set(t.form,"manageType",e)},expression:"form.manageType"}},[o("el-option",{attrs:{label:"自营",value:3}}),t._v(" "),o("el-option",{attrs:{label:"加盟",value:4}})],1)],1),t._v(" "),t.isModify?o("el-form-item",{attrs:{label:"创建时间","label-width":t.formLabelWidth}},[o("el-input",{attrs:{value:t._f("parseTime")(t.form.createTime,"{y}/{m}/{d}"),disabled:t.isModify||31===t.form.status}})],1):t._e(),t._v(" "),o("el-form-item",{attrs:{label:"负责人","label-width":t.formLabelWidth,prop:"responsibleName"}},[o("el-input",{attrs:{"auto-complete":"off",disabled:31===t.form.status,clearable:"",maxlength:10},model:{value:t.form.responsibleName,callback:function(e){t.$set(t.form,"responsibleName",e)},expression:"form.responsibleName"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"负责人电话","label-width":t.formLabelWidth,prop:"responsibleTelephone"}},[o("el-input",{attrs:{maxlength:11,"auto-complete":"off",disabled:31===t.form.status},model:{value:t.form.responsibleTelephone,callback:function(e){t.$set(t.form,"responsibleTelephone",e)},expression:"form.responsibleTelephone"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"所在城市","label-width":t.formLabelWidth,prop:"city"}},[o("querySelect",{attrs:{filterable:"",show:"select",search:"longAddr",valuekey:"longAddr",disabled:31===t.form.status,type:"city",remote:!0,clearable:""},on:{change:t.getCity},model:{value:t.form.city,callback:function(e){t.$set(t.form,"city",e)},expression:"form.city"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"客服人员","label-width":t.formLabelWidth,prop:"serviceName"}},[o("el-input",{attrs:{"auto-complete":"off",disabled:31===t.form.status,clearable:"",maxlength:10},model:{value:t.form.serviceName,callback:function(e){t.$set(t.form,"serviceName",e)},expression:"form.serviceName"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"客服电话","label-width":t.formLabelWidth,prop:"servicePhone",clearable:""}},[o("el-input",{attrs:{"auto-complete":"off",disabled:31===t.form.status,maxlength:30},model:{value:t.form.servicePhone,callback:function(e){t.$set(t.form,"servicePhone",e)},expression:"form.servicePhone"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"详细地址","label-width":t.formLabelWidth}},[o("el-input",{attrs:{"auto-complete":"off",disabled:31===t.form.status,maxlength:30},model:{value:t.form.detailedAddr,callback:function(e){t.$set(t.form,"detailedAddr",e)},expression:"form.detailedAddr"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"网点ID","label-width":t.formLabelWidth,prop:"networkCode"}},[o("el-input",{attrs:{"auto-complete":"off ",disabled:31===t.form.status,maxlength:10,clearable:""},model:{value:t.form.networkCode,callback:function(e){t.$set(t.form,"networkCode",e)},expression:"form.networkCode"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"代收款限额","label-width":t.formLabelWidth,prop:""}},[o("el-input",{directives:[{name:"number-only",rawName:"v-number-only"}],attrs:{"auto-complete":"off",maxlength:9,disabled:31===t.form.status},model:{value:t.form.collectionFee,callback:function(e){t.$set(t.form,"collectionFee",e)},expression:"form.collectionFee"}},[o("template",{slot:"append"},[t._v("元")])],2)],1),t._v(" "),o("el-form-item",{attrs:{label:"提现基准","label-width":t.formLabelWidth,prop:""}},[o("el-input",{directives:[{name:"number-only",rawName:"v-number-only"}],attrs:{"auto-complete":"off",disabled:31===t.form.status,maxlength:9},model:{value:t.form.benchmark,callback:function(e){t.$set(t.form,"benchmark",e)},expression:"form.benchmark"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"预警额度","label-width":t.formLabelWidth,prop:""}},[o("el-input",{directives:[{name:"number-only",rawName:"v-number-only"}],attrs:{"auto-complete":"off",maxlength:9,disabled:31===t.form.status},model:{value:t.form.warningQuota,callback:function(e){t.$set(t.form,"warningQuota",e)},expression:"form.warningQuota"}},[o("template",{slot:"append"},[t._v("元")])],2)],1),t._v(" "),o("el-form-item",{attrs:{label:"锁机额度","label-width":t.formLabelWidth,prop:""}},[o("el-input",{directives:[{name:"number-only",rawName:"v-number-only"}],attrs:{"auto-complete":"off",maxlength:9,disabled:31===t.form.status},model:{value:t.form.lockMachineQuota,callback:function(e){t.$set(t.form,"lockMachineQuota",e)},expression:"form.lockMachineQuota"}},[o("template",{slot:"append"},[t._v("元")])],2)],1),t._v(" "),t.isModify?t._e():o("div",{staticClass:"ad-add-dot"},[o("el-checkbox",{attrs:{checked:""},model:{value:t.form.accountStatus,callback:function(e){t.$set(t.form,"accountStatus",e)},expression:"form.accountStatus"}},[t._v("开通管理员账号")]),t._v(" "),o("p",[t._v(" 密码：123456")])],1),t._v(" "),t.form.accountStatus&&!t.isModify?o("el-form-item",{attrs:{"label-width":t.formLabelWidth,prop:"accountName"}},[o("el-tooltip",{staticClass:"item",attrs:{effect:"dark",placement:"top",enterable:!1,manual:!0,value:t.tooltip,tabindex:"-1"}},[o("div",{attrs:{slot:"content"},slot:"content"},[t._v("账号可以由字母、数字组成"),o("br"),t._v("长度范围2~15个字符")]),t._v(" "),o("el-input",{staticStyle:{width:"307px"},attrs:{"auto-complete":"off"},on:{focus:function(e){t.tooltip=!0},blur:function(e){t.tooltip=!1}},model:{value:t.form.accountName,callback:function(e){t.$set(t.form,"accountName","string"==typeof e?e.trim():e)},expression:"form.accountName"}})],1)],1):t._e(),t._v(" "),o("div",{staticClass:"rem-add-dot"},[o("el-form-item",{attrs:{label:"备注","label-width":t.formLabelWidth,prop:""}},[o("el-input",{attrs:{type:"textarea",rows:2,placeholder:"不可超300字","auto-complete":"off",maxlength:300},model:{value:t.form.remarks,callback:function(e){t.$set(t.form,"remarks",e)},expression:"form.remarks"}})],1)],1)],1)],1),t._v(" "),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{attrs:{type:"primary"},on:{click:function(e){t.submitForm("ruleForm",!0)}}},[t._v("保存并添加")]),t._v(" "),o("el-button",{attrs:{type:"primary"},on:{click:function(e){t.submitForm("ruleForm")}}},[t._v("保存")]),t._v(" "),o("el-button",{on:{click:t.closeMe}},[t._v("取 消")])],1)],2)],1)},staticRenderFns:[]};t.a=r},AfEI:function(e,t,o){"use strict";var r={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("pop-right",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"addDriverPop",attrs:{title:t.popTitle,isShow:t.popVisible},on:{close:t.closeMe}},[o("template",{staticClass:"addDriverPop-content",slot:"content"},[o("el-form",{ref:"ruleForm",attrs:{model:t.form,rules:t.rules,"label-width":t.formLabelWidth,inline:!0,"label-position":"right",size:"mini"}},[o("el-form-item",{attrs:{label:"司机姓名",prop:"driverName"}},[o("el-input",{attrs:{maxlength:10,"auto-complete":"off"},model:{value:t.form.driverName,callback:function(e){t.$set(t.form,"driverName","string"==typeof e?e.trim():e)},expression:"form.driverName"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"手机号码",prop:"driverMobile"}},[o("el-input",{attrs:{maxlength:11,"auto-complete":"off"},model:{value:t.form.driverMobile,callback:function(e){t.$set(t.form,"driverMobile",e)},expression:"form.driverMobile"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"归属网点",prop:"orgid"}},[o("SelectTree",{attrs:{orgid:t.otherinfo.orgid},model:{value:t.form.orgid,callback:function(e){t.$set(t.form,"orgid",e)},expression:"form.orgid"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"身份证号",prop:"driverCardid"}},[o("el-input",{attrs:{maxlength:18,"auto-complete":"off"},model:{value:t.form.driverCardid,callback:function(e){t.$set(t.form,"driverCardid",e)},expression:"form.driverCardid"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"驾驶证类型",prop:"licenseType"}},[o("SelectType",{attrs:{type:"driving_type",placeholder:"驾驶证类型"},model:{value:t.form.licenseType,callback:function(e){t.$set(t.form,"licenseType",e)},expression:"form.licenseType"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"银行卡号",prop:"bankCardNumber"}},[o("el-input",{directives:[{name:"numberOnly",rawName:"v-numberOnly"}],attrs:{maxlength:18,"auto-complete":"off"},model:{value:t.form.bankCardNumber,callback:function(e){t.$set(t.form,"bankCardNumber",e)},expression:"form.bankCardNumber"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"银行名称",prop:"bankName"}},[o("el-input",{attrs:{maxlength:20,"auto-complete":"off"},model:{value:t.form.bankName,callback:function(e){t.$set(t.form,"bankName",e)},expression:"form.bankName"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"开户行",prop:"openBank"}},[o("el-input",{attrs:{maxlength:20,"auto-complete":"off"},model:{value:t.form.openBank,callback:function(e){t.$set(t.form,"openBank",e)},expression:"form.openBank"}})],1),t._v(" "),o("el-form-item",{staticClass:"blockInput",attrs:{label:"驾驶证有效期",prop:"validityDate"}},[o("el-date-picker",{attrs:{type:"daterange","unlink-panels":"",align:"right","value-format":"yyyy-MM-dd HH:mm:ss","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:t.searchTime,callback:function(e){t.searchTime=e},expression:"searchTime"}})],1),t._v(" "),o("el-form-item",{staticClass:"blockInput",attrs:{label:"司机地址",prop:"driverAddress"}},[o("el-input",{attrs:{maxlength:50,"auto-complete":"off"},model:{value:t.form.driverAddress,callback:function(e){t.$set(t.form,"driverAddress",e)},expression:"form.driverAddress"}})],1),t._v(" "),o("el-form-item",{staticClass:"driverRemarks",attrs:{label:"备注",prop:"driverRemarks"}},[o("el-input",{attrs:{type:"textarea",maxlength:300},model:{value:t.form.driverRemarks,callback:function(e){t.$set(t.form,"driverRemarks","string"==typeof e?e.trim():e)},expression:"form.driverRemarks"}})],1),t._v(" "),o("el-form-item",{staticClass:"clearfix uploadcard"},[o("div",{staticClass:"idcard"},[o("upload",{attrs:{title:"身份证"},model:{value:t.form.idcardPicture,callback:function(e){t.$set(t.form,"idcardPicture",e)},expression:"form.idcardPicture"}})],1),t._v(" "),o("div",{staticClass:"drviercard"},[o("upload",{attrs:{title:"驾驶证"},model:{value:t.form.drivingPicture,callback:function(e){t.$set(t.form,"drivingPicture",e)},expression:"form.drivingPicture"}})],1),t._v(" "),o("div",{staticClass:"certcard"},[o("upload",{attrs:{title:"从业资格证"},model:{value:t.form.certification,callback:function(e){t.$set(t.form,"certification",e)},expression:"form.certification"}})],1)])],1)],1),t._v(" "),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t.isModify?t._e():o("el-button",{attrs:{type:"primary"},on:{click:function(e){t.submitForm("ruleForm",!0)}}},[t._v("保存并新增")]),t._v(" "),o("el-button",{attrs:{type:"primary"},on:{click:function(e){t.submitForm("ruleForm")}}},[t._v("保 存")]),t._v(" "),o("el-button",{on:{click:t.closeMe}},[t._v("取 消")])],1)],2)},staticRenderFns:[]};t.a=r},DAQk:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=o("wO8r"),i=o("Q5/P");var a=function(e){o("whtI")},s=o("VU/8")(r.a,i.a,a,null,null);t.default=s.exports},FKPH:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=o("9l6W"),i=o("AfEI");var a=function(e){o("grrk")},s=o("VU/8")(r.a,i.a,a,null,null);t.default=s.exports},Ftci:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=o("1IKb"),i=o("pMJc");var a=function(e){o("NOu1")},s=o("VU/8")(r.a,i.a,a,null,null);t.default=s.exports},LaJi:function(e,t){},NOu1:function(e,t){},O85W:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=o("rAXf"),i=o("jp/2");var a=function(e){o("ttyY")},s=o("VU/8")(r.a,i.a,a,null,null);t.default=s.exports},"Q5/P":function(e,t,o){"use strict";var r={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("pop-right",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"addEmployeerPop",attrs:{title:t.popTitle,isShow:t.popVisible},on:{close:t.closeMe}},[o("template",{staticClass:"addEmployeerPop-content",slot:"content"},[o("el-form",{ref:"ruleForm",attrs:{model:t.form,rules:t.rules,inline:!0,"label-position":"right",size:"mini"}},[o("el-form-item",{attrs:{label:"用户姓名","label-width":t.formLabelWidth,prop:"name"}},[o("el-input",{attrs:{"auto-complete":"off"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"手机号码","label-width":t.formLabelWidth,prop:"mobilephone"}},[o("el-input",{attrs:{maxlength:11,"auto-complete":"off"},model:{value:t.form.mobilephone,callback:function(e){t.$set(t.form,"mobilephone",e)},expression:"form.mobilephone"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"登录账号","label-width":t.formLabelWidth,prop:"username"}},[o("el-tooltip",{staticClass:"item",attrs:{effect:"dark",placement:"top",enterable:!1,manual:!0,value:t.tooltip,tabindex:"-1"}},[o("div",{attrs:{slot:"content"},slot:"content"},[t._v("账号可以由小写字母、数字组成"),o("br"),t._v("长度范围2~30个字符")]),t._v(" "),o("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.form.username,expression:"form.username",modifiers:{trim:!0}},{name:"onlyNumberAndLetter",rawName:"v-onlyNumberAndLetter"}],staticClass:"nativeinput",attrs:{type:"text","auto-complete":"off",maxlength:"30"},domProps:{value:t.form.username},on:{focus:function(e){t.tooltip=!0},blur:[function(e){t.tooltip=!1},function(e){t.$forceUpdate()}],input:function(e){e.target.composing||t.$set(t.form,"username",e.target.value.trim())}}})])],1),t._v(" "),o("el-form-item",{attrs:{label:"密码","label-width":t.formLabelWidth,prop:"password"}},[o("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.form.password,expression:"form.password",modifiers:{trim:!0}},{name:"onlyNumberAndLetter",rawName:"v-onlyNumberAndLetter"}],staticClass:"nativeinput",attrs:{type:"text",maxlength:"15","auto-complete":"off"},domProps:{value:t.form.password},on:{input:function(e){e.target.composing||t.$set(t.form,"password",e.target.value.trim())},blur:function(e){t.$forceUpdate()}}})]),t._v(" "),o("el-form-item",{attrs:{label:"职位","label-width":t.formLabelWidth,prop:"position"}},[o("el-input",{attrs:{"auto-complete":"off"},model:{value:t.form.position,callback:function(e){t.$set(t.form,"position",e)},expression:"form.position"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"员工号","label-width":t.formLabelWidth,prop:"jobNumber"}},[o("el-input",{attrs:{"auto-complete":"off",maxlength:20},model:{value:t.form.jobNumber,callback:function(e){t.$set(t.form,"jobNumber",e)},expression:"form.jobNumber"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"性别",prop:"sexFlag","label-width":t.formLabelWidth}},[o("el-select",{attrs:{placeholder:"请选择性别"},model:{value:t.form.sexFlag,callback:function(e){t.$set(t.form,"sexFlag",e)},expression:"form.sexFlag"}},[o("el-option",{attrs:{label:"男",value:"0"}}),t._v(" "),o("el-option",{attrs:{label:"女",value:"1"}})],1)],1),t._v(" "),o("el-form-item",{attrs:{required:"",prop:"orgid",label:"归属网点","label-width":t.formLabelWidth}},[o("SelectTree",{attrs:{filterable:"",orgid:t.otherinfo.orgid},model:{value:t.form.orgid,callback:function(e){t.$set(t.form,"orgid",e)},expression:"form.orgid"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"权限角色","label-width":t.formLabelWidth,prop:"rolesId"}},[o("el-select",{attrs:{"collapse-tags":"",filterable:"",multiple:"","filter-method":t.makefilter,placeholder:"请选择权限"},model:{value:t.form.rolesId,callback:function(e){t.$set(t.form,"rolesId",e)},expression:"form.rolesId"}},t._l(t.roleslist,function(e){return o("el-option",{key:e.id,attrs:{label:e.roleName,value:e.id}},[o("span",{staticClass:"query-input-myautocomplete",domProps:{innerHTML:t._s(t.highLight(e,"roleName"))}})])}))],1),t._v(" "),o("el-form-item",{attrs:{label:"归属部门","label-width":t.formLabelWidth,prop:"departmentId"}},[o("SelectType",{attrs:{orgid:t.otherinfo.orgid,type:"department_type",filterable:"",placeholder:"请选择部门"},model:{value:t.form.departmentId,callback:function(e){t.$set(t.form,"departmentId",e)},expression:"form.departmentId"}})],1)],1),t._v(" "),t.isModify?t._e():o("div",{staticClass:"info"},[t._v("注：密码默认为：123456")])],1),t._v(" "),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t.isModify?t._e():o("el-button",{attrs:{type:"primary"},on:{click:function(e){t.submitForm("ruleForm",!0)}}},[t._v("保存并添加")]),t._v(" "),o("el-button",{attrs:{type:"primary"},on:{click:function(e){t.submitForm("ruleForm")}}},[t._v("确 定")]),t._v(" "),o("el-button",{on:{click:t.closeMe}},[t._v("取 消")])],1)],2)},staticRenderFns:[]};t.a=r},TyhB:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAABOklEQVQ4T8WTsUoDURBF77xNRAt3U6QQIRCFNPoL7ib+gHWIICSktrEQa2PhFwgib0VEBE1rFSGYhTTxD0TExkb0uRol8e2OJJWgyQohONUUM4c7lzuEEYtG3Mf4AbkTPxl0eBvMMWNSbNUL5uN31UMVOEcfcwg6l2DcgUgDSIu0uVBf7vf9GgjIuW8zIXSLGTuNUmKvN2y76pwhLryiKSMBtlS7AMU10b7BYdcrJW5t+XIKUK1RMg8GAhz5noLBSQ4+8z0AEVoA8ixQoRDHkSfYUtVJ0Jlgoxog8B5ezcXZaV+JeDyjqdv2VhPPQ020pWrrkFLNsvXUG3QO/Q0wZ6+K1spvmflhou2qGhjXIVsVg/xNBoo6RLZZtm7+BFiSal4QqgAyzFTj2MS6tzZ1Pyix409i1K/8v4IvMT9zEV3+DDMAAAAASUVORK5CYII="},XCyX:function(e,t,o){"use strict";var r=o("woOf"),i=o.n(r),a=o("P5Di"),s=o("5CI6"),n=o("0xDb");t.a={components:{popRight:a.a},props:{popVisible:{type:Boolean,default:!1},isModify:{type:Boolean,default:!1},reference:{type:Boolean,default:!1},dotInfo:Array,theUser:Object,createrId:[Number,String]},watch:{dotInfo:function(e){this.treeData=this.dotInfo,this.$refs.tree&&this.$refs.tree.setCheckedKeys(function t(e){var o=[];return e.map(function(e){e.isSelected?o.push(e.id):e.children&&(o=o.concat(t(e.children)))}),o}(this.treeData))},theUser:function(e){this.isModify&&(this.popTitle="修改角色",this.formInline=Object(n.objectMerge2)(this.theUser||{}),this.$refs.tree.setCheckedKeys(this.formInline.menusId)),this.reference?(this.formInline.menusId=this.theUser.id,this.$refs.tree.setCheckedKeys(this.formInline.menusId)):(this.popTitle="新增角色",this.result()),this.roleKey=Math.random()},reference:function(){this.reference&&(this.formInline={roleName:"",remark:"",menusId:this.theUser.id,createrId:this.createrId},this.popTitle="新增角色")}},computed:{isShow:{get:function(){return this.popVisible},set:function(){}}},data:function(){return{rules:{roleName:[{required:!0,message:"请输入角色名称",validator:function(e,t,o){if(!t)return o(new Error("请输入角色名称"));o()},trigger:"blur"},{max:12,message:"最多可输入12个字符"}],remarks:[{validator:function(e,t,o){o()},trigger:"blur"},{max:250,message:"最多可输入250个字符",trigger:"blur"}]},roleKey:"",treeData:[],defaultProps:{children:"children",label:"name"},formInline:{roleName:"",remark:"",menusId:[],createrId:this.createrId},popTitle:"新增角色",loading:!1}},mounted:function(){},methods:{newInfoData:function(){this.formInline={roleName:"",remark:"",menusId:"",createrId:this.createrId}},result:function(){this.newInfoData(),this.roleKey=Math.random()},closeMe:function(e){this.result(),this.$emit("close"),this.$refs.formName.resetFields(),"function"==typeof e&&e()},getCheckedNodes:function(e,t){var r=this;this.$refs[e].validate(function(e){if(!e)return!1;r.loading=!0;var t=r.$refs.tree.getCheckedNodes();r.formInline.menusId=t.map(function(e){return e.id});var o=i()({},r.formInline);(r.isModify?Object(s.f)(o):(r.reference,Object(s.e)(o))).then(function(e){r.$emit("success"),r.loading=!1,r.closeMe(),r.$message.success("保存成功")}).catch(function(e){r._handlerCatchMsg(e),r.loading=!1})})}}}},XRGj:function(e,t,o){"use strict";var r={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("pop-right",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"addCustomerPop",attrs:{title:t.popTitle,isShow:t.popVisible},on:{close:t.closeMe}},[o("template",{staticClass:"addCustomerPop-content",slot:"content"},[o("el-form",{ref:"ruleForm",attrs:{model:t.form,rules:t.rules,"label-width":t.formLabelWidth,inline:!0,"label-position":"right",size:"mini"}},[t.isModify?t._e():o("el-form-item",{staticClass:"clearfix"},[o("div",{staticClass:"selectType",class:{checked:2===t.form.companyType},on:{click:function(e){e.stopPropagation(),t.form.companyType=2}}},[o("span",{staticClass:"icon"},[o("icon-svg",{attrs:{"icon-class":"qiye"}})],1),t._v(" "),o("strong",[t._v("企业")]),t._v(" "),o("p",[t._v("有合法营业执照等企业")])]),t._v(" "),o("div",{staticClass:"selectType single",class:{checked:1===t.form.companyType},on:{click:function(e){e.stopPropagation(),t.form.companyType=1}}},[o("span",{staticClass:"icon"},[o("icon-svg",{attrs:{"icon-class":"geren"}})],1),t._v(" "),o("strong",[t._v("个人")]),t._v(" "),o("p",[t._v("具备有效身份的自然人")])])]),t._v(" "),2===t.form.companyType?[o("div",{staticClass:"info"},[t._v("公司名称")]),t._v(" "),o("el-form-item",{attrs:{prop:"companyName"}},[o("el-input",{attrs:{maxlength:25,placeholder:"公司全称"},model:{value:t.form.companyName,callback:function(e){t.$set(t.form,"companyName","string"==typeof e?e.trim():e)},expression:"form.companyName"}})],1),t._v(" "),o("el-form-item",[o("upload",{staticClass:"licensePicture",attrs:{twocode:"",tip:"（有年检章，jpg/png。小于5M）"},model:{value:t.form.licensePicture,callback:function(e){t.$set(t.form,"licensePicture",e)},expression:"form.licensePicture"}})],1),t._v(" "),o("div",{staticClass:"info"},[t._v("公司法人信息")]),t._v(" "),o("el-form-item",{attrs:{prop:"legalPersonname"}},[o("el-input",{attrs:{maxlength:25,placeholder:"公司法人名称","auto-complete":"off"},model:{value:t.form.legalPersonname,callback:function(e){t.$set(t.form,"legalPersonname","string"==typeof e?e.trim():e)},expression:"form.legalPersonname"}})],1)]:t._e(),t._v(" "),o("el-form-item",{staticClass:"clearfix"},[o("div",{staticClass:"idcard-pos"},[o("upload",{attrs:{twocode:"",title:1===t.form.companyType?"自然人身份证正面":"法人身份证正面"},model:{value:t.form.idcardPositive,callback:function(e){t.$set(t.form,"idcardPositive",e)},expression:"form.idcardPositive"}})],1),t._v(" "),o("div",{staticClass:"idcard-ver"},[o("upload",{attrs:{twocode:"",title:1===t.form.companyType?"自然人身份证反面":"法人身份证反面"},model:{value:t.form.idcardVerso,callback:function(e){t.$set(t.form,"idcardVerso",e)},expression:"form.idcardVerso"}})],1)]),t._v(" "),o("div",{staticClass:"info"},[t._v(t._s(t.issender?"发":"收")+"货信息")]),t._v(" "),o("el-form-item",{attrs:{label:(t.issender?"发":"收")+"货方",prop:"customerUnit"}},[o("el-input",{attrs:{maxlength:25,"auto-complete":"off"},model:{value:t.form.customerUnit,callback:function(e){t.$set(t.form,"customerUnit",e)},expression:"form.customerUnit"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"联系人",prop:"customerName"}},[o("el-input",{attrs:{maxlength:25,"auto-complete":"off"},model:{value:t.form.customerName,callback:function(e){t.$set(t.form,"customerName",e)},expression:"form.customerName"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"手机",prop:"customerMobile"}},[o("input",{directives:[{name:"numberOnly",rawName:"v-numberOnly"},{name:"model",rawName:"v-model.trim",value:t.form.customerMobile,expression:"form.customerMobile",modifiers:{trim:!0}}],staticClass:"nativeinput",attrs:{type:"text","auto-complete":"off",maxlength:"20"},domProps:{value:t.form.customerMobile},on:{input:function(e){e.target.composing||t.$set(t.form,"customerMobile",e.target.value.trim())},blur:function(e){t.$forceUpdate()}}})]),t._v(" "),o("el-form-item",{staticClass:"customerPhone",attrs:{label:"电话",prop:"customerPhone"}},[o("el-input",{directives:[{name:"numberOnly",rawName:"v-numberOnly"}],staticClass:"phoneshort",attrs:{maxlength:4,"auto-complete":"off"},model:{value:t.phoneshort,callback:function(e){t.phoneshort=e},expression:"phoneshort"}}),t._v(" - "),o("el-input",{directives:[{name:"numberOnly",rawName:"v-numberOnly"}],staticClass:"phonelong",attrs:{maxlength:8,"auto-complete":"off"},model:{value:t.phonelong,callback:function(e){t.phonelong=e},expression:"phonelong"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"归属网点",prop:"orgid"}},[o("SelectTree",{attrs:{filterable:"",orgid:t.otherinfo.orgid},model:{value:t.form.orgid,callback:function(e){t.$set(t.form,"orgid",e)},expression:"form.orgid"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"客户VIP号",prop:"vipNum"}},[o("el-input",{attrs:{maxlength:25,"auto-complete":"off"},model:{value:t.form.vipNum,callback:function(e){t.$set(t.form,"vipNum",e)},expression:"form.vipNum"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"身份证号码",prop:"idcard"}},[o("el-input",{attrs:{maxlength:18,"auto-complete":"off"},model:{value:t.form.idcard,callback:function(e){t.$set(t.form,"idcard",e)},expression:"form.idcard"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"开户行",prop:"openBank"}},[o("el-input",{attrs:{maxlength:20,"auto-complete":"off"},model:{value:t.form.openBank,callback:function(e){t.$set(t.form,"openBank",e)},expression:"form.openBank"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"银行名称",prop:"bankName"}},[o("el-input",{attrs:{maxlength:20,"auto-complete":"off"},model:{value:t.form.bankName,callback:function(e){t.$set(t.form,"bankName",e)},expression:"form.bankName"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"银行卡号",prop:"bankCardNumber"}},[o("el-input",{directives:[{name:"numberOnly",rawName:"v-numberOnly"}],attrs:{maxlength:25,"auto-complete":"off"},model:{value:t.form.bankCardNumber,callback:function(e){t.$set(t.form,"bankCardNumber","string"==typeof e?e.trim():e)},expression:"form.bankCardNumber"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"详细地址",prop:"detailedAddress"}},[o("el-input",{attrs:{type:"textarea",placeholder:"最多输入50个字符",maxlength:50,"auto-complete":"off"},model:{value:t.form.detailedAddress,callback:function(e){t.$set(t.form,"detailedAddress",e)},expression:"form.detailedAddress"}})],1)],2)],1),t._v(" "),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t.isModify?t._e():o("el-button",{attrs:{type:"primary"},on:{click:function(e){t.submitForm("ruleForm",!0)}}},[t._v("保存并新增")]),t._v(" "),o("el-button",{attrs:{type:"primary"},on:{click:function(e){t.submitForm("ruleForm")}}},[t._v("保 存")]),t._v(" "),o("el-button",{on:{click:t.closeMe}},[t._v("取 消")])],1)],2)},staticRenderFns:[]};t.a=r},bZax:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=o("frTf"),i=o("ubb7");var a=function(e){o("8Hxk")},s=o("VU/8")(r.a,i.a,a,null,null);t.default=s.exports},"f/K7":function(e,t,a){"use strict";var o={render:function(){var r=this,e=r.$createElement,i=r._self._c||e;return i("pop-right",{directives:[{name:"loading",rawName:"v-loading",value:r.loading,expression:"loading"}],staticClass:"add-role-pop-content",attrs:{title:r.popTitle,isShow:r.popVisible},on:{close:r.closeMe}},[i("template",{staticClass:"addEmployeerPop-content",slot:"content"},[i("div",{staticClass:"add-role"},[i("div",{staticClass:"add-role-top"},[i("el-form",{ref:"formName",staticClass:"demo-form-inline",attrs:{inline:!0,rules:r.rules,model:r.formInline}},[i("el-form-item",{attrs:{label:"角色名称：",prop:"roleName"}},[i("el-input",{attrs:{clearable:""},model:{value:r.formInline.roleName,callback:function(e){r.$set(r.formInline,"roleName",e)},expression:"formInline.roleName"}})],1),r._v(" "),i("el-form-item",{attrs:{label:"备注：",prop:"remark"}},[i("el-input",{attrs:{type:"textarea",placeholder:"",maxlength:300},model:{value:r.formInline.remark,callback:function(e){r.$set(r.formInline,"remark",e)},expression:"formInline.remark"}})],1)],1)],1),r._v(" "),i("div",{staticClass:"add-role-tree"},[i("el-tree",{key:r.roleKey,ref:"tree",attrs:{data:r.treeData,"show-checkbox":"","default-expand-all":"","node-key":"id","highlight-current":"",props:r.defaultProps},scopedSlots:r._u([{key:"default",fn:function(e){var t=e.node,o=e.data;return i("span",{staticClass:"custom-tree-node"},[0===o.status?i("span",[i("img",{attrs:{src:a("TyhB"),alt:""}}),r._v("\n                  "+r._s(t.label)+"\n                  ")]):i("span",[i("img",{attrs:{src:a("vzGk"),alt:""}}),r._v("\n                  "+r._s(t.label)+"\n                  ")])])}}])})],1)])]),r._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:function(e){r.getCheckedNodes("formName")}}},[r._v("保存")]),r._v(" "),i("el-button",{on:{click:r.closeMe}},[r._v("取 消")])],1)],2)},staticRenderFns:[]};t.a=o},frTf:function(e,t,o){"use strict";var r=o("woOf"),i=o.n(r),a=o("Dd8w"),s=o.n(a),n=o("E4LH"),l=o("4UdH"),c=o("P5Di"),m=o("QbVN"),d=o("o9X6"),f=o("NYxO");t.a={components:{popRight:c.a,Upload:m.a,SelectTree:d.a},props:{popVisible:{type:Boolean,default:!1},orgid:{required:!0},isModify:{type:Boolean,default:!1},info:{type:Object,default:function(){}},issender:{type:Boolean,dafault:!1}},computed:s()({},Object(f.mapGetters)(["otherinfo"])),data:function(){var t=this;return{form:{carrierAddr:"",carrierMobile:"",carrierName:"",carrierRemarks:"",carrierSn:"",contractEndtime:"",contractStarttime:"",customerServicePhone:"",liableName:"",liablePhone:"",orgid:0},formLabelWidth:"100px",tooltip:!1,rules:{carrierName:[{required:!0,message:"请输入承运商名称"}],orgid:[{required:!0,message:"请选择所属机构"}],carrierMobile:[{required:!0,trigger:"change",validator:function(e,t,o){""!==t&&null!==t&&t&&void 0!==t?n.a.MOBILE.test(t)?o():o(new Error("请输11位手机号码")):o(new Error("不能为空"))}}],liablePhone:[],carrierSn:[{message:"仅限字母或数字组合",pattern:n.a.ONLY_NUMBER_AND_LETTER}]},popTitle:"新增承运商",orgArr:[],rolesArr:[],departmentArr:[],loading:!1,roles:[],departments:[],groups:[],inited:!1,pickOption:{firstDayOfWeek:1,disabledDate:function(e){return!!t.form.contractEndtime&&e.getTime()>t.form.contractEndtime}},pickOption2:{firstDayOfWeek:1,disabledDate:function(e){return!!t.form.contractStarttime&&e.getTime()<t.form.contractStarttime}}}},mounted:function(){this.form.orgid=this.orgid,this.inited||(this.inited=!0,this.initInfo())},watch:{popVisible:function(e,t){this.inited||(this.inited=!0,this.initInfo()),e&&!this.isModify&&this.getCarrierSn()},orgid:function(e){this.form.orgid=e},info:function(){if(this.isModify){this.popTitle="修改承运商";var e=i()({},this.info);for(var t in this.form)this.form[t]=e[t];this.form.carrierId=e.carrierId}else{for(var o in this.popTitle="新增承运商",this.getCarrierSn(),this.form)this.form[o]="";delete this.form.carrierId,this.form.orgid=this.orgid}}},methods:{getCarrierSn:function(){var t=this;return this.loading=!0,Object(l.c)().then(function(e){t.form.carrierSn=e.data,console.log(e.data),t.loading=!1}).catch(function(e){t._handlerCatchMsg(e)})},initInfo:function(){this.loading=!1},getOrgid:function(e){this.form.orgid=e},submitForm:function(e,o){var r=this;this.$refs[e].validate(function(e){if(!e)return!1;r.loading=!0;var t=i()({},r.form);t.fixPhone=r.fixPhone;(r.isModify?Object(l.e)(t):Object(l.d)(t)).then(function(e){r.loading=!1,r.$message.success("保存成功"),r.reset(),o?(r.form.orgid=r.orgid,r.getCarrierSn()):r.closeMe(),r.$emit("success")}).catch(function(e){r._handlerCatchMsg(e),r.loading=!1})})},reset:function(){var e=this.form.orgid;this.$refs.ruleForm.resetFields(),this.form.orgid=e},closeMe:function(e){this.reset(),this.$emit("update:popVisible",!1),"function"==typeof e&&e()}}}},ftoq:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=o("//Ie"),i=o("XRGj");var a=function(e){o("nveU")},s=o("VU/8")(r.a,i.a,a,null,null);t.default=s.exports},grrk:function(e,t){},"jp/2":function(e,t,o){"use strict";var r={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"progressContainer"},[t("div",{staticClass:"progressItem",class:{showani:this.isani,cancelAni:this.cancelAni}})])},staticRenderFns:[]};t.a=r},m59D:function(e,t,o){"use strict";var r=o("//Fk"),i=o.n(r),a=o("Dd8w"),s=o.n(a),n=o("T8y6"),l=o("P5Di"),c=o("o9X6"),m=o("hq98"),d=o("E4LH"),f=(o("0xDb"),o("NYxO")),u=o("9UCZ");t.a={components:{popRight:l.a,SelectTree:c.a,querySelect:m.a,SelectType:u.a},computed:s()({},Object(f.mapGetters)(["otherinfo"]),{isShow:{get:function(){return this.popVisible},set:function(){}}}),props:{popVisible:{type:Boolean,default:!1},isModify:{type:Boolean,default:!1},dotInfo:Object,orgid:{type:Number},companyId:{type:Number},getCheckedKeyId:{type:[Number,String]}},watch:{"form.accountStatus":{handler:function(){this.form.accountName=""}},popVisible:function(e){e&&(this.formKey=Math.random(),this.fetchData()),this.watchDate(this.doInfo)},getCheckedKeyId:function(e){this.watchDate()},doInfo:{handler:function(){this.checkShowMessage=!1,this.watchDate(this.doInfo)},immediate:!0,deep:!0},isModify:{handler:function(){this.watchDate()},immediate:!0}},data:function(){var e=function(e,t,o){o()};return{tooltip:!1,formKey:"",popTitle:"新增网点",checked:!0,loading:!1,checkShowMessage:!1,netWorkType:[],newnNetWorkType:[],manageType:[],netWorkStatus:[],isChecked:!1,isCheckedShow:!1,form:{orgName:"",orgType:1,status:32,responsibleTelephone:"",responsibleName:"",city:"",serviceName:"",parentName:"",servicePhone:"",detailedAddr:"",networkCode:"",collectionFee:"",benchmark:"",warningQuota:"",lockMachineQuota:"",manageType:3,remarks:"",accountStatus:!0,parentId:0,createTime:"",id:"",accountName:""},rules:{orgName:[{required:!0,message:"请输入网点名称"}],servicePhone:[{required:!0,pattern:d.a.TELANDPHONE,message:"客服号码格式不正确"}],responsibleName:[{validator:e,trigger:"blur"},{min:2,message:"最少2个字符",trigger:"blur"},{max:10,message:"不可超过10个字符",trigger:"blur"}],responsibleTelephone:[{pattern:d.a.MOBILE,message:"请输入正确的电话号码",trigger:["blur","change"]}],serviceName:[{validator:e,trigger:"blur"},{min:2,message:"最少2个字符",trigger:"blur"},{max:10,message:"不可超过10个字符",trigger:"blur"}],networkCode:[{required:!0,message:"请输入网点代码"},{max:10,message:"不可超过10个字符",trigger:"blur"}],city:[{required:!0,message:"请选择城市"}],accountName:[{required:!0,message:"请输入有效的登录账号",pattern:d.a.USERNAME_NOUP},{max:15,message:"不能超过15个字符",trigger:"blur"}]},dialogVisible:!1,formLabelWidth:"120px"}},mounted:function(){},methods:{fetchData:function(){var t=this;this.loading=!0,this.form.parentId=this.orgid||this.companyId,i.a.all([Object(n.c)(this.form.parentId),Object(n.b)(this.form.parentId),Object(n.d)(this.form.parentId)]).then(function(e){t.manageType=e[1],t.netWorkStatus=e[2],t.netWorkType=e[0],t.loading=!1}).catch(function(e){t._handlerCatchMsg(e),t.loading=!1})},canadd:function(e,t){t&&t.index&&5<=t.index&&(this.$message.info("添加的层级数不能超过5层，请重新选择~"),this.form.parentId=this.otherinfo.companyId)},watchDate:function(){for(var e in this.form)this.form[e]="";this.isModify?(this.popTitle="修改网点",this.changeDate(this.dotInfo),this.form.id=this.dotInfo.id,this.form.parentId=this.dotInfo.parentId||this.companyId):(this.popTitle="新增网点",this.form.id&&delete this.form.id,delete this.form.createTime,this.form.orgType=1,this.form.status=32,this.form.manageType=3,this.form.parentId=this.getCheckedKeyId||this.otherinfo.orgid)},getCity:function(e){this.form.city=e?e.longAddr:e},getOrgid:function(e){this.form.parentId=e},newDate:function(){},reset:function(){for(var e in this.$refs.ruleForm.resetFields(),this.form)this.form[e]="",this.form.id&&delete this.form.id,delete this.form.createTime,this.form.orgType=1,this.form.status=32,this.form.manageType=3,this.form.parentId=this.getCheckedKeyId||this.otherinfo.orgid},closeMe:function(e){this.$emit("close"),this.reset(),"function"==typeof e&&e()},submitForm:function(e,o){var r=this;this.$refs[e].validate(function(e){if(r.isChecked=!1,r.isCheckedShow=!1,!e)return r.$message({type:"error",message:"保存失败"}),!1;r.loading=!0;var t=void 0;r.isModify?(r.form.id===r.form.parentId&&r.form.parentId===r.otherinfo.companyId&&(r.form.parentId=0),r.form.id=r.dotInfo.id,r.form.createTime=+new Date(r.form.createTime),"总公司"===r.form.orgType&&(r.form.orgType=5),t=Object(n.j)(r.form)):(!0===r.form.accountStatus?r.form.accountStatus=0:r.form.accountStatus=1,t=Object(n.h)(r.form)),t.then(function(e){r.$emit("success",r.isModify),r.$message.success("保存成功"),r.formKey=Math.random(),r.reset(),o||r.closeMe(),r.popTitle="新增网点",r.loading=!1,r.$emit("update:isModify",!1)}).catch(function(e){r._handlerCatchMsg(e),r.loading=!1})})},changeDate:function(e){this.form.orgName=e.orgName,this.form.responsibleTelephone=e.responsibleTelephone,this.form.responsibleName=e.responsibleName,this.form.city=e.city,this.form.serviceName=e.serviceName,this.form.parentName=e.parentName,this.form.servicePhone=e.servicePhone,this.form.detailedAddr=e.detailedAddr,this.form.networkCode=e.networkCode,this.form.collectionFee=e.collectionFee,this.form.benchmark=e.benchmark,this.form.warningQuota=e.warningQuota,this.form.lockMachineQuota=e.lockMachineQuota,this.form.remarks=e.remarks,this.form.status=e.status,this.form.accountStatus=e.accountStatus,this.form.manageType=e.manageType,this.form.createTime=e.createTime,5===e.orgType?this.form.orgType="总公司":this.form.orgType=e.orgType}}}},nveU:function(e,t){},pMJc:function(e,t,o){"use strict";var r={render:function(){var o=this,e=o.$createElement,r=o._self._c||e;return r("el-container",{staticClass:"check_box"},[r("el-header",{key:o.viewKey,staticStyle:{height:"87px"}},[r("div"),o._v(" "),1===o.type?r("div",{staticClass:"top_content"},[r("h6",[o._v("系统体检：能帮助你在使用系统时检查哪些需要维护的数据，保证系统的完整性，帮您更好的使用系统。")]),o._v(" "),r("p",{staticClass:"top_ts"},[o._v("（上次检查还有"),r("span",{staticClass:"top_num"},[o._v(o._s(o.dataset.totals)+"项")]),o._v("基础数据未维护）")])]):2===o.type?r("div",{staticClass:"box_top"},[r("div",{staticClass:"top_content2"},[r("i",{staticClass:"wzlicon"}),o._v(" "),o.ischecked?o._e():r("h6",[o._v("初始化检查中"),r("el-button",{staticClass:"btn_qx",attrs:{type:"primary",plain:""},on:{click:function(e){o.doAction("check")}}},[o._v(o._s(o.cancelAni?"继续检查":"取消"))])],1),o._v(" "),o.ischecked?r("h6",[o._v("初始化检查已完成，有"),r("span",{staticClass:"top_num"},[o._v(o._s(o.dataset.totals))]),o._v("项基础功能没维护"),r("el-button",{staticClass:"btn_qx",attrs:{type:"primary",plain:""},on:{click:function(e){o.doAction("agane")}}},[o._v("重新检查")])],1):o._e(),o._v(" "),r("div",{staticClass:"top_ts",attrs:{id:"oTitle"}},[r("ul",[o.contTitleNull?r("li",[o._v(o._s(o.contTitle))]):o._e()])])]),o._v(" "),r("progressbar",{attrs:{cancelAni:o.cancelAni,isani:o.showani}})],1):r("div",{staticClass:"top_content"},[r("h6",[o._v("初始化检查已完成，有"+o._s(o.dataset.totals)+"项基础功能没维护")])])]),o._v(" "),r("el-main",[1===o.type?r("div",{staticClass:"main_checker"},[r("el-button",{attrs:{type:"primary"},on:{click:function(e){o.doAction("init")}}},[o._v("初始化检查")])],1):2===o.type?r("div",{staticClass:"main_checker2"},[r("h6",[o._v("公司管理")]),o._v(" "),r("div",{key:o.viewKey,staticClass:"company_content"},[r("ul",{class:{showani:o.showani,cancelAni:o.cancelAni},on:{animationend:function(e){o.ischecked=!0}}},[o._l(o.countList,function(t,e){return r("li",{key:e},[0<t.value?r("p",[r("i",{class:0<t.value?"el-icon-success ":""}),o._v(o._s(t.title)+": "+o._s(t.message?t.message+"，":"")+o._s(t.message2)+"\n              "),r("el-button",{staticClass:"btn_qx1",attrs:{type:"primary",plain:""},on:{click:function(e){o.doAction(t.label,t)}}},[o._v(o._s(t.button1))])],1):t.value<1&&"orgCount"===t.label&&o.iscompany?r("p",[r("i",{staticClass:"el-icon-warning"}),o._v(o._s(t.title)+"："+o._s(t.message1)+"。\n              "),r("el-button",{staticClass:"btn_qx",attrs:{type:"error",plain:""},on:{click:function(e){o.doAction(t.label,t)}}},[o._v(o._s(t.button2))])],1):t.value<1&&"orgCount"!==t.label?r("p",[r("i",{staticClass:"el-icon-warning"}),o._v(o._s(t.title)+"："+o._s(t.message1)+"。\n              "),r("el-button",{staticClass:"btn_qx",attrs:{type:"primary",plain:""},on:{click:function(e){o.doAction(t.label,t)}}},[o._v(o._s(t.button2))])],1):o._e()])}),o._v(" "),r("div",{staticClass:"btn_content"},[o.flog?r("p",[o._v("所有的基础数据已经维护好了，我们去开一张单吧！\n              "),r("el-button",{staticClass:"btn_kd",attrs:{type:"primary"},on:{click:function(e){o.doAction("order")}}},[o._v("开单")])],1):r("p",[r("el-button",{staticClass:"btn_h",attrs:{type:"primary"}},[o._v("开单")])],1)])],2)]),o._v(" "),o.addDoTotShow?r("NewOrg",{attrs:{orgid:o.otherinfo.orgid,companyId:o.otherinfo.companyId,isModify:!1,popVisible:o.addDoTotVisible,checkSystem:!0},on:{close:o.closeAddDot,success:function(e){o.fetchData("addOrg")}}}):o._e(),o._v(" "),o.addDoTotShow1?r("Newrole",{attrs:{orgid:o.otherinfo.orgid,createrId:o.otherinfo.id,companyId:o.otherinfo.companyId,isModify:!1,popVisible:o.addDoTotVisible1,checkSystem:!0},on:{"update:popVisible":function(e){o.addDoTotVisible1=e},close:o.closeAddDot,success:function(e){o.fetchData("addRole")}}}):o._e(),o._v(" "),o.addDoTotShow2?r("Newuser",{attrs:{orgid:o.otherinfo.orgid,companyId:o.otherinfo.companyId,isModify:!1,popVisible:o.addDoTotVisible2,checkSystem:!0},on:{"update:popVisible":function(e){o.addDoTotVisible2=e},success:function(e){o.fetchData("addUser")}}}):o._e(),o._v(" "),o.addDoTotShow3?r("AddCustomer",{attrs:{issender:!0,orgid:o.otherinfo.orgid,info:o.info,companyId:o.otherinfo.companyId,isModify:!1,popVisible:o.addDoTotVisible3,checkSystem:!0},on:{"update:popVisible":function(e){o.addDoTotVisible3=e},success:function(e){o.fetchData("addReciveCustomer")}}}):o._e(),o._v(" "),o.addDoTotShow4?r("AddCustomer",{attrs:{orgid:o.otherinfo.orgid,info:o.info,companyId:o.otherinfo.companyId,isModify:!1,popVisible:o.addDoTotVisible4,checkSystem:!0},on:{"update:popVisible":function(e){o.addDoTotVisible4=e},success:function(e){o.fetchData("addSendCustomer")}}}):o._e(),o._v(" "),o.addDoTotShow5?r("Newdriver",{attrs:{companyId:o.otherinfo.companyId,orgid:o.otherinfo.orgid,popVisible:o.addDoTotVisible5,checkSystem:!0},on:{"update:popVisible":function(e){o.addDoTotVisible5=e},success:function(e){o.fetchData("addDiver")}}}):o._e(),o._v(" "),o.addDoTotShow6?r("Newtruck",{attrs:{issender:!0,orgid:o.otherinfo.orgid,companyId:o.otherinfo.companyId,isModify:!1,popVisible:o.addDoTotVisible6,checkSystem:!0},on:{"update:popVisible":function(e){o.addDoTotVisible6=e},success:function(e){o.fetchData("addTruck")}}}):o._e(),o._v(" "),o.addDoTotShow7?r("Newcarrier",{attrs:{issender:!0,orgid:o.otherinfo.orgid,companyId:o.otherinfo.companyId,isModify:!1,popVisible:o.addDoTotVisible7,checkSystem:!0},on:{"update:popVisible":function(e){o.addDoTotVisible7=e},success:function(e){o.fetchData("addCarrier")}}}):o._e()],1):r("div",{staticClass:"main_checker"},[r("el-button",{attrs:{type:"primary"},on:{click:o.initSystem}},[o._v("初始化检查")])],1)])],1)},staticRenderFns:[]};t.a=r},rAXf:function(e,t,o){"use strict";t.a={props:{isani:{type:Boolean,default:!1},cancelAni:{type:Boolean,default:!1}},components:{},computed:{},data:function(){return{}},methods:{}}},sNUZ:function(e,t){},ttFD:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=o("m59D"),i=o("ABFs");var a=function(e){o("LaJi")},s=o("VU/8")(r.a,i.a,a,null,null);t.default=s.exports},ttyY:function(e,t){},ubb7:function(e,t,o){"use strict";var r={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("pop-right",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"addCarrierPop",attrs:{title:t.popTitle,isShow:t.popVisible},on:{close:t.closeMe}},[o("template",{staticClass:"addCarrierPop-content",slot:"content"},[o("el-form",{ref:"ruleForm",attrs:{model:t.form,rules:t.rules,"label-width":t.formLabelWidth,inline:!0,"label-position":"right",size:"mini"}},[o("el-form-item",{attrs:{label:"归属网点",prop:"orgid"}},[o("SelectTree",{attrs:{orgid:t.otherinfo.orgid},model:{value:t.form.orgid,callback:function(e){t.$set(t.form,"orgid",e)},expression:"form.orgid"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"承运商编码",prop:"carrierSn"}},[o("el-input",{attrs:{maxlength:11,"auto-complete":"off"},model:{value:t.form.carrierSn,callback:function(e){t.$set(t.form,"carrierSn","string"==typeof e?e.trim():e)},expression:"form.carrierSn"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"承运商",prop:"carrierName"}},[o("el-input",{attrs:{maxlength:20,"auto-complete":"off"},model:{value:t.form.carrierName,callback:function(e){t.$set(t.form,"carrierName","string"==typeof e?e.trim():e)},expression:"form.carrierName"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"承运商电话",prop:"carrierMobile"}},[o("el-input",{attrs:{maxlength:11,"auto-complete":"off"},model:{value:t.form.carrierMobile,callback:function(e){t.$set(t.form,"carrierMobile",e)},expression:"form.carrierMobile"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"负责人",prop:"liableName"}},[o("el-input",{attrs:{maxlength:25,"auto-complete":"off"},model:{value:t.form.liableName,callback:function(e){t.$set(t.form,"liableName",e)},expression:"form.liableName"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"负责人手机",prop:"liablePhone"}},[o("el-input",{directives:[{name:"numberOnly",rawName:"v-numberOnly"}],attrs:{maxlength:11,"auto-complete":"off"},model:{value:t.form.liablePhone,callback:function(e){t.$set(t.form,"liablePhone",e)},expression:"form.liablePhone"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"合同起始日",prop:"contractStarttime"}},[o("el-date-picker",{attrs:{align:"right",type:"date",placeholder:"选择日期","value-format":"timestamp","picker-options":t.pickOption},model:{value:t.form.contractStarttime,callback:function(e){t.$set(t.form,"contractStarttime",e)},expression:"form.contractStarttime"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"合同终止日",prop:"contractEndtime"}},[o("el-date-picker",{attrs:{align:"right",type:"date","picker-options":t.pickOption2,placeholder:"选择日期","value-format":"timestamp"},model:{value:t.form.contractEndtime,callback:function(e){t.$set(t.form,"contractEndtime",e)},expression:"form.contractEndtime"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"客服电话",prop:"customerServicePhone"}},[o("el-input",{directives:[{name:"numberOnly",rawName:"v-numberOnly"}],attrs:{maxlength:11,"auto-complete":"off"},model:{value:t.form.customerServicePhone,callback:function(e){t.$set(t.form,"customerServicePhone",e)},expression:"form.customerServicePhone"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"地址",prop:"carrierAddr"}},[o("el-input",{attrs:{maxlength:50,"auto-complete":"off"},model:{value:t.form.carrierAddr,callback:function(e){t.$set(t.form,"carrierAddr","string"==typeof e?e.trim():e)},expression:"form.carrierAddr"}})],1),t._v(" "),o("el-form-item",{staticClass:"carrierRemarks",attrs:{label:"备注",prop:"carrierRemarks"}},[o("el-input",{attrs:{type:"textarea",maxlength:300},model:{value:t.form.carrierRemarks,callback:function(e){t.$set(t.form,"carrierRemarks",e)},expression:"form.carrierRemarks"}})],1)],1)],1),t._v(" "),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t.isModify?t._e():o("el-button",{attrs:{type:"primary"},on:{click:function(e){t.submitForm("ruleForm",!0)}}},[t._v("保存并添加")]),t._v(" "),o("el-button",{attrs:{type:"primary"},on:{click:function(e){t.submitForm("ruleForm")}}},[t._v("保 存")]),t._v(" "),o("el-button",{on:{click:t.closeMe}},[t._v("取 消")])],1)],2)},staticRenderFns:[]};t.a=r},voDd:function(e,t,o){"use strict";var r=o("woOf"),i=o.n(r),a=o("Dd8w"),s=o.n(a),n=o("E4LH"),l=o("QBRH"),c=o("9ani"),m=o("P5Di"),d=o("QbVN"),f=o("o9X6"),u=o("NYxO"),p=o("9UCZ");t.a={components:{popRight:m.a,Upload:d.a,SelectTree:f.a,SelectType:p.a},props:{popVisible:{type:Boolean,default:!1},orgid:{required:!0},isModify:{type:Boolean,default:!1},info:{type:Object,default:function(){}},truckTypes:{type:Array,default:function(){return[]}},truckSources:{type:Array,default:function(){return[]}}},computed:s()({},Object(u.mapGetters)(["otherinfo"])),data:function(){var t=this,e=function(r,i){return function(e,t,o){r<t?o(new Error(i)):o()}};return{form:{dirverMobile:"",driverId:"",orgid:"",truckBrand:"",truckHeight:"",truckIdNumber:"",truckLength:"",truckLoad:"",truckRegisterDate:"",truckRemarks:"",truckScrapDate:"",truckSource:"",truckType:"",truckUnit:"",truckUnitMobile:"",truckVolume:"",truckWidth:"",drivingLicense:"",operatingLicense:"",vehiclePic:"",frameNum:"",engineNum:""},formLabelWidth:"100px",tooltip:!1,rules:{truckIdNumber:[{required:!0,message:"请输入车牌号码",trigger:"blur"}],orgid:[{required:!0,message:"请选择所属机构"}],driverMobile:[{message:"请输入手机号码",trigger:"blur",pattern:n.a.MOBILE}],truckLoad:[{validator:e(1e5,"不能超过100000千克"),type:"number"}],truckVolume:[{validator:e(1e3,"体积不能超过1000方"),type:"number"}],truckLength:[{validator:e(100,"车长不能超过100米"),type:"number"}],truckHeight:[{validator:e(20,"车高不能超过20米"),type:"number"}],truckWidth:[{validator:e(10,"车宽不能超过10米"),type:"number"}]},popTitle:"新增车辆",orgArr:[],rolesArr:[],departmentArr:[],loading:!1,roles:[],departments:[],groups:[],inited:!1,cacheDriverList:{},DriverList:[],pickOption:{firstDayOfWeek:1,disabledDate:function(e){return!!t.form.truckScrapDate&&e.getTime()>t.form.truckScrapDate}},pickOption2:{firstDayOfWeek:1,disabledDate:function(e){return!!t.form.truckRegisterDate&&e.getTime()<t.form.truckRegisterDate}}}},mounted:function(){this.form.orgid=this.otherinfo.orgid,this.inited||(this.inited=!0,this.initInfo(),this.getDriverPhone()),this.isModify&&this.initPanel()},watch:{popVisible:function(e,t){this.inited||(this.inited=!0,this.initInfo(),this.getDriverPhone())},orgid:function(e,t){this.form.orgid=e},info:{handler:function(){this.initPanel()},deep:!0}},activated:function(){this.initDriverList()},methods:{initDriverList:function(){this.DriverList=this.$options.data().DriverList,this.cacheDriverList=[],this.getTreeOrgid(this.orgid)},getDriverPhone:function(t){var e=this.DriverList.filter(function(e){return e.id===t});e[0]&&(this.form.dirverMobile=e[0].driverMobile)},initPanel:function(){if(this.isModify){this.popTitle="修改车辆";var e=i()({},this.info);for(var t in this.form)this.form[t]=e[t];this.form.truckRegisterDate&&(this.form.truckRegisterDate=+new Date(this.form.truckRegisterDate)),this.form.truckScrapDate&&(this.form.truckScrapDate=+new Date(this.form.truckScrapDate)),this.form.truckId=e.truckId}else{for(var o in this.popTitle="新增车辆",this.form)this.form[o]=(this.form[o],"");delete this.form.truckId,this.form.orgid=this.orgid,this.form.truckSource=143}},getTreeOrgid:function(e){this.getDriverList(e)},initInfo:function(){this.loading=!1,this.getTreeOrgid(this.orgid)},getOrgid:function(e){this.form.orgid=e},submitForm:function(e,o){var r=this;this.$refs[e].validate(function(e){if(!e)return!1;r.loading=!0;var t=i()({},r.form);(r.isModify?Object(l.f)(t):Object(l.e)(t)).then(function(e){r.loading=!1,r.$message.success("保存成功"),r.reset(),o||r.closeMe(),r.$emit("success")}).catch(function(e){r._handlerCatchMsg(e),r.loading=!1})})},reset:function(){var e=this.form.orgid;this.$refs.ruleForm.resetFields(),this.form.orgid=e,this.form.drivingLicense="",this.form.operatingLicense="",this.form.vehiclePic=""},closeMe:function(e){this.reset(),this.$emit("update:popVisible",!1),"function"==typeof e&&e()},getDriverList:function(t){var o=this;this.cacheDriverList[t]?this.DriverList=this.cacheDriverList[t]:(this.loading=!0,Object(c.b)({currentPage:1,pageSize:200,vo:{orgid:t}}).then(function(e){o.DriverList=e.list,o.cacheDriverList[t]=e.list,o.loading=!1}).catch(function(e){o.loading=!1,o._handlerCatchMsg(e)}))}}}},vzGk:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAACL0lEQVQ4T6WTP0xTURTGv3NuXxX0vSqDmxsxQQY1RjSR1nQwBgeNg4MSiS0kuuDgwkBMjEYGYkwMCybaAoZFF2EyBgdeUyQYXdT4Z/DPpMGl71GgvL57jymCsbQmJN7t3nPuL9937ncJ/7mo3v1jWT8ukEEAR9bqsyDucy/a7sb+aoAIxUe8exC0EasrJZJ3umSHjVZxP6DvgjCX+xa7jOtk1kFVgPasf5XEdBShzm+HHgD4J8hEBPxjObCHtkX95xCadNPO7bqARLbwucR8aKs2A2FEXZvpsufXGyu2QoN5RWbKTe/YXQNoH/X3sJbxgKJnLQnO6AiPq1DPgagBwkli6SiHMmEpeVwGn3uRcj5UIH8stI8UDrJBvxY1pEjvAkNE6DAJlsH4BCMrYPVdjO5losHpVOxlNWC8sJMCml0KnAMArMao3yGgfQxZEVl9jZJh7ldGP1wsx5KvLpFXBahsElnvmQCZ3wXpM+CnLOarAE0A7QUkXrFkjNOc76aFWsDYQouEZgqEIgShEE0abQ2HVrlohXYA9lsV0Eug4emUk6sBVA7io14bDJ4sBU5zo7VwPJd2Jv4OTyLjjQo4k0vb03UBq5CMdwdAIZeO3diYvHjWGyPi++uprBvlow/EZvLeUGRL0u1q+FKtoPAaEdXpdtnv/6lgbaAnAbkVanVhpsd+2/pIok1F7yYRnXJTsZa6SayRm/FPE5lOAU4AZEOQN0I9+W7n46YAm/npvwB8uekRXlNOoQAAAABJRU5ErkJggg=="},wO8r:function(e,t,o){"use strict";var r=o("mvHQ"),a=o.n(r),i=o("//Fk"),s=o.n(i),n=o("woOf"),l=o.n(n),c=o("Dd8w"),m=o.n(c),d=o("E4LH"),f=o("u8ra"),u=o("P5Di"),p=o("o9X6"),h=o("NYxO"),b=o("9UCZ"),v=o("pAQG");t.a={components:{popRight:u.a,SelectTree:p.a,SelectType:b.a,querySelect:v.a},props:{popVisible:{type:Boolean,default:!1},orgid:{required:!0},isModify:{type:Boolean,default:!1},userInfo:{type:Object,default:function(){}}},computed:m()({},Object(h.mapGetters)(["otherinfo"])),data:function(){return{querykey:"11",form:{name:"",mobilephone:"",username:"",password:"123456",position:"",sexFlag:"",orgid:"",rolesId:[],departmentId:""},formLabelWidth:"80px",tooltip:!1,rules:{name:[{required:!0,message:"请输入用户姓名"},{min:2,max:10,message:"长度在 2 到 10 个字符",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"change"},{min:6,max:15,message:"长度在 6 到 15 个字符",trigger:"change"}],mobilephone:[{required:!0,trigger:"change",validator:function(e,t,o){""!==t&&null!==t&&t&&void 0!==t?d.a.MOBILE.test(t)?o():o(new Error("请输入有效的手机号码")):o(new Error("不能为空"))}}],orgid:[{required:!0,message:"请选择归属网点"}],username:[{required:!0,message:"请输入有效的登录账号",pattern:d.a.USERNAME_NOUP},{max:30,message:"不能超过30个字符",trigger:"change"}],position:[{max:10,message:"不能超过10个字符",trigger:"blur"}]},popTitle:"新增员工",orgArr:[],rolesArr:[],departmentArr:[],loading:!1,roles:[],departments:[],groups:[],inited:!1,query:"",roleslist:[]}},mounted:function(){this.form.orgid=this.orgid,console.log("orgid2222::::::",this.orgid)},watch:{popVisible:function(e,t){this.initInfo()},orgid:function(e){console.log("orgid::::::",e),this.form.orgid=e},userInfo:function(){var e=this;if(this.isModify){this.popTitle="修改员工";l()({},this.userInfo);for(var t in this.form)this.form[t]=this.userInfo[t];this.form.rolesId="0"===this.userInfo.rolesId?[]:this.userInfo.rolesIdList,this.form.password=""}else{for(var o in this.popTitle="新增员工",this.form)this.form[o]="password"===o?"123456":"rolesId"===o?[]:"";this.$nextTick(function(){console.log("orgid333333",e.orgid),e.form.orgid=e.orgid})}},"form.username":function(e){e&&this.$refs.ruleForm.validate(function(e){})},"form.password":function(e){e&&this.$refs.ruleForm.validate(function(e){})}},methods:{highLight:function(e,t){return""!==this.query?this.setHightLight(e[t],this.query):e[t]},setHightLight:function(e,t){return e.replace(new RegExp(t,"igm"),'<i class="highlight">'+t+"</i>")},makefilter:function(e){this.query=e;var t=new RegExp(e,"i");this.roleslist=this.roles.filter(function(e){return t.test(e.roleName)})},initInfo:function(){var t=this;return this.loading=!0,s.a.all([Object(f.e)(this.otherinfo.companyId),Object(f.f)(this.otherinfo.companyId)]).then(function(e){t.loading=!1,t.roles=e[0].list,t.roleslist=t.roles,t.departments=e[1]}).catch(function(e){t.$message.error("错误1："+(e.text||e.errInfo||e.data||a()(e))),t.loading=!1,t.inited=!1})},getOrgid:function(e){this.form.orgid=e},reset:function(){var e=this.form.orgid;this.$refs.ruleForm.resetFields(),console.log("id",e,this.form.orgid),this.form.orgid=e},submitForm:function(e,r){var i=this;this.$refs[e].validate(function(e){if(!e)return!1;i.loading=!0;var t=l()({},i.form),o=void 0;t.rolesId=t.rolesId.join(","),i.isModify?(t.id=i.userInfo.id,o=Object(f.k)(t)):o=Object(f.j)(t),o.then(function(e){i.loading=!1,i.$message({type:"success",message:"保存成功!"}),i.reset(),r||i.closeMe(),i.$emit("success")}).catch(function(e){i.$message.error("错误2："+(e.text||e.errInfo||e.data||a()(e))),i.loading=!1})})},closeMe:function(e){this.reset(),this.$emit("update:popVisible",!1),"function"==typeof e&&e()}}}},whtI:function(e,t){},xbwg:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=o("XCyX"),i=o("f/K7");var a=function(e){o("0Qo4")},s=o("VU/8")(r.a,i.a,a,null,null);t.default=s.exports}});