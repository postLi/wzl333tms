webpackJsonp([253,327],{"0pok":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("8IDh"),r=i("u+kQ"),s=i("VU/8")(a.a,r.a,null,null,null);t.default=s.exports},"8IDh":function(e,t,i){"use strict";var a=i("sm+L");t.a={name:"trucklog",components:{TruckMap:a.default},props:{isShow:{type:Boolean,default:!1}},data:function(){return{component:"TruckMap"}}}},BxPv:function(e,t,i){"use strict";var a={render:function(){var a=this,e=a.$createElement,r=a._self._c||e;return r("div",{directives:[{name:"loading",rawName:"v-loading",value:a.loading,expression:"loading"}],staticClass:"orderinfo-manager truck-page-log heightvhPoptree"},[r("transition",{attrs:{name:"el-zoom-in-bottom"}},[a.activeTruckItem.length?r("div",{staticClass:"truck-log-info"},[r("div",{staticClass:"info-btns"},[r("el-button",{attrs:{size:a.btnsize,type:"primary",icon:"el-icon-document"},on:{click:a.exportData}},[a._v("导出EXCEL")]),a._v(" "),r("el-button",{attrs:{size:a.btnsize,type:"warning",icon:"el-icon-rank"},on:{click:function(e){a.tableStyle=!a.tableStyle}}},[a._v("缩放")]),a._v(" "),r("el-button",{staticClass:"btnsright",attrs:{size:a.btnsize,type:"info",icon:"el-icon-close"},on:{click:function(e){a.activeTruckItem=[]}}},[a._v("关闭")])],1),a._v(" "),r("div",{staticClass:"info_tab"},[r("el-table",{key:a.tablekey,ref:"multipleTable",style:a.tableStyle?"width:100%;":"width: 390px;",attrs:{data:a.dataList,stripe:"",border:"",height:"100%","tooltip-effect":"dark","row-class-name":a.classLineRed}},[a._l(a.tableColumn,function(i){return[i.slot?r("el-table-column",{key:i.id,attrs:{fixed:i.fixed,label:i.label,width:i.width},scopedSlots:a._u([{key:"default",fn:function(t){return[i.click?r("span",{staticClass:"clickitem",domProps:{innerHTML:a._s(i.slot(t))},on:{click:function(e){e.stopPropagation(),i.click(t)}}}):r("span",{domProps:{innerHTML:a._s(i.slot(t))}})]}}])}):r("el-table-column",{key:i.id,attrs:{fixed:i.fixed,label:i.label,prop:i.prop,width:i.width}})]})],2)],1),a._v(" "),r("div",{staticClass:"table-contr"}),a._v(" "),r("div",{staticClass:"info_tab_footer"},[a._v("\n        共计:"+a._s(a.total)+"\n        "),r("div",{staticClass:"show_pager"},[r("Pager",{attrs:{total:a.total,btnsize:"mini"},on:{change:a.handlePageChange}})],1)])]):a._e()]),a._v(" "),r("div",{attrs:{id:"trucklogmap"}},[a.isTimer?r("div",{staticClass:"popTimer"},[r("el-button",{attrs:{size:"mini",type:"warning",icon:a.isTimerOpen?"":"el-icon-time"},on:{click:a.timerCon}},[a._v(a._s(a.isTimerOpen?"关闭":"开启")+"自动刷新")]),a._v(" "),a.isTimerOpen?r("span",[r("i",{staticClass:"el-icon-time"}),a._v(" "+a._s(a.timer)+"秒后刷新轨迹")]):a._e()],1):a._e()]),a._v(" "),r("div",{staticClass:"search-card"},[r("el-tabs",{attrs:{type:"border-card"},on:{"tab-click":a.handleSearchView},model:{value:a.activeName,callback:function(e){a.activeName=e},expression:"activeName"}},[r("el-tab-pane",{attrs:{label:"运单跟踪",name:"1"}},[r("transition",{attrs:{name:"el-zoom-in-center"}},[a.showSearchCard&&!a.isAllTable?r("el-form",{ref:"form",attrs:{size:"mini",model:a.searchQuery,"label-width":"65px"}},[r("el-form-item",{attrs:{label:"运单查询"}},[r("querySelect",{attrs:{size:a.btnsize,placeholder:"请输入运单号",search:"shipSn",type:"order"},on:{change:a.getShipSn},model:{value:a.searchShipSn,callback:function(e){a.searchShipSn=e},expression:"searchShipSn"}})],1),a._v(" "),r("el-form-item",{attrs:{label:"开始时间"}},[r("el-date-picker",{attrs:{type:"datetime",align:"right","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"开始日期","picker-options":a.pickerOptionsSimple},model:{value:a.searchQuery.vo.startTime,callback:function(e){a.$set(a.searchQuery.vo,"startTime",e)},expression:"searchQuery.vo.startTime"}})],1),a._v(" "),r("el-form-item",{attrs:{label:"结束时间"}},[r("el-date-picker",{attrs:{type:"datetime",align:"right","value-format":"yyyy-MM-dd HH:mm:ss","picker-options":a.pickerOptionsSimple,placeholder:"结束日期"},model:{value:a.searchQuery.vo.endTime,callback:function(e){a.$set(a.searchQuery.vo,"endTime",e)},expression:"searchQuery.vo.endTime"}})],1),a._v(" "),r("el-form-item",{staticClass:"staff_searchinfo--btn"},[r("el-button",{attrs:{type:"primary",icon:"el-icon-search",loading:a.loadSearch},on:{click:function(e){a.onSubmit("line")}}},[a._v("查询轨迹")]),a._v(" "),r("el-button",{attrs:{type:"warning",icon:"el-icon-search",loading:a.loadSearch},on:{click:function(e){a.onSubmit("location")}}},[a._v("查询当前定位")])],1)],1):a._e()],1)],1),a._v(" "),r("el-tab-pane",{attrs:{label:"车辆跟踪",name:"2"}},[r("transition",{attrs:{name:"el-zoom-in-center"}},[a.showSearchCard&&!a.isAllTable?r("el-form",{ref:"form",attrs:{size:"mini",model:a.searchQuery,"label-width":"65px"}},[r("el-form-item",{attrs:{label:"选择车辆"}},[r("el-select",{attrs:{filterable:"",placeholder:"请输入车牌号",maxlength:"8",clearable:""},model:{value:a.searchQuery.vo.truckIdNumber,callback:function(e){a.$set(a.searchQuery.vo,"truckIdNumber",e)},expression:"searchQuery.vo.truckIdNumber"}},a._l(a.TruckList,function(e,t){return r("el-option",{key:t,attrs:{label:e.truckIdNumber,value:e.truckIdNumber}})}))],1),a._v(" "),r("el-form-item",{attrs:{label:"开始时间"}},[r("el-date-picker",{attrs:{type:"datetime",align:"right","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"开始日期","picker-options":a.pickerOptionsSimple},model:{value:a.searchQuery.vo.startTime,callback:function(e){a.$set(a.searchQuery.vo,"startTime",e)},expression:"searchQuery.vo.startTime"}})],1),a._v(" "),r("el-form-item",{attrs:{label:"结束时间"}},[r("el-date-picker",{attrs:{type:"datetime",align:"right","value-format":"yyyy-MM-dd HH:mm:ss","picker-options":a.pickerOptionsSimple,placeholder:"结束日期"},model:{value:a.searchQuery.vo.endTime,callback:function(e){a.$set(a.searchQuery.vo,"endTime",e)},expression:"searchQuery.vo.endTime"}})],1),a._v(" "),r("el-form-item",{staticClass:"staff_searchinfo--btn"},[r("el-button",{attrs:{type:"primary",icon:"el-icon-search",loading:a.loadSearch},on:{click:function(e){a.onSubmit("line")}}},[a._v("查询轨迹")]),a._v(" "),r("el-button",{attrs:{type:"warning",icon:"el-icon-search",loading:a.loadSearch},on:{click:function(e){a.onSubmit("location")}}},[a._v("查询当前定位")])],1)],1):a._e()],1)],1)],1),a._v(" "),r("transition",{attrs:{name:"el-zoom-in-top"}},[a.popTreeVisible?r("el-card",{directives:[{name:"show",rawName:"v-show",value:!a.isAllTable,expression:"!isAllTable"}],staticClass:"popTree"},[r("div",{staticClass:"popTree-group"},a._l(a.realTimeTrucks,function(t,i){return r("div",{staticClass:"popTree-group-item",class:a.activeTruckItem[i]?"activeItem":"",on:{click:function(e){a.selectGroup(t,i)}}},[r("h3",[r("el-tag",{attrs:{type:0===i?"danger":1===i?"warning":2===i?"success":"primary",size:a.btnsize}},[a._v(a._s(i+1))]),a._v(" "+a._s(t.truckIdNumber)+" \n                "),r("i",[a._v(a._s(t.truckLength?t.truckLength+"米":""))]),a._v(" "),r("i",[a._v(a._s(t.truckTypeName||""))])],1),a._v(" "),r("div",{staticClass:"popTree-group-item-desc"},[r("h4",[a._v(a._s(t.orgName))]),a._v(" "),r("div",[r("i",{staticClass:"el-icon-mobile-phone"}),a._v(" "),t.driverName||t.dirverName?r("span",[a._v("\n                    "+a._s(t.dirverName||"")+" "+a._s(t.dirverMobile||"")+"\n                 ")]):r("span",[a._v("暂无关联司机")])])])])}))]):a._e()],1)],1),a._v(" "),r("div",{staticClass:"truck-log-expand"},[r("transition",{attrs:{name:"el-zoom-in-center"}},[r("div",{staticClass:"control-panel"},[r("el-button",{attrs:{size:a.btnsize,type:"text",icon:"el-icon-caret-right",title:"播放"},on:{click:function(e){a.doLine("start")}}}),a._v(" "),r("el-button",{attrs:{size:a.btnsize,type:"text",icon:"el-icon-refresh",title:"恢复"},on:{click:function(e){a.doLine("resume")}}}),a._v(" "),r("el-button",{staticClass:"btn-stop",attrs:{size:a.btnsize,type:"text",title:"暂停"},on:{click:function(e){a.doLine("pause")}}}),a._v(" "),r("el-button",{attrs:{size:a.btnsize,type:"text",icon:"el-icon-close",title:"清空"},on:{click:function(e){a.doLine("destroy")}}}),a._v(" "),r("span",{staticClass:"speed-sudu"},[a._v("速度:")]),r("i",{staticClass:"speed-slow"},[a._v("慢 ")]),a._v(" "),r("el-slider",{staticClass:"slider-step",attrs:{min:1e3,max:1e6},model:{value:a.speedSlider,callback:function(e){a.speedSlider=e},expression:"speedSlider"}}),a._v(" "),r("i",{staticClass:"speed-quick"},[a._v("快 ")]),a._v(" "),r("el-progress",{attrs:{"text-inside":!0,"stroke-width":18,percentage:a.progressPercentage,status:"success"}})],1)])],1)],1)},staticRenderFns:[]};t.a=a},sBKc:function(e,t,i){"use strict";i("OHys");var s=i("0xDb"),a=i("1onU"),n=i("YMLJ"),r=i("UQm2"),o=i("pAQG"),l=i("QBRH");t.a={components:{Pager:a.a,querySelect:o.a},props:{orderid:[String,Number],orderdata:[Object]},data:function(){return{activeName:"1",realTimeLocateList:[],tableStyle:!1,activeTruckItem:[],showDataList:[],dataList:[],truckInfoList:[],truckCollapse:1,searchShipSn:"",isTimerOpen:!0,loadSearch:!1,isAllTable:!1,showSearchCard:!0,isShowInlineOrderMap:!0,speedSlider:520130,popTreeVisible:!1,gridData:[],tablekey:0,loading:!1,noinfo:!0,dialogTableVisible:!1,thepos:"",thename:"",theobj:{},btnsize:"mini",pickerOptionsSimple:{shortcuts:s.pickerOptionsSimple},groupList:[],tableColumn:[{label:"序号",prop:"number",width:"50",fixed:!0},{label:"车辆定位时间",prop:"time",width:"160"},{label:"速度 km/h",prop:"speed",width:"90"},{label:"方向",prop:"direction",width:"80"},{label:"部件状态",prop:"status",width:"90",slot:function(e){return" - "}},{label:"里程 km",prop:"li",width:"80",slot:function(e){return" - "}},{label:"海拔 m",prop:"altitude",width:"80"},{label:"车牌号码",prop:"truckIdNumber",width:"100"},{label:"司机名称",prop:"dirverName"}],total:0,searchQuery:{currentPage:1,pageSize:100,vo:{truckIdNumber:"",startTime:Object(s.parseTime)(new Date-2592e5),endTime:Object(s.parseTime)(new Date),shipId:""}},timer:60,isTimer:!0,pathSimplifierIns:{},map:{},allPathData:[],imgurl:i("slEn"),initedPath:!1,orgPageDataList:[],orgDataList:[],allList:[],markers:[],pathNavigs:[],comDis:!1,totalPageSize:0,progressPercentage:0,curCursor:{},TruckList:[],realTimeTrucks:[],org_order_realTimeTrucks:[],org_truck_realTimeTrucks:[],lineColor:["#3366cc","#329262","#ff9900","#109618","#990099","#0099c6","#dd4477","#66aa00","#b82e2e","#316395","#994499","#22aa99","#aaaa11","#6633cc","#e67300","#8b0707","#651067","#dc3912","#5574a6","#3b3eac","#409eff","#008000","#40E0D0","#22aa99","#9400D3","#FFC0CB","#0000FF","#FFA500","#B22222","#808080","#00FFFF","#8A2BE2","#5F9EA0","#7FFF00","#DAA520"]}},watch:{orderid:function(e){},orderdata:{handler:function(){this.init(333)},deep:!0},speedSlider:function(i){i&&this.pathNavigs.length&&this.pathNavigs.forEach(function(e,t){e&&e.setSpeed(i)})},$route:{handler:function(e,t){this.isTimer&&window.AMapUI&&(e.fullPath&&-1!==e.fullPath.indexOf("/operation/order/orderDetail?orderid=")||(this.isTimerOpen=!1,clearInterval(this.timerOption)))},immediate:!0},curCursor:{handler:function(e,t){if(e)if(this.pathNavigs[0]){var i=e.idx,a=this.allPathData[0].path.length,r=Math.floor(i/a*100),s=Math.floor(i/this.searchQuery.pageSize);this.progressPercentage=this.comDis?100:0<=r?r:0,this.searchQuery.currentPage=this.pathNavigs[0]?s:0,this.dataList=this.orgPageDataList[this.searchQuery.currentPage]}else this.progressPercentage=0;else this.progressPercentage=0},deep:!0},activeTruckItem:{handler:function(e,t){e&&e.length&&this.initLine()},immediate:!0}},mounted:function(){console.log("测试车辆：陕YH0009");var t=this;window.loadedGaodeMap=function(){var e=this;Object(s.loadJs)("//webapi.amap.com/ui/1.0/main.js").then(function(){t.initMap(),t.hasLoadedMap=!0,t.getPathSimplifierIns(),console.log("window.AMap",window.AMap),console.log("window.AMapUI",window.AMapUI),console.log("this.map",e.map)})},this.init(2222),this.fetchTruck()},destoryed:function(){this.exit(),clearInterval(this.timerOption)},methods:{getShipSn:function(e){console.log("运单选择item",e),this.searchQuery.vo.shipId=e.id,this.searchShipSn=e.shipSn},classLineRed:function(e){if(this.allPathData.length)return e.row.number===this.curCursor.idx?"rowSelect":""},timerCon:function(){this.isTimerOpen?(this.isTimerOpen=!1,clearInterval(this.timerOption)):this.initTimer()},initTimer:function(){if(clearInterval(this.timerOption),this.isTimer){var e=this;e.isTimerOpen=!0,e.timer=e.$options.data().timer,this.timerOption=setInterval(function(){e.timer=e.timer-1,e.timer<=0&&(e.onSubmit(),e.timer=e.$options.data().timer)},1e3)}},handleSearchView:function(){var e=this;this.isShowInlineOrderMap?(this.org_order_realTimeTrucks=Object(s.objectMerge2)([],this.realTimeTrucks),this.realTimeTrucks=Object(s.objectMerge2)([],this.org_truck_realTimeTrucks)):(this.org_truck_realTimeTrucks=Object(s.objectMerge2)([],this.realTimeTrucks),this.realTimeTrucks=Object(s.objectMerge2)([],this.org_order_realTimeTrucks),this.fetchTruck()),this.isShowInlineOrderMap=!this.isShowInlineOrderMap,this.showSearchCard=!1,setTimeout(function(){e.showSearchCard=!0},300)},handlePageChange:function(e){console.log("handlePageChange",e);var t=e.pageSize!==this.searchQuery.pageSize;this.searchQuery.currentPage=e.pageNum,this.searchQuery.pageSize=e.pageSize,t?this.setPage():(this.tablekey=(new Date).getTime(),this.dataList=this.orgPageDataList[this.searchQuery.currentPage-1])},handleTruck:function(){this.popTreeVisible=!this.popTreeVisible,this.fetchTruck()},fetchTruck:function(){var t=this,e={currentPage:1,pageSize:100,vo:{orgid:this.otherinfo.orgid,truckIdNumber:"",truckSource:""}};Object(l.b)(e).then(function(e){t.TruckList=e.list}).catch(function(e){t._handlerCatchMsg(e)})},showPopTrucktree:function(){var e=this;this.showDataList=!1,this.popTreeVisible=!1,setTimeout(function(){e.popTreeVisible=!0},300)},selectGroup:function(e,t){this.showDataList=[],this.searchQuery.currentPage=1,this.searchQuery.pageSize=this.$options.data().searchQuery.pageSize,console.log("选中的车：：",t,e.truckIdNumber,e.longitude,e.latitude,e),this.activeTruckItem[t]?this.activeTruckItem=[]:(this.activeTruckItem=[],this.$set(this.searchQuery.vo,"truckIdNumber",e.truckIdNumber),this.showDataList=Object(s.objectMerge2)([],e.trajectoryList),this.activeTruckItem[t]=!0,this.setPage()),this.initLine()},setPage:function(){var a=this;this.total=this.showDataList.length||0,this.totalPageSize=Math.floor(this.total/this.searchQuery.pageSize)+1;for(var e=0;e<this.totalPageSize;e++)this.orgPageDataList[e]=[];this.showDataList.forEach(function(e,t){var i=Math.floor(t/a.searchQuery.pageSize);a.orgPageDataList[i].push(e)}),this.dataList=this.orgPageDataList[this.searchQuery.currentPage-1]},validateForm:function(e){var t=!0;return"location"!==e&&(this.searchQuery.vo.startTime&&this.searchQuery.vo.shipId||(this.$message.warning("请选择开始时间和结束时间~"),t=!1)),this.isShowInlineOrderMap?(this.searchShipSn&&!this.searchQuery.vo.shipId&&(this.$message.warning("请输入运单号后下拉选择运单！"),t=!1),this.searchQuery.vo.shipId||(this.$message.warning("请选择运单号~"),t=!1)):this.searchQuery.vo.truckIdNumber||(this.$message.warning("请选择车牌号~"),t=!1),t},onSubmit:function(e){var i=this,r=this;if(r.loadSearch=!0,!this.validateForm(e))return r.loadSearch=!1;r.progressPercentage=0,r.pathNavigs=[],r.activeTruckItem=[],r.realTimeTrucks=[],clearInterval(r.timerOption),window.pathSimplifierIns&&window.pathSimplifierIns.setData([]);var t=r.isShowInlineOrderMap?n.f:n.g,a=Object(s.objectMerge2)({},r.searchQuery.vo);r.isShowInlineOrderMap?delete a.truckIdNumber:delete a.shipId,"location"===e?(a&&this.getRealTimeLocate(r.isShowInlineOrderMap?"order":"truck"),r.loadSearch=!1):a?t(a).then(function(e){var t;r.initTimer(),e&&0<e.length?((t=e)&&(r.orgDataList=[],r.dataList=[],r.realTimeTrucks=[],t&&t.length&&(r.showPopTrucktree(),r.realTimeTrucks=Object(s.objectMerge2)([],t),t.forEach(function(i,e){var a=[];i.trajectoryList.forEach(function(e,t){e.dirverMobile=i.dirverMobile,e.dirverName=i.dirverName,e.truckIdNumber=i.truckIdNumber,e.number=t+1,r.orgDataList[t]=e,a[t]=e}),r.allList[e]=a,r.realTimeTrucks[e].trajectoryList=Object(s.objectMerge2)([],a),r.realTimeTrucks[e]._index=e,console.log("allList",r.allList),console.log("realTimeTrucks",r.realTimeTrucks)}))),r.initLine()):i.$message.warning("暂无轨迹跟踪数据！"),r.loadSearch=!1}).catch(function(e){r.loadSearch=!1,i._handlerCatchMsg(e)}):(this.$message.warning("请输入查询参数~"),r.loadSearch=!1)},getRealTimeLocate:function(e){var t=this,i="order"===e,a=i?n.c:n.b,r=i?this.searchShipSn:this.searchQuery.vo.truckIdNumber;r&&a(i?{shipSn:r}:{truckIdNumber:r}).then(function(e){e&&0<e.length?(i?t.realTimeLocateList=e:(t.realTimeLocateList=[],t.realTimeLocateList.push(e)),t.loadSearch=!1,t.tomap()):t.$message.warning("暂无车辆定位数据！")}).catch(function(e){t._handlerCatchMsg(e)})},tomap:function(){var i=this,a=window.AMap,r=(window.AMapUI,this.map);r.remove(this.markers);var s=[],n=void 0;this.markers=[],this.realTimeLocateList.length&&(this.realTimeLocateList.forEach(function(e,t){null!==e.longitude&&null!==e.latitude&&(s[t]=[e.longitude,e.latitude],(n=new a.Marker({map:r,position:s[t]})).setLabel({offset:new a.Pixel(20,20),content:'<div class="markerContent"><h3>'+e.truckIdNumber+" <i>"+e.speed+"km/h</i></h3><p>"+e.dirverName+" <i>"+e.dirverMobile+"</i></p><p>"+(e.address||"")+"</p></div>"}),i.markers.push(n),r.setFitView())}),console.log("实时车辆定位：：",this.realTimeLocateList,s,this.map))},exportData:function(){Object(r.g)({data:this.orgDataList,columns:this.tableColumn,name:"轨迹详情"+Object(s.parseTime)(new Date,"{y}{m}{d}{h}{i}{s}")})},getPathSimplifierIns:function(){console.log("初始化轨迹配置信息");var i=this,e=window.AMapUI,a=i.map;e.load(["ui/misc/PathSimplifier"],function(e){if(e.supportCanvas){var r=i.lineColor,t=new e({zIndex:100,setFitView:-1,map:a,getPath:function(e,t){return e.path},getHoverTitle:function(e,t,i){return 0<=i?e.name+"，点:"+i+"/"+e.path.length:e.name+"，点数量"+e.path.length},renderOptions:{pathLineStyle:{dirArrowStyle:!0},getPathStyle:function(e,t){var i=r[e.pathIndex],a=Math.round(4*Math.pow(1.1,t-3));return{pathLineStyle:{strokeStyle:i,lineWidth:a},pathLineSelectedStyle:{lineWidth:a+2},pathNavigatorStyle:{fillStyle:i}}},startPointStyle:{radius:6,fillStyle:"#109618",lineWidth:1,strokeStyle:"#eeeeee"},endPointStyle:{radius:6,fillStyle:"#dc3912",lineWidth:1,strokeStyle:"#eeeeee"}}});window.PathSimplifier=e,window.pathSimplifierIns=t}else alert("当前环境不支持 Canvas！")})},getNavg:function(i,e){var a=this,t=(window.AMap,window.AMapUI,a.map,window.pathSimplifierIns);if(!a.pathNavigs[i]){var r=t.createPathNavigator(i,{loop:!1,speed:a.speedSlider,pathNavigatorStyle:{width:24,height:24,content:PathSimplifier.Render.Canvas.getImageContent(a.imgurl,function(){t.renderLater()},function(e){a.$message.info("巡航器图片加载失败！")})}});r.onDestroy(function(){a.pathNavigs[i]=null}),r.on("start resume",function(){r._startTime=Date.now(),r._startDist=this.getMovedDistance()}),r.on("stop pause",function(){r._movedTime=Date.now()-r._startTime,r._movedDist=this.getMovedDistance()-r._startDist,r._realSpeed=r._movedDist/r._movedTime*3600;var e=Math.round(this.getMovedDistance()/1e3)||0,t=Math.round(r._movedDist/1e3)||0;this.getNaviStatus(),this.getSpeed(),r._movedTime,Math.round(r._realSpeed);this.comDis=e===t,a.refreshNavgButtons(i)}),r.on("move",function(){this.getNaviStatus(),this.getSpeed(),Math.round(this.getMovedDistance()/1e3);a.allPathData&&1===a.allPathData.length&&(a.curCursor=r.getCursor())}),a.pathNavigs[i]=r}return a.pathNavigs[i]},setDataLine:function(){var s=this,n=[];return this.allList.forEach(function(e,t){if(e.length){var a={name:"",path:[]};if(s.activeTruckItem&&s.activeTruckItem.length){var i=0;for(var r in s.activeTruckItem)i=Number(r);t===i&&(e.forEach(function(e,t){var i=[Number(e.longitude),Number(e.latitude)];a.name=e.truckIdNumber,a.path.push(i)}),n.push(a))}else e.forEach(function(e,t){var i=[Number(e.longitude),Number(e.latitude)];a.name=e.truckIdNumber,a.path.push(i)}),n.push(a)}}),this.allPathData=n},initLine:function(){var i=this;if(window.pathSimplifierIns){this.map.remove(this.markers);var e=window.pathSimplifierIns,t=this.setDataLine();e.setData(this.setDataLine()),t.forEach(function(e,t){i.getNavg(t,e)})}else this.initedPath||(this.getPathSimplifierIns(),this.initedPath=!0)},doLine:function(i){var a=this;if(window.pathSimplifierIns){/(start|resume|pause)/.test(i)?(clearInterval(this.timerOption),this.isTimerOpen=!1):this.initTimer();window.pathSimplifierIns;this.allPathData.forEach(function(e,t){a.getNavg(t,e)[i](),a.refreshNavgButtons(t)})}else this.initedPath||(this.getPathSimplifierIns(),this.initedPath=!0)},refreshNavgButtons:function(e){if(!(e<0)){var t=!!this.pathNavigs[e],i=this.pathNavigs[e];t&&i.getNaviStatus()}},refreshNavg:function(){this.searchQuery.currentPage=1,this.dataList=this.orgPageDataList[this.searchQuery.currentPage-1]},exit:function(){this.map&&this.map.destroy&&"function"==typeof this.map.destroy&&(this.map.destroy(),this.map={}),this.thepos="",this.thename="",this.theobj={},this.noinfo=!0},init:function(){this.dialogTableVisible=this.popVisible,this.loadMap(),this.popVisible?(this.thepos=this.pos,this.thename=this.name):this.exit()},loadMap:function(){var e=this;window.AMap?setTimeout(function(){e.initMap(),e.getPathSimplifierIns()},500):Object(s.loadJs)("https://webapi.amap.com/maps?v=1.4.8&key=e61aa7ddc6349acdb3b57c062080f730&plugin=AMap.Autocomplete,AMap.PlaceSearch,AMap.Geocoder&callback=loadedGaodeMap").then(function(){})},close:function(e){this.exit(),this.$emit("update:popVisible",!1),"function"==typeof e&&e()},initMap:function(){var e=window.AMap;window.AMapUI;this.map=new e.Map("trucklogmap",{resizeEnable:!0,zoom:6})},setData:function(e,t,i){this.thepos=e,this.thename=t,this.theobj=i,this.noinfo=!1,console.log(i)},clipboardSuccess:function(){this.$message({message:"复制成功",type:"success",duration:1500})}}}},"sm+L":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("sBKc"),r=i("BxPv"),s=i("VU/8")(a.a,r.a,null,null,null);t.default=s.exports},"u+kQ":function(e,t,i){"use strict";var a={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"tab-wrapper"},[t("keep-alive",[t(this.component,{tag:"component"})],1)],1)},staticRenderFns:[]};t.a=a}});