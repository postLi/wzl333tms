webpackJsonp([292],{"H+dw":function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var o=e("I2xr"),a=e("Ni/G");var n=function(t){e("QsY5")},s=e("VU/8")(o.a,a.a,n,null,null);i.default=s.exports},I2xr:function(t,i,e){"use strict";var o=e("Dd8w"),a=e.n(o),n=e("E4LH"),s=e("xAap"),r=e("P5Di"),c=e("QbVN"),l=e("o9X6"),f=e("9UCZ"),m=e("66wn"),u=e("pAQG"),d=e("NYxO");i.a={components:{popRight:r.a,Upload:c.a,querySelect:u.a,SelectType:f.a,SelectTree:l.a,SelectCity:m.a},props:{popVisible:{type:Boolean,default:!1},orgid:{required:!0},isModify:{type:Boolean,default:!1},isDbclick:{type:Boolean,default:!1},info:{type:Object,default:function(){}},issender:{type:Boolean,dafault:!1}},computed:a()({},Object(d.mapGetters)(["otherinfo"])),data:function(){return{rules:{financialWay:[{required:!0,validator:this.validateIsEmpty("收支方式不能为空"),trigger:"blur"}],bankName:[{max:20,message:"最多可以输入20个字符~",trigger:"blur"},{validator:function(t,i,e){n.a.ONLY_CHINESE.test(i)||!i?e():e(new Error("只能输入中文"))},trigger:"blur"}]},form:{orgId:"",financialWay:"",bankName:"",bankAccount:"",bankAccountName:"",alipayAccount:"",wechatAccount:"",remark:"",agent:""},checked:!0,formLabelWidth:"80px",popTitle:"新增收支方式",loading:!1,inited:!1,bankPay:!1,aliPay:!1,wPay:!1,casyPay:!1,chePay:!1}},mounted:function(){this.inited||(this.inited=!0,this.initInfo(),this.form.orgId=this.otherinfo.orgid)},watch:{popVisible:function(t,i){this.inited||(this.inited=!0,this.initInfo())},orgid:function(t){this.form.orgId=t},info:function(){this.isModify?(this.popTitle="修改收支方式",this.changeInfo(this.info)):this.isDbclick?(this.popTitle="查看收支方式",this.changeInfo(this.info)):(this.popTitle="新增收支方式",this.newInfo(this.otherinfo))},isModify:{handler:function(){this.isModify?(this.popTitle="修改收支方式",this.changeInfo(this.info)):this.isDbclick?(this.popTitle="查看收支方式",this.changeInfo(this.info)):(this.popTitle="新增收支方式",this.newInfo(this.otherinfo))},immediate:!0}},methods:{changeInfo:function(t){this.form.orgId=t.orgId,this.form.financialWay=t.financialWay,this.form.remark=t.remark,this.form.bankAccount=t.bankAccount,this.form.bankAccountName=t.bankAccountName,this.form.alipayAccount=t.alipayAccount,this.form.wechatAccount=t.wechatAccount,this.financialWayClick(this.form.financialWay)},newInfo:function(t){this.form.orgId=t.orgId,this.form.remark="",this.form.bankAccount="",this.form.bankAccountName="",this.form.alipayAccount="",this.form.wechatAccount="",this.form.financialWay=280,this.financialWayClick(this.form.financialWay)},getTrunkName:function(t){},infoData:function(t){},validateIsEmpty:function(){var o=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"不能为空！";return function(t,i,e){i?e():e(new Error(o))}},setObject:function(t,i){for(var e in t)t[e]=i?i[e]:"";return t},setSender:function(t,i){i=i?"customRece":"tmsCustomer",t&&(this.form[i].customerType="tmsCustomer"===i?1:2,this.form[i].customerName=t.customerName,this.form[i].customerMobile=t.customerMobile,this.form[i].detailedAddress=t.detailedAddress,this.form[i].customerId=t.customerId)},selectToCity:function(t,i){t&&(this.form.tmsOrderPickup.toCityCode=t.id,this.form.tmsOrderPickup.toCityName=t.longAddr)},getdriverName:function(t,i){t&&(this.form.tmsDriver.driverName=t.driverName,this.form.tmsDriver.driverMobile=t.driverMobile,this.form.tmsDriver.driverId=t.id)},financialWayClick:function(t){this.bankPay=!1,this.aliPay=!1,this.wPay=!1,this.casyPay=!1,this.chePay=!1,280===t||"银行卡"===t?this.bankPay=!0:281===t||"支付宝"===t?this.aliPay=!0:282===t||"微信"===t?this.wPay=!0:283===t||"现金"===t?this.casyPay=!0:this.chePay=!0},initInfo:function(){this.loading=!1},submit:function(){console.log("保存并打印")},submitForm:function(t){var o=this;this.$refs[t].validate(function(t){if(!t)return!1;o.loading=!0;var i=o.form,e=void 0;o.isModify?(i.id=o.info.id,e=Object(s.e)(i)):e=Object(s.a)(i),e.then(function(t){o.loading=!1,o.$message.success("保存成功"),o.closeMe(),o.$emit("success")}).catch(function(t){o._handlerCatchMsg(t),o.loading=!1})})},reset:function(){this.$refs.ruleForm.resetFields(),this.form="",this.form.orgId=this.otherinfo.orgid},closeMe:function(t){this.$emit("update:popVisible",!1),"function"==typeof t&&t()}}}},"Ni/G":function(t,i,e){"use strict";var o={render:function(){var i=this,t=i.$createElement,e=i._self._c||t;return e("pop-right",{directives:[{name:"loading",rawName:"v-loading",value:i.loading,expression:"loading"}],staticClass:"addIOManagePop",attrs:{title:i.popTitle,isShow:i.popVisible},on:{close:i.closeMe}},[e("template",{staticClass:"addIOManagePop-content",slot:"content"},[e("el-form",{ref:"ruleForm",staticClass:"pickup_lrl",attrs:{model:i.form,rules:i.rules,"label-width":i.formLabelWidth,inline:!0,"label-position":"right",size:"mini"}},[e("div",{staticClass:"iommanage-bottom"},[e("el-form-item",{attrs:{label:"所属网点"}},[e("SelectTree",{attrs:{disabled:i.isDbclick},model:{value:i.form.orgId,callback:function(t){i.$set(i.form,"orgId",t)},expression:"form.orgId"}})],1),i._v(" "),e("el-form-item",{attrs:{label:"收支方式",prop:"financialWay"}},[e("SelectType",{attrs:{type:"financial_way_type",placeholder:"请选择",disabled:i.isDbclick?i.isDbclick:i.isModify},on:{change:i.financialWayClick},model:{value:i.form.financialWay,callback:function(t){i.$set(i.form,"financialWay",t)},expression:"form.financialWay"}})],1),i._v(" "),!0===i.bankPay?e("div",[e("el-form-item",{attrs:{label:"银行名称",prop:"bankName"}},[e("el-input",{attrs:{"auto-complete":"off",disabled:i.isDbclick},model:{value:i.form.bankName,callback:function(t){i.$set(i.form,"bankName",t)},expression:"form.bankName"}})],1),i._v(" "),e("el-form-item",{attrs:{label:"银行卡号"}},[e("el-input",{attrs:{"auto-complete":"off",disabled:i.isDbclick},model:{value:i.form.bankAccount,callback:function(t){i.$set(i.form,"bankAccount",t)},expression:"form.bankAccount"}})],1),i._v(" "),e("el-form-item",{attrs:{label:"开户人"}},[e("el-input",{attrs:{"auto-complete":"off",disabled:i.isDbclick},model:{value:i.form.bankAccountName,callback:function(t){i.$set(i.form,"bankAccountName",t)},expression:"form.bankAccountName"}})],1)],1):i._e(),i._v(" "),!0===i.aliPay?e("div",[e("el-form-item",{attrs:{label:"支付宝号"}},[e("el-input",{attrs:{"auto-complete":"off",disabled:i.isDbclick},model:{value:i.form.alipayAccount,callback:function(t){i.$set(i.form,"alipayAccount",t)},expression:"form.alipayAccount"}})],1)],1):i._e(),i._v(" "),!0===i.wPay?e("div",[e("el-form-item",{attrs:{label:"微信号"}},[e("el-input",{attrs:{"auto-complete":"off",disabled:i.isDbclick},model:{value:i.form.wechatAccount,callback:function(t){i.$set(i.form,"wechatAccount",t)},expression:"form.wechatAccount"}})],1)],1):i._e(),i._v(" "),!0===i.casyPay?e("div",[e("el-form-item",{attrs:{label:"经手人"}},[e("el-input",{attrs:{"auto-complete":"off",disabled:i.isDbclick},model:{value:i.form.agent,callback:function(t){i.$set(i.form,"agent",t)},expression:"form.agent"}})],1)],1):i._e(),i._v(" "),e("el-form-item",{staticClass:"iom_textarea",attrs:{label:"备注"}},[e("el-input",{attrs:{maxlength:300,"auto-complete":"off",disabled:i.isDbclick,type:"textarea"},model:{value:i.form.remark,callback:function(t){i.$set(i.form,"remark",t)},expression:"form.remark"}})],1)],1)])],1),i._v(" "),i.isDbclick?e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:i.closeMe}},[i._v("关 闭")])],1):e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{attrs:{type:"primary"},on:{click:function(t){i.submitForm("ruleForm")}}},[i._v("保 存")]),i._v(" "),e("el-button",{on:{click:i.closeMe}},[i._v("取 消")])],1)],2)},staticRenderFns:[]};i.a=o},QsY5:function(t,i){}});