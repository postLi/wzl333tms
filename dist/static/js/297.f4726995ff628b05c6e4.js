webpackJsonp([297],{"/02+":function(t,i,a){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var e=a("TA9/"),o=a("sPyv");var n=function(t){a("JnVP")},c=a("VU/8")(e.a,o.a,n,null,null);i.default=c.exports},JnVP:function(t,i){},"TA9/":function(t,i,a){"use strict";var e=a("Dd8w"),o=a.n(e),n=a("E4LH"),c=a("xAap"),l=a("P5Di"),s=a("QbVN"),r=a("o9X6"),f=a("9UCZ"),m=a("66wn"),u=a("pAQG"),d=a("NYxO");i.a={components:{popRight:l.a,Upload:s.a,querySelect:u.a,SelectType:f.a,SelectTree:r.a,SelectCity:m.a},props:{popVisible:{type:Boolean,default:!1},orgid:{required:!0},isModify:{type:Boolean,default:!1},isDbclick:{type:Boolean,default:!1},info:{type:Object,default:function(){}},issender:{type:Boolean,dafault:!1}},computed:o()({},Object(d.mapGetters)(["otherinfo"])),data:function(){return{rules:{financialWayId:[{required:!0,validator:this.validateIsEmpty("收支方式不能为空"),trigger:"blur"}],bankName:[{max:20,message:"最多可以输入20个字符~",trigger:"blur"},{pattern:n.a.ONLY_CHINESE,trigger:"blur",message:"只能输入中文"}],bankAccount:[]},form:{orgId:"",financialWay:"",financialWayId:"",bankName:"",bankAccount:"",bankAccountName:"",alipayAccount:"",wechatAccount:"",remark:"",agent:""},checked:!0,formLabelWidth:"80px",popTitle:"新增收支方式",loading:!1,inited:!1,bankPay:!1,aliPay:!1,wPay:!1,casyPay:!1,chePay:!1}},mounted:function(){this.inited||(this.inited=!0,this.initInfo())},watch:{popVisible:function(t,i){this.inited||(this.inited=!0,this.initInfo())},orgid:function(t){this.form.orgId=t},info:function(){this.isModify?(this.popTitle="修改收支方式",this.changeInfo(this.info)):this.isDbclick?(this.popTitle="查看收支方式",this.changeInfo(this.info)):(this.popTitle="新增收支方式",this.newInfo(this.otherinfo))},isModify:{handler:function(){this.isModify?(this.popTitle="修改收支方式",this.changeInfo(this.info)):this.isDbclick?(this.popTitle="查看收支方式",this.changeInfo(this.info)):(this.popTitle="新增收支方式",this.newInfo(this.otherinfo))},immediate:!0}},methods:{changeInfo:function(t){this.form.orgId=t.orgId,this.form.financialWay=t.financialWay,this.form.financialWayId=t.financialWayId,this.form.remark=t.remark,this.form.bankAccount=t.bankAccount,this.form.bankAccountName=t.bankAccountName,this.form.alipayAccount=t.alipayAccount,this.form.wechatAccount=t.wechatAccount,this.form.bankName=t.bankName,this.financialWayClick(this.form.financialWayId)},newInfo:function(t){this.form.orgId=t.orgid,this.form.remark="",this.form.bankAccount="",this.form.bankAccountName="",this.form.alipayAccount="",this.form.wechatAccount="",this.form.financialWayId=280,this.form.financialWay="",this.form.bankName="",this.financialWayClick(this.form.financialWayId)},validateIsEmpty:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"不能为空！";return function(t,i,a){i?a():a(new Error(e))}},getData:function(t){},financialWayClick:function(t){this.bankPay=!1,this.aliPay=!1,this.wPay=!1,this.casyPay=!1,this.chePay=!1,280===t||"银行卡"===t?(this.bankPay=!0,this.form.financialWay="银行卡"):281===t||"支付宝"===t?(this.aliPay=!0,this.form.financialWay="支付宝"):282===t||"微信"===t?(this.wPay=!0,this.form.financialWay="微信"):283===t||"现金"===t?(this.casyPay=!0,this.form.financialWay="现金"):(this.chePay=!0,this.form.financialWay="支票")},initInfo:function(){this.loading=!1},submit:function(){console.log("保存并打印")},submitForm:function(t){var e=this;this.$refs[t].validate(function(t){if(!t)return!1;e.loading=!0;var i={};i=e.form;var a=void 0;e.isModify?(i.id=e.info.id,a=Object(c.e)(i)):a=Object(c.a)(i),a.then(function(t){e.loading=!1,e.$message.success("保存成功"),e.$emit("success"),e.closeMe()}).catch(function(t){e._handlerCatchMsg(t),e.loading=!1})})},reset:function(){this.form.orgId=this.otherinfo.orgid},closeMe:function(t){this.reset(),this.$emit("update:popVisible",!1),"function"==typeof t&&t()}}}},sPyv:function(t,i,a){"use strict";var e={render:function(){var i=this,t=i.$createElement,a=i._self._c||t;return a("pop-right",{directives:[{name:"loading",rawName:"v-loading",value:i.loading,expression:"loading"}],staticClass:"addIOManagePop",attrs:{title:i.popTitle,isShow:i.popVisible},on:{close:i.closeMe}},[a("template",{staticClass:"addIOManagePop-content",slot:"content"},[a("el-form",{ref:"ruleForm",staticClass:"pickup_lrl",attrs:{model:i.form,rules:i.rules,"label-width":i.formLabelWidth,inline:!0,"label-position":"right",size:"mini"}},[a("div",{staticClass:"iommanage-bottom"},[a("el-form-item",{attrs:{label:"所属网点"}},[a("SelectTree",{attrs:{disabled:i.isDbclick,orgid:i.otherinfo.orgid},model:{value:i.form.orgId,callback:function(t){i.$set(i.form,"orgId",t)},expression:"form.orgId"}})],1),i._v(" "),a("el-form-item",{attrs:{label:"收支方式",prop:"financialWayId"}},[a("SelectType",{attrs:{type:"financial_way_type",placeholder:"请选择",disabled:i.isDbclick?i.isDbclick:i.isModify},on:{change:i.financialWayClick,mounted:i.getData},model:{value:i.form.financialWayId,callback:function(t){i.$set(i.form,"financialWayId",t)},expression:"form.financialWayId"}})],1),i._v(" "),!0===i.bankPay?a("div",[a("el-form-item",{attrs:{label:"银行名称",prop:"bankName"}},[a("el-input",{attrs:{"auto-complete":"off",disabled:i.isDbclick},model:{value:i.form.bankName,callback:function(t){i.$set(i.form,"bankName",t)},expression:"form.bankName"}})],1),i._v(" "),a("el-form-item",{attrs:{label:"银行卡号",prop:"bankAccount"}},[a("el-input",{directives:[{name:"numberOnly",rawName:"v-numberOnly"}],attrs:{"auto-complete":"off",disabled:i.isDbclick},model:{value:i.form.bankAccount,callback:function(t){i.$set(i.form,"bankAccount",t)},expression:"form.bankAccount"}})],1),i._v(" "),a("el-form-item",{attrs:{label:"开户人"}},[a("el-input",{attrs:{"auto-complete":"off",disabled:i.isDbclick},model:{value:i.form.bankAccountName,callback:function(t){i.$set(i.form,"bankAccountName",t)},expression:"form.bankAccountName"}})],1)],1):i._e(),i._v(" "),!0===i.aliPay?a("div",[a("el-form-item",{attrs:{label:"支付宝号"}},[a("el-input",{attrs:{"auto-complete":"off",disabled:i.isDbclick},model:{value:i.form.alipayAccount,callback:function(t){i.$set(i.form,"alipayAccount",t)},expression:"form.alipayAccount"}})],1)],1):i._e(),i._v(" "),!0===i.wPay?a("div",[a("el-form-item",{attrs:{label:"微信号"}},[a("el-input",{attrs:{"auto-complete":"off",disabled:i.isDbclick},model:{value:i.form.wechatAccount,callback:function(t){i.$set(i.form,"wechatAccount",t)},expression:"form.wechatAccount"}})],1)],1):i._e(),i._v(" "),!0===i.casyPay?a("div",[a("el-form-item",{attrs:{label:"经手人"}},[a("el-input",{attrs:{"auto-complete":"off",disabled:i.isDbclick},model:{value:i.form.agent,callback:function(t){i.$set(i.form,"agent",t)},expression:"form.agent"}})],1)],1):i._e(),i._v(" "),a("el-form-item",{staticClass:"iom_textarea",attrs:{label:"备注"}},[a("el-input",{attrs:{maxlength:200,"auto-complete":"off",disabled:i.isDbclick,type:"textarea"},model:{value:i.form.remark,callback:function(t){i.$set(i.form,"remark",t)},expression:"form.remark"}})],1)],1)])],1),i._v(" "),i.isDbclick?a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:i.closeMe}},[i._v("关 闭")])],1):a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){i.submitForm("ruleForm")}}},[i._v("保 存")]),i._v(" "),a("el-button",{on:{click:i.closeMe}},[i._v("取 消")])],1)],2)},staticRenderFns:[]};i.a=e}});