webpackJsonp([204],{"/n+A":function(t,e,i){"use strict";var a={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"popRight-center",class:{showPopRight:t.isShow},style:{zIndex:t.zIndex}},[i("div",{staticClass:"popRight-header"},[t._t("title",[t._v(t._s(t.title))]),t._v(" "),i("i",{staticClass:"el-icon-close",attrs:{title:"关闭"},on:{click:t.close}})],2),t._v(" "),t.shouldRender?i("div",{staticClass:"popRight-content"},[t._t("content",[t._v("内容")])],2):t._e(),t._v(" "),i("div",{staticClass:"popRight-footer"},[t._t("footer",[t._v("底部")])],2)])},staticRenderFns:[]};e.a=a},"3EPC":function(t,e,i){"use strict";var a=i("qYK6"),s=i("/n+A");var n=function(t){i("f3wf")},r=i("VU/8")(a.a,s.a,n,null,null);e.a=r.exports},"5lb2":function(t,e,i){"use strict";e.d=function(t){return a.b.post("/api-plugin/system/traderecord/v1.1/",t).then(function(t){return t.data||[]})},e.f=function(t){return a.b.get("/api-plugin/pay/weixin/v1.1/weixin/wx?fee="+t.fee+"&companyId="+t.companyId)},e.a=function(t){return a.b.get("/api-plugin/common/Pay/v1.1/scanPay/ali?fee="+t.fee+"&companyId="+t.companyId)},e.b=function(t){return a.b.get("/api-plugin/common/Pay/v1.1/"+t)},e.e=function(t){return a.b.get("/api-plugin/pay/weixin/v1.1/"+t)},e.c=function(){return a.b.get("/api-plugin/common/Pay/v1.1/findMywallet").then(function(t){return t.data||0})};var a=i("Vo7i");i("TIfe")},"71e1":function(t,e,i){t.exports=i("+dzQ")(43)},Jdmp:function(t,e,i){"use strict";var a={render:function(){var i=this,t=i.$createElement,a=i._self._c||t;return a("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:i.loading,expression:"loading"}],attrs:{width:"520px",title:i.popTitle,visible:i.popVisible,"before-close":i.closeMe,"custom-class":"rechargePop","close-on-click-modal":!1,"close-on-press-escape":!1,center:!0}},[a("div",{staticClass:"rechargePop-content"},[i.showcharge?a("div",{staticClass:"recharge-panel"},[a("div",{staticClass:"recharge-fee clearfix"},[a("div",{staticClass:"recharge-label"},[i._v("充值金额"),a("span",[i._v("（元）")])]),i._v(" "),a("div",{staticClass:"chargefee-list"},i._l(i.feelist,function(t,e){return a("span",{key:e,staticClass:"charefee-opt",class:{"select-opt":i.currentIndex===e},on:{click:function(t){i.currentIndex=e}}},[i._v(i._s(t)+" "),a("i",{staticClass:"el-icon-circle-check"})])})),i._v(" "),a("div",{staticClass:"otherrecharge-fee clearfix"},[a("span",{staticClass:"charefee-opt",class:{"select-opt":555===i.currentIndex},on:{click:function(t){i.currentIndex=555}}},[i._v("其它金额"),a("i",{staticClass:"el-icon-circle-check"})]),a("input",{directives:[{name:"numberOnly",rawName:"v-numberOnly:point",arg:"point"}],ref:"otherinp",staticClass:"nativeinput",attrs:{type:"text",maxlength:10,placeholder:"注:每次充值至少1块钱"},domProps:{value:i.otherfee},on:{focus:function(t){i.currentIndex=555},change:function(t){i.otherfee=t.target.value}}}),i._v(" "),i.payerror?a("span",{staticClass:"otherfee-error"},[i._v("至少充值金额1块钱")]):i._e()])]),i._v(" "),a("div",{staticClass:"recharge-payway"},[a("div",{staticClass:"payway-title"},[i._v("支付方式")]),i._v(" "),a("div",{staticClass:"payway-list clearfix"},[a("span",{staticClass:"hyq-wx",class:{active:"wx"===i.payway},on:{click:function(t){i.payway="wx"}}}),i._v(" "),a("span",{staticClass:"hyq-ali",class:{active:"ali"===i.payway},on:{click:function(t){i.payway="ali"}}})])]),i._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:i.submitForm}},[i._v("充值")])],1):a("div",{staticClass:"twocode-panel"},[a("div",{staticClass:"hyq-pay-twocode"},[a("div",{staticClass:"hyq-tc-title"},[i._v("使用"+i._s(i.paywayname)+"扫一扫付款")]),i._v(" "),a("div",{staticClass:"hyq-tc-box"},[i.tcurl?a("img",{staticClass:"hyq-tc-img",attrs:{src:i.tcurl}}):i._e()]),i._v(" "),i.paysuccess?a("div",{staticClass:"hyq-pay-success"},[i._v("充值成功")]):i._e(),i._v(" "),i.payfail?a("div",{staticClass:"hyq-pay-fail"},[i._v("充值失败"+i._s(i.errmsg))]):i._e()])])])])},staticRenderFns:[]};e.a=a},f3wf:function(t,e){},nlbk:function(t,e,i){"use strict";var a=i("3EPC"),s=i("5lb2"),n=i("t5DY"),r=i("71e1"),c=i.n(r);e.a={props:{popVisible:{type:Boolean,default:!1}},components:{PopFrame:a.a},data:function(){return{loading:!1,popTitle:"充值详情",otherfee:"",feelist:[],payerror:!1,errmsg:"",paysuccess:!1,payfail:!1,payway:"wx",tcurl:"",showcharge:!0,currentIndex:0,payfee:""}},mounted:function(){var e=this;this.loading=!0,Object(n.h)("pay_money",this.otherinfo.orgid).then(function(t){e.loading=!1,e.feelist=t.map(function(t){return t.dictName}).reverse()}).catch(function(t){e.loading=!1,e._handlerCatchMsg(t)})},destroyed:function(){clearTimeout(this.timer)},computed:{paywayname:function(){return{wx:"微信",ali:"支付宝"}[this.payway]||""}},watch:{popVisible:function(t){},currentIndex:function(t){555===t?this.$refs.otherinp.focus():(this.otherfee="",this.payerror=!1)},otherfee:function(t){if(555===this.currentIndex&&t){var e=parseFloat(t,10);this.payerror=e<1}},showcharge:function(t){t||(this.popTitle="支付¥"+this.payfee+"元")}},methods:{reset:function(){this.popTitle="充值详情",this.otherfee="",this.payerror=!1,this.errmsg="",this.paysuccess=!1,this.payfail=!1,this.payway="wx",this.tcurl="",this.showcharge=!0,this.currentIndex=0,this.payfee=""},closeMe:function(t){if(!this.showcharge&&!this.paysuccess)return this.showcharge=!0,this.payfail=!1,this.popTitle="充值详情",void clearTimeout(this.timer);this.paysuccess&&this.$emit("success"),this.$emit("close"),this.$emit("update:popVisible",!1),this.reset(),"function"==typeof t&&t()},submitForm:function(){var e=this;if(""===this.currentIndex)return this.$message.error("需要选择充值金额。"),!1;if(555===this.currentIndex&&(!this.otherfee||this.payerror))return this.$message.error("请填写有效的金额。"),!1;if(""===this.payway)return this.$message.error("请选择支付方式。"),!1;var t={};555!==this.currentIndex?t.fee=this.feelist[this.currentIndex]:t.fee=this.otherfee,t.type=this.payway,this.payfee=t.fee,t.companyId=this.otherinfo.companyId;var i=void 0;i="ali"===t.type?s.a(t):s.f(t),this.loading=!0,i.then(function(t){e.loading=!1,t.data&&(e.id=t.text,e.showcharge=!1,c.a.toDataURL(t.data,{rendererOpts:{margin:0}}).then(function(t){e.tcurl=t,e.startPay()}))}).catch(function(t){e.loading=!1,e._handlerCatchMsg(t)})},startPay:function(){var i=this;clearTimeout(this.timer),this.timer=setTimeout(function(){("wx"===i.payway?s.e(i.id):s.b(i.id)).then(function(t){var e=t.text;"等待充值"===e||"未支付"===e||"支付中"===e?i.startPay():"支付成功"===e||"充值成功"===e?(i.paysuccess=!0,setTimeout(function(){i.closeMe()},2e3)):(i.$emit("fail"),i.payfail=!0)}).catch(function(t){i.$emit("fail"),i.payfail=!0,i._handlerCatchMsg(t)})},3e3)}}}},pyzt:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i("nlbk"),s=i("Jdmp");var n=function(t){i("xmG7")},r=i("VU/8")(a.a,s.a,n,null,null);e.default=r.exports},qYK6:function(t,e,i){"use strict";e.a={props:{width:{type:String,default:"400"},title:{type:String,default:"标题"},isShow:{type:Boolean,default:!1}},watch:{isShow:{handler:function(){this.isShow&&(this.shouldRender=!0)},immediate:!0}},data:function(){return{zIndex:(window.tmsPopZindex?window.tmsPopZindex+=1:window.tmsPopZindex=1e3,window.tmsPopZindex),shouldRender:!1}},methods:{close:function(){this.$emit("close")}}}},xmG7:function(t,e){}});