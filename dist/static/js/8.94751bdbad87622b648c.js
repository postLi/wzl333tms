webpackJsonp([8,11,139,269,304,310,341,342],{"/2Zc":function(e,t,i){"use strict";var r={render:function(){var i=this,e=i.$createElement,t=i._self._c||e;return t("el-form",{ref:"searchForm",staticClass:"tableHeadItemForm",attrs:{inline:"","label-position":"right",model:i.searchForm,"label-width":"70px"}},[t("el-form-item",{attrs:{label:"目的网点"}},[t("el-autocomplete",{attrs:{size:i.btnsize,"popper-class":"popperHide","fetch-suggestions":function(e,t){return i.querySearch("shipToOrgName",e,t)},placeholder:"到站搜索"},on:{select:i.handleSelect},nativeOn:{keyup:function(e){return"button"in e||!i._k(e.keyCode,"enter",13,e.key,"Enter")?i.handleSelectAll(e):null}},model:{value:i.searchForm.shipToOrgName,callback:function(e){i.$set(i.searchForm,"shipToOrgName",e)},expression:"searchForm.shipToOrgName"}})],1),i._v(" "),t("el-form-item",{attrs:{label:"到站"}},[t("el-autocomplete",{attrs:{size:i.btnsize,"popper-class":"popperHide","fetch-suggestions":function(e,t){return i.querySearch("shipToCityName",e,t)},placeholder:"到站搜索"},on:{select:i.handleSelect},nativeOn:{keyup:function(e){return"button"in e||!i._k(e.keyCode,"enter",13,e.key,"Enter")?i.handleSelectAll(e):null}},model:{value:i.searchForm.shipToCityName,callback:function(e){i.$set(i.searchForm,"shipToCityName",e)},expression:"searchForm.shipToCityName"}})],1),i._v(" "),t("el-form-item",{staticClass:"curSearchShipSn",attrs:{label:"运单号"}},[t("el-autocomplete",{attrs:{size:i.btnsize,"popper-class":"popperHide","fetch-suggestions":function(e,t){return i.querySearch("shipSn",e,t)},placeholder:"运单号搜索"},on:{select:i.handleSelect},nativeOn:{keyup:function(e){return"button"in e||!i._k(e.keyCode,"enter",13,e.key,"Enter")?i.handleSelectAll(e):null}},model:{value:i.searchForm.shipSn,callback:function(e){i.$set(i.searchForm,"shipSn",e)},expression:"searchForm.shipSn"}})],1)],1)},staticRenderFns:[]};t.a=r},"/v6R":function(e,t,i){"use strict";var r={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("pop-right",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"addTruckPop",attrs:{title:t.popTitle,isShow:t.popVisible},on:{close:t.closeMe}},[i("template",{staticClass:"addTruckPop-content",slot:"content"},[i("el-form",{ref:"ruleForm",attrs:{model:t.form,rules:t.rules,"label-width":t.formLabelWidth,inline:!0,"label-position":"right",size:"mini"}},[i("el-form-item",{attrs:{label:"车牌号码",prop:"truckIdNumber"}},[i("el-input",{attrs:{maxlength:8,"auto-complete":"off"},model:{value:t.form.truckIdNumber,callback:function(e){t.$set(t.form,"truckIdNumber",e)},expression:"form.truckIdNumber"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"车辆来源",prop:"truckSource"}},[i("SelectType",{attrs:{type:"truck_source",placeholder:"请选择"},model:{value:t.form.truckSource,callback:function(e){t.$set(t.form,"truckSource",e)},expression:"form.truckSource"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"车型",prop:"truckType"}},[i("SelectType",{attrs:{type:"truck_type",placeholder:"请选择"},model:{value:t.form.truckType,callback:function(e){t.$set(t.form,"truckType",e)},expression:"form.truckType"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"可载重",prop:"truckLoad"}},[i("el-input",{directives:[{name:"numberOnly",rawName:"v-numberOnly"}],attrs:{maxlength:6,"auto-complete":"off"},model:{value:t.form.truckLoad,callback:function(e){t.$set(t.form,"truckLoad",t._n(e))},expression:"form.truckLoad"}},[i("template",{slot:"append"},[t._v("千克")])],2)],1),t._v(" "),i("el-form-item",{attrs:{label:"可载体积",prop:"truckVolume"}},[i("el-input",{directives:[{name:"number-only",rawName:"v-number-only:point",arg:"point"}],attrs:{maxlength:18,"auto-complete":"off"},model:{value:t.form.truckVolume,callback:function(e){t.$set(t.form,"truckVolume",t._n(e))},expression:"form.truckVolume"}},[i("template",{slot:"append"},[t._v("方")])],2)],1),t._v(" "),i("el-form-item",{attrs:{label:"车长",prop:"truckLength"}},[i("el-input",{directives:[{name:"number-only",rawName:"v-number-only:point",arg:"point"}],attrs:{maxlength:18,"auto-complete":"off"},model:{value:t.form.truckLength,callback:function(e){t.$set(t.form,"truckLength",t._n(e))},expression:"form.truckLength"}},[i("template",{slot:"append"},[t._v("米")])],2)],1),t._v(" "),i("el-form-item",{attrs:{label:"车宽",prop:"truckWidth"}},[i("el-input",{directives:[{name:"number-only",rawName:"v-number-only:point",arg:"point"}],attrs:{maxlength:20,"auto-complete":"off"},model:{value:t.form.truckWidth,callback:function(e){t.$set(t.form,"truckWidth",t._n(e))},expression:"form.truckWidth"}},[i("template",{slot:"append"},[t._v("米")])],2)],1),t._v(" "),i("el-form-item",{attrs:{label:"车高",prop:"truckHeight"}},[i("el-input",{directives:[{name:"number-only",rawName:"v-number-only:point",arg:"point"}],attrs:{maxlength:20,"auto-complete":"off"},model:{value:t.form.truckHeight,callback:function(e){t.$set(t.form,"truckHeight",t._n(e))},expression:"form.truckHeight"}},[i("template",{slot:"append"},[t._v("米")])],2)],1),t._v(" "),i("el-form-item",{attrs:{label:"归属网点",prop:"orgid"}},[i("SelectTree",{attrs:{orgid:t.otherinfo.orgid},on:{change:t.getTreeOrgid},model:{value:t.form.orgid,callback:function(e){t.$set(t.form,"orgid",e)},expression:"form.orgid"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"车辆品牌",prop:"truckBrand"}},[i("el-input",{attrs:{maxlength:20,"auto-complete":"off"},model:{value:t.form.truckBrand,callback:function(e){t.$set(t.form,"truckBrand",e)},expression:"form.truckBrand"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"车辆注册时间",prop:"truckRegisterDate"}},[i("el-date-picker",{attrs:{align:"right",type:"date","picker-options":t.pickOption,placeholder:"选择日期","value-format":"timestamp"},model:{value:t.form.truckRegisterDate,callback:function(e){t.$set(t.form,"truckRegisterDate",e)},expression:"form.truckRegisterDate"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"车辆报废时间",prop:"truckScrapDate"}},[i("el-date-picker",{attrs:{align:"right",type:"date","picker-options":t.pickOption2,placeholder:"选择日期","value-format":"timestamp"},model:{value:t.form.truckScrapDate,callback:function(e){t.$set(t.form,"truckScrapDate",e)},expression:"form.truckScrapDate"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"车架号",prop:"frameNum"}},[i("el-input",{attrs:{maxlength:30,"auto-complete":"off"},model:{value:t.form.frameNum,callback:function(e){t.$set(t.form,"frameNum",e)},expression:"form.frameNum"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"发动机号",prop:"engineNum"}},[i("el-input",{attrs:{maxlength:30,"auto-complete":"off"},model:{value:t.form.engineNum,callback:function(e){t.$set(t.form,"engineNum",e)},expression:"form.engineNum"}})],1),t._v(" "),i("el-form-item",{staticClass:"truckRemarks",attrs:{label:"备注",prop:"truckRemarks"}},[i("el-input",{attrs:{type:"textarea",maxlength:300},model:{value:t.form.truckRemarks,callback:function(e){t.$set(t.form,"truckRemarks",e)},expression:"form.truckRemarks"}})],1),t._v(" "),i("div",{staticClass:"hr"}),t._v(" "),i("el-form-item",{attrs:{label:"车辆单位",prop:"truckUnit"}},[i("el-input",{attrs:{maxlength:20,"auto-complete":"off"},model:{value:t.form.truckUnit,callback:function(e){t.$set(t.form,"truckUnit",e)},expression:"form.truckUnit"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"单位电话",prop:"truckUnitMobile"}},[i("el-input",{directives:[{name:"numberOnly",rawName:"v-numberOnly"}],attrs:{maxlength:20,"auto-complete":"off"},model:{value:t.form.truckUnitMobile,callback:function(e){t.$set(t.form,"truckUnitMobile",e)},expression:"form.truckUnitMobile"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"司机",prop:"driverId"}},[i("el-select",{attrs:{filterable:"",placeholder:"请选择司机",clearable:""},on:{change:t.getDriverPhone},model:{value:t.form.driverId,callback:function(e){t.$set(t.form,"driverId",e)},expression:"form.driverId"}},t._l(t.DriverList,function(e){return i("el-option",{key:e.id,attrs:{label:e.driverName,value:e.id}})}))],1),t._v(" "),i("el-form-item",{attrs:{label:"司机电话",prop:"dirverMobile"}},[i("el-input",{directives:[{name:"numberOnly",rawName:"v-numberOnly"}],attrs:{maxlength:20,"auto-complete":"off",disabled:""},model:{value:t.form.dirverMobile,callback:function(e){t.$set(t.form,"dirverMobile",e)},expression:"form.dirverMobile"}})],1),t._v(" "),i("div",{staticClass:"hr"}),t._v(" "),i("el-form-item",{staticClass:"clearfix uploadcard"},[i("div",{staticClass:"idcard"},[i("upload",{attrs:{title:"行驶证"},model:{value:t.form.drivingLicense,callback:function(e){t.$set(t.form,"drivingLicense",e)},expression:"form.drivingLicense"}})],1),t._v(" "),i("div",{staticClass:"drviercard"},[i("upload",{attrs:{title:"营运执照"},model:{value:t.form.operatingLicense,callback:function(e){t.$set(t.form,"operatingLicense",e)},expression:"form.operatingLicense"}})],1),t._v(" "),i("div",{staticClass:"certcard"},[i("upload",{attrs:{title:"车辆照片"},model:{value:t.form.vehiclePic,callback:function(e){t.$set(t.form,"vehiclePic",e)},expression:"form.vehiclePic"}})],1)])],1)],1),t._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t.isModify?t._e():i("el-button",{attrs:{type:"primary"},on:{click:function(e){t.submitForm("ruleForm",!0)}}},[t._v("保存并添加")]),t._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:function(e){t.submitForm("ruleForm")}}},[t._v("保 存")]),t._v(" "),i("el-button",{on:{click:t.closeMe}},[t._v("取 消")])],1)],2)},staticRenderFns:[]};t.a=r},"2Um6":function(e,t,i){"use strict";var r=i("woOf"),o=i.n(r),a=i("pAQG"),n=i("o9X6"),s=i("0xDb");t.a={components:{querySelect:a.a,SelectTree:n.a},data:function(){return{senderSearch:"",searchForm:{shipToCityName:"",shipSn:"",shipToOrgName:""},btnsize:"mini",selectVal:"",resultList:[]}},props:{info:{type:Array,default:[]},showSearch:{type:String,default:""}},methods:{changeTree:function(e,t){console.log("changeTree",e,t);var i=t.name,r=this.commonFilter("shipToOrgName",i),a=[];r.forEach(function(e){a.push(e)}),this.resultList=o()([],a),this.$emit("change",a),1===a.length&&this.handleSelectAll()},commonFilter:function(e,t){var i=this.info;for(var r in this.searchForm[e]=t,this.selectVal=e,this.searchForm)void 0!==this.searchForm[r]&&""!==this.searchForm[r]||this.$emit("change",Object(s.objectMerge2)([],this.info));return t?i.filter(this.createFilter(new RegExp(t,"gi"),e)):i},querySearch:function(e,t,i){console.log(e,t);var r=this.commonFilter(e,t);i(r);var a=[];r.forEach(function(e){a.push(e)}),this.resultList=o()([],a),this.$emit("change",a),1===a.length&&"shipSn"===e&&this.handleSelectAll()},createFilter:function(t,i){return function(e){return t.test(e[i])}},handleSelect:function(e){this.searchForm[this.selectVal]=e[this.selectVal],this.selectVal="";var t=[];t.push(e),this.$emit("change",t)},clearSender:function(e){this.searchForm=this.$options.data().searchForm},handleSelectAll:function(){var e=this;clearTimeout(this.ttimer),this.ttimer=setTimeout(function(){(e.searchForm.shipSn||e.searchForm.shipToCityName||e.searchForm.shipToOrgName)&&e.resultList.length&&(e.$emit("keyupEneter"),e.searchForm=e.$options.data().searchForm)},500)}}}},"4bnP":function(e,t,i){"use strict";var r={render:function(){var i=this,e=i.$createElement,r=i._self._c||e;return r("div",{staticClass:"load-steup"},[r("div",{directives:[{name:"loading",rawName:"v-loading",value:i.loading,expression:"loading"}],staticClass:"load-steup-form"},[r("el-collapse",{model:{value:i.loadTruck,callback:function(e){i.loadTruck=e},expression:"loadTruck"}},[r("el-collapse-item",{attrs:{name:"loadTruckOne"}},[r("template",{slot:"title"},[i._v("\n          车辆信息  "),r("b",[i._v(i._s(40===i.loadTypeId?"送货":"发车")+"批次："+i._s(i.truckMessage)+" "),39===i.loadTypeId?r("span",[i._v("合同编号："+i._s(i.contractNo))]):i._e()])]),i._v(" "),r("div",{staticClass:" loadFrom clearfix"},[r("el-form",{ref:"formModel",attrs:{model:i.formModel,size:i.mini,"label-width":"110px",rules:i.formModelRules}},[r("div",{staticClass:"loadFrom-type-baseInfo"},[r("div",{class:39===i.loadTypeId?"loadFrom-type-baseInfo-network baseInfoCol2":"baseInfoCol"},[40===i.loadTypeId?r("el-form-item",{staticClass:"multipleInput",attrs:{label:"送货费",prop:"deliveryFee"}},[r("input",{directives:[{name:"number-only",rawName:"v-number-only:point",arg:"point"}],ref:"truckVolume",staticClass:"nativeinput",attrs:{type:"text",maxlength:8,placeholder:"送货费"},domProps:{value:i.formModel.deliveryDetailFee},on:{change:function(e){return i.changeHandlingFeeAll(e.target.value,"deliveryDetailFee")}}}),i._v(" "),r("input",{directives:[{name:"number-only",rawName:"v-number-only:point",arg:"point"}],ref:"truckVolume",staticClass:"nativeinput",attrs:{type:"text",maxlength:8,placeholder:"装卸费"},domProps:{value:i.formModel.deliveryHandlingFee},on:{change:function(e){return i.changeHandlingFeeAll(e.target.value,"deliveryHandlingFee")}}}),i._v(" "),r("span",{staticClass:"input-append"},[i._v("元")])]):i._e(),i._v(" "),39===i.loadTypeId?r("el-form-item",{staticClass:"formItemTextDanger",attrs:{label:"到达网点"}},[r("div",{staticClass:"select-network-list"},[r("div",{staticClass:"network-list-node"},[i._v(i._s(i.otherinfo.orgName+" -"))]),i._v(" "),r("draggable",{staticClass:"draggable-list",on:{start:i.startDragNetwork},model:{value:i.networkList,callback:function(e){i.networkList=e},expression:"networkList"}},i._l(i.networkList,function(t,e){return r("SelectTree",{key:e,attrs:{visibleChange:i.visibleChange,placeholder:"网点"+(e+1),clearable:"",size:"mini",disabledOption:i.disOrgList,disabled:i.isDirectDelivery||t.id===i.otherinfo.orgid},model:{value:t.id,callback:function(e){i.$set(t,"id",e)},expression:"item.id"}})})),i._v(" "),r("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:i.networkList.length<5?"点击添加途径网点":"最多添加5个途径网点,可拖拽置换顺序",placement:"top"}},[r("i",{staticClass:"el-icon-plus plusBtn",on:{click:i.addNetWork}})])],1)]):i._e(),i._v(" "),38===i.loadTypeId?r("el-form-item",{staticClass:"formItemTextDanger",attrs:{label:"到达网点",prop:"arriveOrgid",rules:{required:!i.isDirectDelivery,trigger:"change",message:"不能为空"}}},[r("SelectTree",{attrs:{clearable:"",size:"mini",disabledOption:[i.otherinfo.orgid],disabled:i.isDirectDelivery},model:{value:i.formModel.arriveOrgid,callback:function(e){i.$set(i.formModel,"arriveOrgid",e)},expression:"formModel.arriveOrgid"}})],1):i._e()],1),i._v(" "),r("div",{staticClass:"baseInfoCol"},[r("el-form-item",{key:i.truckKey,staticClass:"formItemTextDanger",attrs:{label:"车牌号码",prop:"truckIdNumber"}},[r("el-autocomplete",{attrs:{"popper-class":"my-autocomplete","fetch-suggestions":i.querySearchTruck,placeholder:"车牌号码",size:"mini","auto-complete":"off",maxlength:8},on:{select:i.handleSelectTruck},scopedSlots:i._u([{key:"default",fn:function(e){var t=e.item;return[r("div",{staticClass:"name"},[i._v(i._s(t.truckIdNumber))]),i._v(" "),r("span",{staticClass:"addr"},[i._v(i._s(t.driverName))]),i._v(" "),r("br"),i._v(" "),r("span",{staticClass:"addr"},[i._v(i._s(t.dirverMobile))])]}}]),model:{value:i.formModel.truckIdNumber,callback:function(e){i.$set(i.formModel,"truckIdNumber",e)},expression:"formModel.truckIdNumber"}},[r("i",{staticClass:"el-icon-plus el-input__icon",attrs:{slot:"suffix"},on:{click:function(e){i.doAction("addTruck")}},slot:"suffix"})])],1)],1),i._v(" "),r("div",{staticClass:"baseInfoCol"},[r("el-form-item",{key:i.driverKey,staticClass:"formItemTextDanger",attrs:{label:"司机名称",prop:"dirverName"}},[r("el-autocomplete",{attrs:{"popper-class":"my-autocomplete","fetch-suggestions":i.querySearch,placeholder:"司机名称",size:"mini","auto-complete":"off",maxlength:10},on:{select:i.handleSelect},scopedSlots:i._u([{key:"default",fn:function(e){var t=e.item;return[r("div",{staticClass:"name"},[i._v(i._s(t.driverName))]),i._v(" "),r("span",{staticClass:"addr"},[i._v(i._s(t.driverMobile))]),i._v(" "),r("br"),i._v(" "),r("span",{staticClass:"addr"},[i._v(i._s(t.truckIdNumber))])]}}]),model:{value:i.formModel.dirverName,callback:function(e){i.$set(i.formModel,"dirverName",e)},expression:"formModel.dirverName"}},[r("i",{staticClass:"el-icon-plus el-input__icon",attrs:{slot:"suffix"},on:{click:function(e){i.doAction("addDriver")}},slot:"suffix"})])],1)],1),i._v(" "),r("div",{staticClass:"baseInfoCol"},[r("el-form-item",{staticClass:"formItemTextDanger",attrs:{label:"司机电话",prop:"dirverMobile"}},[r("el-input",{attrs:{size:"mini",placeholder:"司机电话",maxlength:11},model:{value:i.formModel.dirverMobile,callback:function(e){i.$set(i.formModel,"dirverMobile",e)},expression:"formModel.dirverMobile"}})],1)],1),i._v(" "),39!==i.loadTypeId?r("div",{staticClass:"baseInfoCol"},[r("el-form-item",{attrs:{label:"分摊方式",prop:"apportionTypeId"}},[r("el-select",{attrs:{placeholder:"请选择"},on:{change:i.getApportionTypeId},model:{value:i.formModel.apportionTypeId,callback:function(e){i.$set(i.formModel,"apportionTypeId",e)},expression:"formModel.apportionTypeId"}},i._l(i.apportionTypeList,function(e,t){return r("el-option",{key:t,attrs:{label:e.dictName,value:e.id}},[r("span",{staticStyle:{float:"left"}},[i._v(i._s(e.dictName))]),i._v(" "),r("span",{staticStyle:{float:"right","margin-left":"10px"}},[r("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:e.descript,placement:"left"}},[r("el-button",{attrs:{type:"text"}},[i._v("说明")])],1)],1)])}))],1)],1):i._e()]),i._v(" "),r("div",{staticClass:"loadFrom-type-baseInfo"},[r("div",{staticClass:"baseInfoCol"},[40!==i.loadTypeId?r("el-form-item",{attrs:{label:"操作费",prop:"handlingFeeAll"}},[r("input",{directives:[{name:"number-only",rawName:"v-number-only:point",arg:"point"}],ref:"handlingFeeAll",staticClass:"nativeinput",attrs:{type:"text",maxlength:8},domProps:{value:i.formModel.handlingFeeAll},on:{change:function(e){return i.changeHandlingFeeAll(e.target.value)}}}),i._v(" "),r("span",{staticClass:"input-append"},[i._v("元")])]):r("el-form-item",{attrs:{prop:"remark",label:"备注"}},[r("el-input",{attrs:{maxlength:300,size:"mini"},model:{value:i.formModel.remark,callback:function(e){i.$set(i.formModel,"remark",e)},expression:"formModel.remark"}})],1)],1),i._v(" "),r("div",{staticClass:"baseInfoCol"},[r("el-form-item",{attrs:{label:"可载体积",prop:"truckVolume"}},[r("input",{directives:[{name:"number-only",rawName:"v-number-only:point",arg:"point"}],ref:"truckVolume",staticClass:"nativeinput",attrs:{type:"text",maxlength:8},domProps:{value:i.formModel.truckVolume},on:{change:function(e){return i.changeTruckNum(e.target.value,"truckVolume")}}}),i._v(" "),r("span",{staticClass:"input-append"},[i._v("方")])])],1),i._v(" "),r("div",{staticClass:"baseInfoCol"},[r("el-form-item",{attrs:{label:"可载重量",prop:"truckLoad"}},[r("input",{directives:[{name:"number-only",rawName:"v-number-only:point",arg:"point"}],ref:"truckLoad",staticClass:"nativeinput",attrs:{type:"text",maxlength:8},domProps:{value:i.formModel.truckLoad},on:{change:function(e){return i.changeTruckNum(e.target.value,"truckLoad")}}}),i._v(" "),r("span",{staticClass:"input-append",staticStyle:{"margin-left":"-30px"}},[i._v("千克")])])],1),i._v(" "),r("div",{staticClass:"baseInfoCol"},[r("el-form-item",{attrs:{prop:"loadTime",label:i.loadTimeFormName}},[r("el-date-picker",{attrs:{size:"mini",type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:i.loadTimeFormName},model:{value:i.formModel.loadTime,callback:function(e){i.$set(i.formModel,"loadTime",e)},expression:"formModel.loadTime"}})],1)],1),i._v(" "),r("div",{staticClass:"baseInfoCol"},[39===i.loadTypeId?r("el-form-item",{attrs:{prop:"planArrivedTime",label:"预计到达时间"}},[r("el-date-picker",{attrs:{size:"mini","value-format":"yyyy-MM-dd HH:mm:ss",type:"datetime",placeholder:"预计到达时间"},model:{value:i.formModel.planArrivedTime,callback:function(e){i.$set(i.formModel,"planArrivedTime",e)},expression:"formModel.planArrivedTime"}})],1):r("el-form-item",{attrs:{prop:"requireArrivedTime",label:"要求到达时间"}},[r("el-date-picker",{attrs:{size:"mini","value-format":"yyyy-MM-dd HH:mm:ss",type:"datetime",placeholder:"要求到达时间"},model:{value:i.formModel.requireArrivedTime,callback:function(e){i.$set(i.formModel,"requireArrivedTime",e)},expression:"formModel.requireArrivedTime"}})],1)],1)]),i._v(" "),r("div",{staticClass:"loadFrom-type-baseInfo"},[38===i.loadTypeId?r("div",{staticClass:"baseInfoCol"},[r("el-form-item",{attrs:{label:"短驳费",prop:"shortFee"}},[r("input",{directives:[{name:"number-only",rawName:"v-number-only:point",arg:"point"}],ref:"shortFee",staticClass:"nativeinput",attrs:{type:"text",maxlength:8},domProps:{value:i.formModel.shortFee},on:{change:function(e){return i.changeTruckNum(e.target.value,"shortFee")}}}),i._v(" "),r("span",{staticClass:"input-append"},[i._v("元")])])],1):i._e(),i._v(" "),39===i.loadTypeId?r("div",{staticClass:"baseInfoCol"},[r("el-form-item",{attrs:{label:"分摊方式",prop:"apportionTypeId"}},[r("el-select",{attrs:{placeholder:"请选择"},on:{change:i.getApportionTypeId},model:{value:i.formModel.apportionTypeId,callback:function(e){i.$set(i.formModel,"apportionTypeId",e)},expression:"formModel.apportionTypeId"}},i._l(i.apportionTypeList,function(e,t){return r("el-option",{key:t,attrs:{label:e.dictName,value:e.id}},[r("span",{staticStyle:{float:"left"}},[i._v(i._s(e.dictName))]),i._v(" "),r("span",{staticStyle:{float:"right","margin-left":"10px"}},[r("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:e.descript,placement:"left"}},[r("el-button",{attrs:{type:"text"}},[i._v("说明")])],1)],1)])}))],1)],1):i._e(),i._v(" "),r("div",{staticClass:"baseInfoCol"},[r("el-form-item",{attrs:{prop:"remark",label:"追货宝"}},[r("el-select",{attrs:{filterable:"",remote:"","reserve-keyword":"",placeholder:"请输入关键词","remote-method":i.changeTerminal,loading:i.searchLoading},model:{value:i.formModel.terminalNo,callback:function(e){i.$set(i.formModel,"terminalNo",e)},expression:"formModel.terminalNo"}},i._l(i.Terminals,function(e,t){return r("el-option",{key:t,attrs:{value:e.terminalNo}})}))],1)],1),i._v(" "),r("div",{staticClass:"baseInfoCol"},[40!==i.loadTypeId?r("el-form-item",{attrs:{prop:"remark",label:"备注"}},[r("el-input",{attrs:{maxlength:300,size:"mini"},model:{value:i.formModel.remark,callback:function(e){i.$set(i.formModel,"remark",e)},expression:"formModel.remark"}})],1):i._e()],1)])]),i._v(" "),39===i.loadTypeId?r("el-form",{ref:"formFee",attrs:{"label-width":"0px",model:i.formFee,rules:i.formFeeRules}},[r("ul",{staticClass:"feeList_lyy"},[r("li",[r("p",[i._v("车费合计(元)")]),i._v(" "),r("el-form-item",{attrs:{prop:"totalFormFee"}},[r("el-input",{staticStyle:{"text-align":"center"},attrs:{maxlength:10,size:i.mini,disabled:"",value:i.totalFormFee}})],1)],1),i._v(" "),r("li",[r("p",[i._v("现付车费(元)")]),i._v(" "),r("el-form-item",{attrs:{prop:"nowpayCarriage"}},[r("input",{directives:[{name:"number-only",rawName:"v-number-only:point",arg:"point"}],ref:"nowpayCarriage",staticClass:"nativeinput",attrs:{type:"text",maxlength:10},domProps:{value:i.formFee.nowpayCarriage},on:{change:function(e){return i.changeLoadNum(e.target.value,"nowpayCarriage")}}})])],1),i._v(" "),r("li",[r("p",[i._v("现付油卡(元)")]),i._v(" "),r("el-form-item",{attrs:{prop:"nowpayOilCard"}},[r("input",{directives:[{name:"number-only",rawName:"v-number-only:point",arg:"point"}],ref:"nowpayOilCard",staticClass:"nativeinput",attrs:{type:"text",maxlength:10},domProps:{value:i.formFee.nowpayOilCard},on:{change:function(e){return i.changeLoadNum(e.target.value,"nowpayOilCard")}}})])],1),i._v(" "),r("li",[r("p",[i._v("回付车费(元)")]),i._v(" "),r("el-form-item",{attrs:{prop:"backpayCarriage"}},[r("input",{directives:[{name:"number-only",rawName:"v-number-only:point",arg:"point"}],ref:"backpayCarriage",staticClass:"nativeinput",attrs:{type:"text",maxlength:10},domProps:{value:i.formFee.backpayCarriage},on:{change:function(e){return i.changeLoadNum(e.target.value,"backpayCarriage")}}})])],1),i._v(" "),r("li",[r("p",[i._v("回付油卡(元)")]),i._v(" "),r("el-form-item",{attrs:{prop:"backpayOilCard"}},[r("input",{directives:[{name:"number-only",rawName:"v-number-only:point",arg:"point"}],ref:"backpayOilCard",staticClass:"nativeinput",attrs:{type:"text",maxlength:10},domProps:{value:i.formFee.backpayOilCard},on:{change:function(e){return i.changeLoadNum(e.target.value,"backpayOilCard")}}})])],1),i._v(" "),r("li",[r("p",[i._v("到付车费(元)")]),i._v(" "),r("el-form-item",{attrs:{prop:"arrivepayCarriage"}},[r("input",{directives:[{name:"number-only",rawName:"v-number-only:point",arg:"point"}],ref:"arrivepayCarriage",staticClass:"nativeinput",attrs:{type:"text",maxlength:10},domProps:{value:i.formFee.arrivepayCarriage},on:{change:function(e){return i.changeLoadNum(e.target.value,"arrivepayCarriage")}}})])],1),i._v(" "),r("li",[r("p",[i._v("到付油卡(元)")]),i._v(" "),r("el-form-item",{attrs:{prop:"arrivepayOilCard"}},[r("input",{directives:[{name:"number-only",rawName:"v-number-only:point",arg:"point"}],ref:"arrivepayOilCard",staticClass:"nativeinput",attrs:{type:"text",maxlength:10},domProps:{value:i.formFee.arrivepayOilCard},on:{change:function(e){return i.changeLoadNum(e.target.value,"arrivepayOilCard")}}})])],1),i._v(" "),r("li",[r("p",[i._v("整车保险费(元)")]),i._v(" "),r("el-form-item",{attrs:{prop:"carloadInsuranceFee"}},[r("input",{directives:[{name:"number-only",rawName:"v-number-only:point",arg:"point"}],ref:"carloadInsuranceFee",staticClass:"nativeinput",attrs:{type:"text",maxlength:10},domProps:{value:i.formFee.carloadInsuranceFee},on:{change:function(e){return i.changeLoadNum(e.target.value,"carloadInsuranceFee")}}})])],1),i._v(" "),r("li",[r("p",[i._v("发站装卸费(元)")]),i._v(" "),r("el-form-item",{attrs:{prop:"leaveHandlingFee"}},[r("input",{directives:[{name:"number-only",rawName:"v-number-only:point",arg:"point"}],ref:"leaveHandlingFee",staticClass:"nativeinput",attrs:{type:"text",maxlength:10},domProps:{value:i.formFee.leaveHandlingFee},on:{change:function(e){return i.changeLoadNum(e.target.value,"leaveHandlingFee")}}})])],1),i._v(" "),r("li",[r("p",[i._v("发站其他费(元)")]),i._v(" "),r("el-form-item",{attrs:{prop:"leaveOtherFee"}},[r("input",{directives:[{name:"number-only",rawName:"v-number-only:point",arg:"point"}],ref:"leaveOtherFee",staticClass:"nativeinput",attrs:{type:"text",maxlength:10},domProps:{value:i.formFee.leaveOtherFee},on:{change:function(e){return i.changeLoadNum(e.target.value,"leaveOtherFee")}}})])],1),i._v(" "),r("li",[r("p",[i._v("到站装卸费(元)")]),i._v(" "),r("el-form-item",{attrs:{prop:"arriveHandlingFee"}},[r("input",{directives:[{name:"number-only",rawName:"v-number-only:point",arg:"point"}],ref:"arriveHandlingFee",staticClass:"nativeinput",attrs:{type:"text",maxlength:10},domProps:{value:i.formFee.arriveHandlingFee},on:{change:function(e){return i.changeLoadNum(e.target.value,"arriveHandlingFee")}}})])],1),i._v(" "),r("li",[r("p",[i._v("到站其他费(元)")]),i._v(" "),r("el-form-item",{attrs:{prop:"arriveOtherFee"}},[r("input",{directives:[{name:"number-only",rawName:"v-number-only:point",arg:"point"}],ref:"arriveOtherFee",staticClass:"nativeinput",attrs:{type:"text",maxlength:10},domProps:{value:i.formFee.arriveOtherFee},on:{change:function(e){return i.changeLoadNum(e.target.value,"arriveOtherFee")}}})])],1),i._v(" "),r("li",[r("p",[i._v("封签号")]),i._v(" "),r("el-form-item",{attrs:{prop:"sealNumber"}},[r("el-input",{attrs:{maxlength:20,size:i.mini,onkeyup:"this.value=this.value.replace(/\\s+/g,'')"},model:{value:i.formFee.sealNumber,callback:function(e){i.$set(i.formFee,"sealNumber","string"==typeof e?e.trim():e)},expression:"formFee.sealNumber"}})],1)],1),i._v(" "),r("li",[r("p",[i._v("油卡号")]),i._v(" "),r("el-form-item",{attrs:{prop:"oilCardNumber"}},[r("input",{directives:[{name:"numberOnly",rawName:"v-numberOnly"}],ref:"oilCardNumber",staticClass:"nativeinput",attrs:{type:"text",maxlength:25},domProps:{value:i.formFee.oilCardNumber},on:{change:function(e){return i.changeLoadNum(e.target.value,"oilCardNumber")}}})])],1)]),i._v(" "),r("span",{staticClass:"feeTips"},[i._v("注：车费合计 = 现付车费 + 现付油卡 + 回付车费 + 回付油卡 + 到付车费 + 到付油卡")])]):i._e()],1)],2)],1),i._v(" "),i.isEdit?i._e():r("div",{staticClass:"load_btn_boxs"},[r("el-button",{attrs:{size:"mini",plain:"",type:"primary"},on:{click:function(e){i.doAction("precent")}}},[r("icon-svg",{attrs:{"icon-class":"btn12_guanlianyd"}}),i._v(" 配载率")],1),i._v(" "),r("el-button",{attrs:{size:"mini",plain:"",type:"primary"},on:{click:function(e){i.doAction("finish")}}},[r("icon-svg",{attrs:{"icon-class":"btn14_fache"}}),i._v(" 完成配载")],1),i._v(" "),40!==i.loadTypeId?r("el-button",{attrs:{size:"mini",plain:"",type:"primary"},on:{click:function(e){i.doAction("finishTruck")}}},[r("icon-svg",{attrs:{"icon-class":"btn17_daocheqd"}}),i._v(" 完成并发车")],1):i._e()],1),i._v(" "),i.isEdit?r("div",{staticClass:"load_btn_boxs"},[r("el-button",{attrs:{size:"mini",plain:"",type:"primary"},on:{click:function(e){i.doAction("precent")}}},[r("icon-svg",{attrs:{"icon-class":"btn12_guanlianyd"}}),i._v(" 配载率")],1),i._v(" "),r("el-button",{attrs:{size:"mini",plain:"",type:"primary"},on:{click:function(e){i.doAction("finish")}}},[r("icon-svg",{attrs:{"icon-class":"btn14_fache"}}),i._v(" 保存")],1)],1):i._e(),i._v(" "),r("div",{staticClass:"load_btn_transferTable"},[r("dataTable",{attrs:{setLoadTable:i.setLoadTableList,isModify:i.isEdit,handlingFeeInfo:i.handlingFeeInfo,isRestorage:i.isRestorage},on:{loadTable:i.getLoadTable,repertoryList:i.getRepertoryList,change:i.getTableChange,changeHandlingFeeAll:i.getHandingFeeAll,resetHandlingFeeInfo:i.resetHandlingFeeInfo,reset:i.getSelectAddLoadRepertoryList}})],1),i._v(" "),r("loadChart",{attrs:{info:i.loadInfoPercent,truckInfo:i.formModel,popVisible:i.showRightTablePercent},on:{"update:popVisible":function(e){i.showRightTablePercent=e}}}),i._v(" "),r("addTruckInfo",{attrs:{truckSources:i.truckSources,truckTypes:i.truckTypes,issender:!0,isModify:i.isModify,info:i.selectInfo,orgid:i.otherinfo.orgid,popVisible:i.addTruckVisible},on:{"update:popVisible":function(e){i.addTruckVisible=e},close:i.closeAddTruckVisible,success:i.fetchData}}),i._v(" "),r("addDriverInfo",{attrs:{licenseTypes:i.licenseTypes,issender:!0,isModifyDriver:i.isModifyDriver,infoDriver:i.selectInfoDriver,orgid:i.otherinfo.orgid,popVisible:i.addDriverVisible},on:{"update:popVisible":function(e){i.addDriverVisible=e},close:i.closeAddDriver,success:i.fetchData}}),i._v(" "),r("actualSendtime",{attrs:{popVisible:i.timeInfoVisible},on:{"update:popVisible":function(e){i.timeInfoVisible=e},time:i.getActualTime}})],1)])},staticRenderFns:[]};t.a=r},"4nhw":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i("Hesc"),a=i("M65g");var o=function(e){i("CY7q")},n=i("VU/8")(r.a,a.a,o,null,null);t.default=n.exports},"5F+j":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i("voDd"),a=i("/v6R");var o=function(e){i("sNUZ")},n=i("VU/8")(r.a,a.a,o,null,null);t.default=n.exports},"5hGn":function(e,t){},"7fzG":function(e,t){},"7ueC":function(e,t){},"9cTb":function(e,t,i){"use strict";var r={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"transferTable"},[i("div",{staticClass:"transferTable_header"},[i("div",{staticClass:"transferTable_searchs"},[i("div",{staticClass:"transferTable_fresh"},[t._t("tableRefresh")],2),t._v(" "),t._t("tableSearch")],2),t._v(" "),i("div",{staticClass:"transferTable_header_btn_direction"},[i("el-tooltip",{attrs:{effect:"dark",content:"向左侧拉伸",placement:"top-end"}},[i("el-button",{staticClass:"btn-leftright",attrs:{icon:"el-icon-arrow-right",type:"primary",circle:"",disabled:t.isShowLeft,size:"mini",plain:""},on:{click:function(e){t.doAction("showAllLeft")}}})],1),t._v(" "),i("el-tooltip",{attrs:{effect:"dark",content:"向右侧拉伸",placement:"top-start"}},[i("el-button",{staticClass:"btn-leftright",attrs:{icon:"el-icon-arrow-left",type:"primary",circle:"",disabled:t.isShowRight,size:"mini",plain:""},on:{click:function(e){t.doAction("showAllRight")}}})],1),t._v(" "),i("transition",{attrs:{name:"el-zoom-in-bottom"}},[t.isShowReback?i("el-button",{staticClass:"btn-leftright",attrs:{icon:"el-icon-refresh",type:"primary",circle:"",size:"mini",plain:""},on:{click:function(e){t.doAction("showReback")}}}):t._e()],1),t._v(" "),i("div",{staticClass:"transferTable_header_btn_box clearfix"},[t._t("btnsBox")],2)],1)]),t._v(" "),i("div",{staticClass:"transferTable_content"},[i("div",{staticClass:"transferTable_content_table paddingRight",class:t.leftTableClass},[t._t("tableLeft",[t._v("左边表格区")])],2),t._v(" "),i("div",{staticClass:"transferTable_content_table",class:t.rightTableClass},[t._t("tableRight",[t._v("右边表格区")])],2)])])},staticRenderFns:[]};t.a=r},"9l6W":function(e,t,i){"use strict";var r=i("woOf"),o=i.n(r),a=i("Dd8w"),n=i.n(a),s=i("E4LH"),l=i("9ani"),c=i("P5Di"),d=i("QbVN"),h=i("o9X6"),u=i("9UCZ"),m=i("NYxO"),f=i("0xDb");t.a={components:{popRight:c.a,Upload:d.a,SelectTree:h.a,SelectType:u.a},props:{popVisible:{type:Boolean,default:!1},orgid:{required:!0},isModify:{type:Boolean,default:!1},info:{type:Object,default:function(){}},licenseTypes:{type:Array,default:function(){return[]}}},computed:n()({},Object(m.mapGetters)(["otherinfo"])),data:function(){return{searchTime:[],form:{bankCardNumber:"",bankName:"",certification:"",driverAddress:"",driverCardid:"",driverMobile:"",driverName:"",driverRemarks:"",drivingPicture:"",idcardPicture:"",licenseType:"",licenseTypeName:"",openBank:"",validityDate:"",validityStartdate:"",orgid:0},formLabelWidth:"100px",tooltip:!1,rules:{driverName:[{required:!0,message:"请输入司机名称"}],orgid:[{required:!0,message:"请选择所属机构"}],driverMobile:[{required:!0,trigger:"change",validator:function(e,t,i){""!==t&&null!==t&&t&&void 0!==t?s.a.MOBILE.test(t)?i():i(new Error("请输入有效的手机号码")):i(new Error("不能为空"))}}],driverCardid:[{pattern:s.a.ONLY_NUMBER_AND_LETTER,message:"身份证号码只能输入字母和数字"}]},popTitle:"新增司机",orgArr:[],rolesArr:[],departmentArr:[],loading:!1,roles:[],departments:[],groups:[],inited:!1,pickOption2:{firstDayOfWeek:1,disabledDate:function(e){return e.getTime()<Date.now()}}}},mounted:function(){this.form.orgid=this.orgid,this.inited||(this.inited=!0,this.initInfo())},watch:{popVisible:{handler:function(e,t){this.inited||(this.inited=!0,this.initInfo())},immediate:!0},orgid:function(e){this.form.orgid=e},info:{handler:function(e,t){if(this.isModify){this.popTitle="修改司机";var i=o()({},e);for(var r in this.form)this.form[r]=i[r];e.validityStartdate&&this.$set(this.searchTime,0,e.validityStartdate),e.validityDate&&this.$set(this.searchTime,1,e.validityDate),console.log(e.validityStartdate,e.validityDate),this.form.id=i.id}else{for(var a in this.popTitle="新增司机",this.form)this.form[a]="";this.searchTime=this.$options.data().searchTime,delete this.form.id,this.form.orgid=this.orgid}},deep:!0}},methods:{initInfo:function(){this.loading=!1},getOrgid:function(e){this.form.orgid=e},submitForm:function(e,r){var a=this;this.$refs[e].validate(function(e){if(!e)return!1;a.loading=!0;var t=o()({},a.form);t.fixPhone=a.fixPhone,a.searchTime&&a.searchTime[0]&&a.searchTime[1]&&(t.validityStartdate=Object(f.parseTime)(a.searchTime[0],"{y}-{m}-{d} ")+" 00:00:00",t.validityDate=Object(f.parseTime)(a.searchTime[1],"{y}-{m}-{d} ")+" 23:59:59");var i=void 0;console.log(a.isModify),a.isModify?i=Object(l.e)(t):a.isModify||(i=Object(l.d)(t)),i.then(function(e){a.loading=!1,a.$message.success("保存成功"),a.reset(),r||a.closeMe(),a.$emit("success")}).catch(function(e){a._handlerCatchMsg(e),a.loading=!1})})},reset:function(){var e=this.form.orgid;this.$refs.ruleForm.resetFields(),this.form.driverMobile="",this.form.idcardPicture="",this.form.drivingPicture="",this.form.certification="",this.form.orgid=e,this.searchTime=[]},closeMe:function(e){this.$emit("update:popVisible",!1),"function"==typeof e&&e()}}}},AfEI:function(e,t,i){"use strict";var r={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("pop-right",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"addDriverPop",attrs:{title:t.popTitle,isShow:t.popVisible},on:{close:t.closeMe}},[i("template",{staticClass:"addDriverPop-content",slot:"content"},[i("el-form",{ref:"ruleForm",attrs:{model:t.form,rules:t.rules,"label-width":t.formLabelWidth,inline:!0,"label-position":"right",size:"mini"}},[i("el-form-item",{attrs:{label:"司机姓名",prop:"driverName"}},[i("el-input",{attrs:{maxlength:10,"auto-complete":"off"},model:{value:t.form.driverName,callback:function(e){t.$set(t.form,"driverName","string"==typeof e?e.trim():e)},expression:"form.driverName"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"手机号码",prop:"driverMobile"}},[i("el-input",{attrs:{maxlength:11,"auto-complete":"off"},model:{value:t.form.driverMobile,callback:function(e){t.$set(t.form,"driverMobile",e)},expression:"form.driverMobile"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"归属网点",prop:"orgid"}},[i("SelectTree",{attrs:{orgid:t.otherinfo.orgid},model:{value:t.form.orgid,callback:function(e){t.$set(t.form,"orgid",e)},expression:"form.orgid"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"身份证号",prop:"driverCardid"}},[i("el-input",{attrs:{maxlength:18,"auto-complete":"off"},model:{value:t.form.driverCardid,callback:function(e){t.$set(t.form,"driverCardid",e)},expression:"form.driverCardid"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"驾驶证类型",prop:"licenseType"}},[i("SelectType",{attrs:{type:"driving_type",placeholder:"驾驶证类型"},model:{value:t.form.licenseType,callback:function(e){t.$set(t.form,"licenseType",e)},expression:"form.licenseType"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"银行卡号",prop:"bankCardNumber"}},[i("el-input",{directives:[{name:"numberOnly",rawName:"v-numberOnly"}],attrs:{maxlength:18,"auto-complete":"off"},model:{value:t.form.bankCardNumber,callback:function(e){t.$set(t.form,"bankCardNumber",e)},expression:"form.bankCardNumber"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"银行名称",prop:"bankName"}},[i("el-input",{attrs:{maxlength:20,"auto-complete":"off"},model:{value:t.form.bankName,callback:function(e){t.$set(t.form,"bankName",e)},expression:"form.bankName"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"开户行",prop:"openBank"}},[i("el-input",{attrs:{maxlength:20,"auto-complete":"off"},model:{value:t.form.openBank,callback:function(e){t.$set(t.form,"openBank",e)},expression:"form.openBank"}})],1),t._v(" "),i("el-form-item",{staticClass:"blockInput",attrs:{label:"驾驶证有效期",prop:"validityDate"}},[i("el-date-picker",{attrs:{type:"daterange","unlink-panels":"",align:"right","value-format":"yyyy-MM-dd HH:mm:ss","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:t.searchTime,callback:function(e){t.searchTime=e},expression:"searchTime"}})],1),t._v(" "),i("el-form-item",{staticClass:"blockInput",attrs:{label:"司机地址",prop:"driverAddress"}},[i("el-input",{attrs:{maxlength:50,"auto-complete":"off"},model:{value:t.form.driverAddress,callback:function(e){t.$set(t.form,"driverAddress",e)},expression:"form.driverAddress"}})],1),t._v(" "),i("el-form-item",{staticClass:"driverRemarks",attrs:{label:"备注",prop:"driverRemarks"}},[i("el-input",{attrs:{type:"textarea",maxlength:300},model:{value:t.form.driverRemarks,callback:function(e){t.$set(t.form,"driverRemarks","string"==typeof e?e.trim():e)},expression:"form.driverRemarks"}})],1),t._v(" "),i("el-form-item",{staticClass:"clearfix uploadcard"},[i("div",{staticClass:"idcard"},[i("upload",{attrs:{title:"身份证"},model:{value:t.form.idcardPicture,callback:function(e){t.$set(t.form,"idcardPicture",e)},expression:"form.idcardPicture"}})],1),t._v(" "),i("div",{staticClass:"drviercard"},[i("upload",{attrs:{title:"驾驶证"},model:{value:t.form.drivingPicture,callback:function(e){t.$set(t.form,"drivingPicture",e)},expression:"form.drivingPicture"}})],1),t._v(" "),i("div",{staticClass:"certcard"},[i("upload",{attrs:{title:"从业资格证"},model:{value:t.form.certification,callback:function(e){t.$set(t.form,"certification",e)},expression:"form.certification"}})],1)])],1)],1),t._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t.isModify?t._e():i("el-button",{attrs:{type:"primary"},on:{click:function(e){t.submitForm("ruleForm",!0)}}},[t._v("保存并新增")]),t._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:function(e){t.submitForm("ruleForm")}}},[t._v("保 存")]),t._v(" "),i("el-button",{on:{click:t.closeMe}},[t._v("取 消")])],1)],2)},staticRenderFns:[]};t.a=r},BSQq:function(e,t,i){"use strict";t.b=function(e){return r.b.post("/api-order/order/load/v1/selectLoadMainInfoList/",e).then(function(e){return e.data||{list:[],totalCount:0}})},t.h=function(e){return r.b.put("/api-order/order/load/v1/loadDepart/?loadTypeId="+e.loadTypeId+"&loadIds="+e.loadIds+"&actualSendtime="+e.actualSendtime)},t.g=function(e){return r.b.put("/api-order/order/load/v1/cancelLoadDepart/?loadTypeId="+e.loadTypeId+"&loadIds="+e.loadIds)},t.i=function(e){return r.b.put("/api-order/order/load/v1/cancelLoadTruck/?loadTypeId="+e.loadTypeId+"&loadIds="+e.loadIds)},t.f=function(e){return r.b.post("/api-order/order/load/v1/list/",e).then(function(e){return e.data||{list:[],totalCount:0}})},t.c=function(e){return r.b.post("/api-order/order/load/v1/cancelLoad/"+e.id+"/"+e.loadType)},t.d=function(e){return r.b.post("/api-order/order/load/v1/cancelPut/"+e.id+"/"+e.loadType)},t.a=function(e,t){return r.b.post("/api-order/order/load/v1/addRepertory/"+e,t)},t.e=function(e){return r.b.post("/api-order/order/load/v1/confirmToCar/"+e.id+"/?typeId="+e.typeId+"&actualArrivetime="+e.actualArrivetime)};var r=i("Vo7i")},CY7q:function(e,t){},FKPH:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i("9l6W"),a=i("AfEI");var o=function(e){i("grrk")},n=i("VU/8")(r.a,a.a,o,null,null);t.default=n.exports},G6L5:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i("LqOn"),a=i("4bnP");var o=function(e){i("uZGy")},n=i("VU/8")(r.a,a.a,o,null,null);t.default=n.exports},H58X:function(e,t,i){"use strict";t.b=function(e){return r.b.post("/api-order/order/load/v1/selectLoadMainInfoList/",e).then(function(e){return e.data||{list:[],totalCount:0}})},t.d=function(e){return r.b.put("/api-order/order/load/v1/cancelLoadTruck/?loadTypeId="+e.loadTypeId+"&loadIds="+e.loadIds)},t.c=function(e){return r.b.put("/api-order/order/load/v1/completeDelivery/?loadTypeId="+e.loadTypeId+"&loadIds="+e.loadIds+"&actualArrivetime="+e.actualArrivetime)},t.a=function(e){return r.b.post("/api-order/order/sign/v1/batchSign/",e).then(function(e){return e.data||{}})};var r=i("Vo7i")},Hesc:function(e,t,i){"use strict";var r=i("woOf"),a=i.n(r),o=i("Dd8w"),n=i.n(o),s=i("bOdI"),l=i.n(s),c=i("NYxO"),d=(i("TsW9"),i("IcMT")),h=i("0xDb"),u=i("sJaV"),m=i("0xDb"),f=i("lRwf"),p=i.n(f);t.a={data:function(){var e;return e={loading:!1,tablekey:"",loadTruck:"",truckMessage:"",formModel:{}},l()(e,"loadTruck","loadTruckOne"),l()(e,"btnsize","mini"),l()(e,"selectedRight",[]),l()(e,"selectedLeft",[]),l()(e,"orgLeftTable",[]),l()(e,"leftTable",[]),l()(e,"rightTable",[]),l()(e,"orgData",{left:[],right:[]}),l()(e,"isOrgLeftTable",!0),l()(e,"isCountFooter",!0),l()(e,"orgcolumnsLeft",[{field:"number",title:"序号",width:60,isFrozen:!0,titleAlign:"center",columnAlign:"center",formatter:function(e,t,i,r){return t+1}},{field:"customeAdv",title:"",width:50,titleAlign:"center",columnAlign:"center",isFrozen:!0,componentName:"addItemBtn"},{field:"shipGoodsSn",title:"货号",width:120,titleAlign:"center",columnAlign:"center"},{field:"shipFromOrgName",title:"开单网点",width:120,titleAlign:"center",columnAlign:"center"},{field:"shipToOrgName",title:"目的网点",width:120,titleAlign:"center",columnAlign:"center"},{field:"shipDeliveryMethodName",title:"交接方式",width:90,titleAlign:"center",columnAlign:"center"},{field:"shipSn",title:"运单号",width:120,titleAlign:"center",columnAlign:"center"},{field:"shipArrivepayFee",title:"到付(元)",width:120,titleAlign:"center",columnAlign:"center"},{field:"shipTotalFee",title:"运费合计(元)",width:140,titleAlign:"center",columnAlign:"center"},{field:"brokerageFee",title:"回扣(元)",width:140,titleAlign:"center",columnAlign:"center"},{field:"shipFromCityName",title:"发站",width:120,titleAlign:"center",columnAlign:"center"},{field:"shipToCityName",title:"到站",width:120,titleAlign:"center",columnAlign:"center"},{field:"shipSenderName",title:"发货人",width:120,titleAlign:"center",columnAlign:"center"},{field:"shipSenderMobile",title:"发货人电话",width:120,titleAlign:"center",columnAlign:"center"},{field:"shipReceiverName",title:"收货人",width:120,titleAlign:"center",columnAlign:"center"},{field:"shipReceiverMobile",title:"收货人电话",width:120,titleAlign:"center",columnAlign:"center"},{field:"cargoName",title:"货品名",width:120,titleAlign:"center",columnAlign:"center"},{field:"cargoPack",title:"包装",width:120,titleAlign:"center",columnAlign:"center"},{field:"repertoryAmount",title:"库存件数",width:120,titleAlign:"center",columnAlign:"center"},{field:"repertoryWeight",title:"库存重量(千克)",width:140,titleAlign:"center",columnAlign:"center"},{field:"repertoryVolume",title:"库存体积(方)",width:140,titleAlign:"center",columnAlign:"center"},{field:"cargoAmount",title:"运单件数",width:120,titleAlign:"center",columnAlign:"center"},{field:"cargoWeight",title:"运单重量(千克)",width:140,titleAlign:"center",columnAlign:"center"},{field:"cargoVolume",title:"运单体积(方)",width:140,titleAlign:"center",columnAlign:"center"},{field:"shipRemarks",title:"运单备注",width:120,titleAlign:"center",columnAlign:"center"}]),l()(e,"orgcolumnsRight",[{field:"number",title:"序号",width:60,isFrozen:!0,titleAlign:"center",columnAlign:"center",formatter:function(e,t,i,r){return t+1}},{field:"customeAdv",title:"",width:50,titleAlign:"center",columnAlign:"center",isFrozen:!0,componentName:"minusItemBtn"},{field:"shipGoodsSn",title:"货号",width:120,titleAlign:"center",columnAlign:"center"},{field:"shipFromOrgName",title:"开单网点",width:120,titleAlign:"center",columnAlign:"center"},{field:"shipDeliveryMethodName",title:"交接方式",width:90,titleAlign:"center",columnAlign:"center"},{field:"shipSn",title:"运单号",width:120,titleAlign:"center",columnAlign:"center"},{field:"shipArrivepayFee",title:"到付(元)",width:120,titleAlign:"center",columnAlign:"center"},{field:"handlingFee",title:"操作费(元)",width:140,hide:!0,titleAlign:"center",columnAlign:"center",componentName:"expandInput"},{field:"deliveryFeeToPay",title:"实付送货费(元)",width:140,hide:!0,titleAlign:"center",columnAlign:"center",componentName:"expandInput"},{field:"loadAmount",title:"配载件数",width:120,hide:!0,titleAlign:"center",columnAlign:"center",componentName:"expandInput"},{field:"loadWeight",title:"配载重量(千克)",width:120,hide:!0,titleAlign:"center",columnAlign:"center",componentName:"expandInput"},{field:"loadVolume",title:"配载体积(方)",width:120,hide:!0,titleAlign:"center",columnAlign:"center",componentName:"expandInput"},{field:"shipTotalFee",title:"运费合计(元)",width:120,titleAlign:"center",columnAlign:"center"},{field:"brokerageFee",title:"回扣(元)",width:120,titleAlign:"center",columnAlign:"center"},{field:"repertoryAmount",title:"库存件数",width:120,titleAlign:"center",columnAlign:"center"},{field:"repertoryWeight",title:"库存重量(千克)",width:140,titleAlign:"center",columnAlign:"center"},{field:"repertoryVolume",title:"库存体积(方)",width:140,titleAlign:"center",columnAlign:"center"},{field:"cargoAmount",title:"运单件数",width:120,titleAlign:"center",columnAlign:"center"},{field:"cargoWeight",title:"运单重量(千克)",width:140,titleAlign:"center",columnAlign:"center"},{field:"cargoVolume",title:"运单体积(方)",width:140,titleAlign:"center",columnAlign:"center"},{field:"shipRemarks",title:"运单备注",width:120,titleAlign:"center",columnAlign:"center"},{field:"cargoPack",title:"包装",width:120,titleAlign:"center",columnAlign:"center"},{field:"shipFromCityName",title:"发站",width:120,titleAlign:"center",columnAlign:"center"},{field:"shipToCityName",title:"到站",width:120,titleAlign:"center",columnAlign:"center"},{field:"shipToOrgName",title:"目的网点",width:120,titleAlign:"center",columnAlign:"center"},{field:"shipSenderName",title:"发货人",width:120,titleAlign:"center",columnAlign:"center"},{field:"shipSenderMobile",title:"发货人电话",width:120,titleAlign:"center",columnAlign:"center"},{field:"shipReceiverName",title:"收货人",width:120,titleAlign:"center",columnAlign:"center"},{field:"shipReceiverMobile",title:"收货人电话",width:120,titleAlign:"center",columnAlign:"center"},{field:"cargoName",title:"货品名",width:120,titleAlign:"center",columnAlign:"center"}]),l()(e,"footerLeft",[[]]),l()(e,"footerRight",[[]]),e},props:{setLoadTable:{type:Object,default:function(){}},isModify:{type:Boolean,default:!1},handlingFeeInfo:{type:Object,default:function(){}},isRestorage:{type:Boolean,default:!1}},computed:n()({},Object(c.mapGetters)(["otherinfo"]),{loadTypeId:{get:function(){return Number(this.$route.query.loadTypeId)},set:function(){}},columnsLeft:function(){return this.orgcolumnsLeft},columnsRight:function(){var t=this;return this.orgcolumnsRight.filter(function(e){return!e.hide||("handlingFee"!==e.field||40!==t.loadTypeId)&&("deliveryFeeToPay"!==e.field||40===t.loadTypeId)})}}),components:{transferTable:d.a,currentSearch:u.default},watch:{isModify:{handler:function(e,t){this.getList()},immediate:!0},setLoadTable:{handler:function(e,t){e&&(this.orgData=Object(h.objectMerge2)({},e),this.getList())},deep:!0},handlingFeeInfo:{handler:function(e,t){if(this.$route.query){if(!e.handlingFeeAll||0===this.rightTable.length)return;this.countHandingFee(),this.setBothFooterData()}},deep:!0}},mounted:function(){this.getList()},methods:{resizeVTable:function(){var e=this;this.loading=!0,setTimeout(function(){e.isOrgLeftTable?e.$refs.orgLeftTable.resize():e.$refs.leftTable.resize(),e.$refs.rightTable.resize(),e.loading=!1},900)},countHandingFee:function(){var r=this;if(this.handlingFeeInfo.apportionTypeId&&this.handlingFeeInfo.handlingFeeAll&&!(this.rightTable.length<1)){var a=this.handlingFeeInfo;switch(a.params=40===Number(this.$route.query.loadTypeId)?"deliveryFeeToPay":"handlingFee",this.handlingFeeInfo.apportionTypeId){case 45:var o=0,n=0;this.rightTable.forEach(function(e){o=m.tmsMath._add(o,e.brokerageFee?e.brokerageFee:0),n=m.tmsMath._add(n,e.shipTotalFee?e.shipTotalFee:0)}),this.rightTable.forEach(function(e,t){var i=m.tmsMath._sub(e.shipTotalFee,e.brokerageFee);e[a.params]=i<0?0:r.calc(m.tmsMath._mul(m.tmsMath._div(m.tmsMath._sub(e.shipTotalFee,e.brokerageFee),m.tmsMath._sub(n,o)),r.handlingFeeInfo.handlingFeeAll))});break;case 44:this.rightTable.forEach(function(e,t){e[a.params]=r.calc(m.tmsMath._div(r.handlingFeeInfo.handlingFeeAll,r.rightTable.length))});break;case 43:var i=0;this.rightTable.map(function(e){i=m.tmsMath._add(i,e.loadWeight)}),this.rightTable.forEach(function(e,t){e[a.params]=r.calc(m.tmsMath._mul(m.tmsMath._div(e.loadWeight,i),r.handlingFeeInfo.handlingFeeAll))});break;case 42:var s=0;this.rightTable.map(function(e){s=m.tmsMath._add(s,e.loadVolume)}),this.rightTable.forEach(function(e,t){e[a.params]=r.calc(m.tmsMath._mul(m.tmsMath._div(e.loadVolume,s),r.handlingFeeInfo.handlingFeeAll))});break;case 41:var l=0;this.rightTable.map(function(e){l=m.tmsMath._add(l,e.loadAmount)}),this.rightTable.forEach(function(e,t){e[a.params]=r.calc(m.tmsMath._mul(m.tmsMath._div(e.loadAmount,l),r.handlingFeeInfo.handlingFeeAll))})}var c=0,d=0,e=this.rightTable.length;this.rightTable.forEach(function(e,t){(c=m.tmsMath._add(c,e[a.params]))>r.handlingFeeInfo.handlingFeeAll&&(e[a.params]=m.tmsMath._sub(e[a.params],m.tmsMath._sub(c,r.handlingFeeInfo.handlingFeeAll))),e[a.params]=e[a.params]?e[a.params]:0,0===e[a.params]&&d++}),c<this.handlingFeeInfo.handlingFeeAll&&(this.rightTable[this.rightTable.length-1][a.params]=m.tmsMath._add(this.rightTable[this.rightTable.length-1][a.params],m.tmsMath._sub(this.handlingFeeInfo.handlingFeeAll,c))),this.handlingFeeInfo.apportionTypeId&&this.handlingFeeInfo.handlingFeeAll&&d===e&&(this.$notify.info({title:"消息",message:"运单相关数据不足以分摊操作，默认为【按票数分摊】。"}),this.$emit("resetHandlingFeeInfo",{apportionTypeId:44}))}},calc:function(e){return m.tmsMath._div(Math.round(m.tmsMath._mul(e,100)),100)},getList:function(){console.log("getList1",this.isModify),this.leftTable=this.$options.data().leftTable,this.rightTable=this.$options.data().rightTable,this.orgLeftTable=this.$options.data().orgLeftTable,this.isModify?console.log("getList2"):console.log("getList3"),this.leftTable=this.orgData.left,this.rightTable=this.orgData.right,this.orgLeftTable=this.orgData.left,this.$emit("loadTable",this.rightTable),this.$emit("repertoryList",this.orgLeftTable),this.setBothFooterData()},regetList:function(){this.$emit("reset")},getSearch:function(e){this.isOrgLeftTable=!1,this.leftTable=e,this.setBothFooterData()},getSearchEnter:function(){this.isOrgLeftTable=!0,this.leftTable.length&&this.addALLList(),this.leftTable=a()([],this.orgLeftTable),this.setBothFooterData()},clickDetailsRight:function(e){this.$refs.multipleTableRight.toggleRowSelection(e)},clickDetailsLeft:function(e){this.$refs.multipleTableLeft.toggleRowSelection(e)},getSelectionRight:function(e){this.selectedRight=e},getSelectionLeft:function(e){this.selectedLeft=e},changeTableKey:function(){this.tablekey=Math.random()},doAction:function(e){switch(e){case"goLeft":this.goLeft();break;case"goRight":this.goRight()}},changLoadData:function(e,t,i){console.log(e,t,i),this.$set(this.rightTable[e],i,Number(t)||""),console.log(this.rightTable[e][i]);var r=this.rightTable[e].loadAmount,a=this.rightTable[e].loadWeight,o=this.rightTable[e].loadVolume,n=this.rightTable[e].repertoryAmount,s=this.rightTable[e].repertoryWeight,l=this.rightTable[e].repertoryVolume;return n<r||r<1||s<a||a<0||l<o||o<0?(this.$notify({title:"警告",message:"配载件数不能小于1,配载重量和体积不能小于0,都不能大于库存数量,默认为该库存数量",type:"warning"}),this.rightTable[e].loadAmount=n,this.rightTable[e].loadWeight=s,this.rightTable[e].loadVolume=l):r===n?(this.$notify({title:"提示",message:"配载件数等于该库存大小,即所有配载数量为库存数量",type:"warning"}),this.rightTable[e].loadAmount=n):o===l&&a===s&&(this.$notify({title:"提示",message:"配载重量与配载体积都等于该库存大小,即所有配载数量为库存数量",type:"warning"}),this.rightTable[e].loadWeight=s,this.rightTable[e].loadVolume=l),40!==this.$route.query.loadTypeId&&this.countHandingFee(),this.$emit("loadTable",this.rightTable),this.$emit("repertoryList",this.orgLeftTable),this.setBothFooterData(),this.rightTable[e].loadAmount&&this.rightTable[e].loadWeight&&this.rightTable[e].loadVolume},changHandlingFee:function(e,t,i){var r=Object(h.objectMerge2)({},this.handlingFeeInfo);r.params=40===Number(this.$route.query.loadTypeId)?"deliveryFeeToPay":"handlingFee",this.$set(this.rightTable[e],i,Number(t)||""),this.setBothFooterData();var a=0;this.rightTable.forEach(function(e){a=m.tmsMath._add(a,e[i]?e[i]:0)});var o=0,n=r.deliveryHandlingFee;n&&(0<=(o=a-n)?a=o:r.deliveryHandlingFee=0),r.value=a,r.handlingFeeAll=a,this.$emit("changeHandlingFeeAll",r)},goLeft:function(){var r=this;if(console.log("goLeft 数据从左边穿梭到右边"),0===this.selectedRight.length)this.$message({type:"warning",message:"请在左边表格选择数据"});else{var a=Object(h.objectMerge2)([],this.rightTable),o=Object(h.objectMerge2)([],this.leftTable),n=Object(h.objectMerge2)([],this.orgLeftTable);this.selectedRight.forEach(function(t,e){if(r.$route.query){var i=40===Number(r.$route.query.loadTypeId)?"deliveryFeeToPay":"handlingFee";t[i]=0}t.loadAmount=t.repertoryAmount,t.loadWeight=t.repertoryWeight,t.loadVolume=t.repertoryVolume,(a=a.filter(function(e){return e.repertoryId!==t.repertoryId})).push(t),o=o.filter(function(e){return e.repertoryId!==t.repertoryId}),n=n.filter(function(e){return e.repertoryId!==t.repertoryId})}),this.rightTable=a,this.leftTable=o,this.orgLeftTable=n,this.selectedRight=[],this.countHandingFee(),this.$emit("loadTable",this.rightTable),this.$emit("repertoryList",this.orgLeftTable),this.loading=!1}},goRight:function(){if(console.log("goRight 数据从右边穿梭到左边"),0===this.selectedLeft.length)this.$message({type:"warning",message:"请在右边表格选择数据"});else{var i=Object(h.objectMerge2)([],this.rightTable),r=Object(h.objectMerge2)([],this.leftTable),a=Object(h.objectMerge2)([],this.orgLeftTable);this.selectedLeft.forEach(function(t,e){r=r.filter(function(e){return e.repertoryId!==t.repertoryId}),a=a.filter(function(e){return e.repertoryId!==t.repertoryId}),r.push(t),a.push(t),i=i.filter(function(e){return e.repertoryId!==t.repertoryId})}),this.rightTable=i,this.leftTable=r,this.orgLeftTable=a,this.selectedLeft=[],this.countHandingFee(),this.$emit("loadTable",this.rightTable),this.$emit("repertoryList",this.orgLeftTable),this.loading=!1}},addItem:function(e,t){this.selectedRight=[],this.selectedRight[t]=e,this.doAction("goLeft"),this.setBothFooterData()},minusItem:function(e,t){this.selectedLeft=[],this.selectedLeft[t]=e,this.doAction("goRight"),this.setBothFooterData()},addALLList:function(){this.loading=!0,this.selectedRight=a()([],this.leftTable),this.doAction("goLeft"),this.setBothFooterData()},minusAllList:function(){this.loading=!0,this.selectedLeft=a()([],this.rightTable),this.doAction("goRight"),this.setBothFooterData()},dclickAddItem:function(e,t,i){console.log("row",e,t,i),this.selectedRight=[],this.selectedRight.push(t),this.doAction("goLeft"),this.setBothFooterData()},dclickMinusItem:function(e,t,i){this.selectedLeft=[],this.selectedLeft.push(t),this.doAction("goRight"),this.setBothFooterData()},_processSearch:function(e,t){obj.nextTime=obj.nextTime||300,this.timer&&clearTimeout(this.timer),obj.queryString?this.timer=setTimeout(function(){t()},obj.nextTime):t()},setBothFooterData:function(){var e=this;this.isCountFooter&&(this.timer&&clearTimeout(this.timer),this.isCountFooter=!1,this.timer=setTimeout(function(){e.leftTable.length?e.footerLeft=e.setFooterData({columns:e.columnsLeft,data:Object(h.objectMerge2)([],e.leftTable)},["_index|2|单","brokerageFee","shipTotalFee","shipArrivepayFee|","repertoryAmount|","repertoryWeight|","repertoryVolume|","cargoAmount|","cargoWeight|","cargoVolume|"]):e.footerLeft=[[]],e.rightTable.length?e.footerRight=e.setFooterData({columns:e.columnsRight,data:Object(h.objectMerge2)([],e.rightTable)},["_index|2|单","brokerageFee","shipTotalFee","shipArrivepayFee|","handlingFee","repertoryAmount|","repertoryWeight|","repertoryVolume|","cargoAmount|","cargoWeight|","cargoVolume|","loadAmount|","loadWeight|","loadVolume|"]):e.footerRight=[[]],e.isCountFooter=!0},100))},setFooterData:function(e,t){var i=[],r=Object(m.getSummariesVtable)(e,t);return i.push(r),i},doActionExpandTable:function(e){switch(e.type){case"addItemBtn":this.addItem(e.row,e.index);break;case"minusItemBtn":this.minusItem(e.row,e.index);break;case"expandInput":/(handlingFee|deliveryFeeToPay)/.test(e.field)?this.changHandlingFee(e.index,e.value,e.field):this.changLoadData(e.index,e.value,e.field)}}}},p.a.component("addItemBtn",{template:'<button class="tableItemBtn" size="mini" @click="addItem(rowData, field,index)">\n        </button>',props:{rowData:{type:Object},field:{type:String},index:{type:Number}},methods:{addItem:function(e,t,i){this.$emit("on-custom-comp",{row:e,index:i,type:"addItemBtn"})}}}),p.a.component("minusItemBtn",{template:'<button class="tableItemBtnMinus" size="mini" @click="minusItem(rowData,field, index)">\n        </button>',props:{rowData:{type:Object},field:{type:String},index:{type:Number}},methods:{minusItem:function(e,t,i){this.$emit("on-custom-comp",{row:e,index:i,type:"minusItemBtn"})}}}),p.a.component("expandInput",{template:'<input placeholder="请输入"\n  class="vtableInput"\n  :maxlength="10"\n   v-model.number="rowData[field]" \n  @dblclick.stop.prevent.native \n  @click.stop.prevent.native\n  @change="(e) => handleChange(e.target.value, rowData, field, index)" />',props:{rowData:{type:Object},field:{type:String},index:{type:Number}},methods:{handleChange:function(e,t,i,r){this.$emit("on-custom-comp",{row:t,index:r,type:"expandInput",value:e,field:i})}}})},IY6l:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i("WfZq"),a=i("hrre"),o=i("VU/8")(r.a,a.a,null,null,null);t.default=o.exports},IcMT:function(e,t,i){"use strict";var r=i("PI8x"),a=i("9cTb");var o=function(e){i("7ueC")},n=i("VU/8")(r.a,a.a,o,"data-v-4bbec734",null);t.a=n.exports},LqOn:function(e,t,i){"use strict";var r=i("mvHQ"),o=i.n(r),a=i("woOf"),n=i.n(a),s=i("Dd8w"),l=i.n(s),c=i("bOdI"),d=i.n(c),h=i("DAYN"),u=i.n(h),m=i("9UCZ"),f=i("4nhw"),p=i("o9X6"),g=i("5F+j"),v=i("FKPH"),b=i("IY6l"),y=i("kOGt"),T=(i("E4LH"),i("t5DY")),k=i("NYxO"),I=i("TsW9"),F=(i("9ani"),i("0xDb")),M=i("BSQq"),_=i("ayAl"),L=i("H58X");t.a={data:function(){var e;return e={searchLoading:!1,visibleChange:!1,disOrgList:[],networkList:[],handlingFeeInfo:{handlingFeeAll:null,apportionTypeId:null,deliveryHandlingFee:null,value:null,params:"handlingFee",reParams:"handlingFeeAll"},searchQueryData:{pageSize:100,currentPage:1,vo:{orgId:"",loadTypeId:"",batchTypeId:"",truckIdNumber:"",dirverName:""}},timeInfoVisible:!1,apportionTypeList:[],driverKey:0,truckKey:0,tablekey:"",loadTruck:"",truckMessage:"",contractNo:"",formModel:{loadTime:Object(F.parseTime)(new Date),requireArrivedTime:"",planArrivedTime:"",orgid:"",dirverName:"",dirverMobile:"",truckIdNumber:"",arriveOrgid:"",terminalNo:""},isDirectDelivery:!1,formFee:{}},d()(e,"loadTruck","loadTruckOne"),d()(e,"showRightTablePercent",!1),d()(e,"loading",!1),d()(e,"selectedRight",[]),d()(e,"selectedLeft",[]),d()(e,"leftTable",[]),d()(e,"rightTable",[]),d()(e,"loadTableInfo",[]),d()(e,"loadInfoPercentOrg",[]),d()(e,"mini","mini"),d()(e,"loadInfo",{tmsOrderLoad:{},tmsOrderLoadDetailsList:[],tmsOrderLoadFee:{}}),d()(e,"setLoadTableList",{left:[],right:[]}),d()(e,"orgData",{}),d()(e,"isEdit",!1),d()(e,"isModify",!1),d()(e,"repertoryList",[]),d()(e,"addTruckVisible",!1),d()(e,"truckSources",[]),d()(e,"truckTypes",[]),d()(e,"selectInfo",{}),d()(e,"licenseTypes",[]),d()(e,"isModifyDriver",!1),d()(e,"selectInfoDriver",{}),d()(e,"addDriverVisible",!1),d()(e,"DriverList",[]),d()(e,"TruckList",[]),d()(e,"cacheDriverList",{}),d()(e,"cacheTruckList",{}),d()(e,"Drivers",[]),d()(e,"Trucks",[]),d()(e,"Terminals",[]),d()(e,"submitvalidate",!1),d()(e,"batchTypeIdFinish",47),d()(e,"batchTypeIdFinishTruck",48),d()(e,"inited",!1),d()(e,"formModelRules",{apportionTypeName:[{required:!0,trigger:"change",message:"必选"}],truckIdNumber:[{required:!0,trigger:"change",validator:function(e,t,i){""!==t&&null!==t&&t&&void 0!==t?8<t.length?i(new Error("不能超过8个字符")):i():i(new Error("不能为空"))}}],dirverName:[{required:!0,trigger:"change",validator:function(e,t,i){""!==t&&null!==t&&t&&void 0!==t?10<t.length?i(new Error("不能超过10个字符")):i():i(new Error("不能为空"))}}],dirverMobile:[{required:!0,trigger:"change",validator:function(e,t,i){""!==t&&null!==t&&t&&void 0!==t?i():i(new Error("不能为空"))}}]}),d()(e,"isRestorage",!1),d()(e,"formFeeRules",{}),e},computed:l()({},Object(k.mapGetters)(["otherinfo"]),{arriveOrgid:function(e){this.$set(this.formModel,"arriveOrgid",e)},orgid:function(){},loadInfoPercent:function(){return n()([],this.loadInfoPercentOrg)},loadTimeFormName:function(){return(38===this.loadTypeId?"配载":39===this.loadTypeId?"配载":"送货")+"时间"},typeid:function(){return Number(this.$route.query.loadTypeId)},loadTypeId:{get:function(){return Number(this.$route.query.loadTypeId)},set:function(){}},totalFormFee:{get:function(){return F.tmsMath.add(this.formFee.nowpayCarriage,this.formFee.nowpayOilCard,this.formFee.backpayCarriage,this.formFee.backpayOilCard,this.formFee.arrivepayCarriage,this.formFee.arrivepayOilCard).result()},set:function(){}}}),components:{selectType:m.a,dataTable:f.default,SelectTree:p.a,addTruckInfo:g.default,addDriverInfo:v.default,loadChart:b.default,actualSendtime:y.default,draggable:u.a},created:function(){this.setLoadTypeId(),this.disOrgList=[this.otherinfo.orgid]},mounted:function(){this.queryData=o()(this.$route.query),this.getSelectType(),this.init(),this.getSystemTime()},activated:function(){this.getSystemTime(),this.queryData!==o()(this.$route.query)&&(this.queryData=o()(this.$route.query),this.getSelectType(),this.init())},watch:{networkList:{handler:function(e,t){var i=[this.otherinfo.orgid];e&&e.forEach(function(e){i.push(e.id)}),this.disOrgList=i},deep:!0}},methods:{addNetWork:function(){this.networkList.length<5&&this.networkList.push({id:""})},deleteNetwork:function(e,t){console.log("删除",e,t)},startDragNetwork:function(e){var t=this;this.visibleChange=!0,setTimeout(function(){t.visibleChange=!1},100)},switchUrl:function(t,e){var i=this,r=this.visitedViews().filter(function(e){return e.fullPath===t});t=encodeURIComponent(t);var a={truckMessage:this.truckMessage,contractNo:this.contractNo,formModel:Object(F.objectMerge2)({},this.formModel),formFee:Object(F.objectMerge2)({},this.formFee),apportionTypeList:Object(F.objectMerge2)([],this.apportionTypeList),loadTable:{left:Object(F.objectMerge2)([],this.repertoryList),right:Object(F.objectMerge2)([],this.loadTableInfo)},networkList:this.networkList};console.log("switchUrl data",a),e?(console.log("save daTA::::::",t,a),sessionStorage.setItem(t,o()(a)),this.loadTableInfo=[],this.repertoryList=[],this.apportionTypeList=[],this.formFee=Object(F.objectMerge2)({},this.$options.data().orgData),this.formModel=Object(F.objectMerge2)({},this.$options.data().formModel),this.networkList=Object(F.objectMerge2)([],this.$options.data().networkList),this.$nextTick(function(){i.$refs.formModel.resetFields()})):r&&(a=sessionStorage.getItem(t))?(a=JSON.parse(a),this.$route.query.flag?this.isEdit=!0:this.isEdit=!1,this.isRestorage=!0,console.log("render data",a),this.formModel=a.formModel,this.formFee=a.formFee,this.$set(this.setLoadTableList,"left",a.loadTable.left),this.$set(this.setLoadTableList,"right",a.loadTable.right),this.apportionTypeList=a.apportionTypeList,this.truckMessage=a.truckMessage,this.contractNo=a.contractNo,this.networkList=a.networkList):(this.isRestorage=!1,this.getSelectType(),this.init(),this.getSystemTime())},visitedViews:function(){return this.$store.state.tagsView.visitedViews},init:function(){var t=this;this.formModel=this.$options.data().formModel,this.$refs.formModel&&this.$refs.formModel.resetFields(),this.setLoadTypeId(),this.setLoadTableList={left:[],right:[]},this.initIsEdit().then(function(e){t.formModel.orgid=t.orgid,t.DriverList=t.Drivers,t.TruckList=t.Trucks,console.log("isEdit",t.isEdit),t.getSelectAddLoadRepertoryList()}),this.handlingFeeInfo.params=40===this.loadTypeId?"deliveryFeeToPay":"handlingFee",this.inited||(this.inited=!0,this.initInfo())},getTableChange:function(e){this.loadInfoPercentOrg=Object(F.objectMerge2)([],e),this.loadTableInfo=e},getRepertoryList:function(e){this.repertoryList=e},setLoadTypeId:function(){var e=Number(this.$route.query.loadTypeId);if(e)switch(e){case 38:this.batchTypeIdFinish=47,this.batchTypeIdFinishTruck=48,console.log("短驳38",this.loadTypeId,this.batchTypeIdFinish,this.batchTypeIdFinishTruck);break;case 39:this.batchTypeIdFinish=52,this.batchTypeIdFinishTruck=53,console.log("干线39",this.loadTypeId,this.batchTypeIdFinish,this.batchTypeIdFinishTruck);break;case 40:this.batchTypeIdFinish=57,this.batchTypeIdFinishTruck=57,console.log("送货40",this.loadTypeId,this.batchTypeIdFinish,this.batchTypeIdFinishTruck)}else this.loadTypeId=38,this.batchTypeIdFinish=47,this.batchTypeIdFinishTruck=48},setOrgData:function(){var t=this;console.log("initIsEdit3",this.$route.query.loadTypeId),this.searchQueryData.vo.orgId=this.otherinfo.orgid;var e=void 0;switch(Number(this.$route.query.loadTypeId)){case 38:console.log("initIsEdit4"),this.searchQueryData.vo.loadTypeId=38,this.searchQueryData.vo.batchTypeId=46,this.searchQueryData.vo.batchNo=this.$route.query.flag,e=Object(M.b)(this.searchQueryData).then(function(e){t.orgData=Object(F.objectMerge2)({},e.list[0]),console.log(e.list[0],t.orgData),t.setAfterOrgData()});break;case 39:this.searchQueryData.vo.loadTypeId=39,this.searchQueryData.vo.batchNo=this.$route.query.flag,e=Object(_.n)(this.searchQueryData).then(function(e){e&&(t.orgData=Object(F.objectMerge2)({},e.list[0]),t.setAfterOrgData())});break;case 40:this.searchQueryData.vo.loadTypeId=40,this.searchQueryData.vo.batchTypeId=56,this.searchQueryData.vo.batchNo=this.$route.query.flag,e=Object(L.b)(this.searchQueryData).then(function(e){e&&(t.orgData=Object(F.objectMerge2)({},e.list[0]),t.setAfterOrgData())})}return e},setAfterOrgData:function(){this.truckMessage=this.orgData.batchNo,this.contractNo=this.orgData.contractNo?this.orgData.contractNo:null;var e={};e.id=this.orgData.id,e.orgid=this.orgData.orgid,e.batchNo=this.orgData.batchNo,e.arriveOrgid=this.orgData.arriveOrgid,e.loadTypeId=this.loadTypeId,e.batchTypeId=this.batchTypeIdFinish,e.apportionTypeId=this.orgData.apportionTypeId,e.truckIdNumber=this.orgData.truckIdNumber,e.dirverName=this.orgData.dirverName,e.dirverMobile=this.orgData.dirverMobile,e.truckLoad=this.orgData.truckLoad,e.truckVolume=this.orgData.truckVolume,e.loadTime=this.orgData.loadTime,e.shortFee=this.orgData.shortFee,e.requireArrivedTime=this.orgData.requireArrivedTime,e.planArrivedTime=this.orgData.planArrivedTime,e.remark=this.orgData.remark,e.deliveryDetailFee=this.orgData.deliveryDetailFee,e.deliveryHandlingFee=this.orgData.deliveryHandlingFee,e.handlingFeeAll=this.orgData.handlingFeeAll,this.formModel=Object(F.objectMerge2)({},e),this.handlingFeeInfo.apportionTypeId=this.orgData.apportionTypeId,this.handlingFeeInfo.handlingFeeAll=this.orgData.handlingFeeAll;var t={};t.nowpayCarriage=this.orgData.nowpayCarriage,t.nowpayOilCard=this.orgData.nowpayOilCard,t.backpayCarriage=this.orgData.backpayCarriage,t.backpayOilCard=this.orgData.backpayOilCard,t.arrivepayCarriage=this.orgData.arrivepayCarriage,t.arrivepayOilCard=this.orgData.arrivepayOilCard,t.carloadInsuranceFee=this.orgData.carloadInsuranceFee,t.leaveHandlingFee=this.orgData.leaveHandlingFee,t.leaveOtherFee=this.orgData.leaveOtherFee,t.arriveHandlingFee=this.orgData.arriveHandlingFee,t.arriveOtherFee=this.orgData.arriveOtherFee,t.sealNumber=this.orgData.sealNumber,t.oilCardNumber=this.orgData.oilCardNumber,this.formFee=Object(F.objectMerge2)({},t),this.initNetwork()},initNetwork:function(){var t=this;if(this.isEdit){console.log("这里是初始化网点",this.orgData),console.log("编辑"),this.networkList=[];var e=this.orgData.wayOrgid;if(e)e.split(",").forEach(function(e){t.networkList.push({id:e})});this.networkList.push({id:this.orgData.arriveOrgid}),console.log("networkList",this.networkList)}else this.networkList=[],this.networkList.push({id:""})},initIsEdit:function(){return this.orgData=Object(F.objectMerge2)({},this.$options.data().orgData),this.formFee=Object(F.objectMerge2)({},this.$options.data().orgData),this.$route.query.flag?(this.isEdit=!0,this.setOrgData()):(this.orgData=Object(F.objectMerge2)({},this.$options.data().orgData),this.isEdit=!1,this.initNetwork(),this.getLoadNo())},getLoadNo:function(){var t=this;return Object(I.a)(this.otherinfo.orgid,this.loadTypeId).then(function(e){t.truckMessage=e.text,t.contractNo=e.text}).catch(function(e){t._handlerCatchMsg(e)})},getSystemTime:function(){var t=this;this.isEdit||Object(T.k)().then(function(e){t.formModel.loadTime=e.trim()}).catch(function(e){t.loading=!1,t._handlerCatchMsg(e)})},getSelectAddLoadRepertoryList:function(){var t=this;this.loading=!0,this.isEdit?(this.getUpdateRepertoryLeft(),this.getUpdateRepertoryRight()):(this.$set(this.setLoadTableList,"left",[]),Object(I.d)(this.otherinfo.orgid).then(function(e){t.setLoadTableList.left=e.data,t.loading=!1,console.log("不修改 ")}).catch(function(e){t.loading=!1,t._handlerCatchMsg(e)}))},changeTableKey:function(){this.tablekey=Math.random()},doAction:function(e){var t=this;switch(e){case"reset":this.$nextTick(function(){t.resetFieldsForm()});break;case"precent":this.showPercent();break;case"finish":this.finishLoadInfo();break;case"finishTruck":this.timeInfoVisible=!0;break;case"addTruck":this.addTruck();break;case"addDriver":this.addDriver()}},showPercent:function(){this.showRightTablePercent=!0},formValidate:function(){var t=this;console.log(this.formModel,this.formFee),this.$refs.formModel.validate(function(e){e&&39===t.loadTypeId?0===t.networkList.filter(function(e){return e.id}).length?(t.$message.warning("到达网点不能为空~"),t.submitvalidate=!1):t.$refs.formFee.validate(function(e){e?t.loadTableInfo.length<1?(t.submitvalidate=!1,t.$message({type:"warning",message:"右边数据表格不能为空"})):t.submitvalidate=!0:(t.$message({type:"warning",message:"请填写完整费用表单"}),t.submitvalidate=!1)}):e&&39!==t.loadTypeId?t.submitvalidate=!0:(t.$message({type:"warning",message:"请填写完整表单"}),t.submitvalidate=!1)})},gotoPage:function(){switch(this.eventBus.$emit("closeCurrentView"),this.loadTypeId){case 38:this.$store.commit("UPDATE_LIST_STATE","shortDepartDeliver"),this.$router.push({path:"/operation/order/shortDepart/deliver"});break;case 39:this.$router.push({path:"././arteryDepart",query:{pageKey:(new Date).getTime()}}),this.eventBus.$emit("replaceCurrentView","/operation/order/arteryDepart");break;case 40:this.$router.push({path:"././deliverManage",query:{pageKey:(new Date).getTime()}}),this.eventBus.$emit("replaceCurrentView","/operation/order/deliverManage")}},finishLoadInfo:function(){var t=this;if(this.loading)return!1;this.formValidate(),this.submitvalidate&&(this.setData(),this.$nextTick(function(){t.isEdit?(t.loading=!0,console.log("这里是编辑完成配载",t.loadInfo),Object(I.j)(t.loadInfo).then(function(e){t.loading=!1,t.$message({type:"success",message:"修改配载信息成功"}),t.$nextTick(function(){t.gotoPage()})}).catch(function(e){t.loading=!1,t._handlerCatchMsg(e)})):(console.log("这里是添加完成配载",t.loadInfo),t.loading=!0,Object(I.i)(t.loadInfo).then(function(e){t.loading=!1,t.$message({type:"success",message:"插入配载信息成功"}),t.$nextTick(function(){t.gotoPage()})}).catch(function(e){t.loading=!1,t._handlerCatchMsg(e)}))}))},getActualTime:function(e){this.finishTruckInfo(e)},finishTruckInfo:function(e){var t=this;if(this.loading)return!1;this.formValidate(),this.submitvalidate&&(this.setDataFinishTruck(),this.$nextTick(function(){t.loading=!0,t.$set(t.loadInfo.tmsOrderLoad,"actualSendtime",e.actualSendtime),Object(I.i)(t.loadInfo).then(function(e){t.loading=!1,t.$message({type:"success",message:"保存成功"}),t.$nextTick(function(){t.gotoPage()})}).catch(function(e){t.loading=!1,t._handlerCatchMsg(e)})}))},getLoadTable:function(e){this.loadInfoPercentOrg=Object(F.objectMerge2)([],e),this.loadTableInfo=e},resetFieldsForm:function(){var t=this,e=["formModel","formFee"],i=this.loadTypeId;Object(F.objectMerge2)(this.$data,this.$options.data()),this.$nextTick(function(){39===i?e.forEach(function(e){t.$refs[e].resetFields()}):t.$refs[e[0]].resetFields()}),this.init()},changeDirect:function(e){console.log("orgid",this.otherinfo.orgid),e?this.formModel.arriveOrgid="":this.isEdit?this.formModel.arriveOrgid=this.orgData.orgid:this.formModel.arriveOrgid="",console.log(e,this.formModel.arriveOrgid)},setData:function(){if(this.setLoadTypeId(),this.isEdit?this.$set(this.formModel,"orgid",this.orgData.orgid):this.$set(this.formModel,"orgid",this.otherinfo.orgid),this.$set(this.formModel,"batchNo",this.truckMessage),this.$set(this.formModel,"loadTypeId",this.loadTypeId),this.$set(this.formModel,"batchTypeId",this.batchTypeIdFinish),39===this.loadTypeId){this.$set(this.formModel,"contractNo",this.contractNo),this.$set(this.formModel,"oilCardNumber",this.formFee.oilCardNumber),this.$set(this.formModel,"sealNumber",this.formFee.sealNumber);var t=[];Object(F.objectMerge2)([],this.networkList).forEach(function(e){e.id&&t.push(e.id)}),this.$set(this.formModel,"wayOrgid",1<t.length?t.slice(0,-1).join(","):""),this.$set(this.formModel,"arriveOrgid",t[t.length-1]),console.log("setData 途径网点",this.formModel,this.formModel.wayOrgid,this.formModel.arriveOrgid,t)}if(delete this.formFee.oilCardNumber,delete this.formFee.sealNumber,this.loadInfo.tmsOrderLoadFee=Object(F.objectMerge2)({},this.formFee),this.loadInfo.tmsOrderLoad=Object(F.objectMerge2)({},this.formModel),this.loadInfo.tmsOrderLoadDetailsList=Object(F.objectMerge2)([],this.loadTableInfo),40===this.loadTypeId){var e=F.tmsMath.add(this.formModel.deliveryDetailFee,this.formModel.deliveryHandlingFee).result();this.$set(this.loadInfo.tmsOrderLoadFee,"deliveryFee",e),this.$set(this.loadInfo.tmsOrderLoadFee,"deliveryDetailFee",this.formModel.deliveryDetailFee),this.$set(this.loadInfo.tmsOrderLoadFee,"deliveryHandlingFee",this.formModel.deliveryHandlingFee)}else this.$set(this.loadInfo.tmsOrderLoadFee,"shortFee",this.formModel.shortFee),this.$set(this.loadInfo.tmsOrderLoadFee,"handlingFeeAll",this.formModel.handlingFeeAll),delete this.loadInfo.tmsOrderLoad.shortFee,delete this.loadInfo.tmsOrderLoad.handlingFeeAll;this.formModel.requireArrivedTime=this.formModel.requireArrivedTime?Object(F.parseTime)(this.formModel.requireArrivedTime,"{y}-{m}-{d} ")+"23:59:59":"",this.formModel.planArrivedTime=this.formModel.planArrivedTime?Object(F.parseTime)(this.formModel.planArrivedTime,"{y}-{m}-{d} ")+"23:59:59":"",this.formModel.loadTime=Object(F.parseTime)(this.formModel.loadTime,"{y}-{m}-{d} ")+"00:00:00"},setDataFinishTruck:function(){if(this.$set(this.formModel,"batchNo",this.truckMessage),this.$set(this.formModel,"orgid",this.otherinfo.orgid),this.$set(this.formModel,"loadTypeId",this.loadTypeId),this.$set(this.formModel,"batchTypeId",this.batchTypeIdFinishTruck),39===this.loadTypeId){this.$set(this.formModel,"contractNo",this.contractNo),this.$set(this.formModel,"oilCardNumber",this.formFee.oilCardNumber),this.$set(this.formModel,"sealNumber",this.formFee.sealNumber);var t=[];Object(F.objectMerge2)([],this.networkList).forEach(function(e){e.id&&t.push(e.id)}),this.$set(this.formModel,"wayOrgid",1<t.length?t.slice(0,-1).join(","):""),this.$set(this.formModel,"arriveOrgid",t[t.length-1]),console.log("setData 途径网点",this.formModel,this.formModel.wayOrgid,this.formModel.arriveOrgid,t)}if(delete this.formFee.oilCardNumber,delete this.formFee.sealNumber,this.loadInfo.tmsOrderLoadFee=Object(F.objectMerge2)({},this.formFee),this.loadInfo.tmsOrderLoad=Object(F.objectMerge2)({},this.formModel),this.loadInfo.tmsOrderLoadDetailsList=Object(F.objectMerge2)([],this.loadTableInfo),40===this.loadTypeId){var e=F.tmsMath.add(this.formModel.deliveryDetailFee,this.formModel.deliveryHandlingFee).result();this.$set(this.loadInfo.tmsOrderLoadFee,"deliveryFee",e),this.$set(this.loadInfo.tmsOrderLoadFee,"deliveryDetailFee",this.formModel.deliveryDetailFee),this.$set(this.loadInfo.tmsOrderLoadFee,"deliveryHandlingFee",this.formModel.deliveryHandlingFee)}else this.$set(this.loadInfo.tmsOrderLoadFee,"shortFee",this.formModel.shortFee),this.$set(this.loadInfo.tmsOrderLoadFee,"handlingFeeAll",this.formModel.handlingFeeAll),delete this.loadInfo.tmsOrderLoad.shortFee,delete this.loadInfo.tmsOrderLoad.handlingFeeAll;this.formModel.requireArrivedTime=this.formModel.requireArrivedTime?Object(F.parseTime)(this.formModel.requireArrivedTime,"{y}-{m}-{d} ")+"23:59:59":"",this.formModel.planArrivedTime=this.formModel.planArrivedTime?Object(F.parseTime)(this.formModel.planArrivedTime,"{y}-{m}-{d} ")+"23:59:59":"",this.formModel.loadTime=Object(F.parseTime)(this.formModel.loadTime,"{y}-{m}-{d} ")+"00:00:00"},getUpdateRepertoryLeft:function(){var t=this;return console.log("left",this.orgData.orgid),this.orgData.orgid&&(this.loading=!0,Object(I.g)(this.orgData.orgid,this.orgData.loadId).then(function(e){t.$set(t.setLoadTableList,"left",e.data),console.log("修改ing左边列表",t.setLoadTableList.left),t.loading=!1}).catch(function(e){t.loading=!1,t._handlerCatchMsg(e)})),this.setLoadTableList},getUpdateRepertoryRight:function(){var t=this;return console.log("right",this.orgData.orgid),this.orgData.orgid&&Object(I.h)(this.orgData.orgid,this.orgData.loadId).then(function(e){t.$set(t.setLoadTableList,"right",e.data),console.log("修改ing右边列表",t.setLoadTableList.right)}).catch(function(e){t._handlerCatchMsg(e)}),this.setLoadTableList},addTruck:function(){this.addTruckVisible=!0},addDriver:function(){this.infoDriver={},this.addDriverVisible=!0},fetchData:function(){this.initInfo()},closeAddDriver:function(){this.addDriverVisible=!1},closeAddTruckVisible:function(){this.addTruckVisible=!1},initInfo:function(){this.loading=!1,this.truckKey=(new Date).getTime(),this.driverKey=(new Date).getTime(),this.Drivers=this.$options.data().Drivers,this.Trucks=this.$options.data().Trucks,this.cacheDriverList=this.$options.data().cacheDriverList,this.cacheTruckList=this.$options.data().cacheTruckList,this.getDrivers(this.otherinfo.orgid),this.getTrucks(this.otherinfo.orgid),this.getTerminal()},changeTerminal:function(e){e&&this.getTerminal(e)},getTerminal:function(){var t=this,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",i={currentPage:1,pageSize:1e4,vo:{companyId:this.otherinfo.companyId,terminalNo:e||this.formModel.terminalNo}};Object(I.c)(i).then(function(e){e&&(console.log("Terminals",e),t.Terminals=e.list)}).catch(function(e){t._handlerCatchMsg(e)})},getDrivers:function(t){var i=this;this.cacheDriverList[t]?this.Drivers=this.cacheDriverList[t]:Object(I.b)().then(function(e){i.Drivers=e.data,i.cacheDriverList[t]=e.data})},getTrucks:function(t){var i=this;this.cacheTruckList[t]?this.Trucks=this.cacheTruckList[t]:Object(I.f)().then(function(e){i.Trucks=e.data,i.cacheTruckList[t]=e.data}).catch(function(e){i._handlerCatchMsg(e)})},handleSelect:function(e){this.driverKey=(new Date).getTime(),""!==this.formModel.truckIdNumber&&void 0!==this.formModel.truckIdNumber||(this.formModel.truckIdNumber=e.truckIdNumber),this.formModel.dirverMobile=e.driverMobile,this.formModel.dirverName=e.driverName,this.isDriverSelect=!0},handleSelectTruck:function(e){this.truckKey=(new Date).getTime(),this.formModel.truckIdNumber=e.truckIdNumber,this.formModel.dirverMobile=e.driverMobile,this.formModel.dirverName=e.driverName,this.$set(this.formModel,"truckLoad",Number(e.truckLoad)),this.$set(this.formModel,"truckVolume",Number(e.truckVolume))},handleSelectTerminal:function(e){console.warn("选择追货宝",e)},querySearch:function(e,t){var i=this.Drivers;t(e?i.filter(this.createFilter(new RegExp(e,"gi"),"driverName")):i)},querySearchTruck:function(e,t){var i=this.Trucks;t(e?i.filter(this.createFilter(new RegExp(e,"gi"),"truckIdNumber")):i)},querySearchTerminal:function(e,t){var i=this.Terminals;t(e?i.filter(this.createFilter(new RegExp(e,"gi"),"terminalNo")):i)},createFilter:function(t,i){return function(e){if(e[i])return t.test(e[i])}},blurDriver:function(){var t=this;this.Drivers.forEach(function(e){t.formModel.dirverName===e.driverName?t.formModel.dirverName=e.driverName:t.isDriverSelect||(t.isDriverSelect=!1,t.formModel.dirverName="",t.formModel.dirverMobile="")})},getSelectType:function(){var r=this;Object(T.j)("apportion_type",this.otherinfo.orgid||this.otherinfo.companyId).then(function(e){e&&(r.apportionTypeList=e,r.apportionTypeList.forEach(function(e,t){var i=r.$const.APPORTION_TYPE_DESCRIPT[e.id];r.$set(r.apportionTypeList[t],"descript",40===r.loadTypeId?i.replace(/(操作费)/g,"送货费"):i)}))}).catch(function(e){r._handlerCatchMsg(e)})},changeTruckNum:function(e,t){this.$set(this.formModel,t,Number(e))},changeLoadNum:function(e,t){this.$set(this.formFee,t,e)},changeHandlingFeeAll:function(e,t){console.log("changeHandlingFeeAll info页面：",e,t);var i=0;t?(console.log("type",t),this.$set(this.formModel,t,Number(e)),i=F.tmsMath._add(this.formModel.deliveryDetailFee||0,this.formModel.deliveryHandlingFee||0),this.$set(this.handlingFeeInfo,"deliveryHandlingFee",this.formModel.deliveryHandlingFee)):(i=Number(e),this.$set(this.formModel,"handlingFeeAll",Number(e))),this.$set(this.handlingFeeInfo,"handlingFeeAll",i),this.$set(this.handlingFeeInfo,"params",40===this.loadTypeId?"deliveryFeeToPay":"handlingFee"),this.$set(this.handlingFeeInfo,"reParams",40===this.loadTypeId?"deliveryDetailFee":"handlingFeeAll")},getApportionTypeId:function(e){this.handlingFeeInfo.apportionTypeId=e,this.handlingFeeInfo.params=40===this.loadTypeId?"deliveryFeeToPay":"handlingFee",this.handlingFeeInfo.reParams=40===this.loadTypeId?"deliveryDetailFee":"handlingFeeAll",console.log(" this.loadTypeId === 40????",40===this.loadTypeId,this.handlingFeeInfo)},getHandingFeeAll:function(e){this.handlingFeeInfo=e,this.$set(this.formModel,e.reParams,e.value),40===this.loadTypeId&&this.$set(this.formModel,"deliveryHandlingFee",e.deliveryHandlingFee)},resetHandlingFeeInfo:function(e){this.$set(this.formModel,"apportionTypeId",e.apportionTypeId),this.$set(this.handlingFeeInfo,"apportionTypeId",e.apportionTypeId)}}}},M65g:function(e,t,i){"use strict";var r={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("transferTable",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],on:{resizeVTable:e.resizeVTable}},[i("el-button",{attrs:{slot:"tableRefresh",icon:"el-icon-refresh",size:"mini",type:"primary",plain:"",circle:""},on:{click:e.regetList},slot:"tableRefresh"}),e._v(" "),i("div",{staticClass:"tableHeadItemForm clearfix",attrs:{slot:"tableSearch"},slot:"tableSearch"},[i("currentSearch",{attrs:{info:e.orgLeftTable},on:{change:e.getSearch,keyupEneter:e.getSearchEnter}})],1),e._v(" "),i("div",{staticClass:"vtableHeadItemBtn",attrs:{slot:"tableLeft"},slot:"tableLeft"},[i("el-button",{staticClass:"tableAllBtn",attrs:{size:"mini"},on:{click:e.addALLList}}),e._v(" "),i("v-table",{directives:[{name:"show",rawName:"v-show",value:e.isOrgLeftTable,expression:"isOrgLeftTable"}],ref:"orgLeftTable",staticStyle:{width:"100%"},attrs:{"column-width-drag":"","is-horizontal-resize":"","is-vertical-resize":"","row-hover-color":"#eee","vertical-resize-offset":18,columns:e.columnsLeft,"table-data":e.leftTable,footer:e.footerLeft,"footer-row-height":30,"row-dblclick":e.dclickAddItem},on:{"on-custom-comp":e.doActionExpandTable}}),e._v(" "),i("v-table",{directives:[{name:"show",rawName:"v-show",value:!e.isOrgLeftTable,expression:"!isOrgLeftTable"}],ref:"leftTable",staticStyle:{width:"100%"},attrs:{"column-width-drag":"","is-horizontal-resize":"","is-vertical-resize":"","vertical-resize-offset":18,"row-hover-color":"#eee",columns:e.columnsLeft,"table-data":e.leftTable,footer:e.footerLeft,"footer-row-height":30,"row-dblclick":e.dclickAddItem},on:{"on-custom-comp":e.doActionExpandTable}})],1),e._v(" "),i("div",{staticClass:"vtableHeadItemBtn",attrs:{slot:"tableRight"},slot:"tableRight"},[i("el-button",{staticClass:"tableAllBtnMinus",attrs:{size:"mini"},on:{click:e.minusAllList}}),e._v(" "),i("v-table",{ref:"rightTable",staticStyle:{width:"100%"},attrs:{"column-width-drag":"","is-horizontal-resize":"","is-vertical-resize":"","row-hover-color":"#eee","vertical-resize-offset":18,columns:e.columnsRight,"table-data":e.rightTable,footer:e.footerRight,"footer-row-height":30,"row-dblclick":e.dclickMinusItem},on:{"on-custom-comp":e.doActionExpandTable}})],1)],1)},staticRenderFns:[]};t.a=r},PI8x:function(e,t,i){"use strict";t.a={data:function(){return{loading:!1,isShowLeft:!1,isShowRight:!1,isShowReback:!1,searchForm:""}},computed:{leftTableClass:function(){return this.isShowLeft?"showTableLeft":this.isShowRight?"shortTableLeft":"averageTable"},rightTableClass:function(){return this.isShowRight?"showTableRight":this.isShowLeft?"shortTableRight":"averageTable"}},methods:{doAction:function(e){switch(this.loading=!0,e){case"showAllLeft":this.showAllLeft();break;case"showAllRight":this.showAllRight();break;case"showReback":this.showReback()}this.$emit("resizeVTable"),this.loading=!1},showAllLeft:function(){this.isShowLeft=!0,this.isShowRight=!1,this.isShowReback=!0},showAllRight:function(){this.isShowLeft=!1,this.isShowRight=!0,this.isShowReback=!0},showReback:function(){this.isShowReback=!1,this.isShowLeft=!1,this.isShowRight=!1}}}},PkYm:function(e,t,i){"use strict";var r={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("el-dialog",{attrs:{title:"请选择实际"+t.title+"时间",isShow:t.popVisible,"append-to-body":"",visible:t.popVisible,"before-close":t.closeMe,width:"430px","close-on-click-modal":!1,center:""},on:{"update:visible":function(e){t.popVisible=e},close:t.closeMe}},[i("el-form",{ref:"searchForm",attrs:{model:t.searchForm}},[t.isArrival?i("el-form-item",{attrs:{label:"实际"+t.title+"时间","label-width":t.formLabelWidth}},[i("el-date-picker",{attrs:{type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss","picker-options":t.pickOption,placeholder:"选择时间"},model:{value:t.searchForm.actualArrivetime,callback:function(e){t.$set(t.searchForm,"actualArrivetime","string"==typeof e?e.trim():e)},expression:"searchForm.actualArrivetime"}})],1):i("el-form-item",{attrs:{label:"实际"+t.title+"时间","label-width":t.formLabelWidth}},[i("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd HH:mm:ss",type:"datetime",placeholder:"选择时间"},model:{value:t.searchForm.actualSendtime,callback:function(e){t.$set(t.searchForm,"actualSendtime","string"==typeof e?e.trim():e)},expression:"searchForm.actualSendtime"}})],1)],1),t._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:t.closeMe}},[t._v("取 消")]),t._v(" "),i("el-button",{attrs:{type:"primary",loading:t.loading},on:{click:function(e){t.submitForm("searchForm")}}},[t._v("确 定")])],1)],1)],1)},staticRenderFns:[]};t.a=r},TsW9:function(e,t,i){"use strict";t.a=function(e,t){return r.b.get("/api-order/order/load/v1/getBatchNo/",{params:{orgId:e,loadTypeId:t}})},t.i=function(e){return r.b.post("/api-order/order/load/v1/",e)},t.j=function(e){return r.b.put("/api-order/order/load/v1/",e)},t.d=function(e){return r.b.get("/api-order/order/load/v1/selectAddLoadRepertoryList/",{params:{orgId:e}})},t.g=function(e,t){return r.b.get("/api-order/order/load/v1/selectUpdateLoadRepertoryList/?orgId="+e+"&loadId="+t)},t.h=function(e,t){return r.b.get("/api-order/order/load/v1/selectUpdateLoadDetailList/?orgId="+e+"&loadId="+t)},t.e=function(e){return r.b.get("/api-order/order/load/v1/selectLoadDetailList/",{params:{loadId:e}})},t.f=function(){return r.b.get("/api-system/system/trunk/v1/findCarAndDriver/").then(function(e){return e})},t.b=function(){return r.b.get("/api-system/system/trunk/v1/findDriverAndCar/").then(function(e){return e})},t.c=function(e){return r.b.post("/api-order/order/tmsordertrailterminal/v1/list",e).then(function(e){return e.data})};var r=i("Vo7i")},UzKa:function(e,t,i){"use strict";var r={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"load_wrapper"},[t("keep-alive",[t(this.component,{tag:"component"})],1)],1)},staticRenderFns:[]};t.a=r},WfZq:function(e,t,i){"use strict";var r=i("0xDb");t.a={props:{info:{type:Array,default:[]},truckInfo:{type:Object,default:{}},popVisible:{type:Boolean,default:!1},className:{type:String,default:"yourClassName"},idWeigth:{type:String,default:"idWeigth"},idVolume:{type:String,default:"idVolume"},width:{type:String,default:"300px"},height:{type:String,default:"300px"}},data:function(){return{loading:!1,baseInfo:{totalWeight:0,weight:0,surplusWeight:0,totalVolume:0,volume:0,surplusVolume:0},newInfo:{totalWeight:0,weight:0,surplusWeight:0,totalVolume:0,volume:0,surplusVolume:0}}},watch:{info:function(e){},truckInfo:{handler:function(){this.baseInfo.totalWeight=Number(this.truckInfo.truckLoad)||0,this.baseInfo.totalVolume=Number(this.truckInfo.truckVolume)||0},deep:!0},popVisible:function(){var e=this;this.popVisible&&this.$nextTick(function(){e.baseInfo.totalWeight||e.baseInfo.weight||(e.baseInfo=Object(r.objectMerge2)({},e.$options.data().baseInfo)),e.initChart()})}},methods:{initData:function(){var t=this;this.popVisible&&(this.baseInfo.weight=0,this.baseInfo.volume=0,this.info.forEach(function(e){t.baseInfo.weight+=Number(e.loadWeight),t.baseInfo.volume+=Number(e.loadVolume)}))},initChart:function(){this.initData(),this.initChartWeight(),this.initChartVolume()},initChartWeight:function(){var e=this.baseInfo.totalWeight-this.baseInfo.weight;this.baseInfo.surplusWeight=e,this.popVisible&&(this.chart=this.$echarts.init(this.$refs.echartWeight),this.chart.setOption({title:{text:"总载重: "+this.baseInfo.totalWeight,subtext:"单位：千克",subtextStyle:{fontSize:14,color:"#666666"},x:"center",bottom:"0px"},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},series:[{name:"总载重",type:"pie",radius:"40%",label:{normal:{show:!0,formatter:"{b}:\n\n{c}千克\n\n{d}%",textStyle:{fontWeight:"normal",fontSize:16,color:"#666"}}},data:[{value:this.baseInfo.weight,name:"已配载",itemStyle:{color:"#FFCC66"}},{value:this.baseInfo.surplusWeight,name:"可配载",itemStyle:{color:"#79F7C1"}}]}]}))},initChartVolume:function(){var e=this.baseInfo.totalVolume-this.baseInfo.volume;this.baseInfo.surplusVolume=e,this.popVisible&&(this.chart=this.$echarts.init(this.$refs.echartVolume),this.chart.setOption({title:{text:"总载立方: "+this.baseInfo.totalVolume,subtext:"单位：方",subtextStyle:{fontSize:14,color:"#666666"},x:"center",bottom:"0px"},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},series:[{name:"总载立方",type:"pie",radius:"40%",label:{normal:{show:!0,formatter:"{b}:\n\n{c}方\n\n{d}%",textStyle:{fontWeight:"normal",fontSize:16,color:"#666"}}},data:[{value:this.baseInfo.volume,name:"已配载",itemStyle:{color:"#FFCC66"}},{value:this.baseInfo.surplusVolume,name:"可配载",itemStyle:{color:"#79F7C1"}}]}]}))},notNull:function(e){if(""===e||null===e||!e||void 0===e)return!1},closeMe:function(e){this.$emit("update:popVisible",!1)}}}},ayAl:function(e,t,i){"use strict";t.n=function(e){return r.b.post("/api-order/order/load/v1/selectLoadMainInfoList",e).then(function(e){return e.data||{}})},t.q=function(e,t,i){return r.b.put("/api-order/order/load/v1/loadDepart?loadIds="+e+"&loadTypeId="+t+"&actualSendtime="+i)},t.p=function(e,t){return r.b.put("/api-order/order/load/v1/cancelLoadTruck?loadIds="+e+"&loadTypeId="+t)},t.o=function(e,t){return r.b.put("/api-order/order/load/v1/cancelLoadDepart/?loadIds="+e+"&loadTypeId="+t)},t.h=function(e){return r.b.get("/api-order/order/load/v1/contract/"+e)},t.d=function(e){return r.b.put("/api-order/order/load/v1/contract",e)},t.g=function(e){return r.b.get("/api-order/aitransport/tmsstandardcar/v1/",e).then(function(e){return e.data})},t.f=function(e){return r.b.post("/api-order/aitransport/intelligen/v1/init",e).then(function(e){return e.data})},t.j=function(e){return r.b.post("/api-order/order/load/v1/smartLoad",e)},t.e=function(e,t){return r.b.get("/api-order/aitransport/pzcarinfotms/v1/getCarInfo/?orgid="+e+"&sign="+t).then(function(e){return e.data})},t.l=function(e){return r.b.post("/api-order/aitransport/pzcarinfotms/v1/",e)},t.r=function(e){return r.b.put("/api-order/aitransport/pzcarinfotms/v1/",e)},t.a=function(e){return r.b.delete("/api-order/aitransport/pzcarinfotms/v1/"+e)},t.k=function(e){return r.b.post("/api-order/aitransport/tmssmartloadscheme/v1/loadSchemeList/",e).then(function(e){return e.data})},t.s=function(e){return r.b.put("/api-order/aitransport/tmssmartloadscheme/v1/updateScheme/",e).then(function(e){return e.data})},t.b=function(e){return r.b.delete("/api-order/aitransport/tmssmartloadscheme/v1/deleteScheme/?schemeGroup="+e.schemeGroup+"&orgid="+e.orgid).then(function(e){return e.data})},t.c=function(e){return r.b.delete("/api-order/aitransport/tmssmartloadscheme/v1/deleteSchemeById/?schemeId="+e.schemeId).then(function(e){return e.data})},t.m=function(e){return r.b.post("/api-order/aitransport/tmssmartloadscheme/v1/saveScheme/",e).then(function(e){return e.data})},t.t=function(e){return r.b.get("/api-order/aitransport/tmssmartloadscheme/v1/selectSchemeGroupDetail?schemeGroup="+e.schemeGroup+"&orgid="+e.orgid).then(function(e){return e.data})},t.i=function(e){return r.b.get("/api-order/aitransport/tmssmartloadscheme/v1/getRepertoryInfo?arriveOrgid="+e).then(function(e){return e.data})},t.u=function(e){return r.b.put("/api-order/order/load/v1/updateLoadSort",e).then(function(e){return e.data})};var r=i("Vo7i")},fluU:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i("z1vH"),a=i("UzKa");var o=function(e){i("7fzG")},n=i("VU/8")(r.a,a.a,o,null,null);t.default=n.exports},grrk:function(e,t){},hrre:function(e,t,i){"use strict";var r={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{title:"配载率提示",isShow:t.popVisible,visible:t.popVisible,"before-close":t.closeMe,width:"50%","close-on-click-modal":!1,center:""},on:{"update:visible":function(e){t.popVisible=e},close:t.closeMe}},[i("el-row",[i("el-col",{attrs:{span:12}},[i("div",{ref:"echartWeight",class:t.className,style:{height:t.height,width:t.width,margin:"0 auto"},attrs:{id:t.idWeigth}})]),t._v(" "),i("el-col",{attrs:{span:12}},[i("div",{ref:"echartVolume",class:t.className,style:{height:t.height,width:t.width,margin:"0 auto"},attrs:{id:t.idVolume}})])],1),t._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:t.closeMe}},[t._v("取 消")])],1)],1)],1)},staticRenderFns:[]};t.a=r},kOGt:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i("z7Sy"),a=i("PkYm"),o=i("VU/8")(r.a,a.a,null,null,null);t.default=o.exports},sJaV:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i("2Um6"),a=i("/2Zc");var o=function(e){i("5hGn")},n=i("VU/8")(r.a,a.a,o,null,null);t.default=n.exports},sNUZ:function(e,t){},uZGy:function(e,t){},voDd:function(e,t,i){"use strict";var r=i("woOf"),a=i.n(r),o=i("Dd8w"),n=i.n(o),s=i("E4LH"),l=i("QBRH"),c=i("9ani"),d=i("P5Di"),h=i("QbVN"),u=i("o9X6"),m=i("NYxO"),f=i("9UCZ");t.a={components:{popRight:d.a,Upload:h.a,SelectTree:u.a,SelectType:f.a},props:{popVisible:{type:Boolean,default:!1},orgid:{required:!0},isModify:{type:Boolean,default:!1},info:{type:Object,default:function(){}},truckTypes:{type:Array,default:function(){return[]}},truckSources:{type:Array,default:function(){return[]}}},computed:n()({},Object(m.mapGetters)(["otherinfo"])),data:function(){var t=this,e=function(r,a){return function(e,t,i){r<t?i(new Error(a)):i()}};return{form:{dirverMobile:"",driverId:"",orgid:"",truckBrand:"",truckHeight:"",truckIdNumber:"",truckLength:"",truckLoad:"",truckRegisterDate:"",truckRemarks:"",truckScrapDate:"",truckSource:"",truckType:"",truckUnit:"",truckUnitMobile:"",truckVolume:"",truckWidth:"",drivingLicense:"",operatingLicense:"",vehiclePic:"",frameNum:"",engineNum:""},formLabelWidth:"100px",tooltip:!1,rules:{truckIdNumber:[{required:!0,message:"请输入车牌号码",trigger:"blur"}],orgid:[{required:!0,message:"请选择所属机构"}],driverMobile:[{message:"请输入手机号码",trigger:"blur",pattern:s.a.MOBILE}],truckLoad:[{validator:e(1e5,"不能超过100000千克"),type:"number"}],truckVolume:[{validator:e(1e3,"体积不能超过1000方"),type:"number"}],truckLength:[{validator:e(100,"车长不能超过100米"),type:"number"}],truckHeight:[{validator:e(20,"车高不能超过20米"),type:"number"}],truckWidth:[{validator:e(10,"车宽不能超过10米"),type:"number"}]},popTitle:"新增车辆",orgArr:[],rolesArr:[],departmentArr:[],loading:!1,roles:[],departments:[],groups:[],inited:!1,cacheDriverList:{},DriverList:[],pickOption:{firstDayOfWeek:1,disabledDate:function(e){return!!t.form.truckScrapDate&&e.getTime()>t.form.truckScrapDate}},pickOption2:{firstDayOfWeek:1,disabledDate:function(e){return!!t.form.truckRegisterDate&&e.getTime()<t.form.truckRegisterDate}}}},mounted:function(){this.form.orgid=this.otherinfo.orgid,this.inited||(this.inited=!0,this.initInfo(),this.getDriverPhone()),this.isModify&&this.initPanel()},watch:{popVisible:function(e,t){this.inited||(this.inited=!0,this.initInfo(),this.getDriverPhone())},orgid:function(e,t){this.form.orgid=e},info:{handler:function(){this.initPanel()},deep:!0}},activated:function(){this.initDriverList()},methods:{initDriverList:function(){this.DriverList=this.$options.data().DriverList,this.cacheDriverList=[],this.getTreeOrgid(this.orgid)},getDriverPhone:function(t){var e=this.DriverList.filter(function(e){return e.id===t});e[0]&&(this.form.dirverMobile=e[0].driverMobile)},initPanel:function(){if(this.isModify){this.popTitle="修改车辆";var e=a()({},this.info);for(var t in this.form)this.form[t]=e[t];this.form.truckRegisterDate&&(this.form.truckRegisterDate=+new Date(this.form.truckRegisterDate)),this.form.truckScrapDate&&(this.form.truckScrapDate=+new Date(this.form.truckScrapDate)),this.form.truckId=e.truckId}else{for(var i in this.popTitle="新增车辆",this.form)this.form[i]=(this.form[i],"");delete this.form.truckId,this.form.orgid=this.orgid,this.form.truckSource=143}},getTreeOrgid:function(e){this.getDriverList(e)},initInfo:function(){this.loading=!1,this.getTreeOrgid(this.orgid)},getOrgid:function(e){this.form.orgid=e},submitForm:function(e,i){var r=this;this.$refs[e].validate(function(e){if(!e)return!1;r.loading=!0;var t=a()({},r.form);(r.isModify?Object(l.f)(t):Object(l.e)(t)).then(function(e){r.loading=!1,r.$message.success("保存成功"),r.reset(),i||r.closeMe(),r.$emit("success")}).catch(function(e){r._handlerCatchMsg(e),r.loading=!1})})},reset:function(){var e=this.form.orgid;this.$refs.ruleForm.resetFields(),this.form.orgid=e,this.form.drivingLicense="",this.form.operatingLicense="",this.form.vehiclePic=""},closeMe:function(e){this.reset(),this.$emit("update:popVisible",!1),"function"==typeof e&&e()},getDriverList:function(t){var i=this;this.cacheDriverList[t]?this.DriverList=this.cacheDriverList[t]:(this.loading=!0,Object(c.b)({currentPage:1,pageSize:200,vo:{orgid:t}}).then(function(e){i.DriverList=e.list,i.cacheDriverList[t]=e.list,i.loading=!1}).catch(function(e){i.loading=!1,i._handlerCatchMsg(e)}))}}}},z1vH:function(e,t,i){"use strict";var r=i("G6L5");t.a={name:"orderloadModify",components:{info:r.default},data:function(){return{component:"info"}}}},z7Sy:function(e,t,i){"use strict";var r=i("0xDb"),a=i("t5DY");t.a={props:{popVisible:{type:Boolean,default:!1},isArrival:{type:Boolean,default:!1},title:{type:String,default:"发车"},disableTimer:{type:String,default:""}},data:function(){return{inited:!0,loading:!1,formLabelWidth:"120px",systemTime:"",currentTime:Object(r.parseTime)(+new Date,"{y}-{m}-{d} {h}:{i}:{s}"),searchForm:{actualSendtime:"",actualArrivetime:""}}},computed:{pickOption:function(){var r=this;return{firstDayOfWeek:1,disabledDate:function(e){if(r.disableTimer){var t=r.disableTimer,i=new Date(new Date(t).getFullYear(),new Date(t).getMonth(),new Date(t).getDate());return!!i&&e.getTime()<i}return!1}}}},watch:{popVisible:{handler:function(e,t){var i=this;if(e){console.log("title",this.title,this.isArrival,this.disableTimer),this.inited=!0,this.loading=!1,this.currentTime=Object(r.parseTime)(+new Date,"{y}-{m}-{d} {h}:{i}:{s}"),this.searchForm.actualArrivetime=this.currentTime,this.searchForm.actualSendtime=this.currentTime;Object(a.k)().then(function(e){e&&(i.systemTime=e.trim(),i.searchForm.actualArrivetime=e.trim(),i.searchForm.actualSendtime=e.trim())}).catch(function(e){i._handlerCatchMsg(e)})}},immediate:!0,deep:!0},isArrival:function(){}},methods:{submitForm:function(e){if(this.loading=!0,this.inited){var t={actualSendtime:this.searchForm.actualSendtime?this.searchForm.actualSendtime:this.systemTime?this.systemTime:this.currentTime,actualArrivetime:this.searchForm.actualArrivetime?this.searchForm.actualArrivetime:this.systemTime?this.systemTime:this.currentTime};this.$emit("time",t),this.loading=!1,this.closeMe()}},closeMe:function(e){this.inited=!1,this.$emit("update:popVisible",!1)}}}}});