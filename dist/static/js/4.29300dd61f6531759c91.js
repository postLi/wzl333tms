webpackJsonp([4,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,267,268,269,327],{"+SR2":function(e,t,i){"use strict";var a=i("woOf"),n=i.n(a),l=i("Dd8w"),o=i.n(l),r=i("bOdI"),s=i.n(r),c=i("NYxO"),h=i("JW1v"),d=i("IcMT"),u=i("0xDb"),p=i("pAQG"),f=i("EhYD"),b=i("1onU"),g=i("DT23"),m=i("0xDb");t.a={components:{transferTable:d.a,querySelect:p.a,Receipt:f.default,Pager:b.a,currentSearch:g.default},data:function(){var e,i=this;return e={textChangeDanger:[],tablekey:"",loadTruck:"",truckMessage:"",formModel:{}},s()(e,"loadTruck","loadTruckOne"),s()(e,"loading",!1),s()(e,"popVisibleDialog",!1),s()(e,"btnsize","mini"),s()(e,"tableReceiptInfo",[]),s()(e,"selectedRight",[]),s()(e,"selectedLeft",[]),s()(e,"orgLeftTable",[]),s()(e,"isGoReceipt",!0),s()(e,"leftTable",[]),s()(e,"rightTable",[]),s()(e,"orgData",{left:[],right:[]}),s()(e,"isFresh",!1),s()(e,"feeType",8),s()(e,"searchQuery",{currentPage:1,pageSize:100,vo:{}}),s()(e,"FEE_TYPE",{amountNowpayCarriage:"实结现付运费",amountNowpayOilCard:"实结现付油卡",amountBackpayCarriage:"实结回付运费",amountBackpayOilCard:"实结回付油卡",amountCarloadInsuranceFee:"实结整车保险费",amountLeaveHandlingFee:"实结发站装卸费",amountLeaveOtherFee:"实结发站其他费"}),s()(e,"sign",1),s()(e,"tableColumnLeft",[{label:"发车批次",prop:"batchNo",width:"120",fixed:!0},{label:"批次状态",prop:"batchTypeName",width:"120",fixed:!1},{label:"发车网点",prop:"orgName",width:"120",fixed:!1},{label:"达到网点",prop:"arriveOrgName",width:"120",fixed:!1},{label:"发车时间",prop:"departureTime",width:"180",fixed:!1,slot:function(e){return""+Object(u.parseTime)(e.row.departureTime,"{y}-{m}-{d} {h}:{i}:{s}")}},{label:"到达时间",prop:"receivingTime",width:"180",fixed:!1,slot:function(e){return""+Object(u.parseTime)(e.row.receivingTime,"{y}-{m}-{d} {h}:{i}:{s}")}},{label:"现付运费",prop:"nowpayCarriage",width:"150",fixed:!1},{label:"已结现付运费",prop:"paidNowpayCarriage",width:"180",fixed:!1,slot:function(e){var t=e.row;return i._setTextColor(t.nowpayCarriage,t.paidNowpayCarriage,t.unpaidNowpayCarriage,t.paidNowpayCarriage)}},{label:"未结现付运费",prop:"unpaidNowpayCarriage",width:"150",fixed:!1,slot:function(e){var t=e.row;return i._setTextColor(t.nowpayCarriage,t.paidNowpayCarriage,t.unpaidNowpayCarriage,t.unpaidNowpayCarriage)}},{label:"现付油卡",prop:"nowpayOilCard",width:"150",fixed:!1},{label:"已结现付油卡",prop:"paidNowpayOilCard",width:"180",fixed:!1,slot:function(e){var t=e.row;return i._setTextColor(t.nowpayOilCard,t.paidNowpayOilCard,t.unpaidNowpayOilCard,t.paidNowpayOilCard)}},{label:"未结现付油卡",prop:"unpaidNowpayOilCard",width:"150",fixed:!1,slot:function(e){var t=e.row;return i._setTextColor(t.nowpayOilCard,t.paidNowpayOilCard,t.unpaidNowpayOilCard,t.unpaidNowpayOilCard)}},{label:"回付运费",prop:"backpayCarriage",width:"150",fixed:!1},{label:"已结回付运费",prop:"paidBackpayCarriage",width:"180",fixed:!1,slot:function(e){var t=e.row;return i._setTextColor(t.backpayCarriage,t.paidBackpayCarriage,t.unpaidBackpayCarriage,t.paidBackpayCarriage)}},{label:"未结回付运费",prop:"unpaidBackpayCarriage",width:"150",fixed:!1,slot:function(e){var t=e.row;return i._setTextColor(t.backpayCarriage,t.paidBackpayCarriage,t.unpaidBackpayCarriage,t.unpaidBackpayCarriage)}},{label:"回付油卡",prop:"backpayOilCard",width:"150",fixed:!1},{label:"已结回付油卡",prop:"paidBackpayOilCard",width:"180",fixed:!1,slot:function(e){var t=e.row;return i._setTextColor(t.backpayOilCard,t.paidBackpayOilCard,t.unpaidBackpayOilCard,t.paidBackpayOilCard)}},{label:"未结回付油卡",prop:"unpaidBackpayOilCard",width:"150",fixed:!1,slot:function(e){var t=e.row;return i._setTextColor(t.backpayOilCard,t.paidBackpayOilCard,t.unpaidBackpayOilCard,t.unpaidBackpayOilCard)}},{label:"整车保险费",prop:"carloadInsuranceFee",width:"150",fixed:!1},{label:"已结整车保险费",prop:"paidCarloadInsuranceFee",width:"180",fixed:!1,slot:function(e){var t=e.row;return i._setTextColor(t.carloadInsuranceFee,t.paidCarloadInsuranceFee,t.unpaidCarloadInsuranceFee,t.paidCarloadInsuranceFee)}},{label:"未结整车保险费",prop:"unpaidCarloadInsuranceFee",width:"150",fixed:!1,slot:function(e){var t=e.row;return i._setTextColor(t.carloadInsuranceFee,t.paidCarloadInsuranceFee,t.unpaidCarloadInsuranceFee,t.unpaidCarloadInsuranceFee)}},{label:"发站装卸费",prop:"leaveHandlingFee",width:"150",fixed:!1},{label:"已结发站装卸费",prop:"paidLeaveHandlingFee",width:"180",fixed:!1,slot:function(e){var t=e.row;return i._setTextColor(t.leaveHandlingFee,t.paidLeaveHandlingFee,t.unpaidLeaveHandlingFee,t.paidLeaveHandlingFee)}},{label:"未结发站装卸费",prop:"unpaidLeaveHandlingFee",width:"150",fixed:!1,slot:function(e){var t=e.row;return i._setTextColor(t.leaveHandlingFee,t.paidLeaveHandlingFee,t.unpaidLeaveHandlingFee,t.unpaidLeaveHandlingFee)}},{label:"发站其他费",prop:"leaveOtherFee",width:"150",fixed:!1},{label:"已结发站其他费",prop:"paidLeaveOtherFee",width:"180",fixed:!1,slot:function(e){var t=e.row;return i._setTextColor(t.leaveOtherFee,t.paidLeaveOtherFee,t.unpaidLeaveOtherFee,t.paidLeaveOtherFee)}},{label:"未结发站其他费",prop:"unpaidLeaveOtherFee",width:"150",fixed:!1,slot:function(e){var t=e.row;return i._setTextColor(t.leaveOtherFee,t.paidLeaveOtherFee,t.unpaidLeaveOtherFee,t.unpaidLeaveOtherFee)}},{label:"司机电话",prop:"dirverMobile",width:"120",fixed:!1},{label:"车牌号",prop:"truckIdNumber",width:"120",fixed:!1},{label:"司机姓名",prop:"dirverName",width:"120",fixed:!1},{label:"配载件数",prop:"loadAmountall",width:"120",fixed:!1},{label:"配载重量",prop:"loadWeightall",width:"120",fixed:!1},{label:"配载体积",prop:"loadVolumeall",width:"120",fixed:!1},{label:"备注",prop:"remark",width:"120",fixed:!1}]),s()(e,"tableColumnRight",[{label:"发车批次",prop:"batchNo",width:"120",fixed:!0},{label:"批次状态",prop:"batchTypeName",width:"120",fixed:!1},{label:"发车网点",prop:"orgName",width:"120",fixed:!1},{label:"达到网点",prop:"arriveOrgName",width:"120",fixed:!1},{label:"发车时间",prop:"departureTime",width:"180",fixed:!1,slot:function(e){return""+Object(u.parseTime)(e.row.departureTime,"{y}-{m}-{d} {h}:{i}:{s}")}},{label:"到达时间",prop:"receivingTime",width:"180",fixed:!1,slot:function(e){return""+Object(u.parseTime)(e.row.receivingTime,"{y}-{m}-{d} {h}:{i}:{s}")}},{label:"现付运费",prop:"nowpayCarriage",width:"150",fixed:!1},{label:"已结现付运费",prop:"paidNowpayCarriage",width:"180",fixed:!1,slot:function(e){var t=e.row;return i._setTextColor(t.nowpayCarriage,t.paidNowpayCarriage,t.unpaidNowpayCarriage,t.paidNowpayCarriage)}},{label:"未结现付运费",prop:"unpaidNowpayCarriage",width:"150",fixed:!1,slot:function(e){var t=e.row;return i._setTextColor(t.nowpayCarriage,t.paidNowpayCarriage,t.unpaidNowpayCarriage,t.unpaidNowpayCarriage)}},{label:"实结现付运费",prop:"amountNowpayCarriage",width:"120",fixed:!1,expand:!0,slot:function(e){return e.row.amountNowpayCarriage}},{label:"现付油卡",prop:"nowpayOilCard",width:"150",fixed:!1},{label:"已结现付油卡",prop:"paidNowpayOilCard",width:"180",fixed:!1,slot:function(e){var t=e.row;return i._setTextColor(t.nowpayOilCard,t.paidNowpayOilCard,t.unpaidNowpayOilCard,t.paidNowpayOilCard)}},{label:"未结现付油卡",prop:"unpaidNowpayOilCard",width:"150",fixed:!1,slot:function(e){var t=e.row;return i._setTextColor(t.nowpayOilCard,t.paidNowpayOilCard,t.unpaidNowpayOilCard,t.unpaidNowpayOilCard)}},{label:"实结现付油卡",prop:"amountNowpayOilCard",width:"120",fixed:!1,expand:!0,slot:function(e){return e.row.amountNowpayOilCard}},{label:"回付运费",prop:"backpayCarriage",width:"150",fixed:!1},{label:"已结回付运费",prop:"paidBackpayCarriage",width:"180",fixed:!1,slot:function(e){var t=e.row;return i._setTextColor(t.backpayCarriage,t.paidBackpayCarriage,t.unpaidBackpayCarriage,t.paidBackpayCarriage)}},{label:"未结回付运费",prop:"unpaidBackpayCarriage",width:"150",fixed:!1,slot:function(e){var t=e.row;return i._setTextColor(t.backpayCarriage,t.paidBackpayCarriage,t.unpaidBackpayCarriage,t.unpaidBackpayCarriage)}},{label:"实结回付运费",prop:"amountBackpayCarriage",width:"120",fixed:!1,expand:!0,slot:function(e){return e.row.amountBackpayCarriage}},{label:"回付油卡",prop:"backpayOilCard",width:"150",fixed:!1},{label:"已结回付油卡",prop:"paidBackpayOilCard",width:"180",fixed:!1,slot:function(e){var t=e.row;return i._setTextColor(t.backpayOilCard,t.paidBackpayOilCard,t.unpaidBackpayOilCard,t.paidBackpayOilCard)}},{label:"未结回付油卡",prop:"unpaidBackpayOilCard",width:"150",fixed:!1,slot:function(e){var t=e.row;return i._setTextColor(t.backpayOilCard,t.paidBackpayOilCard,t.unpaidBackpayOilCard,t.unpaidBackpayOilCard)}},{label:"实结回付油卡",prop:"amountBackpayOilCard",width:"120",fixed:!1,expand:!0,slot:function(e){return e.row.amountBackpayOilCard}},{label:"整车保险费",prop:"carloadInsuranceFee",width:"150",fixed:!1},{label:"已结整车保险费",prop:"paidCarloadInsuranceFee",width:"180",fixed:!1,slot:function(e){var t=e.row;return i._setTextColor(t.carloadInsuranceFee,t.paidCarloadInsuranceFee,t.unpaidCarloadInsuranceFee,t.paidCarloadInsuranceFee)}},{label:"未结整车保险费",prop:"unpaidCarloadInsuranceFee",width:"150",fixed:!1,slot:function(e){var t=e.row;return i._setTextColor(t.carloadInsuranceFee,t.paidCarloadInsuranceFee,t.unpaidCarloadInsuranceFee,t.unpaidCarloadInsuranceFee)}},{label:"实结整车保险费",prop:"amountCarloadInsuranceFee",width:"120",fixed:!1,expand:!0,slot:function(e){return e.row.amountCarloadInsuranceFee}},{label:"发站装卸费",prop:"leaveHandlingFee",width:"150",fixed:!1},{label:"已结发站装卸费",prop:"paidLeaveHandlingFee",width:"180",fixed:!1,slot:function(e){var t=e.row;return i._setTextColor(t.leaveHandlingFee,t.paidLeaveHandlingFee,t.unpaidLeaveHandlingFee,t.paidLeaveHandlingFee)}},{label:"未结发站装卸费",prop:"unpaidLeaveHandlingFee",width:"150",fixed:!1,slot:function(e){var t=e.row;return i._setTextColor(t.leaveHandlingFee,t.paidLeaveHandlingFee,t.unpaidLeaveHandlingFee,t.unpaidLeaveHandlingFee)}},{label:"实结发站装卸费",prop:"amountLeaveHandlingFee",width:"120",fixed:!1,expand:!0,slot:function(e){return e.row.amountLeaveHandlingFee}},{label:"发站其他费",prop:"leaveOtherFee",width:"150",fixed:!1},{label:"已结发站其他费",prop:"paidLeaveOtherFee",width:"180",fixed:!1,slot:function(e){var t=e.row;return i._setTextColor(t.leaveOtherFee,t.paidLeaveOtherFee,t.unpaidLeaveOtherFee,t.paidLeaveOtherFee)}},{label:"未结发站其他费",prop:"unpaidLeaveOtherFee",width:"150",fixed:!1,slot:function(e){var t=e.row;return i._setTextColor(t.leaveOtherFee,t.paidLeaveOtherFee,t.unpaidLeaveOtherFee,t.unpaidLeaveOtherFee)}},{label:"实结发站其他费",prop:"amountLeaveOtherFee",width:"120",fixed:!1,expand:!0,slot:function(e){return e.row.amountLeaveOtherFee}},{label:"司机电话",prop:"dirverMobile",width:"120",fixed:!1},{label:"车牌号",prop:"truckIdNumber",width:"120",fixed:!1},{label:"司机姓名",prop:"dirverName",width:"120",fixed:!1},{label:"配载件数",prop:"loadAmountall",width:"120",fixed:!1},{label:"配载重量",prop:"loadWeightall",width:"120",fixed:!1},{label:"配载体积",prop:"loadVolumeall",width:"120",fixed:!1},{label:"备注",prop:"remark",width:"120",fixed:!1}]),e},computed:o()({},Object(c.b)(["otherinfo"]),{getRouteInfo:function(){return JSON.parse(this.$route.query.searchQuery)},totalLeft:function(){return this.leftTable.length},totalRight:function(){return this.rightTable.length}}),mounted:function(){for(var e=50;e--<50;)this.textChangeDanger.push({});this.getList()},methods:{handlePageChangeLeft:function(e){this.searchQuery.currentPage=e.pageNum,this.searchQuery.pageSize=e.pageSize},initLeftParams:function(){this.$set(this.searchQuery.vo,"orgid",this.getRouteInfo.vo.orgid),this.$set(this.searchQuery.vo,"ascriptionOrgid",this.getRouteInfo.vo.ascriptionOrgid),this.$set(this.searchQuery.vo,"sign",this.sign),this.$set(this.searchQuery.vo,"status","NOSETTLEMENT,PARTSETTLEMENT")},getList:function(){var i=this,t=Object(u.objectMerge2)([],JSON.parse(this.$route.query.selectListBatchNos));this.$route.query.selectListBatchNos?this.isModify=!0:this.isModify=!1,this.leftTable=this.$options.data().leftTable,this.rightTable=this.$options.data().rightTable,this.tableReceiptInfo=this.$options.data().tableReceiptInfo,this.orgLeftTable=this.$options.data().orgLeftTable,this.initLeftParams(),Object(h.i)(this.searchQuery).then(function(e){i.leftTable=n()([],e.list),t.forEach(function(t){i.leftTable.forEach(function(e){t===e.batchNo&&i.rightTable.push(e)})}),i.rightTable.length<1?i.isGoReceipt=!0:i.isGoReceipt=!1,i.rightTable.forEach(function(e){var t=i.leftTable.indexOf(e);-1!==t&&i.leftTable.splice(t,1),e.amountNowpayCarriage=e.unpaidNowpayCarriage,e.amountNowpayOilCard=e.unpaidNowpayOilCard,e.amountBackpayCarriage=e.unpaidBackpayCarriage,e.amountBackpayOilCard=e.unpaidBackpayOilCard,e.amountCarloadInsuranceFee=e.unpaidCarloadInsuranceFee,e.amountLeaveHandlingFee=e.unpaidLeaveHandlingFee,e.amountLeaveOtherFee=e.unpaidLeaveOtherFee}),i.orgLeftTable=Object(u.objectMerge2)([],i.leftTable)}).catch(function(e){i.loading=!1,i._handlerCatchMsg(e)})},changLoadData:function(e,t,i){this.rightTable[e][t]=Number(i);var a="unpaid"+t.substring(6),l=Number(this.rightTable[e][a]),o=this.rightTable[e][t];o!==l?this.$set(this.rightTable[e],t+"lyy",!0):this.$set(this.rightTable[e],t+"lyy",!1),o<0||l<o?(this.isGoReceipt=!0,this.$set(this.rightTable[e],t,l),this.$message({type:"warning",message:"【"+this.FEE_TYPE[t]+"】 费用不小于0，不大于未结费用。"})):(this.isGoReceipt=!1,this.$set(this.rightTable,e,n()(this.rightTable[e],s()({},t,this.rightTable[e][t])))),console.log(this.rightTable[e][t],o,a,this.rightTable[e][a],this.rightTable[e])},clickDetailsRight:function(e){this.$refs.multipleTableRight.toggleRowSelection(e)},clickDetailsLeft:function(e){this.$refs.multipleTableLeft.toggleRowSelection(e)},getSelectionRight:function(e){this.selectedRight=e},getSelectionLeft:function(e){this.selectedLeft=e},changeTableKey:function(){this.tablekey=Math.random()},doAction:function(e){switch(e){case"goLeft":this.goLeft();break;case"goRight":this.goRight()}},goLeft:function(){var i=this;0===this.selectedRight.length||(this.selectedRight.forEach(function(t,e){t.amountNowpayCarriage=t.unpaidNowpayCarriage,t.amountNowpayOilCard=t.unpaidNowpayOilCard,t.amountBackpayCarriage=t.unpaidBackpayCarriage,t.amountBackpayOilCard=t.unpaidBackpayOilCard,t.amountCarloadInsuranceFee=t.unpaidCarloadInsuranceFee,t.amountLeaveHandlingFee=t.unpaidLeaveHandlingFee,t.amountLeaveOtherFee=t.unpaidLeaveOtherFee,i.rightTable=Object(u.objectMerge2)([],i.rightTable).filter(function(e){return e.batchNo!==t.batchNo}),i.rightTable.push(t),i.leftTable=Object(u.objectMerge2)([],i.leftTable).filter(function(e){return e.batchNo!==t.batchNo}),i.orgLeftTable=Object(u.objectMerge2)([],i.orgLeftTable).filter(function(e){return e.batchNo!==t.batchNo})}),this.selectedRight=[]),this.rightTable.length<1?this.isGoReceipt=!0:this.isGoReceipt=!1},goRight:function(){var i=this;0===this.selectedLeft.length?this.$message({type:"warning",message:"请在右边表格选择数据"}):(this.selectedLeft.forEach(function(t,e){i.leftTable=Object(u.objectMerge2)([],i.leftTable).filter(function(e){return e.batchNo!==t.batchNo}),i.orgLeftTable=Object(u.objectMerge2)([],i.orgLeftTable).filter(function(e){return e.batchNo!==t.batchNo}),i.leftTable.push(t),i.orgLeftTable.push(t),i.rightTable=Object(u.objectMerge2)([],i.rightTable).filter(function(e){return e.batchNo!==t.batchNo})}),this.selectedLeft=[]),this.rightTable.length<1?this.isGoReceipt=!0:this.isGoReceipt=!1},selectCurrent:function(e,t){this.addItem(e,t)},dclickAddItem:function(e,t){this.selectedRight=[],this.selectedRight.push(e),this.doAction("goLeft")},dclickMinusItem:function(e,t){this.selectedLeft=[],this.selectedLeft.push(e),this.doAction("goRight")},addItem:function(e,t){this.selectedRight=[],this.selectedRight[t]=e,this.doAction("goLeft")},minusItem:function(e,t){this.selectedLeft=[],this.selectedLeft[t]=e,this.doAction("goRight")},addALLList:function(){this.selectedRight=n()([],this.leftTable),this.doAction("goLeft")},minusAllList:function(){this.selectedLeft=n()([],this.rightTable),this.doAction("goRight")},searchShip:function(e){console.log("searchShip",e)},closeDialog:function(){this.popVisibleDialog=!1},openDialog:function(){this.popVisibleDialog=!0},goReceipt:function(){var c=this,i=0;if(1<this.rightTable.length&&Object(u.objectMerge2)([],this.rightTable).forEach(function(t){Object(u.objectMerge2)([],c.rightTable).forEach(function(e){t.ascriptionOrgid!==e.ascriptionOrgid&&i++})}),0<i)return i=0,this.$message({type:"warning",message:"不能同时结算两个网点"}),!1;var e=n()([],this.rightTable);this.tableReceiptInfo=this.$options.data().tableReceiptInfo,this.isGoReceipt||(e.forEach(function(e,t){var i={id:e.id,amount:e.amountNowpayCarriage,feeTypeId:19,dataName:"现付运费"},a={id:e.id,amount:e.amountNowpayOilCard,feeTypeId:20,dataName:"现付油卡"},l={id:e.id,amount:e.amountBackpayCarriage,feeTypeId:21,dataName:"回付运费"},o={id:e.id,amount:e.amountBackpayOilCard,feeTypeId:22,dataName:"回付油卡"},n={id:e.id,amount:e.amountCarloadInsuranceFee,feeTypeId:25,dataName:"整车保险费"},r={id:e.id,amount:e.amountLeaveHandlingFee,feeTypeId:26,dataName:"发站装卸费"},s={id:e.id,amount:e.amountLeaveOtherFee,feeTypeId:27,dataName:"发站其他费"};0<i.amount&&i.amount<=e.unpaidNowpayCarriage&&c.tableReceiptInfo.push(i),0<a.amount&&a.amount<=e.unpaidNowpayOilCard&&c.tableReceiptInfo.push(a),0<l.amount&&l.amount<=e.unpaidBackpayCarriage&&c.tableReceiptInfo.push(l),0<o.amount&&o.amount<=e.unpaidBackpayOilCard&&c.tableReceiptInfo.push(o),0<n.amount&&n.amount<=e.unpaidCarloadInsuranceFee&&c.tableReceiptInfo.push(n),0<r.amount&&r.amount<=e.unpaidLeaveHandlingFee&&c.tableReceiptInfo.push(r),0<s.amount&&s.amount<=e.unpaidLeaveOtherFee&&c.tableReceiptInfo.push(s),i={},a={},l={},o={},n={},r={},s={}}),0<this.tableReceiptInfo.length?this.openDialog():this.$message({type:"warning",message:"暂无可结算项！实结费用不小于0，不大于未结费用。"}))},getSumRight:function(e){return Object(m.getSummaries)(e,["_index|2|单","nowpayCarriage","paidNowpayCarriage","unpaidNowpayCarriage","nowpayOilCard","paidNowpayOilCard","unpaidNowpayOilCard","backpayCarriage","paidBackpayCarriage","unpaidBackpayCarriage","backpayOilCard","paidBackpayOilCard","unpaidBackpayOilCard","carloadInsuranceFee","unpaidCarloadInsuranceFee","leaveHandlingFee","paidLeaveHandlingFee","unpaidLeaveHandlingFee","leaveOtherFee","paidLeaveOtherFee","unpaidLeaveOtherFee","paidCarloadInsuranceFee","loadAmountall|","loadWeightall|","loadVolumeall|"])},getSumLeft:function(e){return Object(m.getSummaries)(e,["_index|2|单","nowpayCarriage","paidNowpayCarriage","unpaidNowpayCarriage","nowpayOilCard","paidNowpayOilCard","unpaidNowpayOilCard","backpayCarriage","paidBackpayCarriage","unpaidBackpayCarriage","backpayOilCard","paidBackpayOilCard","unpaidBackpayOilCard","carloadInsuranceFee","unpaidCarloadInsuranceFee","leaveHandlingFee","paidLeaveHandlingFee","unpaidLeaveHandlingFee","leaveOtherFee","paidLeaveOtherFee","unpaidLeaveOtherFee","paidCarloadInsuranceFee","amountNowpayCarriage","amountCarloadInsuranceFee","amountBackpayOilCard","amountBackpayCarriage","amountLeaveOtherFee","amountLeaveHandlingFee","amountNowpayOilCard","loadAmountall|","loadWeightall|","loadVolumeall|"])}}}},"1onU":function(e,t,i){"use strict";var a=i("VT+v"),l=i("SgVa");var o=function(e){i("FiTa"),i("7CJ8")},n=i("VU/8")(a.a,l.a,o,"data-v-4b7ed4df",null);t.a=n.exports},"3aBa":function(e,t,i){"use strict";var a={render:function(){var a=this,e=a.$createElement,l=a._self._c||e;return l("div",{staticClass:"accountsLoad_table"},[l("div",{staticClass:"transferTable_search clearfix"},[l("currentSearch",{attrs:{info:a.orgLeftTable},on:{change:a.selectCurrent}})],1),a._v(" "),l("transferTable",{staticStyle:{height:"calc(100% - 40px)",padding:"10px"}},[l("div",{attrs:{slot:"btnsBox"},slot:"btnsBox"},[l("el-button",{attrs:{type:a.isGoReceipt?"info":"success",size:"mini",icon:"el-icon-sort",disabled:a.isGoReceipt},on:{click:a.goReceipt}},[a._v("发站装卸费结算")])],1),a._v(" "),l("div",{staticClass:"tableHeadItemBtn",staticStyle:{height:"100%"},attrs:{slot:"tableLeft"},slot:"tableLeft"},[l("el-button",{staticClass:"tableAllBtn",attrs:{size:"mini"},on:{click:a.addALLList}}),a._v(" "),l("el-table",{key:a.tablekey,ref:"multipleTableRight",attrs:{data:a.leftTable,border:"","tooltip-effect":"dark",triped:"",height:"100%","summary-method":a.getSumRight,"default-sort":{prop:"id",order:"ascending"},"show-overflow-tooltip":!0,"show-summary":!0},on:{"row-click":a.clickDetailsRight,"selection-change":a.getSelectionRight,"row-dblclick":a.dclickAddItem}},[l("el-table-column",{attrs:{fixed:"",width:"50",type:"index",label:"序号"},scopedSlots:a._u([{key:"default",fn:function(e){return[a._v("\n            "+a._s(e.$index+1)+"\n          ")]}}])}),a._v(" "),l("el-table-column",{attrs:{fixed:"",width:"50"},scopedSlots:a._u([{key:"default",fn:function(t){return[l("el-button",{staticClass:"tableItemBtn",attrs:{size:"mini"},on:{click:function(e){a.addItem(t.row,t.$index)}}})]}}])}),a._v(" "),a._l(a.tableColumnLeft,function(i){return[i.slot?l("el-table-column",{key:i.id,attrs:{fixed:i.fixed,sortable:"",label:i.label,width:i.width},scopedSlots:a._u([{key:"default",fn:function(t){return[i.click?l("span",{staticClass:"clickitem",domProps:{innerHTML:a._s(i.slot(t))},on:{click:function(e){e.stopPropagation(),i.click(t)}}}):l("span",{domProps:{innerHTML:a._s(i.slot(t))}})]}}])}):l("el-table-column",{key:i.id,attrs:{fixed:i.fixed,sortable:"",label:i.label,prop:i.prop,width:i.width}})]})],2)],1),a._v(" "),l("div",{staticClass:"tableHeadItemBtn",attrs:{slot:"tableRight"},slot:"tableRight"},[l("el-button",{staticClass:"tableAllBtnMinus",attrs:{size:"mini"},on:{click:a.minusAllList}}),a._v(" "),l("el-table",{key:a.tablekey,ref:"multipleTableLeft",staticStyle:{height:"100%"},attrs:{data:a.rightTable,border:"","tooltip-effect":"dark",triped:"",height:"100%","summary-method":a.getSumLeft,"default-sort":{prop:"id",order:"ascending"},"show-summary":!0},on:{"row-click":a.clickDetailsLeft,"selection-change":a.getSelectionLeft,"row-dblclick":a.dclickMinusItem}},[l("el-table-column",{attrs:{fixed:"",width:"50",type:"index",label:"序号"},scopedSlots:a._u([{key:"default",fn:function(e){return[a._v("\n            "+a._s(e.$index+1)+"\n          ")]}}])}),a._v(" "),l("el-table-column",{attrs:{fixed:"",width:"50"},scopedSlots:a._u([{key:"default",fn:function(t){return[l("el-button",{staticClass:"tableItemBtnMinus",attrs:{size:"mini"},on:{click:function(e){a.minusItem(t.row,t.$index)}}})]}}])}),a._v(" "),a._l(a.tableColumnRight,function(i){return[i.slot?l("el-table-column",{key:i.id,attrs:{fixed:i.fixed,sortable:"",label:i.label,width:i.width,prop:i.prop},scopedSlots:a._u([{key:"default",fn:function(t){return[i.expand?l("div",[l("el-input",{class:{textChangeDanger:a.textChangeDanger[t.$index]},attrs:{type:"number",size:a.btnsize},on:{change:function(e){return a.changLoadData(t.$index,i.prop,e)}},nativeOn:{dblclick:function(e){e.stopPropagation(),e.preventDefault()},click:function(e){e.stopPropagation(),e.preventDefault()}},model:{value:i.slot(t),callback:function(e){a.$set(i,"slot(scope)",a._n(e))},expression:"column.slot(scope)"}})],1):l("div",[i.click?l("span",{staticClass:"clickitem",domProps:{innerHTML:a._s(i.slot(t))},on:{click:function(e){e.stopPropagation(),i.click(t)}}}):l("span",{domProps:{innerHTML:a._s(i.slot(t))}})])]}}])}):l("el-table-column",{key:i.id,attrs:{fixed:i.fixed,sortable:"",label:i.label,prop:i.prop,width:i.width}})]})],2)],1)]),a._v(" "),l("Receipt",{attrs:{popVisible:a.popVisibleDialog,info:a.tableReceiptInfo},on:{close:a.closeDialog}})],1)},staticRenderFns:[]};t.a=a},"4JAb":function(e,t,i){"use strict";var a={render:function(){var a=this,e=a.$createElement,l=a._self._c||e;return l("div",{staticClass:"accountsLoad_table"},[l("div",{staticClass:"transferTable_search clearfix"},[l("currentSearch",{attrs:{info:a.orgLeftTable},on:{change:a.selectCurrent}})],1),a._v(" "),l("transferTable",{staticStyle:{height:"calc(100% - 40px)",padding:"10px"}},[l("div",{attrs:{slot:"btnsBox"},slot:"btnsBox"},[l("el-button",{attrs:{type:a.isGoReceipt?"info":"success",size:"mini",icon:"el-icon-sort",disabled:a.isGoReceipt},on:{click:a.goReceipt}},[a._v("送货费结算")])],1),a._v(" "),l("div",{staticClass:"tableHeadItemBtn",staticStyle:{height:"100%"},attrs:{slot:"tableLeft"},slot:"tableLeft"},[l("el-button",{staticClass:"tableAllBtn",attrs:{size:"mini"},on:{click:a.addALLList}}),a._v(" "),l("el-table",{key:a.tablekey,ref:"multipleTableRight",attrs:{data:a.leftTable,border:"","tooltip-effect":"dark",triped:"",height:"100%","summary-method":a.getSumRight,"default-sort":{prop:"id",order:"ascending"},"show-overflow-tooltip":!0,"show-summary":!0},on:{"row-click":a.clickDetailsRight,"selection-change":a.getSelectionRight,"row-dblclick":a.dclickAddItem}},[l("el-table-column",{attrs:{fixed:"",width:"50",type:"index",label:"序号"},scopedSlots:a._u([{key:"default",fn:function(e){return[a._v("\n            "+a._s(e.$index+1)+"\n          ")]}}])}),a._v(" "),l("el-table-column",{attrs:{fixed:"",width:"50"},scopedSlots:a._u([{key:"default",fn:function(t){return[l("el-button",{staticClass:"tableItemBtn",attrs:{size:"mini"},on:{click:function(e){a.addItem(t.row,t.$index)}}})]}}])}),a._v(" "),a._l(a.tableColumnLeft,function(i){return[i.slot?l("el-table-column",{key:i.id,attrs:{fixed:i.fixed,sortable:"",label:i.label,width:i.width},scopedSlots:a._u([{key:"default",fn:function(t){return[i.click?l("span",{staticClass:"clickitem",domProps:{innerHTML:a._s(i.slot(t))},on:{click:function(e){e.stopPropagation(),i.click(t)}}}):l("span",{domProps:{innerHTML:a._s(i.slot(t))}})]}}])}):l("el-table-column",{key:i.id,attrs:{fixed:i.fixed,sortable:"",label:i.label,prop:i.prop,width:i.width}})]})],2)],1),a._v(" "),l("div",{staticClass:"tableHeadItemBtn",attrs:{slot:"tableRight"},slot:"tableRight"},[l("el-button",{staticClass:"tableAllBtnMinus",attrs:{size:"mini"},on:{click:a.minusAllList}}),a._v(" "),l("el-table",{key:a.tablekey,ref:"multipleTableLeft",staticStyle:{height:"100%"},attrs:{data:a.rightTable,border:"","tooltip-effect":"dark",triped:"",height:"100%","summary-method":a.getSumLeft,"default-sort":{prop:"id",order:"ascending"},"show-summary":!0},on:{"row-click":a.clickDetailsLeft,"selection-change":a.getSelectionLeft,"row-dblclick":a.dclickMinusItem}},[l("el-table-column",{attrs:{fixed:"",width:"50",type:"index",label:"序号"},scopedSlots:a._u([{key:"default",fn:function(e){return[a._v("\n            "+a._s(e.$index+1)+"\n          ")]}}])}),a._v(" "),l("el-table-column",{attrs:{fixed:"",width:"50"},scopedSlots:a._u([{key:"default",fn:function(t){return[l("el-button",{staticClass:"tableItemBtnMinus",attrs:{size:"mini"},on:{click:function(e){a.minusItem(t.row,t.$index)}}})]}}])}),a._v(" "),a._l(a.tableColumnRight,function(i){return[i.slot?l("el-table-column",{key:i.id,attrs:{fixed:i.fixed,sortable:"",label:i.label,width:i.width,prop:i.prop},scopedSlots:a._u([{key:"default",fn:function(t){return[i.expand?l("div",[l("el-input",{class:{textChangeDanger:a.textChangeDanger[t.$index]},attrs:{type:"number",size:a.btnsize},on:{change:function(e){return a.changLoadData(t.$index,i.prop,e)}},nativeOn:{dblclick:function(e){e.stopPropagation(),e.preventDefault()},click:function(e){e.stopPropagation(),e.preventDefault()}},model:{value:i.slot(t),callback:function(e){a.$set(i,"slot(scope)",a._n(e))},expression:"column.slot(scope)"}})],1):l("div",[i.click?l("span",{staticClass:"clickitem",domProps:{innerHTML:a._s(i.slot(t))},on:{click:function(e){e.stopPropagation(),i.click(t)}}}):l("span",{domProps:{innerHTML:a._s(i.slot(t))}})])]}}])}):l("el-table-column",{key:i.id,attrs:{fixed:i.fixed,sortable:"",label:i.label,prop:i.prop,width:i.width}})]})],2)],1)]),a._v(" "),l("Receipt",{attrs:{popVisible:a.popVisibleDialog,info:a.tableReceiptInfo},on:{close:a.closeDialog}})],1)},staticRenderFns:[]};t.a=a},"4ttV":function(e,t,i){"use strict";var a={render:function(){var a=this,e=a.$createElement,l=a._self._c||e;return l("div",{staticClass:"accountsLoad_table"},[l("div",{staticClass:"transferTable_search clearfix"},[l("currentSearch",{attrs:{info:a.orgLeftTable},on:{change:a.selectCurrent}})],1),a._v(" "),l("transferTable",{staticStyle:{height:"calc(100% - 40px)",padding:"10px"}},[l("div",{attrs:{slot:"btnsBox"},slot:"btnsBox"},[l("el-button",{attrs:{type:a.isGoReceipt?"info":"success",size:"mini",icon:"el-icon-sort",disabled:a.isGoReceipt},on:{click:a.goReceipt}},[a._v("实际提货费结算")])],1),a._v(" "),l("div",{staticClass:"tableHeadItemBtn",staticStyle:{height:"100%"},attrs:{slot:"tableLeft"},slot:"tableLeft"},[l("el-button",{staticClass:"tableAllBtn",attrs:{size:"mini"},on:{click:a.addALLList}}),a._v(" "),l("el-table",{key:a.tablekey,ref:"multipleTableRight",attrs:{data:a.leftTable,border:"","tooltip-effect":"dark",triped:"",height:"100%","summary-method":a.getSumRight,"default-sort":{prop:"id",order:"ascending"},"show-overflow-tooltip":!0,"show-summary":!0},on:{"row-click":a.clickDetailsRight,"selection-change":a.getSelectionRight,"row-dblclick":a.dclickAddItem}},[l("el-table-column",{attrs:{fixed:"",width:"50",type:"index",label:"序号"},scopedSlots:a._u([{key:"default",fn:function(e){return[a._v("\n            "+a._s(e.$index+1)+"\n          ")]}}])}),a._v(" "),l("el-table-column",{attrs:{fixed:"",width:"50"},scopedSlots:a._u([{key:"default",fn:function(t){return[l("el-button",{staticClass:"tableItemBtn",attrs:{size:"mini"},on:{click:function(e){a.addItem(t.row,t.$index)}}})]}}])}),a._v(" "),a._l(a.tableColumnLeft,function(i){return[i.slot?l("el-table-column",{key:i.id,attrs:{fixed:i.fixed,sortable:"",label:i.label,width:i.width,prop:i.prop},scopedSlots:a._u([{key:"default",fn:function(t){return[i.expand?l("div",[l("el-input",{attrs:{type:"number",size:a.btnsize},on:{change:function(e){a.changLoadData(t.$index)}},model:{value:i.slot(t),callback:function(e){a.$set(i,"slot(scope)",a._n(e))},expression:"column.slot(scope)"}})],1):l("div",[i.click?l("span",{staticClass:"clickitem",domProps:{innerHTML:a._s(i.slot(t))},on:{click:function(e){e.stopPropagation(),i.click(t)}}}):l("span",{domProps:{innerHTML:a._s(i.slot(t))}})])]}}])}):l("el-table-column",{key:i.id,attrs:{fixed:i.fixed,sortable:"",label:i.label,prop:i.prop,width:i.width}})]})],2)],1),a._v(" "),l("div",{staticClass:"tableHeadItemBtn",attrs:{slot:"tableRight"},slot:"tableRight"},[l("el-button",{staticClass:"tableAllBtnMinus",attrs:{size:"mini"},on:{click:a.minusAllList}}),a._v(" "),l("el-table",{key:a.tablekey,ref:"multipleTableLeft",staticStyle:{height:"100%"},attrs:{data:a.rightTable,border:"","tooltip-effect":"dark",triped:"",height:"100%","summary-method":a.getSumLeft,"default-sort":{prop:"id",order:"ascending"},"show-summary":!0},on:{"row-click":a.clickDetailsLeft,"selection-change":a.getSelectionLeft,"row-dblclick":a.dclickMinusItem}},[l("el-table-column",{attrs:{fixed:"",width:"50",type:"index",label:"序号"},scopedSlots:a._u([{key:"default",fn:function(e){return[a._v("\n            "+a._s(e.$index+1)+"\n          ")]}}])}),a._v(" "),l("el-table-column",{attrs:{fixed:"",width:"50"},scopedSlots:a._u([{key:"default",fn:function(t){return[l("el-button",{staticClass:"tableItemBtnMinus",attrs:{size:"mini"},on:{click:function(e){a.minusItem(t.row,t.$index)}}})]}}])}),a._v(" "),a._l(a.tableColumnRight,function(i){return[i.slot?l("el-table-column",{key:i.id,attrs:{fixed:i.fixed,sortable:"",label:i.label,width:i.width,prop:i.prop},scopedSlots:a._u([{key:"default",fn:function(t){return[i.expand?l("div",[l("el-input",{class:{textChangeDanger:a.textChangeDanger[t.$index]},attrs:{type:"number",size:a.btnsize},on:{change:function(e){return a.changLoadData(t.$index,i.prop,e)}},nativeOn:{dblclick:function(e){e.stopPropagation(),e.preventDefault()},click:function(e){e.stopPropagation(),e.preventDefault()}},model:{value:i.slot(t),callback:function(e){a.$set(i,"slot(scope)",a._n(e))},expression:"column.slot(scope)"}})],1):l("div",[i.click?l("span",{staticClass:"clickitem",domProps:{innerHTML:a._s(i.slot(t))},on:{click:function(e){e.stopPropagation(),i.click(t)}}}):l("span",{domProps:{innerHTML:a._s(i.slot(t))}})])]}}])}):l("el-table-column",{key:i.id,attrs:{fixed:i.fixed,sortable:"",label:i.label,prop:i.prop,width:i.width}})]})],2)],1)]),a._v(" "),l("Receipt",{attrs:{popVisible:a.popVisibleDialog,info:a.tableReceiptInfo},on:{close:a.closeDialog}})],1)},staticRenderFns:[]};t.a=a},"5/nr":function(e,t,i){"use strict";var a={render:function(){var a=this,e=a.$createElement,l=a._self._c||e;return l("div",{staticClass:"accountsLoad_table"},[l("div",{staticClass:"transferTable_search clearfix"},[l("currentSearch",{attrs:{info:a.orgLeftTable},on:{change:a.selectCurrent}})],1),a._v(" "),l("transferTable",{staticStyle:{height:"calc(100% - 40px)",padding:"10px"}},[l("div",{attrs:{slot:"btnsBox"},slot:"btnsBox"},[l("el-button",{attrs:{type:a.isGoReceipt?"info":"success",size:"mini",icon:"el-icon-sort",disabled:a.isGoReceipt},on:{click:a.goReceipt}},[a._v("其他费用支出结算")])],1),a._v(" "),l("div",{staticClass:"tableHeadItemBtn",staticStyle:{height:"100%"},attrs:{slot:"tableLeft"},slot:"tableLeft"},[l("el-button",{staticClass:"tableAllBtn",attrs:{size:"mini"},on:{click:a.addALLList}}),a._v(" "),l("el-table",{key:a.tablekey,ref:"multipleTableRight",attrs:{data:a.leftTable,border:"","tooltip-effect":"dark",triped:"",height:"100%","summary-method":a.getSumRight,"default-sort":{prop:"id",order:"ascending"},"show-overflow-tooltip":!0,"show-summary":!0},on:{"row-click":a.clickDetailsRight,"selection-change":a.getSelectionRight,"row-dblclick":a.dclickAddItem}},[l("el-table-column",{attrs:{fixed:"",width:"50",type:"index",label:"序号"},scopedSlots:a._u([{key:"default",fn:function(e){return[a._v("\n            "+a._s(e.$index+1)+"\n          ")]}}])}),a._v(" "),l("el-table-column",{attrs:{fixed:"",width:"50"},scopedSlots:a._u([{key:"default",fn:function(t){return[l("el-button",{staticClass:"tableItemBtn",attrs:{size:"mini"},on:{click:function(e){a.addItem(t.row,t.$index)}}})]}}])}),a._v(" "),a._l(a.tableColumnLeft,function(i){return[i.slot?l("el-table-column",{key:i.id,attrs:{fixed:i.fixed,sortable:"",label:i.label,width:i.width,prop:i.prop},scopedSlots:a._u([{key:"default",fn:function(t){return[i.expand?l("div",[l("el-input",{attrs:{type:"number",size:a.btnsize},on:{change:function(e){a.changLoadData(t.$index)}},model:{value:i.slot(t),callback:function(e){a.$set(i,"slot(scope)",a._n(e))},expression:"column.slot(scope)"}})],1):l("div",[i.click?l("span",{staticClass:"clickitem",domProps:{innerHTML:a._s(i.slot(t))},on:{click:function(e){e.stopPropagation(),i.click(t)}}}):l("span",{domProps:{innerHTML:a._s(i.slot(t))}})])]}}])}):l("el-table-column",{key:i.id,attrs:{fixed:i.fixed,sortable:"",label:i.label,prop:i.prop,width:i.width}})]})],2)],1),a._v(" "),l("div",{staticClass:"tableHeadItemBtn",attrs:{slot:"tableRight"},slot:"tableRight"},[l("el-button",{staticClass:"tableAllBtnMinus",attrs:{size:"mini"},on:{click:a.minusAllList}}),a._v(" "),l("el-table",{key:a.tablekey,ref:"multipleTableLeft",staticStyle:{height:"100%"},attrs:{data:a.rightTable,border:"","tooltip-effect":"dark",triped:"",height:"100%","summary-method":a.getSumLeft,"default-sort":{prop:"id",order:"ascending"},"show-summary":!0},on:{"row-click":a.clickDetailsLeft,"selection-change":a.getSelectionLeft,"row-dblclick":a.dclickMinusItem}},[l("el-table-column",{attrs:{fixed:"",width:"50",type:"index",label:"序号"},scopedSlots:a._u([{key:"default",fn:function(e){return[a._v("\n            "+a._s(e.$index+1)+"\n          ")]}}])}),a._v(" "),l("el-table-column",{attrs:{fixed:"",width:"50"},scopedSlots:a._u([{key:"default",fn:function(t){return[l("el-button",{staticClass:"tableItemBtnMinus",attrs:{size:"mini"},on:{click:function(e){a.minusItem(t.row,t.$index)}}})]}}])}),a._v(" "),a._l(a.tableColumnRight,function(i){return[i.slot?l("el-table-column",{key:i.id,attrs:{fixed:i.fixed,sortable:"",label:i.label,width:i.width,prop:i.prop},scopedSlots:a._u([{key:"default",fn:function(t){return[i.expand?l("div",[l("el-input",{class:{textChangeDanger:a.textChangeDanger[t.$index]},attrs:{type:"number",size:a.btnsize},on:{change:function(e){return a.changLoadData(t.$index,i.prop,e)}},nativeOn:{dblclick:function(e){e.stopPropagation(),e.preventDefault()},click:function(e){e.stopPropagation(),e.preventDefault()}},model:{value:i.slot(t),callback:function(e){a.$set(i,"slot(scope)",a._n(e))},expression:"column.slot(scope)"}})],1):l("div",[i.click?l("span",{staticClass:"clickitem",domProps:{innerHTML:a._s(i.slot(t))},on:{click:function(e){e.stopPropagation(),i.click(t)}}}):l("span",{domProps:{innerHTML:a._s(i.slot(t))}})])]}}])}):l("el-table-column",{key:i.id,attrs:{fixed:i.fixed,sortable:"",label:i.label,prop:i.prop,width:i.width}})]})],2)],1)]),a._v(" "),l("Receipt",{attrs:{popVisible:a.popVisibleDialog,info:a.tableReceiptInfo},on:{close:a.closeDialog}})],1)},staticRenderFns:[]};t.a=a},"6PPo":function(e,t,i){"use strict";var a={render:function(){var i=this,e=i.$createElement,a=i._self._c||e;return a("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:i.loading,expression:"loading"}],staticClass:"receiptDialog",attrs:{title:i.dialogTitle,visible:i.isShow,"close-on-click-modal":!1,"before-close":i.closeMe},on:{"update:visible":function(e){i.isShow=e}}},[a("el-form",{ref:"formModel",attrs:{model:i.formModel,rules:i.rules}},[a("div",{attrs:{id:"settlementWaybill"}},[a("div",{staticClass:"receiptDialog_head"},[a("div",{staticClass:"receiptDialog_head_item"},[a("label",[i._v("单据号")]),i._v(" "),a("el-input",{attrs:{placeholder:"请输入",size:i.btnsize,disabled:""},model:{value:i.formModel.settlementSn,callback:function(e){i.$set(i.formModel,"settlementSn",e)},expression:"formModel.settlementSn"}})],1),i._v(" "),a("div",{staticClass:"receiptDialog_head_item"},[a("label",[i._v("发生时间")]),i._v(" "),a("el-date-picker",{attrs:{size:i.btnsize,"value-format":"yyyy-MM-dd HH:mm:ss",type:"date"},model:{value:i.formModel.settlementTime,callback:function(e){i.$set(i.formModel,"settlementTime",e)},expression:"formModel.settlementTime"}})],1),i._v(" "),a("div",{staticClass:"receiptDialog_head_item"},[a("label",[i._v("经办人")]),i._v(" "),a("querySelect",{attrs:{size:i.btnsize,valuekey:"name",show:"select",search:"name",label:"name"},model:{value:i.formModel.settlementBy,callback:function(e){i.$set(i.formModel,"settlementBy",e)},expression:"formModel.settlementBy"}})],1)]),i._v(" "),a("div",{staticClass:"receiptDialog_table"},[a("el-table",{staticStyle:{width:"100%",height:"100%"},attrs:{data:i.formModel.detailDtoList2,height:"100%",stripe:"","show-summary":"","summary-method":i.getSum}},[a("el-table-column",{attrs:{prop:"date",label:"序号",type:"index",width:"70"}}),i._v(" "),a("el-table-column",{attrs:{prop:"dataName",label:"费用项"}}),i._v(" "),a("el-table-column",[a("el-table-column",{attrs:{prop:"tenMillion",label:"千",width:"40"}}),i._v(" "),a("el-table-column",{attrs:{prop:"million",label:"百",width:"40"}}),i._v(" "),a("el-table-column",{attrs:{prop:"oneHundrenThousand",label:"十",width:"40"}}),i._v(" "),a("el-table-column",{attrs:{prop:"tenThousand",label:"万",width:"40"}}),i._v(" "),a("el-table-column",{attrs:{prop:"thousand",label:"千",width:"40"}}),i._v(" "),a("el-table-column",{attrs:{prop:"hundren",label:"百",width:"40"}}),i._v(" "),a("el-table-column",{attrs:{prop:"ten",label:"十",width:"40"}}),i._v(" "),a("el-table-column",{attrs:{prop:"yuan",label:"元",width:"40"}}),i._v(" "),a("el-table-column",{attrs:{prop:"jiao",label:"角",width:"40"}}),i._v(" "),a("el-table-column",{attrs:{prop:"fen",label:"分",width:"40"}})],1)],1)],1)]),i._v(" "),a("div",{staticClass:"receiptDialog_todo"},[a("el-button",{staticClass:"tableBtnAdd",attrs:{size:"mini"},on:{click:i.plusItem}}),i._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:i.formModel.szDtoList,border:"",height:"100%",stripe:""}},[a("el-table-column",{attrs:{fixed:"",width:"50"},scopedSlots:i._u([{key:"default",fn:function(t){return[a("el-button",{staticClass:"tableBtnMinus",attrs:{size:"mini"},on:{click:function(e){i.minusItem(t.row,t.$index)}}})]}}])}),i._v(" "),a("el-table-column",{attrs:{prop:"financialWay",label:"收支方式",width:"80"},scopedSlots:i._u([{key:"default",fn:function(t){return[a("el-autocomplete",{attrs:{"popper-class":"querySelectItem",size:i.btnsize,"fetch-suggestions":i.querySearch,placeholder:"支付方式"},on:{select:function(e){return i.sender(e,t.$index)}},scopedSlots:i._u([{key:"default",fn:function(e){var t=e.item;return i._l(i.BANK_INFO,function(e){return a("span",[i._v(i._s(t[e]))])})}}]),model:{value:t.row.financialWay,callback:function(e){i.$set(t.row,"financialWay",e)},expression:"props.row.financialWay"}})]}}])}),i._v(" "),a("el-table-column",{attrs:{prop:"bankName",label:"银行名称"},scopedSlots:i._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{size:i.btnsize,maxlength:i.maxlength},model:{value:t.row.bankName,callback:function(e){i.$set(t.row,"bankName",e)},expression:"props.row.bankName"}})]}}])}),i._v(" "),a("el-table-column",{attrs:{prop:"bankAccount",label:"银行卡号",width:"200"},scopedSlots:i._u([{key:"default",fn:function(t){return[a("el-input",{directives:[{name:"numberOnly",rawName:"v-numberOnly"}],attrs:{size:i.btnsize,maxlength:i.maxlength},model:{value:t.row.bankAccount,callback:function(e){i.$set(t.row,"bankAccount",e)},expression:"props.row.bankAccount"}})]}}])}),i._v(" "),a("el-table-column",{attrs:{prop:"bankAccountName",label:"开户人",width:"80"},scopedSlots:i._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{size:i.btnsize,maxlength:i.maxlength},model:{value:t.row.bankAccountName,callback:function(e){i.$set(t.row,"bankAccountName",e)},expression:"props.row.bankAccountName"}})]}}])}),i._v(" "),a("el-table-column",{attrs:{prop:"chequeNumber",label:"支票号码"},scopedSlots:i._u([{key:"default",fn:function(t){return[a("el-input",{directives:[{name:"numberOnly",rawName:"v-numberOnly"}],attrs:{size:i.btnsize,maxlength:i.maxlength},model:{value:t.row.chequeNumber,callback:function(e){i.$set(t.row,"chequeNumber",e)},expression:"props.row.chequeNumber"}})]}}])}),i._v(" "),a("el-table-column",{attrs:{prop:"receivableNumber",label:"汇款号码"},scopedSlots:i._u([{key:"default",fn:function(t){return[a("el-input",{directives:[{name:"numberOnly",rawName:"v-numberOnly"}],attrs:{size:i.btnsize,maxlength:i.maxlength},model:{value:t.row.receivableNumber,callback:function(e){i.$set(t.row,"receivableNumber",e)},expression:"props.row.receivableNumber"}})]}}])}),i._v(" "),a("el-table-column",{attrs:{prop:"wechatAccount",label:"微信号"},scopedSlots:i._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{size:i.btnsize,maxlength:i.maxlength},model:{value:t.row.wechatAccount,callback:function(e){i.$set(t.row,"wechatAccount",e)},expression:"props.row.wechatAccount"}})]}}])}),i._v(" "),a("el-table-column",{attrs:{prop:"alipayAccount",label:"支付宝号"},scopedSlots:i._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{size:i.btnsize,maxlength:i.maxlength},model:{value:t.row.alipayAccount,callback:function(e){i.$set(t.row,"alipayAccount",e)},expression:"props.row.alipayAccount"}})]}}])}),i._v(" "),a("el-table-column",{attrs:{prop:"agent",label:"经办人",width:"80"},scopedSlots:i._u([{key:"default",fn:function(t){return[a("querySelect",{attrs:{size:i.btnsize,valuekey:"name",show:"select",search:"name",label:"name",maxlength:i.maxlength},model:{value:t.row.agent,callback:function(e){i.$set(t.row,"agent",e)},expression:"props.row.agent"}})]}}])})],1)],1),i._v(" "),a("div",{staticClass:"receiptDialog_remark"},[a("label",[i._v("备注")]),i._v(" "),a("el-input",{attrs:{placeholder:"最多可输入300个字符",size:i.btnsize,maxlength:300},model:{value:i.formModel.remark,callback:function(e){i.$set(i.formModel,"remark",e)},expression:"formModel.remark"}})],1)]),i._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary",size:i.btnsize,icon:"el-icon-document"},on:{click:function(e){i.submitForm("formModel")}}},[i._v("保存")]),i._v(" "),a("el-button",{attrs:{type:"primary",size:i.btnsize,icon:"el-icon-printer"},on:{click:i.print}},[i._v("保存并打印")]),i._v(" "),a("el-button",{attrs:{type:"danger",size:i.btnsize,icon:"el-icon-circle-close-outline"},on:{click:i.closeMe}},[i._v("取 消")])],1)],1)},staticRenderFns:[]};t.a=a},"6f/H":function(e,t,i){"use strict";var a={render:function(){var i=this,e=i.$createElement,a=i._self._c||e;return a("el-autocomplete",{attrs:{size:i.btnsize,"fetch-suggestions":i.querySearch,placeholder:i.placeholderText,"prefix-icon":"el-icon-search"},on:{select:i.handleSelect},scopedSlots:i._u([{key:"default",fn:function(e){var t=e.item;return[t.shipSn?a("div",{staticClass:"name"},[i._v(i._s(t.shipSn))]):a("div",{staticClass:"name"},[i._v(i._s(t.batchNo))])]}}]),model:{value:i.currentSearch,callback:function(e){i.currentSearch=e},expression:"currentSearch"}})},staticRenderFns:[]};t.a=a},"77V8":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("VYty"),l=i("wjZe"),o=i("VU/8")(a.a,l.a,null,null,null);t.default=o.exports},"7CJ8":function(e,t){},"7NNL":function(e,t,i){"use strict";var a=i("woOf"),l=i.n(a),o=i("Dd8w"),n=i.n(o),r=(i("E4LH"),i("NYxO")),s=i("JW1v"),c=i("t5DY"),h=i("0xDb"),d=i("Q0Ca"),u=i("pAQG"),p=i("UQm2"),f=i("xAap");t.a={components:{querySelect:u.a},data:function(){return{maxlength:30,amount:0,amountMessage:"",formModel:{detailDtoList2:[]},financialWalList:[],loading:!0,rules:{},btnsize:"mini",dialogTitle:"结 算 付 款 单",submitData:{},BANK_INFO:["financialWay","bankName","bankAccount","bankAccountName","chequeNumber","receivableNumber","wechatAccount","alipayAccount","agent"],paymentsType:1}},computed:n()({},Object(r.b)(["otherinfo"]),{isShow:{get:function(){return this.popVisible},set:function(){}},getRouteInfo:function(){return JSON.parse(this.$route.query.searchQuery)},settlementTypeId:function(){switch(this.$route.query.currentPage){case"batchArrivalAll":case"batchTruckAll":return 179}},currentPage:function(){var e=this.$route.query.currentPage;return e.substr(5,e.length)}}),props:{popVisible:{type:Boolean,default:!1},info:{type:Array,default:[]}},watch:{popVisible:function(){this.popVisible?(this.isShow=!0,this.getFeeInfo()):this.isShow=!1},info:function(e){if(e)return this.info}},mounted:function(){var e=this;this.postTmsFfinancialwayList(),this.$nextTick(function(){e.init()})},methods:{print:function(){var e=l()(this.formModel);this.$set(e,"amountMessage",this.amountMessage),Object(p.f)(e),this.submitForm("formModel")},init:function(){this.loading=!1},getFeeInfo:function(){var t=this,e=this.otherinfo.orgid;return Object(s.a)(e,this.paymentsType).then(function(e){t.formModel=e.data,t.formModel.detailDtoList2=[],t.formModel.settlementTime=Object(h.parseTime)(new Date),t.formModel.settlementBy=t.otherinfo.name,t.initDetailDtoList(),t.formModel.szDtoList.forEach(function(e){e.agent=t.otherinfo.name}),t.formModel.szDtoList.length<1&&t.plusItem()}).catch(function(e){t.loading=!1,t._handlerCatchMsg(e)})},postTmsFfinancialwayList:function(){var t=this,e={currentPage:1,pageSize:100,vo:{financialWay:"",financialWayTypeId:"",orgId:this.otherinfo.orgid,status:""}};Object(f.b)(e).then(function(e){t.financialWalList=[],e.list.forEach(function(e){"启用"===e.statusStr&&t.financialWalList.push(e)})}).catch(function(e){t.loading=!1,t._handlerCatchMsg(e)})},querySearch:function(e,t){var i=this.financialWalList;t(e?i.filter(this.createFilter(e)):i)},createFilter:function(t){return function(e){return 0===e.financialWay.toLowerCase().indexOf(t.toLowerCase())}},initDetailDtoList:function(){var l=this;this.formModel.amount=0,this.formModel.detailDtoList=Object(h.objectMerge2)([],this.info);var t={};for(var e in this.formModel.detailDtoList.map(function(e){t[e.dataName]?t[e.dataName].amount+=e.amount:t[e.dataName]=e}),t)this.formModel.detailDtoList2.push(t[e]);t={},this.formModel.detailDtoList2.forEach(function(e,t){l.formModel.amount+=e.amount;var i=e.amount.toFixed(2).toString().split("").reverse(),a=i.indexOf(".");-1!==a&&i.splice(a,1),e.fen=i[0],e.jiao=i[1],e.yuan=i[2],e.ten=i[3],e.hundren=i[4],e.thousand=i[5],e.tenThousand=i[6],e.oneHundrenThousand=i[7],e.million=i[8],e.tenMillion=i[9]}),this.amountMessage=Object(d.smalltoBIG)(this.formModel.amount),this.amount=this.formModel.amount.toFixed(2).toString().split("").reverse();var i=this.amount.indexOf(".");-1!==i&&this.amount.splice(i,1)},sender:function(e,t){this.$set(this.formModel.szDtoList,t,l()(this.formModel.szDtoList[t],e))},getSystemTime:function(){var t=this;Object(c.f)().then(function(e){t.formModel.settlementTime=new Date(e.trim())}).catch(function(e){t.loading=!1,t._handlerCatchMsg(e)})},closeMe:function(e){this.$emit("close"),"function"==typeof e&&e()},setData:function(){"batchTruckAll"===this.$route.query.currentPage?this.$set(this.submitData,"ascriptionOrgid",this.getRouteInfo.vo.orgid):this.$set(this.submitData,"ascriptionOrgid",this.getRouteInfo.vo.ascriptionOrgid),this.$set(this.submitData,"settlementTypeId",this.settlementTypeId),this.$set(this.submitData,"settlementSn",this.formModel.settlementSn),this.$set(this.submitData,"settlementBy",this.formModel.settlementBy),this.$set(this.submitData,"settlementTime",this.formModel.settlementTime),this.$set(this.submitData,"remark",this.formModel.remark),this.$set(this.submitData,"tmsFinanceSettlementList",l()([],this.info)),this.$set(this.submitData,"tmsFinanceFinancialWayLogList",this.formModel.szDtoList)},submitForm:function(e){var i=this;this.$refs[e].validate(function(e){e&&(i.setData(),Object(s.g)(i.submitData).then(function(e){i.$message({type:"success",message:"保存成功"}),i.closeMe();var t=i.currentPage.substring(0,1).toLowerCase()+i.currentPage.substring(1);i.$router.push({path:"./accountsPayable/batch/"+t})}).catch(function(e){i._handlerCatchMsg(e)}))})},minusItem:function(e,t){var i=this.formModel.szDtoList.indexOf(e);-1!==i&&this.formModel.szDtoList.splice(i,1)},plusItem:function(){var e={agent:this.otherinfo.name,alipayAccount:"",bankAccount:"",bankAccountName:"",bankName:"",chequeNumber:"",financialWay:"",flowId:"",receivableNumber:"",rnum:"",wechatAccount:""};this.formModel.szDtoList.push(e)},getSum:function(e){var o=this,t=e.columns,n=e.data,r=[];return this.$nextTick(function(){}),t.forEach(function(t,e){if(0!==e)if(1!==e){for(var i=-2,a=12;2<a;a--)if(i++,e===a)return void(r[e]=o.amount[i]);var l=n.map(function(e){return Number(e[t.property])});l.every(function(e){return isNaN(e)})?r[e]="":(r[e]=l.reduce(function(e,t){var i=Number(t);return isNaN(i)?e:e+t},0),r[e]+="")}else r[e]=o.amountMessage;else r[e]="合计"}),r}}}},"7ZmC":function(e,t,i){"use strict";var a=i("bOdI"),n=i.n(a),l=i("woOf"),r=i.n(l),o=i("Dd8w"),s=i.n(o),c=i("NYxO"),h=i("JW1v"),d=i("IcMT"),u=i("0xDb"),p=i("pAQG"),f=i("i5L8"),b=i("1onU"),g=i("DT23"),m=i("0xDb");t.a={components:{transferTable:d.a,querySelect:p.a,Receipt:f.default,Pager:b.a,currentSearch:g.default},data:function(){var i=this;return{textChangeDanger:[],orgLeftTable:[],tablekey:"",truckMessage:"",formModel:{},loading:!1,popVisibleDialog:!1,btnsize:"mini",tableReceiptInfo:[],selectedRight:[],selectedLeft:[],isGoReceipt:!0,leftTable:[],rightTable:[],orgData:{left:[],right:[]},isFresh:!1,searchQuery:{currentPage:1,pageSize:100,vo:{}},tableColumnLeft:[{label:"运单号",prop:"shipSn",width:"120",fixed:!0},{label:"开单网点",prop:"shipFromOrgName",width:"120",fixed:!1},{label:"结算状态",prop:"statusName",width:"120",fixed:!1},{label:"签收状态",prop:"signStatusName",width:"100",fixed:!1},{label:"发货人",prop:"senderCustomerName",width:"120",fixed:!1},{label:"收货人",prop:"receiverCustomerName",width:"120",fixed:!1},{label:"异常理赔",prop:"fee",width:"150",fixed:!1},{label:"已结异常理赔",prop:"closeFee",width:"150",fixed:!1,slot:function(e){var t=e.row;return i._setTextColor(t.fee,t.closeFee,t.unpaidFee,t.closeFee)}},{label:"未结异常理赔",prop:"unpaidFee",width:"150",fixed:!1,slot:function(e){var t=e.row;return i._setTextColor(t.fee,t.closeFee,t.unpaidFee,t.unpaidFee)}},{label:"发货方",prop:"senderUnit",width:"120",fixed:!1},{label:"收货方",prop:"receiverUnit",width:"120",fixed:!1},{label:"货号",prop:"shipGoodsSn",width:"120",fixed:!1},{label:"货品名",prop:"cargoName",width:"120",fixed:!1},{label:"开单时间",prop:"createTime",width:"120",fixed:!1,slot:function(e){return""+Object(u.parseTime)(e.row.createTime,"{y}-{m}-{d} {h}:{i}:{s}")}},{label:"出发城市",prop:"shipFromCityName",width:"120",fixed:!1},{label:"到达城市",prop:"shipToCityName",width:"120",fixed:!1},{label:"件数",prop:"cargoAmount",width:"120",fixed:!1},{label:"重量",prop:"cargoWeight",width:"120",fixed:!1},{label:"体积",prop:"cargoVolume",width:"120",fixed:!1},{label:"运单备注",prop:"shipRemarks",width:"120",fixed:!1}],tableColumnRight:[{label:"运单号",prop:"shipSn",width:"120",fixed:!0},{label:"开单网点",prop:"shipFromOrgName",width:"120",fixed:!1},{label:"结算状态",prop:"statusName",width:"120",fixed:!1},{label:"签收状态",prop:"signStatusName",width:"100",fixed:!1},{label:"发货人",prop:"senderCustomerName",width:"120",fixed:!1},{label:"收货人",prop:"receiverCustomerName",width:"120",fixed:!1},{label:"异常理赔",prop:"fee",width:"150",fixed:!1},{label:"已结异常理赔",prop:"closeFee",width:"150",fixed:!1,slot:function(e){var t=e.row;return i._setTextColor(t.fee,t.closeFee,t.unpaidFee,t.closeFee)}},{label:"未结异常理赔",prop:"unpaidFee",width:"150",fixed:!1,slot:function(e){var t=e.row;return i._setTextColor(t.fee,t.closeFee,t.unpaidFee,t.unpaidFee)}},{label:"实结异常理赔",prop:"inputAbnormalFee",width:"120",fixed:!1,expand:!0,slot:function(e){return e.row.inputAbnormalFee}},{label:"发货方",prop:"senderUnit",width:"120",fixed:!1},{label:"收货方",prop:"receiverUnit",width:"120",fixed:!1},{label:"货号",prop:"shipGoodsSn",width:"120",fixed:!1},{label:"货品名",prop:"cargoName",width:"120",fixed:!1},{label:"开单时间",prop:"createTime",width:"180",fixed:!1,slot:function(e){return""+Object(u.parseTime)(e.row.createTime,"{y}-{m}-{d} {h}:{i}:{s}")}},{label:"出发城市",prop:"shipFromCityName",width:"120",fixed:!1},{label:"到达城市",prop:"shipToCityName",width:"120",fixed:!1},{label:"件数",prop:"cargoAmount",width:"120",fixed:!1},{label:"重量",prop:"cargoWeight",width:"120",fixed:!1},{label:"体积",prop:"cargoVolume",width:"120",fixed:!1},{label:"运单备注",prop:"shipRemarks",width:"120",fixed:!1}]}},computed:s()({},Object(c.b)(["otherinfo"]),{getRouteInfo:function(){return JSON.parse(this.$route.query.searchQuery)},totalLeft:function(){return this.leftTable.length},totalRight:function(){return this.rightTable.length}}),mounted:function(){this.getList()},methods:{handlePageChangeLeft:function(e){this.searchQuery.currentPage=e.pageNum,this.searchQuery.pageSize=e.pageSize},initLeftParams:function(){this.searchQuery=r()({},this.getRouteInfo),this.$set(this.searchQuery.vo,"status","NOSETTLEMENT,PARTSETTLEMENT")},getList:function(){var i=this,e=JSON.parse(this.$route.query.selectListShipSns),t=Object(u.objectMerge2)([],e);this.$route.query.selectListShipSns?this.isModify=!0:this.isModify=!1,this.leftTable=this.$options.data().leftTable,this.rightTable=this.$options.data().rightTable,this.tableReceiptInfo=this.$options.data().tableReceiptInfo,this.orgLeftTable=this.$options.data().orgLeftTable,this.initLeftParams(),console.log("this.searchQuery",this.searchQuery),Object(h.c)(this.searchQuery).then(function(e){i.leftTable=r()([],e.list),t.forEach(function(t){i.leftTable.forEach(function(e){t===e.shipSn&&i.rightTable.push(e)})}),i.rightTable.length<1?i.isGoReceipt=!0:i.isGoReceipt=!1,i.rightTable.forEach(function(e){e.inputAbnormalFee=e.unpaidFee;var t=i.leftTable.indexOf(e);-1!==t&&i.leftTable.splice(t,1)}),i.orgLeftTable=Object(u.objectMerge2)([],i.leftTable)}).catch(function(e){i.loading=!1,i._handlerCatchMsg(e)})},changLoadData:function(e,t,i){this.rightTable[e][t]=Number(i);var a="unpaidFee",l=Number(this.rightTable[e][a]),o=this.rightTable[e][t];o!==l?this.$set(this.textChangeDanger,e,!0):this.$set(this.textChangeDanger,e,!1),o<0||l<o?this.$message({type:"warning",message:"实结费用不小于0，不大于未结费用。"}):this.$set(this.rightTable,e,r()(this.rightTable[e],n()({},t,this.rightTable[e][t]))),console.log(e,o,a,this.rightTable[e][a],this.rightTable[e])},clickDetailsRight:function(e){this.$refs.multipleTableRight.toggleRowSelection(e)},clickDetailsLeft:function(e){this.$refs.multipleTableLeft.toggleRowSelection(e)},getSelectionRight:function(e){this.selectedRight=e},getSelectionLeft:function(e){this.selectedLeft=e},changeTableKey:function(){this.tablekey=Math.random()},doAction:function(e){switch(e){case"goLeft":this.goLeft();break;case"goRight":this.goRight()}},goLeft:function(){var i=this;0===this.selectedRight.length||(this.selectedRight.forEach(function(t,e){t.inputAbnormalFee=t.unpaidFee,i.rightTable=Object(u.objectMerge2)([],i.rightTable).filter(function(e){return e.shipSn!==t.shipSn}),i.rightTable.push(t),i.leftTable=Object(u.objectMerge2)([],i.leftTable).filter(function(e){return e.shipSn!==t.shipSn}),i.orgLeftTable=Object(u.objectMerge2)([],i.orgLeftTable).filter(function(e){return e.shipSn!==t.shipSn})}),this.selectedRight=[]),this.rightTable.length<1?this.isGoReceipt=!0:this.isGoReceipt=!1},goRight:function(){var i=this;0===this.selectedLeft.length?this.$message({type:"warning",message:"请在右边表格选择数据"}):(this.selectedLeft.forEach(function(t,e){i.leftTable=Object(u.objectMerge2)([],i.leftTable).filter(function(e){return e.shipSn!==t.shipSn}),i.orgLeftTable=Object(u.objectMerge2)([],i.orgLeftTable).filter(function(e){return e.shipSn!==t.shipSn}),i.leftTable.push(t),i.orgLeftTable.push(t),i.rightTable=Object(u.objectMerge2)([],i.rightTable).filter(function(e){return e.shipSn!==t.shipSn})}),this.selectedLeft=[]),this.rightTable.length<1?this.isGoReceipt=!0:this.isGoReceipt=!1},dclickAddItem:function(e,t){this.selectedRight=[],this.selectedRight.push(e),this.doAction("goLeft")},dclickMinusItem:function(e,t){this.selectedLeft=[],this.selectedLeft.push(e),this.doAction("goRight")},selectCurrent:function(e,t){this.addItem(e,t)},addItem:function(e,t){this.selectedRight=[],this.selectedRight[t]=e,this.doAction("goLeft")},minusItem:function(e,t){this.selectedLeft=[],this.selectedLeft[t]=e,this.doAction("goRight")},addALLList:function(){this.selectedRight=r()([],this.leftTable),this.doAction("goLeft")},minusAllList:function(){this.selectedLeft=r()([],this.rightTable),this.doAction("goRight")},searchShip:function(e){console.log("searchShip",e)},closeDialog:function(){this.popVisibleDialog=!1},openDialog:function(){this.popVisibleDialog=!0},goReceipt:function(){var a=this;this.tableReceiptInfo=[],this.isGoReceipt||(this.rightTable.forEach(function(e,t){var i={shipId:e.shipId,amount:e.inputAbnormalFee,inputAbnormalFee:e.inputAbnormalFee,shipSn:e.shipSn,dataName:"异常理赔"};0<i.amount&&i.amount<=e.unpaidFee&&a.tableReceiptInfo.push(i),i={}}),0<this.tableReceiptInfo.length?this.openDialog():this.$message({type:"warning",message:"暂无可结算项！实结费用不小于0，不大于未结费用。"}))},getSumRight:function(e){return Object(m.getSummaries)(e,["_index|2|单","fee","unpaidFee","closeFee","cargoAmount|","cargoWeight|","cargoVolume|"])},getSumLeft:function(e){return Object(m.getSummaries)(e,["_index|2|单","fee","unpaidFee","closeFee","inputAbnormalFee","cargoAmount|","cargoWeight|","cargoVolume|"])}}}},"82Yg":function(e,t,i){"use strict";var a=i("woOf"),o=i.n(a),l=i("Dd8w"),n=i.n(l),r=i("bOdI"),s=i.n(r),c=i("NYxO"),h=i("JW1v"),d=i("IcMT"),u=i("0xDb"),p=i("pAQG"),f=i("u/8D"),b=i("1onU"),g=i("DT23"),m=i("0xDb");t.a={components:{transferTable:d.a,querySelect:p.a,Receipt:f.default,Pager:b.a,currentSearch:g.default},data:function(){var e,i=this;return e={textChangeDanger:[],tablekey:"",loadTruck:"",truckMessage:"",formModel:{}},s()(e,"loadTruck","loadTruckOne"),s()(e,"loading",!1),s()(e,"popVisibleDialog",!1),s()(e,"btnsize","mini"),s()(e,"orgLeftTable",[]),s()(e,"tableReceiptInfo",[]),s()(e,"selectedRight",[]),s()(e,"selectedLeft",[]),s()(e,"isGoReceipt",!0),s()(e,"leftTable",[]),s()(e,"rightTable",[]),s()(e,"orgData",{left:[],right:[]}),s()(e,"isFresh",!1),s()(e,"feeType",8),s()(e,"searchQuery",{currentPage:1,pageSize:100,vo:{}}),s()(e,"tableColumnLeft",[{label:"发车批次",prop:"batchNo",width:"120",fixed:!0},{label:"发车网点",prop:"orgName",width:"120",fixed:!1},{label:"结算状态",prop:"statusName",width:"120",fixed:!1},{label:"发车时间",prop:"departureTime",width:"180",fixed:!1,slot:function(e){return""+Object(u.parseTime)(e.row.departureTime,"{y}-{m}-{d} {h}:{i}:{s}")}},{label:"到达时间",prop:"receivingTime",width:"180",fixed:!1,slot:function(e){return""+Object(u.parseTime)(e.row.receivingTime,"{y}-{m}-{d} {h}:{i}:{s}")}},{label:"发站其他费",prop:"fee",width:"120",fixed:!1},{label:"已结发站其他费",prop:"paidFee",width:"120",fixed:!1,slot:function(e){var t=e.row;return i._setTextColor(t.fee,t.paidFee,t.unpaidFee,t.paidFee)}},{label:"未结发站其他费",prop:"unpaidFee",width:"120",fixed:!1,slot:function(e){var t=e.row;return i._setTextColor(t.fee,t.paidFee,t.unpaidFee,t.unpaidFee)}},{label:"司机电话",prop:"dirverMobile",width:"120",fixed:!1},{label:"车牌号",prop:"truckIdNumber",width:"120",fixed:!1},{label:"司机姓名",prop:"dirverName",width:"120",fixed:!1},{label:"达到网点",prop:"arriveOrgName",width:"120",fixed:!1},{label:"配载件数",prop:"loadAmountall",width:"120",fixed:!1},{label:"配载重量",prop:"loadWeightall",width:"120",fixed:!1},{label:"配载体积",prop:"loadVolumeall",width:"120",fixed:!1},{label:"备注",prop:"remark",width:"120",fixed:!1}]),s()(e,"tableColumnRight",[{label:"发车批次",prop:"batchNo",width:"120",fixed:!0},{label:"结算状态",prop:"statusName",width:"120",fixed:!1},{label:"发车网点",prop:"orgName",width:"120",fixed:!1},{label:"达到网点",prop:"arriveOrgName",width:"120",fixed:!1},{label:"发车时间",prop:"departureTime",width:"180",fixed:!1,slot:function(e){return""+Object(u.parseTime)(e.row.departureTime,"{y}-{m}-{d} {h}:{i}:{s}")}},{label:"发站其他费",prop:"fee",width:"120",fixed:!1},{label:"已结发站其他费",prop:"paidFee",width:"120",fixed:!1,slot:function(e){var t=e.row;return i._setTextColor(t.fee,t.paidFee,t.unpaidFee,t.paidFee)}},{label:"未结发站其他费",prop:"unpaidFee",width:"120",fixed:!1,slot:function(e){var t=e.row;return i._setTextColor(t.fee,t.paidFee,t.unpaidFee,t.unpaidFee)}},{label:"实结发站其他费",prop:"amount",width:"120",fixed:!1,expand:!0,slot:function(e){return e.row.amount}},{label:"司机电话",prop:"dirverMobile",width:"120",fixed:!1},{label:"车牌号",prop:"truckIdNumber",width:"120",fixed:!1},{label:"司机姓名",prop:"dirverName",width:"120",fixed:!1},{label:"配载件数",prop:"loadAmountall",width:"120",fixed:!1},{label:"配载重量",prop:"loadWeightall",width:"120",fixed:!1},{label:"配载体积",prop:"loadVolumeall",width:"120",fixed:!1},{label:"备注",prop:"remark",width:"120",fixed:!1}]),e},computed:n()({},Object(c.b)(["otherinfo"]),{getRouteInfo:function(){return JSON.parse(this.$route.query.searchQuery)},totalLeft:function(){return this.leftTable.length},totalRight:function(){return this.rightTable.length}}),mounted:function(){this.getList()},methods:{handlePageChangeLeft:function(e){this.searchQuery.currentPage=e.pageNum,this.searchQuery.pageSize=e.pageSize},initLeftParams:function(){this.$set(this.searchQuery.vo,"orgid",this.getRouteInfo.vo.orgid),this.$set(this.searchQuery.vo,"ascriptionOrgid",this.getRouteInfo.vo.ascriptionOrgid),this.$set(this.searchQuery.vo,"feeTypeId",this.getRouteInfo.vo.feeTypeId),this.$set(this.searchQuery.vo,"status","NOSETTLEMENT,PARTSETTLEMENT")},getList:function(){var i=this,t=o()([],JSON.parse(this.$route.query.selectListBatchNos));this.$route.query.selectListBatchNos?this.isModify=!0:this.isModify=!1,this.leftTable=this.$options.data().leftTable,this.rightTable=this.$options.data().rightTable,this.tableReceiptInfo=this.$options.data().tableReceiptInfo,this.orgLeftTable=this.$options.data().orgLeftTable,this.initLeftParams(),Object(h.h)(this.searchQuery).then(function(e){i.leftTable=o()([],e.list),t.forEach(function(t){i.leftTable.forEach(function(e){t===e.batchNo&&i.rightTable.push(e)})}),i.rightTable.length<1?i.isGoReceipt=!0:i.isGoReceipt=!1,i.rightTable.forEach(function(e){e.amount=e.unpaidFee;var t=i.leftTable.indexOf(e);-1!==t&&i.leftTable.splice(t,1)}),i.orgLeftTable=o()([],i.leftTable)}).catch(function(e){i.loading=!1,i._handlerCatchMsg(e)})},changLoadData:function(e,t,i){this.rightTable[e][t]=Number(i);var a=Number(this.rightTable[e].unpaidFee),l=this.rightTable[e][t];l!==a?this.$set(this.textChangeDanger,e,!0):this.$set(this.textChangeDanger,e,!1),l<0||a<l?(this.isGoReceipt=!0,this.$message({type:"warning",message:"实结费用不小于0，不大于未结费用。"})):(this.isGoReceipt=!1,this.$set(this.rightTable,e,o()(this.rightTable[e],s()({},t,this.rightTable[e][t]))))},clickDetailsRight:function(e){this.$refs.multipleTableRight.toggleRowSelection(e)},clickDetailsLeft:function(e){this.$refs.multipleTableLeft.toggleRowSelection(e)},getSelectionRight:function(e){this.selectedRight=e},getSelectionLeft:function(e){this.selectedLeft=e},changeTableKey:function(){this.tablekey=Math.random()},doAction:function(e){switch(e){case"goLeft":this.goLeft();break;case"goRight":this.goRight()}},goLeft:function(){var i=this;0===this.selectedRight.length||(this.selectedRight.forEach(function(t,e){t.amount=t.unpaidFee,i.rightTable=Object(u.objectMerge2)([],i.rightTable).filter(function(e){return e.batchNo!==t.batchNo}),i.rightTable.push(t),i.leftTable=Object(u.objectMerge2)([],i.leftTable).filter(function(e){return e.batchNo!==t.batchNo}),i.orgLeftTable=Object(u.objectMerge2)([],i.orgLeftTable).filter(function(e){return e.batchNo!==t.batchNo})}),this.selectedRight=[]),this.rightTable.length<1?this.isGoReceipt=!0:this.isGoReceipt=!1},goRight:function(){var i=this;0===this.selectedLeft.length?this.$message({type:"warning",message:"请在右边表格选择数据"}):(this.selectedLeft.forEach(function(t,e){i.leftTable=Object(u.objectMerge2)([],i.leftTable).filter(function(e){return e.batchNo!==t.batchNo}),i.orgLeftTable=Object(u.objectMerge2)([],i.orgLeftTable).filter(function(e){return e.batchNo!==t.batchNo}),i.leftTable.push(t),i.orgLeftTable.push(t),i.rightTable=Object(u.objectMerge2)([],i.rightTable).filter(function(e){return e.batchNo!==t.batchNo})}),this.selectedLeft=[]),this.rightTable.length<1?this.isGoReceipt=!0:this.isGoReceipt=!1},selectCurrent:function(e,t){this.addItem(e,t)},dclickAddItem:function(e,t){this.selectedRight=[],this.selectedRight.push(e),this.doAction("goLeft")},dclickMinusItem:function(e,t){this.selectedLeft=[],this.selectedLeft.push(e),this.doAction("goRight")},addItem:function(e,t){this.selectedRight=[],this.selectedRight[t]=e,this.doAction("goLeft")},minusItem:function(e,t){this.selectedLeft=[],this.selectedLeft[t]=e,this.doAction("goRight")},addALLList:function(){this.selectedRight=o()([],this.leftTable),this.doAction("goLeft")},minusAllList:function(){this.selectedLeft=o()([],this.rightTable),this.doAction("goRight")},searchShip:function(e){console.log("searchShip",e)},closeDialog:function(){this.popVisibleDialog=!1},openDialog:function(){this.popVisibleDialog=!0},goReceipt:function(){var a=this,i=0;if(1<this.rightTable.length&&Object(u.objectMerge2)([],this.rightTable).forEach(function(t){Object(u.objectMerge2)([],a.rightTable).forEach(function(e){t.ascriptionOrgid!==e.ascriptionOrgid&&i++})}),0<i)return i=0,this.$message({type:"warning",message:"不能同时结算两个网点"}),!1;this.tableReceiptInfo=this.$options.data().tableReceiptInfo,this.isGoReceipt||(this.rightTable.forEach(function(e,t){var i={id:e.id,amount:e.amount,feeTypeId:e.feeTypeId};0<i.amount&&i.amount<=e.unpaidFee&&a.tableReceiptInfo.push(i),i={}}),console.log("tableReceiptInfo123",this.tableReceiptInfo),0<this.tableReceiptInfo.length?this.openDialog():this.$message({type:"warning",message:"暂无可结算项！实结费用不小于0，不大于未结费用。"}))},getSumRight:function(e){return Object(m.getSummaries)(e,["_index|2|单","fee","unpaidFee","paidFee","loadAmountall|","loadWeightall|","loadVolumeall|"])},getSumLeft:function(e){return Object(m.getSummaries)(e,["_index|2|单","fee","unpaidFee","paidFee","loadAmountall|","amount","loadWeightall|","loadVolumeall|"])}}}},"8Nas":function(e,t,i){"use strict";var a=i("0xDb");t.a={props:{info:{type:Array,default:[]}},data:function(){return{currentSearch:"",btnsize:"mini"}},computed:{placeholderText:{get:function(){return-1!==this.$route.query.currentPage.indexOf("batch")?"请输入批次号":"请输入运单号"},set:function(){}}},methods:{querySearch:function(e,t){(void 0===(this.currentSearch=e).shipSn||e.batchNo)&&(this.currentSearch||this.$emit("change",Object(a.objectMerge2)([],this.info)));var i=this.info;t(e?i.filter(this.createFilter(e)):i)},createFilter:function(t){return function(e){return e.shipSn?-1!==e.shipSn.toLowerCase().indexOf(t.toLowerCase()):e.batchNo?-1!==e.batchNo.toLowerCase().indexOf(t.toLowerCase()):void 0}},handleSelect:function(e){e.shipSn?this.currentSearch=e.shipSn:e.batchNo&&(this.currentSearch=e.batchNo);[].push(e),this.currentSearch="",this.$emit("change",e,this.info.indexOf(e))}}}},"9uTz":function(e,t,i){"use strict";var a=i("woOf"),l=i.n(a),o=i("Dd8w"),n=i.n(o),r=(i("E4LH"),i("NYxO")),s=i("JW1v"),c=i("t5DY"),h=i("0xDb"),d=i("Q0Ca"),u=i("pAQG"),p=i("UQm2"),f=i("xAap");t.a={components:{querySelect:u.a},data:function(){return{maxlength:30,amount:0,amountMessage:"",formModel:{detailDtoList2:[]},financialWalList:[],loading:!0,rules:{},btnsize:"mini",dialogTitle:"结 算 付 款 单",submitData:{},BANK_INFO:["financialWay","bankName","bankAccount","bankAccountName","chequeNumber","receivableNumber","wechatAccount","alipayAccount","agent"],paymentsType:1}},computed:n()({},Object(r.b)(["otherinfo"]),{isShow:{get:function(){return this.popVisible},set:function(){}},getRouteInfo:function(){return JSON.parse(this.$route.query.searchQuery)},settlementTypeId:function(){switch(this.$route.query.currentPage){case"batchShort":return 180;case"batchDeliver":return 181;case"batchInsurance":case"batchStationLoad":case"batchStationOther":case"batchArriveLoad":case"batchArrivalOther":case"batchArrivalAll":return 179}},dataName:function(){switch(this.$route.query.currentPage){case"batchShort":return"短驳费";case"batchDeliver":return"送货费";case"batchInsurance":return"整车保险费";case"batchStationLoad":return"发站装卸费";case"batchStationOther":return"发站其他费";case"batchArriveLoad":return"到站装卸费";case"batchArrivalOther":return"到站其他费";case"waybillKickback":return"回扣"}},currentPage:function(){var e=this.$route.query.currentPage;return e.substr(5,e.length)}}),props:{popVisible:{type:Boolean,default:!1},info:{type:Array,default:[]}},watch:{popVisible:function(){this.popVisible?(this.isShow=!0,this.getFeeInfo()):this.isShow=!1}},mounted:function(){var e=this;this.postTmsFfinancialwayList(),this.$nextTick(function(){e.init()})},methods:{print:function(){var e=l()({},this.formModel);this.$set(e,"amountMessage",this.amountMessage),Object(p.f)(e),this.submitForm("formModel")},postTmsFfinancialwayList:function(){var t=this,e={currentPage:1,pageSize:100,vo:{financialWay:"",financialWayTypeId:"",orgId:this.otherinfo.orgid,status:""}};Object(f.b)(e).then(function(e){t.financialWalList=[],e.list.forEach(function(e){"启用"===e.statusStr&&t.financialWalList.push(e)})}).catch(function(e){t.loading=!1,t._handlerCatchMsg(e)})},querySearch:function(e,t){var i=this.financialWalList;t(e?i.filter(this.createFilter(e)):i)},createFilter:function(t){return function(e){return 0===e.financialWay.toLowerCase().indexOf(t.toLowerCase())}},init:function(){this.loading=!1},getFeeInfo:function(){var t=this,e=this.otherinfo.orgid;return Object(s.a)(e,this.paymentsType).then(function(e){t.formModel=e.data,t.formModel.detailDtoList2=[],t.formModel.settlementTime=Object(h.parseTime)(new Date),t.formModel.settlementBy=t.otherinfo.name,t.initDetailDtoList(),t.formModel.szDtoList.forEach(function(e){e.agent=t.otherinfo.name}),t.formModel.szDtoList.length<1&&t.plusItem()}).catch(function(e){t.loading=!1,t._handlerCatchMsg(e)})},initDetailDtoList:function(){var l=this;this.formModel.amount=0,this.formModel.detailDtoList=Object(h.objectMerge2)([],this.info);var t={};for(var e in this.formModel.detailDtoList.map(function(e){t[e.dataName]?t[e.dataName].amount+=e.amount:t[e.dataName]=e}),t)this.formModel.detailDtoList2.push(t[e]);t={},this.formModel.detailDtoList2.forEach(function(e,t){e.dataName=l.dataName,l.formModel.amount+=e.amount;var i=e.amount.toFixed(2).toString().split("").reverse(),a=i.indexOf(".");-1!==a&&i.splice(a,1),e.fen=i[0],e.jiao=i[1],e.yuan=i[2],e.ten=i[3],e.hundren=i[4],e.thousand=i[5],e.tenThousand=i[6],e.oneHundrenThousand=i[7],e.million=i[8],e.tenMillion=i[9]}),this.amountMessage=Object(d.smalltoBIG)(this.formModel.amount),this.amount=this.formModel.amount.toFixed(2).toString().split("").reverse();var i=this.amount.indexOf(".");-1!==i&&this.amount.splice(i,1)},sender:function(e,t){this.$set(this.formModel.szDtoList,t,l()(this.formModel.szDtoList[t],e))},getSystemTime:function(){var t=this;Object(c.f)().then(function(e){t.formModel.settlementTime=new Date(e.trim())}).catch(function(e){t.loading=!1,t._handlerCatchMsg(e)})},closeMe:function(e){this.$emit("close"),"function"==typeof e&&e()},setData:function(){"到站装卸费"===this.dataName||"到站其他费"===this.dataName?this.$set(this.submitData,"ascriptionOrgid",this.getRouteInfo.vo.ascriptionOrgid):this.$set(this.submitData,"ascriptionOrgid",this.getRouteInfo.vo.orgid),this.$set(this.submitData,"settlementTypeId",this.settlementTypeId),this.$set(this.submitData,"settlementSn",this.formModel.settlementSn),this.$set(this.submitData,"settlementBy",this.formModel.settlementBy),this.$set(this.submitData,"settlementTime",this.formModel.settlementTime),this.$set(this.submitData,"remark",this.formModel.remark),this.$set(this.submitData,"tmsFinanceSettlementList",l()([],this.info)),this.$set(this.submitData,"tmsFinanceFinancialWayLogList",this.formModel.szDtoList)},submitForm:function(e){var i=this;this.$refs[e].validate(function(e){e&&(i.setData(),Object(s.g)(i.submitData).then(function(e){i.$message({type:"success",message:"保存成功"}),i.closeMe();var t=i.currentPage.substring(0,1).toLowerCase()+i.currentPage.substring(1);i.$router.push({path:"./accountsPayable/batch/"+t})}).catch(function(e){i._handlerCatchMsg(e)}))})},minusItem:function(e,t){var i=this.formModel.szDtoList.indexOf(e);-1!==i&&this.formModel.szDtoList.splice(i,1)},plusItem:function(){var e={agent:this.otherinfo.name,alipayAccount:"",bankAccount:"",bankAccountName:"",bankName:"",chequeNumber:"",financialWay:"",flowId:"",receivableNumber:"",rnum:"",wechatAccount:""};this.formModel.szDtoList.push(e)},getSum:function(e){var o=this,t=e.columns,n=e.data,r=[];return this.$nextTick(function(){}),t.forEach(function(t,e){if(0!==e)if(1!==e){for(var i=-2,a=12;2<a;a--)if(i++,e===a)return void(r[e]=o.amount[i]);var l=n.map(function(e){return Number(e[t.property])});l.every(function(e){return isNaN(e)})?r[e]="":(r[e]=l.reduce(function(e,t){var i=Number(t);return isNaN(i)?e:e+t},0),r[e]+="")}else r[e]=o.amountMessage;else r[e]="合计"}),r}}}},BbNw:function(e,t,i){"use strict";var a={render:function(){var i=this,e=i.$createElement,a=i._self._c||e;return a("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:i.loading,expression:"loading"}],staticClass:"receiptDialog",attrs:{title:i.dialogTitle,visible:i.isShow,"close-on-click-modal":!1,"before-close":i.closeMe},on:{"update:visible":function(e){i.isShow=e}}},[a("el-form",{ref:"formModel",attrs:{model:i.formModel,rules:i.rules}},[a("div",{staticClass:"receiptDialog_head"},[a("div",{staticClass:"receiptDialog_head_item"},[a("label",[i._v("单据号")]),i._v(" "),a("el-input",{attrs:{placeholder:"请输入",size:i.btnsize,disabled:""},model:{value:i.formModel.settlementSn,callback:function(e){i.$set(i.formModel,"settlementSn",e)},expression:"formModel.settlementSn"}})],1),i._v(" "),a("div",{staticClass:"receiptDialog_head_item"},[a("label",[i._v("发生时间")]),i._v(" "),a("el-date-picker",{attrs:{size:i.btnsize,"value-format":"yyyy-MM-dd HH:mm:ss",type:"date"},model:{value:i.formModel.settlementTime,callback:function(e){i.$set(i.formModel,"settlementTime",e)},expression:"formModel.settlementTime"}})],1),i._v(" "),a("div",{staticClass:"receiptDialog_head_item"},[a("label",[i._v("经办人")]),i._v(" "),a("querySelect",{attrs:{size:i.btnsize,valuekey:"name",show:"select",search:"name",label:"name"},model:{value:i.formModel.settlementBy,callback:function(e){i.$set(i.formModel,"settlementBy",e)},expression:"formModel.settlementBy"}})],1)]),i._v(" "),a("div",{staticClass:"receiptDialog_table"},[a("el-table",{staticStyle:{width:"100%",height:"100%"},attrs:{data:i.formModel.detailDtoList2,height:"100%",stripe:"","show-summary":"","summary-method":i.getSum}},[a("el-table-column",{attrs:{prop:"date",label:"序号",type:"index",width:"70"}}),i._v(" "),a("el-table-column",{attrs:{prop:"dataName",label:"费用项"}}),i._v(" "),a("el-table-column",[a("el-table-column",{attrs:{prop:"tenMillion",label:"千",width:"40"}}),i._v(" "),a("el-table-column",{attrs:{prop:"million",label:"百",width:"40"}}),i._v(" "),a("el-table-column",{attrs:{prop:"oneHundrenThousand",label:"十",width:"40"}}),i._v(" "),a("el-table-column",{attrs:{prop:"tenThousand",label:"万",width:"40"}}),i._v(" "),a("el-table-column",{attrs:{prop:"thousand",label:"千",width:"40"}}),i._v(" "),a("el-table-column",{attrs:{prop:"hundren",label:"百",width:"40"}}),i._v(" "),a("el-table-column",{attrs:{prop:"ten",label:"十",width:"40"}}),i._v(" "),a("el-table-column",{attrs:{prop:"yuan",label:"元",width:"40"}}),i._v(" "),a("el-table-column",{attrs:{prop:"jiao",label:"角",width:"40"}}),i._v(" "),a("el-table-column",{attrs:{prop:"fen",label:"分",width:"40"}})],1)],1)],1),i._v(" "),a("div",{staticClass:"receiptDialog_todo"},[a("el-button",{staticClass:"tableBtnAdd",attrs:{size:"mini"},on:{click:i.plusItem}}),i._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:i.formModel.szDtoList,border:"",height:"100%",stripe:""}},[a("el-table-column",{attrs:{fixed:"",width:"50"},scopedSlots:i._u([{key:"default",fn:function(t){return[a("el-button",{staticClass:"tableBtnMinus",attrs:{size:"mini"},on:{click:function(e){i.minusItem(t.row,t.$index)}}})]}}])}),i._v(" "),a("el-table-column",{attrs:{prop:"financialWay",label:"收支方式",width:"80"},scopedSlots:i._u([{key:"default",fn:function(t){return[a("el-autocomplete",{attrs:{"popper-class":"querySelectItem",size:i.btnsize,"fetch-suggestions":i.querySearch,placeholder:"支付方式"},on:{select:function(e){return i.sender(e,t.$index)}},scopedSlots:i._u([{key:"default",fn:function(e){var t=e.item;return i._l(i.BANK_INFO,function(e){return a("span",[i._v(i._s(t[e]))])})}}]),model:{value:t.row.financialWay,callback:function(e){i.$set(t.row,"financialWay",e)},expression:"props.row.financialWay"}})]}}])}),i._v(" "),a("el-table-column",{attrs:{prop:"bankName",label:"银行名称"},scopedSlots:i._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{size:i.btnsize,maxlength:i.maxlength},model:{value:t.row.bankName,callback:function(e){i.$set(t.row,"bankName",e)},expression:"props.row.bankName"}})]}}])}),i._v(" "),a("el-table-column",{attrs:{prop:"bankAccount",label:"银行卡号",width:"200"},scopedSlots:i._u([{key:"default",fn:function(t){return[a("el-input",{directives:[{name:"numberOnly",rawName:"v-numberOnly"}],attrs:{size:i.btnsize,maxlength:i.maxlength},model:{value:t.row.bankAccount,callback:function(e){i.$set(t.row,"bankAccount",e)},expression:"props.row.bankAccount"}})]}}])}),i._v(" "),a("el-table-column",{attrs:{prop:"bankAccountName",label:"开户人",width:"80"},scopedSlots:i._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{size:i.btnsize,maxlength:i.maxlength},model:{value:t.row.bankAccountName,callback:function(e){i.$set(t.row,"bankAccountName",e)},expression:"props.row.bankAccountName"}})]}}])}),i._v(" "),a("el-table-column",{attrs:{prop:"chequeNumber",label:"支票号码"},scopedSlots:i._u([{key:"default",fn:function(t){return[a("el-input",{directives:[{name:"numberOnly",rawName:"v-numberOnly"}],attrs:{size:i.btnsize,maxlength:i.maxlength},model:{value:t.row.chequeNumber,callback:function(e){i.$set(t.row,"chequeNumber",e)},expression:"props.row.chequeNumber"}})]}}])}),i._v(" "),a("el-table-column",{attrs:{prop:"receivableNumber",label:"汇款号码"},scopedSlots:i._u([{key:"default",fn:function(t){return[a("el-input",{directives:[{name:"numberOnly",rawName:"v-numberOnly"}],attrs:{size:i.btnsize,maxlength:i.maxlength},model:{value:t.row.receivableNumber,callback:function(e){i.$set(t.row,"receivableNumber",e)},expression:"props.row.receivableNumber"}})]}}])}),i._v(" "),a("el-table-column",{attrs:{prop:"wechatAccount",label:"微信号"},scopedSlots:i._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{size:i.btnsize,maxlength:i.maxlength},model:{value:t.row.wechatAccount,callback:function(e){i.$set(t.row,"wechatAccount",e)},expression:"props.row.wechatAccount"}})]}}])}),i._v(" "),a("el-table-column",{attrs:{prop:"alipayAccount",label:"支付宝号"},scopedSlots:i._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{size:i.btnsize,maxlength:i.maxlength},model:{value:t.row.alipayAccount,callback:function(e){i.$set(t.row,"alipayAccount",e)},expression:"props.row.alipayAccount"}})]}}])}),i._v(" "),a("el-table-column",{attrs:{prop:"agent",label:"经办人",width:"80"},scopedSlots:i._u([{key:"default",fn:function(t){return[a("querySelect",{attrs:{size:i.btnsize,valuekey:"name",show:"select",search:"name",label:"name",maxlength:i.maxlength},model:{value:t.row.agent,callback:function(e){i.$set(t.row,"agent",e)},expression:"props.row.agent"}})]}}])})],1)],1),i._v(" "),a("div",{staticClass:"receiptDialog_remark"},[a("label",[i._v("备注")]),i._v(" "),a("el-input",{attrs:{placeholder:"最多可输入300个字符",size:i.btnsize,maxlength:300},model:{value:i.formModel.remark,callback:function(e){i.$set(i.formModel,"remark",e)},expression:"formModel.remark"}})],1)]),i._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary",size:i.btnsize,icon:"el-icon-document"},on:{click:function(e){i.submitForm("formModel")}}},[i._v("保存")]),i._v(" "),a("el-button",{attrs:{type:"primary",size:i.btnsize,icon:"el-icon-printer"},on:{click:i.print}},[i._v("保存并打印")]),i._v(" "),a("el-button",{attrs:{type:"danger",size:i.btnsize,icon:"el-icon-circle-close-outline"},on:{click:i.closeMe}},[i._v("取 消")])],1)],1)},staticRenderFns:[]};t.a=a},CnA4:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("+SR2"),l=i("LMHA"),o=i("VU/8")(a.a,l.a,null,null,null);t.default=o.exports},DT23:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("8Nas"),l=i("6f/H"),o=i("VU/8")(a.a,l.a,null,null,null);t.default=o.exports},DTdt:function(e,t,i){"use strict";var a=i("bOdI"),n=i.n(a),l=i("woOf"),r=i.n(l),o=i("Dd8w"),s=i.n(o),c=i("NYxO"),h=i("JW1v"),d=i("IcMT"),u=i("0xDb"),p=i("pAQG"),f=i("i5L8"),b=i("1onU"),g=i("DT23"),m=i("0xDb");t.a={components:{transferTable:d.a,querySelect:p.a,Receipt:f.default,Pager:b.a,currentSearch:g.default},data:function(){var i=this;return{textChangeDanger:[],tablekey:"",truckMessage:"",formModel:{},orgLeftTable:[],loading:!1,popVisibleDialog:!1,btnsize:"mini",tableReceiptInfo:[],selectedRight:[],selectedLeft:[],isGoReceipt:!0,leftTable:[],rightTable:[],orgData:{left:[],right:[]},isFresh:!1,feeType:13,searchQuery:{currentPage:1,pageSize:100,vo:{}},tableColumnLeft:[{label:"运单号",prop:"shipSn",width:"120",fixed:!0},{label:"开单网点",prop:"shipFromOrgName",width:"120",fixed:!1},{label:"结算状态",prop:"statusName",width:"120",fixed:!1},{label:"签收状态",prop:"signStatusName",width:"100",fixed:!1},{label:"发货人",prop:"senderCustomerName",width:"120",fixed:!1},{label:"收货人",prop:"receiverCustomerName",width:"120",fixed:!1},{label:"其他费用",prop:"fee",width:"120",fixed:!1},{label:"已结其他费用",prop:"closeFee",width:"120",fixed:!1,slot:function(e){var t=e.row;return i._setTextColor(t.fee,t.closeFee,t.unpaidFee,t.closeFee)}},{label:"未结其他费用",prop:"unpaidFee",width:"120",fixed:!1,slot:function(e){var t=e.row;return i._setTextColor(t.fee,t.closeFee,t.unpaidFee,t.unpaidFee)}},{label:"发货方",prop:"senderUnit",width:"120",fixed:!1},{label:"收货方",prop:"receiverUnit",width:"120",fixed:!1},{label:"货号",prop:"shipGoodsSn",width:"120",fixed:!1},{label:"货品名",prop:"cargoName",width:"120",fixed:!1},{label:"开单时间",prop:"createTime",width:"120",fixed:!1,slot:function(e){return""+Object(u.parseTime)(e.row.createTime,"{y}-{m}-{d} {h}:{i}:{s}")}},{label:"出发城市",prop:"shipFromCityName",width:"120",fixed:!1},{label:"到达城市",prop:"shipToCityName",width:"120",fixed:!1},{label:"件数",prop:"cargoAmount",width:"120",fixed:!1},{label:"重量",prop:"cargoWeight",width:"120",fixed:!1},{label:"体积",prop:"cargoVolume",width:"120",fixed:!1},{label:"运单备注",prop:"shipRemarks",width:"120",fixed:!1}],tableColumnRight:[{label:"运单号",prop:"shipSn",width:"120",fixed:!0},{label:"开单网点",prop:"shipFromOrgName",width:"120",fixed:!1},{label:"结算状态",prop:"statusName",width:"120",fixed:!1},{label:"签收状态",prop:"signStatusName",width:"100",fixed:!1},{label:"发货人",prop:"senderCustomerName",width:"120",fixed:!1},{label:"收货人",prop:"receiverCustomerName",width:"120",fixed:!1},{label:"其他费用",prop:"fee",width:"120",fixed:!1},{label:"已结其他费用",prop:"closeFee",width:"120",fixed:!1,slot:function(e){var t=e.row;return i._setTextColor(t.fee,t.closeFee,t.unpaidFee,t.closeFee)}},{label:"未结其他费用",prop:"unpaidFee",width:"120",fixed:!1,slot:function(e){var t=e.row;return i._setTextColor(t.fee,t.closeFee,t.unpaidFee,t.unpaidFee)}},{label:"实结其他费用",prop:"inputOtherFee",width:"120",fixed:!1,expand:!0,slot:function(e){return e.row.inputOtherFee}},{label:"发货方",prop:"senderUnit",width:"120",fixed:!1},{label:"收货方",prop:"receiverUnit",width:"120",fixed:!1},{label:"货号",prop:"shipGoodsSn",width:"120",fixed:!1},{label:"货品名",prop:"cargoName",width:"120",fixed:!1},{label:"开单时间",prop:"createTime",width:"180",fixed:!1,slot:function(e){return""+Object(u.parseTime)(e.row.createTime,"{y}-{m}-{d} {h}:{i}:{s}")}},{label:"出发城市",prop:"shipFromCityName",width:"120",fixed:!1},{label:"到达城市",prop:"shipToCityName",width:"120",fixed:!1},{label:"件数",prop:"cargoAmount",width:"120",fixed:!1},{label:"重量",prop:"cargoWeight",width:"120",fixed:!1},{label:"体积",prop:"cargoVolume",width:"120",fixed:!1},{label:"运单备注",prop:"shipRemarks",width:"120",fixed:!1}]}},computed:s()({},Object(c.b)(["otherinfo"]),{getRouteInfo:function(){return JSON.parse(this.$route.query.searchQuery)},totalLeft:function(){return this.leftTable.length},totalRight:function(){return this.rightTable.length}}),mounted:function(){this.getList()},methods:{handlePageChangeLeft:function(e){this.searchQuery.currentPage=e.pageNum,this.searchQuery.pageSize=e.pageSize},initLeftParams:function(){this.searchQuery=r()({},this.getRouteInfo),this.$set(this.searchQuery.vo,"feeType",this.feeType),this.$set(this.searchQuery.vo,"status","NOSETTLEMENT,PARTSETTLEMENT")},getList:function(){var i=this,e=JSON.parse(this.$route.query.selectListShipSns),t=Object(u.objectMerge2)([],e);this.$route.query.selectListShipSns?this.isModify=!0:this.isModify=!1,this.leftTable=this.$options.data().leftTable,this.rightTable=this.$options.data().rightTable,this.tableReceiptInfo=this.$options.data().tableReceiptInfo,this.orgLeftTable=this.$options.data().orgLeftTable,this.initLeftParams(),Object(h.e)(this.searchQuery).then(function(e){i.leftTable=r()([],e.list),t.forEach(function(t){i.leftTable.forEach(function(e){t===e.shipSn&&i.rightTable.push(e)})}),i.rightTable.length<1?i.isGoReceipt=!0:i.isGoReceipt=!1,i.rightTable.forEach(function(e){var t=i.leftTable.indexOf(e);-1!==t&&i.leftTable.splice(t,1),e.inputOtherFee=e.unpaidFee}),i.orgLeftTable=Object(u.objectMerge2)([],i.leftTable)}).catch(function(e){i.loading=!1,i._handlerCatchMsg(e)})},changLoadData:function(e,t,i){this.rightTable[e][t]=Number(i);var a="unpaidFee",l=Number(this.rightTable[e][a]),o=this.rightTable[e][t];o!==l?this.$set(this.textChangeDanger,e,!0):this.$set(this.textChangeDanger,e,!1),o<0||l<o?this.$message({type:"warning",message:"实结费用不小于0，不大于未结费用。"}):this.$set(this.rightTable,e,r()(this.rightTable[e],n()({},t,this.rightTable[e][t]))),console.log(this.rightTable[e][t],o,a,this.rightTable[e][a],this.rightTable[e])},clickDetailsRight:function(e){this.$refs.multipleTableRight.toggleRowSelection(e)},clickDetailsLeft:function(e){this.$refs.multipleTableLeft.toggleRowSelection(e)},getSelectionRight:function(e){this.selectedRight=e},getSelectionLeft:function(e){this.selectedLeft=e},changeTableKey:function(){this.tablekey=Math.random()},doAction:function(e){switch(e){case"goLeft":this.goLeft();break;case"goRight":this.goRight()}},goLeft:function(){var i=this;0===this.selectedRight.length||(this.selectedRight.forEach(function(t,e){t.inputOtherFee=t.unpaidFee,i.rightTable=Object(u.objectMerge2)([],i.rightTable).filter(function(e){return e.shipSn!==t.shipSn}),i.rightTable.push(t),i.leftTable=Object(u.objectMerge2)([],i.leftTable).filter(function(e){return e.shipSn!==t.shipSn}),i.orgLeftTable=Object(u.objectMerge2)([],i.orgLeftTable).filter(function(e){return e.shipSn!==t.shipSn})}),this.selectedRight=[]),this.rightTable.length<1?this.isGoReceipt=!0:this.isGoReceipt=!1},goRight:function(){var i=this;0===this.selectedLeft.length?this.$message({type:"warning",message:"请在右边表格选择数据"}):(this.selectedLeft.forEach(function(t,e){i.leftTable=Object(u.objectMerge2)([],i.leftTable).filter(function(e){return e.shipSn!==t.shipSn}),i.orgLeftTable=Object(u.objectMerge2)([],i.orgLeftTable).filter(function(e){return e.shipSn!==t.shipSn}),i.leftTable.push(t),i.orgLeftTable.push(t),i.rightTable=Object(u.objectMerge2)([],i.rightTable).filter(function(e){return e.shipSn!==t.shipSn})}),this.selectedLeft=[]),this.rightTable.length<1?this.isGoReceipt=!0:this.isGoReceipt=!1},dclickAddItem:function(e,t){this.selectedRight=[],this.selectedRight.push(e),this.doAction("goLeft")},dclickMinusItem:function(e,t){this.selectedLeft=[],this.selectedLeft.push(e),this.doAction("goRight")},selectCurrent:function(e,t){this.addItem(e,t)},addItem:function(e,t){this.selectedRight=[],this.selectedRight[t]=e,this.doAction("goLeft")},minusItem:function(e,t){this.selectedLeft=[],this.selectedLeft[t]=e,this.doAction("goRight")},addALLList:function(){this.selectedRight=r()([],this.leftTable),this.doAction("goLeft")},minusAllList:function(){this.selectedLeft=r()([],this.rightTable),this.doAction("goRight")},searchShip:function(e){console.log("searchShip",e)},closeDialog:function(){this.popVisibleDialog=!1},openDialog:function(){this.popVisibleDialog=!0},goReceipt:function(){var a=this;this.tableReceiptInfo=[],this.isGoReceipt||(this.rightTable.forEach(function(e,t){var i={shipId:e.shipId,amount:e.inputOtherFee,inputOtherFee:e.inputOtherFee,shipSn:e.shipSn,dataName:"其他费用支出"};0<i.amount&&i.amount<=e.unpaidFee&&a.tableReceiptInfo.push(i),i={}}),0<this.tableReceiptInfo.length?this.openDialog():this.$message({type:"warning",message:"暂无可结算项！实结费用不小于0，不大于未结费用。"}))},getSumRight:function(e){return Object(m.getSummaries)(e,["_index|2|单","fee","unpaidFee","closeFee","cargoAmount|","cargoWeight|","cargoVolume|"])},getSumLeft:function(e){return Object(m.getSummaries)(e,["_index|2|单","fee","unpaidFee","closeFee","inputOtherFee","cargoAmount|","cargoWeight|","cargoVolume|"])}}}},Ebb7:function(e,t,i){"use strict";var a=i("woOf"),n=i.n(a),l=i("Dd8w"),o=i.n(l),r=i("bOdI"),s=i.n(r),c=i("NYxO"),h=i("JW1v"),d=i("IcMT"),u=i("0xDb"),p=i("pAQG"),f=i("u/8D"),b=i("1onU"),g=i("DT23"),m=i("0xDb");t.a={components:{transferTable:d.a,querySelect:p.a,Receipt:f.default,Pager:b.a,currentSearch:g.default},data:function(){var e,i=this;return e={textChangeDanger:[],tablekey:"",loadTruck:"",truckMessage:"",formModel:{}},s()(e,"loadTruck","loadTruckOne"),s()(e,"loading",!1),s()(e,"popVisibleDialog",!1),s()(e,"btnsize","mini"),s()(e,"tableReceiptInfo",[]),s()(e,"selectedRight",[]),s()(e,"orgLeftTable",[]),s()(e,"selectedLeft",[]),s()(e,"isGoReceipt",!0),s()(e,"leftTable",[]),s()(e,"rightTable",[]),s()(e,"orgData",{left:[],right:[]}),s()(e,"isFresh",!1),s()(e,"feeType",8),s()(e,"searchQuery",{currentPage:1,pageSize:100,vo:{}}),s()(e,"tableColumnLeft",[{label:"发车批次",prop:"batchNo",width:"120",fixed:!0},{label:"发车网点",prop:"orgName",width:"120",fixed:!1},{label:"达到网点",prop:"arriveOrgName",width:"120",fixed:!1},{label:"结算状态",prop:"statusName",width:"120",fixed:!1},{label:"发车时间",prop:"departureTime",width:"180",fixed:!1,slot:function(e){return""+Object(u.parseTime)(e.row.departureTime,"{y}-{m}-{d} {h}:{i}:{s}")}},{label:"到达时间",prop:"receivingTime",width:"180",fixed:!1,slot:function(e){return""+Object(u.parseTime)(e.row.receivingTime,"{y}-{m}-{d} {h}:{i}:{s}")}},{label:"发站装卸费",prop:"fee",width:"120",fixed:!1},{label:"已结发站装卸费",prop:"paidFee",width:"130",fixed:!1,slot:function(e){var t=e.row;return i._setTextColor(t.fee,t.paidFee,t.unpaidFee,t.paidFee)}},{label:"未结发站装卸费",prop:"unpaidFee",width:"120",fixed:!1,slot:function(e){var t=e.row;return i._setTextColor(t.fee,t.paidFee,t.unpaidFee,t.unpaidFee)}},{label:"司机电话",prop:"dirverMobile",width:"120",fixed:!1},{label:"车牌号",prop:"truckIdNumber",width:"120",fixed:!1},{label:"司机姓名",prop:"dirverName",width:"120",fixed:!1},{label:"配载件数",prop:"loadAmountall",width:"120",fixed:!1},{label:"配载重量",prop:"loadWeightall",width:"120",fixed:!1},{label:"配载体积",prop:"loadVolumeall",width:"120",fixed:!1},{label:"备注",prop:"remark",width:"120",fixed:!1}]),s()(e,"tableColumnRight",[{label:"发车批次",prop:"batchNo",width:"120",fixed:!0},{label:"结算状态",prop:"statusName",width:"120",fixed:!1},{label:"发车网点",prop:"orgName",width:"120",fixed:!1},{label:"达到网点",prop:"arriveOrgName",width:"120",fixed:!1},{label:"发车时间",prop:"departureTime",width:"180",fixed:!1,slot:function(e){return""+Object(u.parseTime)(e.row.departureTime,"{y}-{m}-{d} {h}:{i}:{s}")}},{label:"发站装卸费",prop:"fee",width:"120",fixed:!1},{label:"已结发站装卸费",prop:"paidFee",width:"130",fixed:!1,slot:function(e){var t=e.row;return i._setTextColor(t.fee,t.paidFee,t.unpaidFee,t.paidFee)}},{label:"未结发站装卸费",prop:"unpaidFee",width:"120",fixed:!1,slot:function(e){var t=e.row;return i._setTextColor(t.fee,t.paidFee,t.unpaidFee,t.unpaidFee)}},{label:"实结发站装卸费",prop:"amount",width:"120",fixed:!1,expand:!0,slot:function(e){return e.row.amount}},{label:"司机电话",prop:"dirverMobile",width:"120",fixed:!1},{label:"车牌号",prop:"truckIdNumber",width:"120",fixed:!1},{label:"司机姓名",prop:"dirverName",width:"120",fixed:!1},{label:"配载件数",prop:"loadAmountall",width:"120",fixed:!1},{label:"配载重量",prop:"loadWeightall",width:"120",fixed:!1},{label:"配载体积",prop:"loadVolumeall",width:"120",fixed:!1},{label:"备注",prop:"remark",width:"120",fixed:!1}]),e},computed:o()({},Object(c.b)(["otherinfo"]),{getRouteInfo:function(){return JSON.parse(this.$route.query.searchQuery)},totalLeft:function(){return this.leftTable.length},totalRight:function(){return this.rightTable.length}}),mounted:function(){this.getList()},methods:{handlePageChangeLeft:function(e){this.searchQuery.currentPage=e.pageNum,this.searchQuery.pageSize=e.pageSize},initLeftParams:function(){this.$set(this.searchQuery.vo,"orgid",this.getRouteInfo.vo.orgid),this.$set(this.searchQuery.vo,"ascriptionOrgid",this.getRouteInfo.vo.ascriptionOrgid),this.$set(this.searchQuery.vo,"feeTypeId",this.getRouteInfo.vo.feeTypeId),this.$set(this.searchQuery.vo,"status","NOSETTLEMENT,PARTSETTLEMENT")},getList:function(){var i=this,t=Object(u.objectMerge2)([],JSON.parse(this.$route.query.selectListBatchNos));this.$route.query.selectListBatchNos?this.isModify=!0:this.isModify=!1,this.leftTable=this.$options.data().leftTable,this.rightTable=this.$options.data().rightTable,this.tableReceiptInfo=this.$options.data().tableReceiptInfo,this.orgLeftTable=this.$options.data().orgLeftTable,this.initLeftParams(),Object(h.h)(this.searchQuery).then(function(e){i.leftTable=n()([],e.list),t.forEach(function(t){i.leftTable.forEach(function(e){t===e.batchNo&&i.rightTable.push(e)})}),i.rightTable.length<1?i.isGoReceipt=!0:i.isGoReceipt=!1,i.rightTable.forEach(function(e){var t=i.leftTable.indexOf(e);-1!==t&&i.leftTable.splice(t,1),e.amount=e.unpaidFee}),i.orgLeftTable=Object(u.objectMerge2)([],i.leftTable)}).catch(function(e){i.loading=!1,i._handlerCatchMsg(e)})},changLoadData:function(e,t,i){this.rightTable[e][t]=Number(i);var a="unpaidFee",l=Number(this.rightTable[e][a]),o=this.rightTable[e][t];o!==l?this.$set(this.textChangeDanger,e,!0):this.$set(this.textChangeDanger,e,!1),o<0||l<o?(this.isGoReceipt=!0,this.$message({type:"warning",message:"实结费用不小于0，不大于未结费用。"})):(this.isGoReceipt=!1,this.$set(this.rightTable,e,n()(this.rightTable[e],s()({},t,this.rightTable[e][t])))),console.log(this.rightTable[e][t],o,a,this.rightTable[e][a],this.rightTable[e])},clickDetailsRight:function(e){this.$refs.multipleTableRight.toggleRowSelection(e)},clickDetailsLeft:function(e){this.$refs.multipleTableLeft.toggleRowSelection(e)},getSelectionRight:function(e){this.selectedRight=e},getSelectionLeft:function(e){this.selectedLeft=e},changeTableKey:function(){this.tablekey=Math.random()},doAction:function(e){switch(e){case"goLeft":this.goLeft();break;case"goRight":this.goRight()}},goLeft:function(){var i=this;0===this.selectedRight.length||(this.selectedRight.forEach(function(t,e){t.amount=t.unpaidFee,i.rightTable=Object(u.objectMerge2)([],i.rightTable).filter(function(e){return e.batchNo!==t.batchNo}),i.rightTable.push(t),i.leftTable=Object(u.objectMerge2)([],i.leftTable).filter(function(e){return e.batchNo!==t.batchNo}),i.orgLeftTable=Object(u.objectMerge2)([],i.orgLeftTable).filter(function(e){return e.batchNo!==t.batchNo})}),this.selectedRight=[]),this.rightTable.length<1?this.isGoReceipt=!0:this.isGoReceipt=!1},goRight:function(){var i=this;0===this.selectedLeft.length?this.$message({type:"warning",message:"请在右边表格选择数据"}):(this.selectedLeft.forEach(function(t,e){i.leftTable=Object(u.objectMerge2)([],i.leftTable).filter(function(e){return e.batchNo!==t.batchNo}),i.orgLeftTable=Object(u.objectMerge2)([],i.orgLeftTable).filter(function(e){return e.batchNo!==t.batchNo}),i.leftTable.push(t),i.orgLeftTable.push(t),i.rightTable=Object(u.objectMerge2)([],i.rightTable).filter(function(e){return e.batchNo!==t.batchNo})}),this.selectedLeft=[]),this.rightTable.length<1?this.isGoReceipt=!0:this.isGoReceipt=!1},selectCurrent:function(e,t){this.addItem(e,t)},dclickAddItem:function(e,t){this.selectedRight=[],this.selectedRight.push(e),this.doAction("goLeft")},dclickMinusItem:function(e,t){this.selectedLeft=[],this.selectedLeft.push(e),this.doAction("goRight")},addItem:function(e,t){this.selectedRight=[],this.selectedRight[t]=e,this.doAction("goLeft")},minusItem:function(e,t){this.selectedLeft=[],this.selectedLeft[t]=e,this.doAction("goRight")},addALLList:function(){this.selectedRight=n()([],this.leftTable),this.doAction("goLeft")},minusAllList:function(){this.selectedLeft=n()([],this.rightTable),this.doAction("goRight")},searchShip:function(e){console.log("searchShip",e)},closeDialog:function(){this.popVisibleDialog=!1},openDialog:function(){this.popVisibleDialog=!0},goReceipt:function(){var a=this,i=0;if(1<this.rightTable.length&&Object(u.objectMerge2)([],this.rightTable).forEach(function(t){Object(u.objectMerge2)([],a.rightTable).forEach(function(e){t.ascriptionOrgid!==e.ascriptionOrgid&&i++})}),0<i)return i=0,this.$message({type:"warning",message:"不能同时结算两个网点"}),!1;this.tableReceiptInfo=[],this.isGoReceipt||(this.rightTable.forEach(function(e,t){var i={id:e.id,amount:e.amount,feeTypeId:e.feeTypeId};0<i.amount&&i.amount<=e.unpaidFee&&a.tableReceiptInfo.push(i),i={}}),0<this.tableReceiptInfo.length?this.openDialog():this.$message({type:"warning",message:"暂无可结算项！实结费用不小于0，不大于未结费用。"}))},getSumRight:function(e){return Object(m.getSummaries)(e,["_index|2|单","fee","unpaidFee","paidFee","loadAmountall|","loadWeightall|","loadVolumeall|"])},getSumLeft:function(e){return Object(m.getSummaries)(e,["_index|2|单","fee","unpaidFee","paidFee","loadAmountall|","amount","loadWeightall|","loadVolumeall|"])}}}},EhYD:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("7NNL"),l=i("jiXf"),o=i("VU/8")(a.a,l.a,null,null,null);t.default=o.exports},ExFJ:function(e,t,i){"use strict";var a=i("bOdI"),n=i.n(a),l=i("woOf"),r=i.n(l),o=i("Dd8w"),s=i.n(o),c=i("NYxO"),h=i("JW1v"),d=i("IcMT"),u=i("0xDb"),p=i("pAQG"),f=i("i5L8"),b=i("1onU"),g=i("DT23"),m=i("0xDb");t.a={components:{transferTable:d.a,querySelect:p.a,Receipt:f.default,Pager:b.a,currentSearch:g.default},data:function(){var i=this;return{textChangeDanger:[],tablekey:"",truckMessage:"",formModel:{},loading:!1,popVisibleDialog:!1,btnsize:"mini",tableReceiptInfo:[],selectedRight:[],selectedLeft:[],isGoReceipt:!0,orgLeftTable:[],leftTable:[],rightTable:[],orgData:{left:[],right:[]},isFresh:!1,feeType:10,searchQuery:{currentPage:1,pageSize:100,vo:{}},tableColumnLeft:[{label:"运单号",prop:"shipSn",width:"120",fixed:!0},{label:"开单网点",prop:"shipFromOrgName",width:"120",fixed:!1},{label:"结算状态",prop:"statusName",width:"120",fixed:!1},{label:"签收状态",prop:"signStatusName",width:"100",fixed:!1},{label:"发货人",prop:"senderCustomerName",width:"120",fixed:!1},{label:"收货人",prop:"receiverCustomerName",width:"120",fixed:!1},{label:"中转费",prop:"fee",width:"120",fixed:!1},{label:"已结中转费",prop:"closeFee",width:"120",fixed:!1,slot:function(e){var t=e.row;return i._setTextColor(t.fee,t.closeFee,t.unpaidFee,t.closeFee)}},{label:"未结中转费",prop:"unpaidFee",width:"120",fixed:!1,slot:function(e){var t=e.row;return i._setTextColor(t.fee,t.closeFee,t.unpaidFee,t.unpaidFee)}},{label:"发货方",prop:"senderUnit",width:"120",fixed:!1},{label:"收货方",prop:"receiverUnit",width:"120",fixed:!1},{label:"货号",prop:"shipGoodsSn",width:"120",fixed:!1},{label:"货品名",prop:"cargoName",width:"120",fixed:!1},{label:"开单时间",prop:"createTime",width:"120",fixed:!1,slot:function(e){return""+Object(u.parseTime)(e.row.createTime,"{y}-{m}-{d} {h}:{i}:{s}")}},{label:"出发城市",prop:"shipFromCityName",width:"120",fixed:!1},{label:"到达城市",prop:"shipToCityName",width:"120",fixed:!1},{label:"件数",prop:"cargoAmount",width:"120",fixed:!1},{label:"重量",prop:"cargoWeight",width:"120",fixed:!1},{label:"体积",prop:"cargoVolume",width:"120",fixed:!1},{label:"运单备注",prop:"shipRemarks",width:"120",fixed:!1}],tableColumnRight:[{label:"运单号",prop:"shipSn",width:"120",fixed:!0},{label:"开单网点",prop:"shipFromOrgName",width:"120",fixed:!1},{label:"结算状态",prop:"statusName",width:"120",fixed:!1},{label:"发货人",prop:"senderCustomerName",width:"120",fixed:!1},{label:"收货人",prop:"receiverCustomerName",width:"120",fixed:!1},{label:"中转费",prop:"fee",width:"120",fixed:!1},{label:"已结中转费",prop:"closeFee",width:"120",fixed:!1,slot:function(e){var t=e.row;return i._setTextColor(t.fee,t.closeFee,t.unpaidFee,t.closeFee)}},{label:"未结中转费",prop:"unpaidFee",width:"120",fixed:!1,slot:function(e){var t=e.row;return i._setTextColor(t.fee,t.closeFee,t.unpaidFee,t.unpaidFee)}},{label:"实结中转费",prop:"inputTotalCost",width:"120",fixed:!1,expand:!0,slot:function(e){return e.row.inputTotalCost}},{label:"发货方",prop:"senderUnit",width:"120",fixed:!1},{label:"收货方",prop:"receiverUnit",width:"120",fixed:!1},{label:"货号",prop:"shipGoodsSn",width:"120",fixed:!1},{label:"货品名",prop:"cargoName",width:"120",fixed:!1},{label:"开单时间",prop:"createTime",width:"180",fixed:!1,slot:function(e){return""+Object(u.parseTime)(e.row.createTime,"{y}-{m}-{d} {h}:{i}:{s}")}},{label:"出发城市",prop:"shipFromCityName",width:"120",fixed:!1},{label:"到达城市",prop:"shipToCityName",width:"120",fixed:!1},{label:"件数",prop:"cargoAmount",width:"120",fixed:!1},{label:"重量",prop:"cargoWeight",width:"120",fixed:!1},{label:"体积",prop:"cargoVolume",width:"120",fixed:!1},{label:"运单备注",prop:"shipRemarks",width:"120",fixed:!1}]}},computed:s()({},Object(c.b)(["otherinfo"]),{getRouteInfo:function(){return JSON.parse(this.$route.query.searchQuery)},totalLeft:function(){return this.leftTable.length},totalRight:function(){return this.rightTable.length}}),mounted:function(){this.getList()},methods:{handlePageChangeLeft:function(e){this.searchQuery.currentPage=e.pageNum,this.searchQuery.pageSize=e.pageSize},initLeftParams:function(){this.searchQuery=r()({},this.getRouteInfo),this.$set(this.searchQuery.vo,"feeType",this.feeType),this.$set(this.searchQuery.vo,"status","NOSETTLEMENT,PARTSETTLEMENT")},getList:function(){var i=this,t=Object(u.objectMerge2)([],JSON.parse(this.$route.query.selectListShipSns));this.$route.query.selectListShipSns?this.isModify=!0:this.isModify=!1,this.leftTable=this.$options.data().leftTable,this.rightTable=this.$options.data().rightTable,this.tableReceiptInfo=this.$options.data().tableReceiptInfo,this.orgLeftTable=this.$options.data().orgLeftTable,this.initLeftParams(),Object(h.f)(this.searchQuery).then(function(e){i.leftTable=r()([],e.list),t.forEach(function(t){i.leftTable.forEach(function(e){t===e.shipSn&&i.rightTable.push(e)})}),i.rightTable.length<1?i.isGoReceipt=!0:i.isGoReceipt=!1,i.rightTable.forEach(function(e){var t=i.leftTable.indexOf(e);-1!==t&&i.leftTable.splice(t,1),e.inputTotalCost=e.unpaidFee}),i.orgLeftTable=Object(u.objectMerge2)([],i.leftTable)}).catch(function(e){i.loading=!1,i._handlerCatchMsg(e)})},changLoadData:function(e,t,i){this.rightTable[e][t]=Number(i);var a="unpaidFee",l=Number(this.rightTable[e][a]),o=this.rightTable[e][t];o!==l?this.$set(this.textChangeDanger,e,!0):this.$set(this.textChangeDanger,e,!1),o<0||l<o?this.$message({type:"warning",message:"实结费用不小于0，不大于未结费用。"}):this.$set(this.rightTable,e,r()(this.rightTable[e],n()({},t,this.rightTable[e][t]))),console.log(e,o,l,a,this.rightTable[e][a],this.rightTable[e])},clickDetailsRight:function(e){this.$refs.multipleTableRight.toggleRowSelection(e)},clickDetailsLeft:function(e){this.$refs.multipleTableLeft.toggleRowSelection(e)},getSelectionRight:function(e){this.selectedRight=e},getSelectionLeft:function(e){this.selectedLeft=e},changeTableKey:function(){this.tablekey=Math.random()},doAction:function(e){switch(e){case"goLeft":this.goLeft();break;case"goRight":this.goRight()}},goLeft:function(){var i=this;0===this.selectedRight.length||(this.selectedRight.forEach(function(t,e){t.inputTotalCost=t.unpaidFee,i.rightTable=Object(u.objectMerge2)([],i.rightTable).filter(function(e){return e.shipSn!==t.shipSn}),i.rightTable.push(t),i.leftTable=Object(u.objectMerge2)([],i.leftTable).filter(function(e){return e.shipSn!==t.shipSn}),i.orgLeftTable=Object(u.objectMerge2)([],i.orgLeftTable).filter(function(e){return e.shipSn!==t.shipSn})}),this.selectedRight=[]),this.rightTable.length<1?this.isGoReceipt=!0:this.isGoReceipt=!1},goRight:function(){var i=this;0===this.selectedLeft.length?this.$message({type:"warning",message:"请在右边表格选择数据"}):(this.selectedLeft.forEach(function(t,e){i.leftTable=Object(u.objectMerge2)([],i.leftTable).filter(function(e){return e.shipSn!==t.shipSn}),i.orgLeftTable=Object(u.objectMerge2)([],i.orgLeftTable).filter(function(e){return e.shipSn!==t.shipSn}),i.leftTable.push(t),i.orgLeftTable.push(t),i.rightTable=Object(u.objectMerge2)([],i.rightTable).filter(function(e){return e.shipSn!==t.shipSn})}),this.selectedLeft=[]),this.rightTable.length<1?this.isGoReceipt=!0:this.isGoReceipt=!1},selectCurrent:function(e,t){this.addItem(e,t)},dclickAddItem:function(e,t){this.selectedRight=[],this.selectedRight.push(e),this.doAction("goLeft")},dclickMinusItem:function(e,t){this.selectedLeft=[],this.selectedLeft.push(e),this.doAction("goRight")},addItem:function(e,t){this.selectedRight=[],this.selectedRight[t]=e,this.doAction("goLeft")},minusItem:function(e,t){this.selectedLeft=[],this.selectedLeft[t]=e,this.doAction("goRight")},addALLList:function(){this.selectedRight=r()([],this.leftTable),this.doAction("goLeft")},minusAllList:function(){this.selectedLeft=r()([],this.rightTable),this.doAction("goRight")},searchShip:function(e){console.log("searchShip",e)},closeDialog:function(){this.popVisibleDialog=!1},openDialog:function(){this.popVisibleDialog=!0},goReceipt:function(){var a=this;this.tableReceiptInfo=[],this.isGoReceipt||(this.rightTable.forEach(function(e,t){var i={shipId:e.shipId,amount:e.inputTotalCost,inputTotalCost:e.inputTotalCost,shipSn:e.shipSn,dataName:"中转费"};0<i.amount&&i.amount<=e.unpaidFee&&a.tableReceiptInfo.push(i),i={}}),0<this.tableReceiptInfo.length?this.openDialog():this.$message({type:"warning",message:"暂无可结算项！实结费用不小于0，不大于未结费用。"})),console.log("tableReceiptInfo",this.tableReceiptInfo)},getSumRight:function(e){return Object(m.getSummaries)(e,["_index|2|单","fee","unpaidFee","closeFee","cargoAmount|","cargoWeight|","cargoVolume|"])},getSumLeft:function(e){return Object(m.getSummaries)(e,["_index|2|单","fee","unpaidFee","closeFee","inputTotalCost","cargoAmount|","cargoWeight|","cargoVolume|"])}}}},FiTa:function(e,t){},GNo3:function(e,t,i){"use strict";var a={render:function(){var a=this,e=a.$createElement,l=a._self._c||e;return l("div",{staticClass:"accountsLoad_table"},[l("div",{staticClass:"transferTable_search clearfix"},[l("currentSearch",{attrs:{info:a.orgLeftTable},on:{change:a.selectCurrent}})],1),a._v(" "),l("transferTable",{staticStyle:{height:"calc(100% - 40px)",padding:"10px"}},[l("div",{attrs:{slot:"btnsBox"},slot:"btnsBox"},[l("el-button",{attrs:{type:a.isGoReceipt?"info":"success",size:"mini",icon:"el-icon-sort",disabled:a.isGoReceipt},on:{click:a.goReceipt}},[a._v("到站装卸费结算")])],1),a._v(" "),l("div",{staticClass:"tableHeadItemBtn",staticStyle:{height:"100%"},attrs:{slot:"tableLeft"},slot:"tableLeft"},[l("el-button",{staticClass:"tableAllBtn",attrs:{size:"mini"},on:{click:a.addALLList}}),a._v(" "),l("el-table",{key:a.tablekey,ref:"multipleTableRight",attrs:{data:a.leftTable,border:"","tooltip-effect":"dark",triped:"",height:"100%","summary-method":a.getSumRight,"default-sort":{prop:"id",order:"ascending"},"show-overflow-tooltip":!0,"show-summary":!0},on:{"row-click":a.clickDetailsRight,"selection-change":a.getSelectionRight,"row-dblclick":a.dclickAddItem}},[l("el-table-column",{attrs:{fixed:"",width:"50",type:"index",label:"序号"},scopedSlots:a._u([{key:"default",fn:function(e){return[a._v("\n            "+a._s(e.$index+1)+"\n          ")]}}])}),a._v(" "),l("el-table-column",{attrs:{fixed:"",width:"50"},scopedSlots:a._u([{key:"default",fn:function(t){return[l("el-button",{staticClass:"tableItemBtn",attrs:{size:"mini"},on:{click:function(e){a.addItem(t.row,t.$index)}}})]}}])}),a._v(" "),a._l(a.tableColumnLeft,function(i){return[i.slot?l("el-table-column",{key:i.id,attrs:{fixed:i.fixed,sortable:"",label:i.label,width:i.width},scopedSlots:a._u([{key:"default",fn:function(t){return[i.click?l("span",{staticClass:"clickitem",domProps:{innerHTML:a._s(i.slot(t))},on:{click:function(e){e.stopPropagation(),i.click(t)}}}):l("span",{domProps:{innerHTML:a._s(i.slot(t))}})]}}])}):l("el-table-column",{key:i.id,attrs:{fixed:i.fixed,sortable:"",label:i.label,prop:i.prop,width:i.width}})]})],2)],1),a._v(" "),l("div",{staticClass:"tableHeadItemBtn",attrs:{slot:"tableRight"},slot:"tableRight"},[l("el-button",{staticClass:"tableAllBtnMinus",attrs:{size:"mini"},on:{click:a.minusAllList}}),a._v(" "),l("el-table",{key:a.tablekey,ref:"multipleTableLeft",staticStyle:{height:"100%"},attrs:{data:a.rightTable,border:"","tooltip-effect":"dark",triped:"",height:"100%","summary-method":a.getSumLeft,"default-sort":{prop:"id",order:"ascending"},"show-summary":!0},on:{"row-click":a.clickDetailsLeft,"selection-change":a.getSelectionLeft,"row-dblclick":a.dclickMinusItem}},[l("el-table-column",{attrs:{fixed:"",width:"50",type:"index",label:"序号"},scopedSlots:a._u([{key:"default",fn:function(e){return[a._v("\n            "+a._s(e.$index+1)+"\n          ")]}}])}),a._v(" "),l("el-table-column",{attrs:{fixed:"",width:"50"},scopedSlots:a._u([{key:"default",fn:function(t){return[l("el-button",{staticClass:"tableItemBtnMinus",attrs:{size:"mini"},on:{click:function(e){a.minusItem(t.row,t.$index)}}})]}}])}),a._v(" "),a._l(a.tableColumnRight,function(i){return[i.slot?l("el-table-column",{key:i.id,attrs:{fixed:i.fixed,sortable:"",label:i.label,width:i.width,prop:i.prop},scopedSlots:a._u([{key:"default",fn:function(t){return[i.expand?l("div",[l("el-input",{class:{textChangeDanger:a.textChangeDanger[t.$index]},attrs:{type:"number",size:a.btnsize},on:{change:function(e){return a.changLoadData(t.$index,i.prop,e)}},nativeOn:{dblclick:function(e){e.stopPropagation(),e.preventDefault()},click:function(e){e.stopPropagation(),e.preventDefault()}},model:{value:i.slot(t),callback:function(e){a.$set(i,"slot(scope)",a._n(e))},expression:"column.slot(scope)"}})],1):l("div",[i.click?l("span",{staticClass:"clickitem",domProps:{innerHTML:a._s(i.slot(t))},on:{click:function(e){e.stopPropagation(),i.click(t)}}}):l("span",{domProps:{innerHTML:a._s(i.slot(t))}})])]}}])}):l("el-table-column",{key:i.id,attrs:{fixed:i.fixed,sortable:"",label:i.label,prop:i.prop,width:i.width}})]})],2)],1)]),a._v(" "),l("Receipt",{attrs:{popVisible:a.popVisibleDialog,info:a.tableReceiptInfo},on:{close:a.closeDialog}})],1)},staticRenderFns:[]};t.a=a},H0TN:function(e,t,i){"use strict";var a=i("woOf"),n=i.n(a),l=i("Dd8w"),o=i.n(l),r=i("bOdI"),s=i.n(r),c=i("NYxO"),h=i("JW1v"),d=i("IcMT"),u=i("0xDb"),p=i("pAQG"),f=i("u/8D"),b=i("1onU"),g=i("DT23"),m=i("0xDb");t.a={components:{transferTable:d.a,querySelect:p.a,Receipt:f.default,Pager:b.a,currentSearch:g.default},data:function(){var e,i=this;return e={textChangeDanger:[],tablekey:"",loadTruck:"",truckMessage:"",formModel:{}},s()(e,"loadTruck","loadTruckOne"),s()(e,"loading",!1),s()(e,"popVisibleDialog",!1),s()(e,"btnsize","mini"),s()(e,"tableReceiptInfo",[]),s()(e,"selectedRight",[]),s()(e,"selectedLeft",[]),s()(e,"isGoReceipt",!0),s()(e,"orgLeftTable",[]),s()(e,"leftTable",[]),s()(e,"rightTable",[]),s()(e,"orgData",{left:[],right:[]}),s()(e,"isFresh",!1),s()(e,"feeType",8),s()(e,"searchQuery",{currentPage:1,pageSize:100,vo:{}}),s()(e,"tableColumnLeft",[{label:"发车批次",prop:"batchNo",width:"120",fixed:!0},{label:"发车网点",prop:"orgName",width:"120",fixed:!1},{label:"达到网点",prop:"arriveOrgName",width:"120",fixed:!1},{label:"结算状态",prop:"statusName",width:"120",fixed:!1},{label:"发车时间",prop:"departureTime",width:"180",fixed:!1,slot:function(e){return""+Object(u.parseTime)(e.row.departureTime,"{y}-{m}-{d} {h}:{i}:{s}")}},{label:"到达时间",prop:"receivingTime",width:"180",fixed:!1,slot:function(e){return""+Object(u.parseTime)(e.row.receivingTime,"{y}-{m}-{d} {h}:{i}:{s}")}},{label:"到站装卸费",prop:"fee",width:"120",fixed:!1},{label:"已结到站装卸费",prop:"paidFee",width:"120",fixed:!1,slot:function(e){var t=e.row;return i._setTextColor(t.fee,t.paidFee,t.unpaidFee,t.paidFee)}},{label:"未结到站装卸费",prop:"unpaidFee",width:"120",fixed:!1,slot:function(e){var t=e.row;return i._setTextColor(t.fee,t.paidFee,t.unpaidFee,t.unpaidFee)}},{label:"司机电话",prop:"dirverMobile",width:"120",fixed:!1},{label:"车牌号",prop:"truckIdNumber",width:"120",fixed:!1},{label:"司机姓名",prop:"dirverName",width:"120",fixed:!1},{label:"配载件数",prop:"loadAmountall",width:"120",fixed:!1},{label:"配载重量",prop:"loadWeightall",width:"120",fixed:!1},{label:"配载体积",prop:"loadVolumeall",width:"120",fixed:!1},{label:"备注",prop:"remark",width:"120",fixed:!1}]),s()(e,"tableColumnRight",[{label:"发车批次",prop:"batchNo",width:"120",fixed:!0},{label:"结算状态",prop:"statusName",width:"120",fixed:!1},{label:"发车网点",prop:"orgName",width:"120",fixed:!1},{label:"达到网点",prop:"arriveOrgName",width:"120",fixed:!1},{label:"发车时间",prop:"departureTime",width:"180",fixed:!1,slot:function(e){return""+Object(u.parseTime)(e.row.departureTime,"{y}-{m}-{d} {h}:{i}:{s}")}},{label:"到站装卸费",prop:"fee",width:"120",fixed:!1},{label:"已结到站装卸费",prop:"paidFee",width:"120",fixed:!1,slot:function(e){var t=e.row;return i._setTextColor(t.fee,t.paidFee,t.unpaidFee,t.paidFee)}},{label:"未结到站装卸费",prop:"unpaidFee",width:"120",fixed:!1,slot:function(e){var t=e.row;return i._setTextColor(t.fee,t.paidFee,t.unpaidFee,t.unpaidFee)}},{label:"实结到站装卸费",prop:"amount",width:"120",fixed:!1,expand:!0,slot:function(e){return e.row.amount}},{label:"司机电话",prop:"dirverMobile",width:"120",fixed:!1},{label:"车牌号",prop:"truckIdNumber",width:"120",fixed:!1},{label:"司机姓名",prop:"dirverName",width:"120",fixed:!1},{label:"配载件数",prop:"loadAmountall",width:"120",fixed:!1},{label:"配载重量",prop:"loadWeightall",width:"120",fixed:!1},{label:"配载体积",prop:"loadVolumeall",width:"120",fixed:!1},{label:"备注",prop:"remark",width:"120",fixed:!1}]),e},computed:o()({},Object(c.b)(["otherinfo"]),{getRouteInfo:function(){return JSON.parse(this.$route.query.searchQuery)},totalLeft:function(){return this.leftTable.length},totalRight:function(){return this.rightTable.length}}),mounted:function(){this.getList()},methods:{handlePageChangeLeft:function(e){this.searchQuery.currentPage=e.pageNum,this.searchQuery.pageSize=e.pageSize},initLeftParams:function(){this.$set(this.searchQuery.vo,"orgid",this.getRouteInfo.vo.orgid),this.$set(this.searchQuery.vo,"ascriptionOrgid",this.getRouteInfo.vo.ascriptionOrgid),this.$set(this.searchQuery.vo,"feeTypeId",this.getRouteInfo.vo.feeTypeId),this.$set(this.searchQuery.vo,"status","NOSETTLEMENT,PARTSETTLEMENT")},getList:function(){var i=this,e=this.$route.query.selectListBatchNos,t=Object(u.objectMerge2)([],e);this.$route.query.selectListBatchNos?this.isModify=!0:this.isModify=!1,this.leftTable=this.$options.data().leftTable,this.rightTable=this.$options.data().rightTable,this.tableReceiptInfo=this.$options.data().tableReceiptInfo,this.orgLeftTable=this.$options.data().orgLeftTable,this.initLeftParams(),Object(h.h)(this.searchQuery).then(function(e){i.leftTable=n()([],e.list),t.forEach(function(t){i.leftTable.forEach(function(e){t===e.batchNo&&i.rightTable.push(e)})}),i.rightTable.length<1?i.isGoReceipt=!0:i.isGoReceipt=!1,i.rightTable.forEach(function(e){var t=i.leftTable.indexOf(e);-1!==t&&i.leftTable.splice(t,1),e.amount=e.unpaidFee}),i.orgLeftTable=Object(u.objectMerge2)([],i.leftTable)}).catch(function(e){i.loading=!1,i._handlerCatchMsg(e)})},changLoadData:function(e,t,i){this.rightTable[e][t]=Number(i);var a="unpaidFee",l=Number(this.rightTable[e][a]),o=this.rightTable[e][t];o!==l?this.$set(this.textChangeDanger,e,!0):this.$set(this.textChangeDanger,e,!1),o<0||l<o?(this.isGoReceipt=!0,this.$message({type:"warning",message:"实结费用不小于0，不大于未结费用。"})):(this.isGoReceipt=!1,this.$set(this.rightTable,e,n()(this.rightTable[e],s()({},t,this.rightTable[e][t])))),console.log(this.rightTable[e][t],o,a,this.rightTable[e][a],this.rightTable[e])},clickDetailsRight:function(e){this.$refs.multipleTableRight.toggleRowSelection(e)},clickDetailsLeft:function(e){this.$refs.multipleTableLeft.toggleRowSelection(e)},getSelectionRight:function(e){this.selectedRight=e},getSelectionLeft:function(e){this.selectedLeft=e},changeTableKey:function(){this.tablekey=Math.random()},doAction:function(e){switch(e){case"goLeft":this.goLeft();break;case"goRight":this.goRight()}},goLeft:function(){var i=this;0===this.selectedRight.length||(this.selectedRight.forEach(function(t,e){t.amount=t.unpaidFee,i.rightTable=Object(u.objectMerge2)([],i.rightTable).filter(function(e){return e.batchNo!==t.batchNo}),i.rightTable.push(t),i.leftTable=Object(u.objectMerge2)([],i.leftTable).filter(function(e){return e.batchNo!==t.batchNo}),i.orgLeftTable=Object(u.objectMerge2)([],i.orgLeftTable).filter(function(e){return e.batchNo!==t.batchNo})}),this.selectedRight=[]),this.rightTable.length<1?this.isGoReceipt=!0:this.isGoReceipt=!1},goRight:function(){var i=this;0===this.selectedLeft.length?this.$message({type:"warning",message:"请在右边表格选择数据"}):(this.selectedLeft.forEach(function(t,e){i.leftTable=Object(u.objectMerge2)([],i.leftTable).filter(function(e){return e.batchNo!==t.batchNo}),i.orgLeftTable=Object(u.objectMerge2)([],i.orgLeftTable).filter(function(e){return e.batchNo!==t.batchNo}),i.leftTable.push(t),i.orgLeftTable.push(t),i.rightTable=Object(u.objectMerge2)([],i.rightTable).filter(function(e){return e.batchNo!==t.batchNo})}),this.selectedLeft=[]),this.rightTable.length<1?this.isGoReceipt=!0:this.isGoReceipt=!1},selectCurrent:function(e,t){this.addItem(e,t)},dclickAddItem:function(e,t){this.selectedRight=[],this.selectedRight.push(e),this.doAction("goLeft")},dclickMinusItem:function(e,t){this.selectedLeft=[],this.selectedLeft.push(e),this.doAction("goRight")},addItem:function(e,t){this.selectedRight=[],this.selectedRight[t]=e,this.doAction("goLeft")},minusItem:function(e,t){this.selectedLeft=[],this.selectedLeft[t]=e,this.doAction("goRight")},addALLList:function(){this.selectedRight=n()([],this.leftTable),this.doAction("goLeft")},minusAllList:function(){this.selectedLeft=n()([],this.rightTable),this.doAction("goRight")},searchShip:function(e){console.log("searchShip",e)},closeDialog:function(){this.popVisibleDialog=!1},openDialog:function(){this.popVisibleDialog=!0},goReceipt:function(){var a=this;this.tableReceiptInfo=[],this.isGoReceipt||(this.rightTable.forEach(function(e,t){var i={id:e.id,amount:e.amount,feeTypeId:e.feeTypeId};0<i.amount&&i.amount<=e.unpaidFee&&a.tableReceiptInfo.push(i),i={}}),0<this.tableReceiptInfo.length?this.openDialog():this.$message({type:"warning",message:"暂无可结算项！实结费用不小于0，不大于未结费用。"}))},getSumRight:function(e){return Object(m.getSummaries)(e,["_index|2|单","fee","unpaidFee","paidFee","loadAmountall|","loadWeightall|","loadVolumeall|"])},getSumLeft:function(e){return Object(m.getSummaries)(e,["_index|2|单","fee","unpaidFee","paidFee","loadAmountall|","amount","loadWeightall|","loadVolumeall|"])}}}},I55L:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("Ebb7"),l=i("3aBa"),o=i("VU/8")(a.a,l.a,null,null,null);t.default=o.exports},IcMT:function(e,t,i){"use strict";var a=i("PI8x"),l=i("QVoP");var o=function(e){i("jCPK")},n=i("VU/8")(a.a,l.a,o,null,null);t.a=n.exports},JDn5:function(e,t,i){"use strict";var a={render:function(){var a=this,e=a.$createElement,l=a._self._c||e;return l("div",{staticClass:"accountsLoad_table"},[l("div",{staticClass:"transferTable_search clearfix"},[l("currentSearch",{attrs:{info:a.orgLeftTable},on:{change:a.selectCurrent}})],1),a._v(" "),l("transferTable",{staticStyle:{height:"calc(100% - 40px)",padding:"10px"}},[l("div",{attrs:{slot:"btnsBox"},slot:"btnsBox"},[l("el-button",{attrs:{type:a.isGoReceipt?"info":"success",size:"mini",icon:"el-icon-sort",disabled:a.isGoReceipt},on:{click:a.goReceipt}},[a._v("中转费结算")])],1),a._v(" "),l("div",{staticClass:"tableHeadItemBtn",staticStyle:{height:"100%"},attrs:{slot:"tableLeft"},slot:"tableLeft"},[l("el-button",{staticClass:"tableAllBtn",attrs:{size:"mini"},on:{click:a.addALLList}}),a._v(" "),l("el-table",{key:a.tablekey,ref:"multipleTableRight",attrs:{data:a.leftTable,border:"","tooltip-effect":"dark",triped:"",height:"100%","summary-method":a.getSumRight,"default-sort":{prop:"id",order:"ascending"},"show-overflow-tooltip":!0,"show-summary":!0},on:{"row-click":a.clickDetailsRight,"selection-change":a.getSelectionRight,"row-dblclick":a.dclickAddItem}},[l("el-table-column",{attrs:{fixed:"",width:"50",type:"index",label:"序号"},scopedSlots:a._u([{key:"default",fn:function(e){return[a._v("\n            "+a._s(e.$index+1)+"\n          ")]}}])}),a._v(" "),l("el-table-column",{attrs:{fixed:"",width:"50"},scopedSlots:a._u([{key:"default",fn:function(t){return[l("el-button",{staticClass:"tableItemBtn",attrs:{size:"mini"},on:{click:function(e){a.addItem(t.row,t.$index)}}})]}}])}),a._v(" "),a._l(a.tableColumnLeft,function(i){return[i.slot?l("el-table-column",{key:i.id,attrs:{fixed:i.fixed,sortable:"",label:i.label,width:i.width,prop:i.prop},scopedSlots:a._u([{key:"default",fn:function(t){return[i.expand?l("div",[l("el-input",{attrs:{type:"number",size:a.btnsize},on:{change:function(e){a.changLoadData(t.$index)}},model:{value:i.slot(t),callback:function(e){a.$set(i,"slot(scope)",a._n(e))},expression:"column.slot(scope)"}})],1):l("div",[i.click?l("span",{staticClass:"clickitem",domProps:{innerHTML:a._s(i.slot(t))},on:{click:function(e){e.stopPropagation(),i.click(t)}}}):l("span",{domProps:{innerHTML:a._s(i.slot(t))}})])]}}])}):l("el-table-column",{key:i.id,attrs:{fixed:i.fixed,sortable:"",label:i.label,prop:i.prop,width:i.width}})]})],2)],1),a._v(" "),l("div",{staticClass:"tableHeadItemBtn",attrs:{slot:"tableRight"},slot:"tableRight"},[l("el-button",{staticClass:"tableAllBtnMinus",attrs:{size:"mini"},on:{click:a.minusAllList}}),a._v(" "),l("el-table",{key:a.tablekey,ref:"multipleTableLeft",staticStyle:{height:"100%"},attrs:{data:a.rightTable,border:"","tooltip-effect":"dark",triped:"",height:"100%","summary-method":a.getSumLeft,"default-sort":{prop:"id",order:"ascending"},"show-summary":!0},on:{"row-click":a.clickDetailsLeft,"selection-change":a.getSelectionLeft,"row-dblclick":a.dclickMinusItem}},[l("el-table-column",{attrs:{fixed:"",width:"50",type:"index",label:"序号"},scopedSlots:a._u([{key:"default",fn:function(e){return[a._v("\n            "+a._s(e.$index+1)+"\n          ")]}}])}),a._v(" "),l("el-table-column",{attrs:{fixed:"",width:"50"},scopedSlots:a._u([{key:"default",fn:function(t){return[l("el-button",{staticClass:"tableItemBtnMinus",attrs:{size:"mini"},on:{click:function(e){a.minusItem(t.row,t.$index)}}})]}}])}),a._v(" "),a._l(a.tableColumnRight,function(i){return[i.slot?l("el-table-column",{key:i.id,attrs:{fixed:i.fixed,sortable:"",label:i.label,width:i.width,prop:i.prop},scopedSlots:a._u([{key:"default",fn:function(t){return[i.expand?l("div",[l("el-input",{class:{textChangeDanger:a.textChangeDanger[t.$index]},attrs:{type:"number",size:a.btnsize},on:{change:function(e){return a.changLoadData(t.$index,i.prop,e)}},nativeOn:{dblclick:function(e){e.stopPropagation(),e.preventDefault()},click:function(e){e.stopPropagation(),e.preventDefault()}},model:{value:i.slot(t),callback:function(e){a.$set(i,"slot(scope)",a._n(e))},expression:"column.slot(scope)"}})],1):l("div",[i.click?l("span",{staticClass:"clickitem",domProps:{innerHTML:a._s(i.slot(t))},on:{click:function(e){e.stopPropagation(),i.click(t)}}}):l("span",{domProps:{innerHTML:a._s(i.slot(t))}})])]}}])}):l("el-table-column",{key:i.id,attrs:{fixed:i.fixed,sortable:"",label:i.label,prop:i.prop,width:i.width}})]})],2)],1)]),a._v(" "),l("Receipt",{attrs:{popVisible:a.popVisibleDialog,info:a.tableReceiptInfo},on:{close:a.closeDialog}})],1)},staticRenderFns:[]};t.a=a},JW1v:function(e,t,i){"use strict";t.e=function(e){return a.b.post("/api-finance/finance/tmsfinancefeepayable/v1/findListByFeeType/",e).then(function(e){return e.data||{list:[],totalCount:0}}).catch(function(e){Object(l.handleErrorMsg)(e)})},t.f=function(e){return a.b.post("/api-finance/finance/tmsfinancefeepayable/v1/findTransferList/",e).then(function(e){return e.data||{list:[],totalCount:0}}).catch(function(e){Object(l.handleErrorMsg)(e)})},t.c=function(e){return a.b.post("/api-finance/finance/tmsfinancefeepayable/v1/findAbnormalList/",e).then(function(e){return e.data||{list:[],totalCount:0}}).catch(function(e){Object(l.handleErrorMsg)(e)})},t.d=function(e){return a.b.post("/api-finance/finance/tmsfinancefeepayable/v1/findChangeList/",e).then(function(e){return e.data||{list:[],totalCount:0}}).catch(function(e){Object(l.handleErrorMsg)(e)})},t.b=function(e,t){return a.b.post("/api-finance/finance/tmsfinancefeepayable/v1/create/"+e,t).then(function(e){return e.data}).catch(function(e){Object(l.handleErrorMsg)(e)})},t.i=function(e){return a.b.post("/api-finance/finance/tmsfinancefeepayable/v1/payListBySummary/",e).then(function(e){return e.data||{list:[],totalCount:0}}).catch(function(e){Object(l.handleErrorMsg)(e)})},t.h=function(e){return a.b.post("/api-finance/finance/tmsfinancefeepayable/v1/payListByOne/",e).then(function(e){return e.data||{list:[],totalCount:0}}).catch(function(e){Object(l.handleErrorMsg)(e)})},t.a=function(e,t){return a.b.get("/api-finance/finance/tmsfinancecapitalflow/v1/getFeeInfo/?orgId="+e+"&paymentsType="+t)},t.g=function(e){return a.b.post("/api-finance/finance/tmsfinancefeepayable/v1/loadSettlement/",e).then(function(e){return e.data}).catch(function(e){Object(l.handleErrorMsg)(e)})};var a=i("Vo7i"),l=i("0xDb")},JX6T:function(e,t,i){"use strict";var a=i("woOf"),n=i.n(a),l=i("Dd8w"),o=i.n(l),r=i("bOdI"),s=i.n(r),c=i("NYxO"),h=i("JW1v"),d=i("IcMT"),u=i("0xDb"),p=i("pAQG"),f=i("u/8D"),b=i("1onU"),g=i("DT23"),m=i("0xDb");t.a={components:{transferTable:d.a,querySelect:p.a,Receipt:f.default,Pager:b.a,currentSearch:g.default},data:function(){var e,i=this;return e={textChangeDanger:[],tablekey:"",loadTruck:"",truckMessage:"",formModel:{}},s()(e,"loadTruck","loadTruckOne"),s()(e,"loading",!1),s()(e,"popVisibleDialog",!1),s()(e,"btnsize","mini"),s()(e,"tableReceiptInfo",[]),s()(e,"selectedRight",[]),s()(e,"selectedLeft",[]),s()(e,"orgLeftTable",[]),s()(e,"isGoReceipt",!0),s()(e,"leftTable",[]),s()(e,"rightTable",[]),s()(e,"orgData",{left:[],right:[]}),s()(e,"isFresh",!1),s()(e,"feeType",8),s()(e,"searchQuery",{currentPage:1,pageSize:100,vo:{}}),s()(e,"tableColumnLeft",[{label:"送货批次",prop:"batchNo",width:"120",fixed:!0},{label:"发车网点",prop:"orgName",width:"120",fixed:!1},{label:"结算状态",prop:"statusName",width:"120",fixed:!1},{label:"送货时间",prop:"loadTime",width:"180",fixed:!1,slot:function(e){return""+Object(u.parseTime)(e.row.loadTime,"{y}-{m}-{d} {h}:{i}:{s}")}},{label:"送货费",prop:"fee",width:"120",fixed:!1},{label:"已结送货费",prop:"paidFee",width:"120",fixed:!1,slot:function(e){var t=e.row;return i._setTextColor(t.fee,t.paidFee,t.unpaidFee,t.paidFee)}},{label:"未结送货费",prop:"unpaidFee",width:"120",fixed:!1,slot:function(e){var t=e.row;return i._setTextColor(t.fee,t.paidFee,t.unpaidFee,t.unpaidFee)}},{label:"司机电话",prop:"dirverMobile",width:"120",fixed:!1},{label:"车牌号",prop:"truckIdNumber",width:"120",fixed:!1},{label:"司机姓名",prop:"dirverName",width:"120",fixed:!1},{label:"目的网点",prop:"arriveOrgName",width:"120",fixed:!1},{label:"送货件数",prop:"loadAmountall",width:"120",fixed:!1},{label:"送货重量",prop:"loadWeightall",width:"120",fixed:!1},{label:"送货体积",prop:"loadVolumeall",width:"120",fixed:!1},{label:"备注",prop:"remark",width:"120",fixed:!1}]),s()(e,"tableColumnRight",[{label:"送货批次",prop:"batchNo",width:"120",fixed:!0},{label:"结算状态",prop:"statusName",width:"120",fixed:!1},{label:"发车网点",prop:"orgName",width:"120",fixed:!1},{label:"送货时间",prop:"loadTime",width:"180",fixed:!1,slot:function(e){return""+Object(u.parseTime)(e.row.loadTime,"{y}-{m}-{d} {h}:{i}:{s}")}},{label:"送货费",prop:"fee",width:"120",fixed:!1},{label:"已结送货费",prop:"paidFee",width:"120",fixed:!1,slot:function(e){var t=e.row;return i._setTextColor(t.fee,t.paidFee,t.unpaidFee,t.paidFee)}},{label:"未结送货费",prop:"unpaidFee",width:"120",fixed:!1,slot:function(e){var t=e.row;return i._setTextColor(t.fee,t.paidFee,t.unpaidFee,t.unpaidFee)}},{label:"实结送货费",prop:"amount",width:"120",fixed:!1,expand:!0,slot:function(e){return e.row.amount}},{label:"司机电话",prop:"dirverMobile",width:"120",fixed:!1},{label:"车牌号",prop:"truckIdNumber",width:"120",fixed:!1},{label:"司机姓名",prop:"dirverName",width:"120",fixed:!1},{label:"送货件数",prop:"loadAmountall",width:"120",fixed:!1},{label:"送货重量",prop:"loadWeightall",width:"120",fixed:!1},{label:"送货体积",prop:"loadVolumeall",width:"120",fixed:!1},{label:"备注",prop:"remark",width:"120",fixed:!1}]),e},computed:o()({},Object(c.b)(["otherinfo"]),{getRouteInfo:function(){return JSON.parse(this.$route.query.searchQuery)},totalLeft:function(){return this.leftTable.length},totalRight:function(){return this.rightTable.length}}),mounted:function(){this.getList()},methods:{handlePageChangeLeft:function(e){this.searchQuery.currentPage=e.pageNum,this.searchQuery.pageSize=e.pageSize},initLeftParams:function(){this.$set(this.searchQuery.vo,"orgid",this.getRouteInfo.vo.orgid),this.$set(this.searchQuery.vo,"ascriptionOrgid",this.getRouteInfo.vo.ascriptionOrgid),this.$set(this.searchQuery.vo,"feeTypeId",this.getRouteInfo.vo.feeTypeId),this.$set(this.searchQuery.vo,"status","NOSETTLEMENT,PARTSETTLEMENT")},getList:function(){var i=this,t=n()([],JSON.parse(this.$route.query.selectListBatchNos));this.$route.query.selectListBatchNos?this.isModify=!0:this.isModify=!1,this.leftTable=this.$options.data().leftTable,this.rightTable=this.$options.data().rightTable,this.tableReceiptInfo=this.$options.data().tableReceiptInfo,this.orgLeftTable=this.$options.data().orgLeftTable,this.initLeftParams(),Object(h.h)(this.searchQuery).then(function(e){i.leftTable=n()([],e.list),t.forEach(function(t){i.leftTable.forEach(function(e){t===e.batchNo&&i.rightTable.push(e)})}),i.rightTable.length<1?i.isGoReceipt=!0:i.isGoReceipt=!1,i.rightTable.forEach(function(e){e.amount=e.unpaidFee;var t=i.leftTable.indexOf(e);-1!==t&&i.leftTable.splice(t,1)}),i.orgLeftTable=Object(u.objectMerge2)([],i.leftTable)}).catch(function(e){i.loading=!1,i._handlerCatchMsg(e)})},changLoadData:function(e,t,i){this.rightTable[e][t]=Number(i);var a="unpaidFee",l=Number(this.rightTable[e][a]),o=this.rightTable[e][t];o!==l?this.$set(this.textChangeDanger,e,!0):this.$set(this.textChangeDanger,e,!1),o<0||l<o?(this.isGoReceipt=!0,this.$message({type:"warning",message:"实结费用不小于0，不大于未结费用。"})):(this.isGoReceipt=!1,this.$set(this.rightTable,e,n()(this.rightTable[e],s()({},t,this.rightTable[e][t])))),console.log(this.rightTable[e][t],o,a,this.rightTable[e][a],this.rightTable[e])},clickDetailsRight:function(e){this.$refs.multipleTableRight.toggleRowSelection(e)},clickDetailsLeft:function(e){this.$refs.multipleTableLeft.toggleRowSelection(e)},getSelectionRight:function(e){this.selectedRight=e},getSelectionLeft:function(e){this.selectedLeft=e},changeTableKey:function(){this.tablekey=Math.random()},doAction:function(e){switch(e){case"goLeft":this.goLeft();break;case"goRight":this.goRight()}},goLeft:function(){var i=this;0===this.selectedRight.length||(this.selectedRight.forEach(function(t,e){t.amount=t.unpaidFee,i.rightTable=Object(u.objectMerge2)([],i.rightTable).filter(function(e){return e.batchNo!==t.batchNo}),i.rightTable.push(t),i.leftTable=Object(u.objectMerge2)([],i.leftTable).filter(function(e){return e.batchNo!==t.batchNo}),i.orgLeftTable=Object(u.objectMerge2)([],i.orgLeftTable).filter(function(e){return e.batchNo!==t.batchNo})}),this.selectedRight=[]),this.rightTable.length<1?this.isGoReceipt=!0:this.isGoReceipt=!1},goRight:function(){var i=this;0===this.selectedLeft.length?this.$message({type:"warning",message:"请在右边表格选择数据"}):(this.selectedLeft.forEach(function(t,e){i.leftTable=Object(u.objectMerge2)([],i.leftTable).filter(function(e){return e.batchNo!==t.batchNo}),i.orgLeftTable=Object(u.objectMerge2)([],i.orgLeftTable).filter(function(e){return e.batchNo!==t.batchNo}),i.leftTable.push(t),i.orgLeftTable.push(t),i.rightTable=Object(u.objectMerge2)([],i.rightTable).filter(function(e){return e.batchNo!==t.batchNo})}),this.selectedLeft=[]),this.rightTable.length<1?this.isGoReceipt=!0:this.isGoReceipt=!1},selectCurrent:function(e,t){this.addItem(e,t)},dclickAddItem:function(e,t){this.selectedRight=[],this.selectedRight.push(e),this.doAction("goLeft")},dclickMinusItem:function(e,t){this.selectedLeft=[],this.selectedLeft.push(e),this.doAction("goRight")},addItem:function(e,t){this.selectedRight=[],this.selectedRight[t]=e,this.doAction("goLeft")},minusItem:function(e,t){this.selectedLeft=[],this.selectedLeft[t]=e,this.doAction("goRight")},addALLList:function(){this.selectedRight=n()([],this.leftTable),this.doAction("goLeft")},minusAllList:function(){this.selectedLeft=n()([],this.rightTable),this.doAction("goRight")},searchShip:function(e){console.log("searchShip",e)},closeDialog:function(){this.popVisibleDialog=!1},openDialog:function(){this.popVisibleDialog=!0},goReceipt:function(){var a=this,i=0;if(1<this.rightTable.length&&Object(u.objectMerge2)([],this.rightTable).forEach(function(t){Object(u.objectMerge2)([],a.rightTable).forEach(function(e){t.ascriptionOrgid!==e.ascriptionOrgid&&i++})}),0<i)return i=0,this.$message({type:"warning",message:"不能同时结算两个网点"}),!1;this.tableReceiptInfo=[],this.isGoReceipt||(this.rightTable.forEach(function(e,t){var i={id:e.id,amount:e.amount,feeTypeId:e.feeTypeId};0<i.amount&&i.amount<=e.unpaidFee&&a.tableReceiptInfo.push(i),i={}}),0<this.tableReceiptInfo.length?this.openDialog():this.$message({type:"warning",message:"暂无可结算项！实结费用不小于0，不大于未结费用。"}))},getSumRight:function(e){return Object(m.getSummaries)(e,["_index|2|单","fee","unpaidFee","paidFee","loadAmountall|","loadWeightall|","loadVolumeall|"])},getSumLeft:function(e){return Object(m.getSummaries)(e,["_index|2|单","fee","unpaidFee","paidFee","loadAmountall|","amount","loadWeightall|","loadVolumeall|"])}}}},LMHA:function(e,t,i){"use strict";var a={render:function(){var a=this,e=a.$createElement,l=a._self._c||e;return l("div",{staticClass:"accountsLoad_table"},[l("div",{staticClass:"transferTable_search clearfix"},[l("currentSearch",{attrs:{info:a.orgLeftTable},on:{change:a.selectCurrent}})],1),a._v(" "),l("transferTable",{staticStyle:{height:"calc(100% - 40px)",padding:"10px"}},[l("div",{attrs:{slot:"btnsBox"},slot:"btnsBox"},[l("el-button",{attrs:{type:a.isGoReceipt?"info":"success",size:"mini",icon:"el-icon-sort",disabled:a.isGoReceipt},on:{click:a.goReceipt}},[a._v("发车汇总结算")])],1),a._v(" "),l("div",{staticClass:"tableHeadItemBtn",staticStyle:{height:"100%"},attrs:{slot:"tableLeft"},slot:"tableLeft"},[l("el-button",{staticClass:"tableAllBtn",attrs:{size:"mini"},on:{click:a.addALLList}}),a._v(" "),l("el-table",{key:a.tablekey,ref:"multipleTableRight",attrs:{data:a.leftTable,border:"","tooltip-effect":"dark",triped:"",height:"100%","summary-method":a.getSumRight,"default-sort":{prop:"id",order:"ascending"},"show-overflow-tooltip":!0,"show-summary":!0},on:{"row-click":a.clickDetailsRight,"selection-change":a.getSelectionRight,"row-dblclick":a.dclickAddItem}},[l("el-table-column",{attrs:{fixed:"",width:"50",type:"index",label:"序号"},scopedSlots:a._u([{key:"default",fn:function(e){return[a._v("\n            "+a._s(e.$index+1)+"\n          ")]}}])}),a._v(" "),l("el-table-column",{attrs:{fixed:"",width:"50"},scopedSlots:a._u([{key:"default",fn:function(t){return[l("el-button",{staticClass:"tableItemBtn",attrs:{size:"mini"},on:{click:function(e){a.addItem(t.row,t.$index)}}})]}}])}),a._v(" "),a._l(a.tableColumnLeft,function(i){return[i.slot?l("el-table-column",{key:i.id,attrs:{fixed:i.fixed,sortable:"",label:i.label,width:i.width},scopedSlots:a._u([{key:"default",fn:function(t){return[i.click?l("span",{staticClass:"clickitem",domProps:{innerHTML:a._s(i.slot(t))},on:{click:function(e){e.stopPropagation(),i.click(t)}}}):l("span",{domProps:{innerHTML:a._s(i.slot(t))}})]}}])}):l("el-table-column",{key:i.id,attrs:{fixed:i.fixed,sortable:"",label:i.label,prop:i.prop,width:i.width}})]})],2)],1),a._v(" "),l("div",{staticClass:"tableHeadItemBtn",attrs:{slot:"tableRight"},slot:"tableRight"},[l("el-button",{staticClass:"tableAllBtnMinus",attrs:{size:"mini"},on:{click:a.minusAllList}}),a._v(" "),l("el-table",{key:a.tablekey,ref:"multipleTableLeft",staticStyle:{height:"100%"},attrs:{data:a.rightTable,border:"","tooltip-effect":"dark",triped:"",height:"100%","summary-method":a.getSumLeft,"default-sort":{prop:"id",order:"ascending"},"show-summary":!0},on:{"row-click":a.clickDetailsLeft,"selection-change":a.getSelectionLeft,"row-dblclick":a.dclickMinusItem}},[l("el-table-column",{attrs:{fixed:"",width:"50",type:"index",label:"序号"},scopedSlots:a._u([{key:"default",fn:function(e){return[a._v("\n            "+a._s(e.$index+1)+"\n          ")]}}])}),a._v(" "),l("el-table-column",{attrs:{fixed:"",width:"50"},scopedSlots:a._u([{key:"default",fn:function(t){return[l("el-button",{staticClass:"tableItemBtnMinus",attrs:{size:"mini"},on:{click:function(e){a.minusItem(t.row,t.$index)}}})]}}])}),a._v(" "),a._l(a.tableColumnRight,function(i){return[i.slot?l("el-table-column",{key:i.id,attrs:{fixed:i.fixed,sortable:"",label:i.label,width:i.width,prop:i.prop},scopedSlots:a._u([{key:"default",fn:function(t){return[i.expand?l("div",[l("el-input",{class:{textChangeDanger:a.rightTable[t.$index][i.prop+"lyy"]},attrs:{type:"number",size:a.btnsize},on:{change:function(e){return a.changLoadData(t.$index,i.prop,e)}},nativeOn:{dblclick:function(e){e.stopPropagation(),e.preventDefault()},click:function(e){e.stopPropagation(),e.preventDefault()}},model:{value:i.slot(t),callback:function(e){a.$set(i,"slot(scope)",a._n(e))},expression:"column.slot(scope)"}})],1):l("div",[i.click?l("span",{staticClass:"clickitem",domProps:{innerHTML:a._s(i.slot(t))},on:{click:function(e){e.stopPropagation(),i.click(t)}}}):l("span",{domProps:{innerHTML:a._s(i.slot(t))}})])]}}])}):l("el-table-column",{key:i.id,attrs:{fixed:i.fixed,sortable:"",label:i.label,prop:i.prop,width:i.width}})]})],2)],1)]),a._v(" "),l("Receipt",{attrs:{popVisible:a.popVisibleDialog,info:a.tableReceiptInfo},on:{close:a.closeDialog}})],1)},staticRenderFns:[]};t.a=a},NDph:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("O53x"),l=i("gxDK"),o=i("VU/8")(a.a,l.a,null,null,null);t.default=o.exports},O1Io:function(e,t,i){"use strict";var a={render:function(){var a=this,e=a.$createElement,l=a._self._c||e;return l("div",{staticClass:"accountsLoad_table"},[l("div",{staticClass:"transferTable_search clearfix"},[l("currentSearch",{attrs:{info:a.orgLeftTable},on:{change:a.selectCurrent}})],1),a._v(" "),l("transferTable",{staticStyle:{height:"calc(100% - 40px)",padding:"10px"}},[l("div",{attrs:{slot:"btnsBox"},slot:"btnsBox"},[l("el-button",{attrs:{type:a.isGoReceipt?"info":"success",size:"mini",icon:"el-icon-sort",disabled:a.isGoReceipt},on:{click:a.goReceipt}},[a._v("发站其他费结算")])],1),a._v(" "),l("div",{staticClass:"tableHeadItemBtn",staticStyle:{height:"100%"},attrs:{slot:"tableLeft"},slot:"tableLeft"},[l("el-button",{staticClass:"tableAllBtn",attrs:{size:"mini"},on:{click:a.addALLList}}),a._v(" "),l("el-table",{key:a.tablekey,ref:"multipleTableRight",attrs:{data:a.leftTable,border:"","tooltip-effect":"dark",triped:"",height:"100%","summary-method":a.getSumRight,"default-sort":{prop:"id",order:"ascending"},"show-overflow-tooltip":!0,"show-summary":!0},on:{"row-click":a.clickDetailsRight,"selection-change":a.getSelectionRight,"row-dblclick":a.dclickAddItem}},[l("el-table-column",{attrs:{fixed:"",width:"50",type:"index",label:"序号"},scopedSlots:a._u([{key:"default",fn:function(e){return[a._v("\n            "+a._s(e.$index+1)+"\n          ")]}}])}),a._v(" "),l("el-table-column",{attrs:{fixed:"",width:"50"},scopedSlots:a._u([{key:"default",fn:function(t){return[l("el-button",{staticClass:"tableItemBtn",attrs:{size:"mini"},on:{click:function(e){a.addItem(t.row,t.$index)}}})]}}])}),a._v(" "),a._l(a.tableColumnLeft,function(i){return[i.slot?l("el-table-column",{key:i.id,attrs:{fixed:i.fixed,sortable:"",label:i.label,width:i.width},scopedSlots:a._u([{key:"default",fn:function(t){return[i.click?l("span",{staticClass:"clickitem",domProps:{innerHTML:a._s(i.slot(t))},on:{click:function(e){e.stopPropagation(),i.click(t)}}}):l("span",{domProps:{innerHTML:a._s(i.slot(t))}})]}}])}):l("el-table-column",{key:i.id,attrs:{fixed:i.fixed,sortable:"",label:i.label,prop:i.prop,width:i.width}})]})],2)],1),a._v(" "),l("div",{staticClass:"tableHeadItemBtn",attrs:{slot:"tableRight"},slot:"tableRight"},[l("el-button",{staticClass:"tableAllBtnMinus",attrs:{size:"mini"},on:{click:a.minusAllList}}),a._v(" "),l("el-table",{key:a.tablekey,ref:"multipleTableLeft",staticStyle:{height:"100%"},attrs:{data:a.rightTable,border:"","tooltip-effect":"dark",triped:"",height:"100%","summary-method":a.getSumLeft,"default-sort":{prop:"id",order:"ascending"},"show-summary":!0},on:{"row-click":a.clickDetailsLeft,"selection-change":a.getSelectionLeft,"row-dblclick":a.dclickMinusItem}},[l("el-table-column",{attrs:{fixed:"",width:"50",type:"index",label:"序号"},scopedSlots:a._u([{key:"default",fn:function(e){return[a._v("\n            "+a._s(e.$index+1)+"\n          ")]}}])}),a._v(" "),l("el-table-column",{attrs:{fixed:"",width:"50"},scopedSlots:a._u([{key:"default",fn:function(t){return[l("el-button",{staticClass:"tableItemBtnMinus",attrs:{size:"mini"},on:{click:function(e){a.minusItem(t.row,t.$index)}}})]}}])}),a._v(" "),a._l(a.tableColumnRight,function(i){return[i.slot?l("el-table-column",{key:i.id,attrs:{fixed:i.fixed,sortable:"",label:i.label,width:i.width,prop:i.prop},scopedSlots:a._u([{key:"default",fn:function(t){return[i.expand?l("div",[l("el-input",{class:{textChangeDanger:a.textChangeDanger[t.$index]},attrs:{type:"number",size:a.btnsize},on:{change:function(e){return a.changLoadData(t.$index,i.prop,e)}},nativeOn:{dblclick:function(e){e.stopPropagation(),e.preventDefault()},click:function(e){e.stopPropagation(),e.preventDefault()}},model:{value:i.slot(t),callback:function(e){a.$set(i,"slot(scope)",a._n(e))},expression:"column.slot(scope)"}})],1):l("div",[i.click?l("span",{staticClass:"clickitem",domProps:{innerHTML:a._s(i.slot(t))},on:{click:function(e){e.stopPropagation(),i.click(t)}}}):l("span",{domProps:{innerHTML:a._s(i.slot(t))}})])]}}])}):l("el-table-column",{key:i.id,attrs:{fixed:i.fixed,sortable:"",label:i.label,prop:i.prop,width:i.width}})]})],2)],1)]),a._v(" "),l("Receipt",{attrs:{popVisible:a.popVisibleDialog,info:a.tableReceiptInfo},on:{close:a.closeDialog}})],1)},staticRenderFns:[]};t.a=a},O53x:function(e,t,i){"use strict";var a=i("woOf"),o=i.n(a),l=i("Dd8w"),n=i.n(l),r=i("bOdI"),s=i.n(r),c=i("NYxO"),h=i("JW1v"),d=i("IcMT"),u=i("0xDb"),p=i("pAQG"),f=i("u/8D"),b=i("1onU"),g=i("DT23"),m=i("0xDb");t.a={components:{transferTable:d.a,querySelect:p.a,Receipt:f.default,Pager:b.a,currentSearch:g.default},data:function(){var e,i=this;return e={textChangeDanger:[],tablekey:"",loadTruck:"",truckMessage:"",formModel:{}},s()(e,"loadTruck","loadTruckOne"),s()(e,"loading",!1),s()(e,"popVisibleDialog",!1),s()(e,"btnsize","mini"),s()(e,"tableReceiptInfo",[]),s()(e,"orgLeftTable",[]),s()(e,"selectedRight",[]),s()(e,"selectedLeft",[]),s()(e,"isGoReceipt",!0),s()(e,"leftTable",[]),s()(e,"rightTable",[]),s()(e,"orgData",{left:[],right:[]}),s()(e,"isFresh",!1),s()(e,"feeType",8),s()(e,"searchQuery",{currentPage:1,pageSize:100,vo:{}}),s()(e,"tableColumnLeft",[{label:"短驳批次",prop:"batchNo",width:"120",fixed:!0},{label:"开单网点",prop:"orgName",width:"120",fixed:!1},{label:"短驳时间",prop:"departureTime",width:"180",fixed:!1,slot:function(e){return""+Object(u.parseTime)(e.row.departureTime,"{y}-{m}-{d} {h}:{i}:{s}")}},{label:"结算状态",prop:"statusName",width:"120",fixed:!1},{label:"短驳费",prop:"fee",width:"120",fixed:!1},{label:"已结短驳费",prop:"paidFee",width:"120",fixed:!1,slot:function(e){var t=e.row;return i._setTextColor(t.fee,t.paidFee,t.unpaidFee,t.paidFee)}},{label:"未结短驳费",prop:"unpaidFee",width:"120",fixed:!1,slot:function(e){var t=e.row;return i._setTextColor(t.fee,t.paidFee,t.unpaidFee,t.unpaidFee)}},{label:"司机电话",prop:"dirverMobile",width:"120",fixed:!1},{label:"车牌号",prop:"truckIdNumber",width:"120",fixed:!1},{label:"司机姓名",prop:"dirverName",width:"120",fixed:!1},{label:"目的网点",prop:"arriveOrgName",width:"120",fixed:!1},{label:"接收时间",prop:"receivingTime",width:"180",fixed:!1,slot:function(e){return""+Object(u.parseTime)(e.row.receivingTime,"{y}-{m}-{d} {h}:{i}:{s}")}},{label:"短驳件数",prop:"loadAmountall",width:"120",fixed:!1},{label:"短驳重量",prop:"loadWeightall",width:"120",fixed:!1},{label:"短驳体积",prop:"loadVolumeall",width:"120",fixed:!1},{label:"备注",prop:"remark",width:"120",fixed:!1}]),s()(e,"tableColumnRight",[{label:"短驳批次",prop:"batchNo",width:"120",fixed:!0},{label:"结算状态",prop:"statusName",width:"120",fixed:!1},{label:"发车网点",prop:"orgName",width:"120",fixed:!1},{label:"短驳时间",prop:"departureTime",width:"180",fixed:!1,slot:function(e){return""+Object(u.parseTime)(e.row.departureTime,"{y}-{m}-{d} {h}:{i}:{s}")}},{label:"短驳费",prop:"fee",width:"120",fixed:!1},{label:"已结短驳费",prop:"paidFee",width:"120",fixed:!1,slot:function(e){var t=e.row;return i._setTextColor(t.fee,t.paidFee,t.unpaidFee,t.paidFee)}},{label:"未结短驳费",prop:"unpaidFee",width:"120",fixed:!1,slot:function(e){var t=e.row;return i._setTextColor(t.fee,t.paidFee,t.unpaidFee,t.unpaidFee)}},{label:"实结短驳费",prop:"amount",width:"120",fixed:!1,expand:!0,slot:function(e){return e.row.amount}},{label:"司机电话",prop:"dirverMobile",width:"120",fixed:!1},{label:"车牌号",prop:"truckIdNumber",width:"120",fixed:!1},{label:"司机姓名",prop:"dirverName",width:"120",fixed:!1},{label:"目的网点",prop:"arriveOrgName",width:"120",fixed:!1},{label:"接收时间",prop:"receivingTime",width:"180",fixed:!1,slot:function(e){return""+Object(u.parseTime)(e.row.receivingTime,"{y}-{m}-{d} {h}:{i}:{s}")}},{label:"短驳件数",prop:"loadAmountall",width:"120",fixed:!1},{label:"短驳重量",prop:"loadWeightall",width:"120",fixed:!1},{label:"短驳体积",prop:"loadVolumeall",width:"120",fixed:!1},{label:"备注",prop:"remark",width:"120",fixed:!1}]),e},computed:n()({},Object(c.b)(["otherinfo"]),{getRouteInfo:function(){return JSON.parse(this.$route.query.searchQuery)},totalLeft:function(){return this.leftTable.length},totalRight:function(){return this.rightTable.length}}),mounted:function(){this.getList()},methods:{handlePageChangeLeft:function(e){this.searchQuery.currentPage=e.pageNum,this.searchQuery.pageSize=e.pageSize},initLeftParams:function(){this.$set(this.searchQuery.vo,"orgid",this.getRouteInfo.vo.orgid),this.$set(this.searchQuery.vo,"ascriptionOrgid",this.getRouteInfo.vo.ascriptionOrgid),this.$set(this.searchQuery.vo,"feeTypeId",this.getRouteInfo.vo.feeTypeId),this.$set(this.searchQuery.vo,"status","NOSETTLEMENT,PARTSETTLEMENT")},getList:function(){var i=this,t=Object(u.objectMerge2)([],JSON.parse(this.$route.query.selectListBatchNos));this.$route.query.selectListBatchNos?this.isModify=!0:this.isModify=!1,this.leftTable=this.$options.data().leftTable,this.rightTable=this.$options.data().rightTable,this.tableReceiptInfo=this.$options.data().tableReceiptInfo,this.orgLeftTable=this.$options.data().orgLeftTable,this.initLeftParams(),this.isFresh||Object(h.h)(this.searchQuery).then(function(e){i.leftTable=o()([],e.list),t.forEach(function(t){i.leftTable.forEach(function(e){t===e.batchNo&&i.rightTable.push(e)})}),i.rightTable.length<1?i.isGoReceipt=!0:i.isGoReceipt=!1,i.rightTable.forEach(function(e){var t=i.leftTable.indexOf(e);-1!==t&&i.leftTable.splice(t,1),e.amount=e.unpaidFee}),i.orgLeftTable=Object(u.objectMerge2)([],i.leftTable)}).catch(function(e){i.loading=!1,i._handlerCatchMsg(e)})},changLoadData:function(e,t,i){this.rightTable[e][t]=Number(i);var a=Number(this.rightTable[e].unpaidFee),l=this.rightTable[e][t];l!==a?this.$set(this.textChangeDanger,e,!0):this.$set(this.textChangeDanger,e,!1),l<0||a<l?(this.isGoReceipt=!0,this.$message({type:"warning",message:"实结费用不小于0，不大于未结费用。"})):(this.isGoReceipt=!1,this.$set(this.rightTable,e,o()(this.rightTable[e],s()({},t,this.rightTable[e][t]))))},clickDetailsRight:function(e){this.$refs.multipleTableRight.toggleRowSelection(e)},clickDetailsLeft:function(e){this.$refs.multipleTableLeft.toggleRowSelection(e)},getSelectionRight:function(e){this.selectedRight=e},getSelectionLeft:function(e){this.selectedLeft=e},changeTableKey:function(){this.tablekey=Math.random()},doAction:function(e){switch(e){case"goLeft":this.goLeft();break;case"goRight":this.goRight()}},goLeft:function(){var i=this;0===this.selectedRight.length||(this.selectedRight.forEach(function(t,e){t.amount=t.unpaidFee,i.rightTable=Object(u.objectMerge2)([],i.rightTable).filter(function(e){return e.batchNo!==t.batchNo}),i.rightTable.push(t),i.leftTable=Object(u.objectMerge2)([],i.leftTable).filter(function(e){return e.batchNo!==t.batchNo}),i.orgLeftTable=Object(u.objectMerge2)([],i.orgLeftTable).filter(function(e){return e.batchNo!==t.batchNo})}),this.selectedRight=[]),this.rightTable.length<1?this.isGoReceipt=!0:this.isGoReceipt=!1},goRight:function(){var i=this;0===this.selectedLeft.length?this.$message({type:"warning",message:"请在右边表格选择数据"}):(this.selectedLeft.forEach(function(t,e){i.leftTable=Object(u.objectMerge2)([],i.leftTable).filter(function(e){return e.batchNo!==t.batchNo}),i.orgLeftTable=Object(u.objectMerge2)([],i.orgLeftTable).filter(function(e){return e.batchNo!==t.batchNo}),i.leftTable.push(t),i.orgLeftTable.push(t),i.rightTable=Object(u.objectMerge2)([],i.rightTable).filter(function(e){return e.batchNo!==t.batchNo})}),this.selectedLeft=[]),this.rightTable.length<1?this.isGoReceipt=!0:this.isGoReceipt=!1},selectCurrent:function(e,t){this.addItem(e,t)},dclickAddItem:function(e,t){this.selectedRight=[],this.selectedRight.push(e),this.doAction("goLeft")},dclickMinusItem:function(e,t){this.selectedLeft=[],this.selectedLeft.push(e),this.doAction("goRight")},addItem:function(e,t){this.selectedRight=[],this.selectedRight[t]=e,this.doAction("goLeft")},minusItem:function(e,t){this.selectedLeft=[],this.selectedLeft[t]=e,this.doAction("goRight")},addALLList:function(){this.selectedRight=o()([],this.leftTable),this.doAction("goLeft")},minusAllList:function(){this.selectedLeft=o()([],this.rightTable),this.doAction("goRight")},searchShip:function(e){console.log("searchShip",e)},closeDialog:function(){this.popVisibleDialog=!1},openDialog:function(){this.popVisibleDialog=!0},goReceipt:function(){var a=this,i=0;if(1<this.rightTable.length&&Object(u.objectMerge2)([],this.rightTable).forEach(function(t){Object(u.objectMerge2)([],a.rightTable).forEach(function(e){t.ascriptionOrgid!==e.ascriptionOrgid&&i++})}),0<i)return i=0,this.$message({type:"warning",message:"不能同时结算两个网点"}),!1;this.tableReceiptInfo=[],this.isGoReceipt||(this.rightTable.forEach(function(e,t){var i={id:e.id,amount:e.amount,feeTypeId:e.feeTypeId};0<i.amount&&i.amount<=e.unpaidFee&&a.tableReceiptInfo.push(i),i={}}),0<this.tableReceiptInfo.length?this.openDialog():this.$message({type:"warning",message:"暂无可结算项！实结费用不小于0，不大于未结费用。"}))},getSumRight:function(e){return Object(m.getSummaries)(e,["_index|2|单","fee","unpaidFee","paidFee","loadAmountall|","loadWeightall|","loadVolumeall|"])},getSumLeft:function(e){return Object(m.getSummaries)(e,["_index|2|单","fee","unpaidFee","paidFee","loadAmountall|","amount","loadWeightall|","loadVolumeall|"])}}}},O8qZ:function(e,t,i){"use strict";var a={render:function(){var a=this,e=a.$createElement,l=a._self._c||e;return l("div",{staticClass:"accountsLoad_table"},[l("div",{staticClass:"transferTable_search clearfix"},[l("currentSearch",{attrs:{info:a.orgLeftTable},on:{change:a.selectCurrent}})],1),a._v(" "),l("transferTable",{staticStyle:{height:"calc(100% - 40px)",padding:"10px"}},[l("div",{attrs:{slot:"btnsBox"},slot:"btnsBox"},[l("el-button",{attrs:{type:a.isGoReceipt?"info":"success",size:"mini",icon:"el-icon-sort",disabled:a.isGoReceipt},on:{click:a.goReceipt}},[a._v("到站其他费结算")])],1),a._v(" "),l("div",{staticClass:"tableHeadItemBtn",staticStyle:{height:"100%"},attrs:{slot:"tableLeft"},slot:"tableLeft"},[l("el-button",{staticClass:"tableAllBtn",attrs:{size:"mini"},on:{click:a.addALLList}}),a._v(" "),l("el-table",{key:a.tablekey,ref:"multipleTableRight",attrs:{data:a.leftTable,border:"","tooltip-effect":"dark",triped:"",height:"100%","summary-method":a.getSumRight,"default-sort":{prop:"id",order:"ascending"},"show-overflow-tooltip":!0,"show-summary":!0},on:{"row-click":a.clickDetailsRight,"selection-change":a.getSelectionRight,"row-dblclick":a.dclickAddItem}},[l("el-table-column",{attrs:{fixed:"",width:"50",type:"index",label:"序号"},scopedSlots:a._u([{key:"default",fn:function(e){return[a._v("\n            "+a._s(e.$index+1)+"\n          ")]}}])}),a._v(" "),l("el-table-column",{attrs:{fixed:"",width:"50"},scopedSlots:a._u([{key:"default",fn:function(t){return[l("el-button",{staticClass:"tableItemBtn",attrs:{size:"mini"},on:{click:function(e){a.addItem(t.row,t.$index)}}})]}}])}),a._v(" "),a._l(a.tableColumnLeft,function(i){return[i.slot?l("el-table-column",{key:i.id,attrs:{fixed:i.fixed,sortable:"",label:i.label,width:i.width},scopedSlots:a._u([{key:"default",fn:function(t){return[i.click?l("span",{staticClass:"clickitem",domProps:{innerHTML:a._s(i.slot(t))},on:{click:function(e){e.stopPropagation(),i.click(t)}}}):l("span",{domProps:{innerHTML:a._s(i.slot(t))}})]}}])}):l("el-table-column",{key:i.id,attrs:{fixed:i.fixed,sortable:"",label:i.label,prop:i.prop,width:i.width}})]})],2)],1),a._v(" "),l("div",{staticClass:"tableHeadItemBtn",attrs:{slot:"tableRight"},slot:"tableRight"},[l("el-button",{staticClass:"tableAllBtnMinus",attrs:{size:"mini"},on:{click:a.minusAllList}}),a._v(" "),l("el-table",{key:a.tablekey,ref:"multipleTableLeft",staticStyle:{height:"100%"},attrs:{data:a.rightTable,border:"","tooltip-effect":"dark",triped:"",height:"100%","summary-method":a.getSumLeft,"default-sort":{prop:"id",order:"ascending"},"show-summary":!0},on:{"row-click":a.clickDetailsLeft,"selection-change":a.getSelectionLeft,"row-dblclick":a.dclickMinusItem}},[l("el-table-column",{attrs:{fixed:"",width:"50",type:"index",label:"序号"},scopedSlots:a._u([{key:"default",fn:function(e){return[a._v("\n            "+a._s(e.$index+1)+"\n          ")]}}])}),a._v(" "),l("el-table-column",{attrs:{fixed:"",width:"50"},scopedSlots:a._u([{key:"default",fn:function(t){return[l("el-button",{staticClass:"tableItemBtnMinus",attrs:{size:"mini"},on:{click:function(e){a.minusItem(t.row,t.$index)}}})]}}])}),a._v(" "),a._l(a.tableColumnRight,function(i){return[i.slot?l("el-table-column",{key:i.id,attrs:{fixed:i.fixed,sortable:"",label:i.label,width:i.width,prop:i.prop},scopedSlots:a._u([{key:"default",fn:function(t){return[i.expand?l("div",[l("el-input",{class:{textChangeDanger:a.textChangeDanger[t.$index]},attrs:{type:"number",size:a.btnsize},on:{change:function(e){return a.changLoadData(t.$index,i.prop,e)}},nativeOn:{dblclick:function(e){e.stopPropagation(),e.preventDefault()},click:function(e){e.stopPropagation(),e.preventDefault()}},model:{value:i.slot(t),callback:function(e){a.$set(i,"slot(scope)",a._n(e))},expression:"column.slot(scope)"}})],1):l("div",[i.click?l("span",{staticClass:"clickitem",domProps:{innerHTML:a._s(i.slot(t))},on:{click:function(e){e.stopPropagation(),i.click(t)}}}):l("span",{domProps:{innerHTML:a._s(i.slot(t))}})])]}}])}):l("el-table-column",{key:i.id,attrs:{fixed:i.fixed,sortable:"",label:i.label,prop:i.prop,width:i.width}})]})],2)],1)]),a._v(" "),l("Receipt",{attrs:{popVisible:a.popVisibleDialog,info:a.tableReceiptInfo},on:{close:a.closeDialog}})],1)},staticRenderFns:[]};t.a=a},PI8x:function(e,t,i){"use strict";t.a={data:function(){return{isShowLeft:!1,isShowRight:!1,isShowReback:!1,searchForm:""}},methods:{doAction:function(e){switch(e){case"showAllLeft":this.showAllLeft();break;case"showAllRight":this.showAllRight();break;case"showReback":this.showReback()}},showAllLeft:function(){this.isShowLeft=!0,this.isShowRight=!1,this.isShowReback=!0},showAllRight:function(){this.isShowLeft=!1,this.isShowRight=!0,this.isShowReback=!0},showReback:function(){this.isShowReback=!1,this.isShowLeft=!1,this.isShowRight=!1}}}},QVoP:function(e,t,i){"use strict";var a={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"transferTable"},[i("div",{staticClass:"transferTable_header"},[i("div",{staticClass:"transferTable_searchs"},[i("div",{staticClass:"transferTable_fresh"},[t._t("tableRefresh")],2),t._v(" "),t._t("tableSearch")],2),t._v(" "),i("div",{staticClass:"transferTable_header_btn_direction"},[i("el-tooltip",{attrs:{effect:"dark",content:"向左侧拉伸",placement:"top-end"}},[i("el-button",{attrs:{icon:"el-icon-arrow-right",type:"primary",circle:"",disabled:t.isShowLeft,size:"mini",plain:""},on:{click:function(e){t.doAction("showAllLeft")}}})],1),t._v(" "),i("el-tooltip",{attrs:{effect:"dark",content:"向右侧拉伸",placement:"top-start"}},[i("el-button",{attrs:{icon:"el-icon-arrow-left",type:"primary",circle:"",disabled:t.isShowRight,size:"mini",plain:""},on:{click:function(e){t.doAction("showAllRight")}}})],1),t._v(" "),i("transition",{attrs:{name:"el-zoom-in-bottom"}},[t.isShowReback?i("el-button",{attrs:{icon:"el-icon-refresh",type:"primary",circle:"",size:"mini",plain:""},on:{click:function(e){t.doAction("showReback")}}}):t._e()],1),t._v(" "),i("div",{staticClass:"transferTable_header_btn_box clearfix"},[t._t("btnsBox")],2)],1)]),t._v(" "),i("div",{staticClass:"transferTable_content"},[i("div",{staticClass:"transferTable_content_table paddingRight",class:[t.isShowLeft?"showTableLeft":t.isShowRight?"shortTableLeft":""]},[t._t("tableLeft",[t._v("左边表格区")])],2),t._v(" "),i("div",{staticClass:"transferTable_content_table",class:[t.isShowRight?"showTableRight":""]},[t._t("tableRight",[t._v("右边表格区")])],2)])])},staticRenderFns:[]};t.a=a},Rhqk:function(e,t,i){"use strict";var a={render:function(){var a=this,e=a.$createElement,l=a._self._c||e;return l("div",{staticClass:"accountsLoad_table"},[l("div",{staticClass:"transferTable_search clearfix"},[l("currentSearch",{attrs:{info:a.orgLeftTable},on:{change:a.selectCurrent}})],1),a._v(" "),l("transferTable",{staticStyle:{height:"calc(100% - 40px)",padding:"10px"}},[l("div",{attrs:{slot:"btnsBox"},slot:"btnsBox"},[l("el-button",{attrs:{type:a.isGoReceipt?"info":"success",size:"mini",icon:"el-icon-sort",disabled:a.isGoReceipt},on:{click:a.goReceipt}},[a._v("异常理赔结算")])],1),a._v(" "),l("div",{staticClass:"tableHeadItemBtn",staticStyle:{height:"100%"},attrs:{slot:"tableLeft"},slot:"tableLeft"},[l("el-button",{staticClass:"tableAllBtn",attrs:{size:"mini"},on:{click:a.addALLList}}),a._v(" "),l("el-table",{key:a.tablekey,ref:"multipleTableRight",attrs:{data:a.leftTable,border:"","tooltip-effect":"dark",triped:"",height:"100%","summary-method":a.getSumRight,"default-sort":{prop:"id",order:"ascending"},"show-overflow-tooltip":!0,"show-summary":!0},on:{"row-click":a.clickDetailsRight,"selection-change":a.getSelectionRight,"row-dblclick":a.dclickAddItem}},[l("el-table-column",{attrs:{fixed:"",width:"50",type:"index",label:"序号"},scopedSlots:a._u([{key:"default",fn:function(e){return[a._v("\n            "+a._s(e.$index+1)+"\n          ")]}}])}),a._v(" "),l("el-table-column",{attrs:{fixed:"",width:"50"},scopedSlots:a._u([{key:"default",fn:function(t){return[l("el-button",{staticClass:"tableItemBtn",attrs:{size:"mini"},on:{click:function(e){a.addItem(t.row,t.$index)}}})]}}])}),a._v(" "),a._l(a.tableColumnLeft,function(i){return[i.slot?l("el-table-column",{key:i.id,attrs:{fixed:i.fixed,sortable:"",label:i.label,width:i.width,prop:i.prop},scopedSlots:a._u([{key:"default",fn:function(t){return[i.expand?l("div",[l("el-input",{attrs:{type:"number",size:a.btnsize},on:{change:function(e){a.changLoadData(t.$index)}},model:{value:i.slot(t),callback:function(e){a.$set(i,"slot(scope)",a._n(e))},expression:"column.slot(scope)"}})],1):l("div",[i.click?l("span",{staticClass:"clickitem",domProps:{innerHTML:a._s(i.slot(t))},on:{click:function(e){e.stopPropagation(),i.click(t)}}}):l("span",{domProps:{innerHTML:a._s(i.slot(t))}})])]}}])}):l("el-table-column",{key:i.id,attrs:{fixed:i.fixed,sortable:"",label:i.label,prop:i.prop,width:i.width}})]})],2)],1),a._v(" "),l("div",{staticClass:"tableHeadItemBtn",attrs:{slot:"tableRight"},slot:"tableRight"},[l("el-button",{staticClass:"tableAllBtnMinus",attrs:{size:"mini"},on:{click:a.minusAllList}}),a._v(" "),l("el-table",{key:a.tablekey,ref:"multipleTableLeft",staticStyle:{height:"100%"},attrs:{data:a.rightTable,border:"","tooltip-effect":"dark",triped:"",height:"100%","summary-method":a.getSumLeft,"default-sort":{prop:"id",order:"ascending"},"show-summary":!0},on:{"row-click":a.clickDetailsLeft,"selection-change":a.getSelectionLeft,"row-dblclick":a.dclickMinusItem}},[l("el-table-column",{attrs:{fixed:"",width:"50",type:"index",label:"序号"},scopedSlots:a._u([{key:"default",fn:function(e){return[a._v("\n            "+a._s(e.$index+1)+"\n          ")]}}])}),a._v(" "),l("el-table-column",{attrs:{fixed:"",width:"50"},scopedSlots:a._u([{key:"default",fn:function(t){return[l("el-button",{staticClass:"tableItemBtnMinus",attrs:{size:"mini"},on:{click:function(e){a.minusItem(t.row,t.$index)}}})]}}])}),a._v(" "),a._l(a.tableColumnRight,function(i){return[i.slot?l("el-table-column",{key:i.id,attrs:{fixed:i.fixed,sortable:"",label:i.label,width:i.width,prop:i.prop},scopedSlots:a._u([{key:"default",fn:function(t){return[i.expand?l("div",[l("el-input",{class:{textChangeDanger:a.textChangeDanger[t.$index]},attrs:{type:"number",size:a.btnsize},on:{change:function(e){return a.changLoadData(t.$index,i.prop,e)}},nativeOn:{dblclick:function(e){e.stopPropagation(),e.preventDefault()},click:function(e){e.stopPropagation(),e.preventDefault()}},model:{value:i.slot(t),callback:function(e){a.$set(i,"slot(scope)",a._n(e))},expression:"column.slot(scope)"}})],1):l("div",[i.click?l("span",{staticClass:"clickitem",domProps:{innerHTML:a._s(i.slot(t))},on:{click:function(e){e.stopPropagation(),i.click(t)}}}):l("span",{domProps:{innerHTML:a._s(i.slot(t))}})])]}}])}):l("el-table-column",{key:i.id,attrs:{fixed:i.fixed,sortable:"",label:i.label,prop:i.prop,width:i.width}})]})],2)],1)]),a._v(" "),l("Receipt",{attrs:{popVisible:a.popVisibleDialog,info:a.tableReceiptInfo},on:{close:a.closeDialog}})],1)},staticRenderFns:[]};t.a=a},SgVa:function(e,t,i){"use strict";var a={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"tms-pagenation"},[i("span",{staticClass:"page-num",class:{disabled:t.pageNum<=1},on:{click:function(e){t.jumpTo(1)}}},[i("span",{staticClass:"first-page"})]),i("span",{staticClass:"page-num",class:{disabled:t.pageNum<=1},on:{click:function(e){t.jumpTo(t.pageNum-1)}}},[i("span",{staticClass:"prev-page"})]),t._v(" "),i("span",{staticClass:"page-jumper"},[t._v("\n    第\n    "),i("el-input",{ref:"input",staticClass:"el-pagination__editor is-in-pagination",attrs:{min:1,max:t.pages,type:"number",disabled:t.pages<=1},on:{change:t.handleChange,focus:t.handleFocus,blur:t.handleBlur},nativeOn:{keydown:function(e){return t.handleKeyup(e)}},model:{value:t.inputval,callback:function(e){t.inputval="string"==typeof e?e.trim():e},expression:"inputval"}}),t._v(" 页\n  ")],1),t._v("\n  /共 "+t._s(t.pages)+" 页\n  "),i("span",{staticClass:"page-num",class:{disabled:t.pageNum===t.pages},on:{click:function(e){t.jumpTo(t.pageNum+1)}}},[i("span",{staticClass:"next-page"})]),t._v(" "),i("span",{staticClass:"page-num",class:{disabled:t.pageNum===t.pages},on:{click:function(e){t.jumpTo(t.pages)}}},[i("span",{staticClass:"last-page"})]),t._v(" "),i("span",{staticClass:"tms-pagination__sizes"},[i("el-select",{staticClass:"page-select",attrs:{placeholder:"请选择"},on:{change:t.sizesChange},model:{value:t.size,callback:function(e){t.size=e},expression:"size"}},t._l(t.sizes,function(e,t){return i("el-option",{key:t,attrs:{label:e,value:e}})}))],1)])},staticRenderFns:[]};t.a=a},"VT+v":function(e,t,i){"use strict";t.a={props:{sizes:{type:Array,default:function(){return[100,200,300,400]}},total:{type:Number,default:0}},computed:{pages:function(){return Math.ceil(this.total/this.size)}},watch:{pageNum:function(){this.inputval=this.pageNum},size:function(){this.pageNum=1}},mounted:function(){this.size=this.sizes[0]},data:function(){return{pageNum:1,oldValue:0,inputval:1,oldNum:1,size:100}},methods:{handleFocus:function(e){this.oldValue=e.target.value},sizesChange:function(){this.pageNum=1,this.oldNum=this.pageNum,this.$emit("change",{pageNum:this.pageNum,pageSize:this.size})},changeEvent:function(){this.oldNum!==this.pageNum&&(this.oldNum=this.pageNum,this.$emit("change",{pageNum:this.pageNum,pageSize:this.size}))},handleCurrentChange:function(e){this.pageNum=e,this.changeEvent()},handleSizeChange:function(e){this.size=e,this.changeEvent()},handleChange:function(e){var t=parseInt(e,10);isNaN(t)?this.inputval=1:t<1?this.inputval=1:t>this.pages?this.inputval=this.pages:this.inputval=t},handleBlur:function(e){var t=e.target;this.handleChange(t.value),this.jumpTo(this.inputval)},handleKeyup:function(e){var t=e.keyCode,i=e.target;console.log("page keydown:",t,i),13===t&&this.oldValue&&i.value!==this.oldValue&&(this.handleChange(i.value),this.oldValue="")},jumpTo:function(e){e<1?this.pageNum=1:e>this.pages?this.pageNum=this.pages:this.pageNum=e,this.changeEvent()}}}},VYty:function(e,t,i){"use strict";var a=i("woOf"),n=i.n(a),l=i("Dd8w"),o=i.n(l),r=i("bOdI"),s=i.n(r),c=i("NYxO"),h=i("JW1v"),d=i("IcMT"),u=i("0xDb"),p=i("pAQG"),f=i("EhYD"),b=i("1onU"),g=i("DT23"),m=i("0xDb");t.a={components:{transferTable:d.a,querySelect:p.a,Receipt:f.default,Pager:b.a,currentSearch:g.default},data:function(){var e,i=this;return e={textChangeDanger:[],tablekey:"",loadTruck:"",truckMessage:"",formModel:{}},s()(e,"loadTruck","loadTruckOne"),s()(e,"loading",!1),s()(e,"popVisibleDialog",!1),s()(e,"btnsize","mini"),s()(e,"tableReceiptInfo",[]),s()(e,"selectedRight",[]),s()(e,"selectedLeft",[]),s()(e,"isGoReceipt",!0),s()(e,"orgLeftTable",[]),s()(e,"leftTable",[]),s()(e,"rightTable",[]),s()(e,"orgData",{left:[],right:[]}),s()(e,"isFresh",!1),s()(e,"feeType",8),s()(e,"searchQuery",{currentPage:1,pageSize:100,vo:{}}),s()(e,"FEE_TYPE",{amountArrivepayCarriage:"实结到付运费",amountArrivepayOilCard:"实结到付油卡",amountArriveHandlingFee:"实结到站装卸费",amountArriveOtherFee:"实结到站其他费"}),s()(e,"sign",2),s()(e,"tableColumnLeft",[{label:"发车批次",prop:"batchNo",width:"120",fixed:!0},{label:"批次状态",prop:"batchTypeName",width:"120",fixed:!1},{label:"发车网点",prop:"orgName",width:"120",fixed:!1},{label:"达到网点",prop:"arriveOrgName",width:"120",fixed:!1},{label:"发车时间",prop:"departureTime",width:"180",fixed:!1,slot:function(e){return""+Object(u.parseTime)(e.row.departureTime,"{y}-{m}-{d} {h}:{i}:{s}")}},{label:"到达时间",prop:"receivingTime",width:"180",fixed:!1,slot:function(e){return""+Object(u.parseTime)(e.row.receivingTime,"{y}-{m}-{d} {h}:{i}:{s}")}},{label:"到付运费",prop:"arrivepayCarriage",width:"150",fixed:!1},{label:"已结到付运费",prop:"paidArrivepayCarriage",width:"150",fixed:!1,slot:function(e){var t=e.row;return i._setTextColor(t.arrivepayCarriage,t.paidArrivepayCarriage,t.unpaidArrivepayCarriage,t.paidArrivepayCarriage)}},{label:"未结到付运费",prop:"unpaidArrivepayCarriage",width:"150",fixed:!1,slot:function(e){var t=e.row;return i._setTextColor(t.arrivepayCarriage,t.paidArrivepayCarriage,t.unpaidArrivepayCarriage,t.unpaidArrivepayCarriage)}},{label:"到付油卡",prop:"arrivepayOilCard",width:"150",fixed:!1},{label:"已结到付油卡",prop:"paidArrivepayOilCard",width:"180",fixed:!1,slot:function(e){var t=e.row;return i._setTextColor(t.arrivepayOilCard,t.paidArrivepayOilCard,t.unpaidArrivepayOilCard,t.paidArrivepayOilCard)}},{label:"未结到付油卡",prop:"unpaidArrivepayOilCard",width:"150",fixed:!1,slot:function(e){var t=e.row;return i._setTextColor(t.arrivepayOilCard,t.paidArrivepayOilCard,t.unpaidArrivepayOilCard,t.unpaidArrivepayOilCard)}},{label:"到站装卸费",prop:"arriveHandlingFee",width:"150",fixed:!1},{label:"已结到站装卸费",prop:"paidArriveHandlingFee",width:"180",fixed:!1,slot:function(e){var t=e.row;return i._setTextColor(t.arriveHandlingFee,t.paidArriveHandlingFee,t.unpaidArriveHandlingFee,t.paidArriveHandlingFee)}},{label:"未结到站装卸费",prop:"unpaidArriveHandlingFee",width:"150",fixed:!1,slot:function(e){var t=e.row;return i._setTextColor(t.arriveHandlingFee,t.paidArriveHandlingFee,t.unpaidArriveHandlingFee,t.unpaidArriveHandlingFee)}},{label:"到站其他费",prop:"arriveOtherFee",width:"150",fixed:!1},{label:"已结到站其他费",prop:"paidArriveOtherFee",width:"180",fixed:!1,slot:function(e){var t=e.row;return i._setTextColor(t.arriveOtherFee,t.paidArriveOtherFee,t.unpaidArriveOtherFee,t.paidArriveOtherFee)}},{label:"未结到站其他运费",prop:"unpaidArriveOtherFee",width:"150",fixed:!1,slot:function(e){var t=e.row;return i._setTextColor(t.arriveOtherFee,t.paidArriveOtherFee,t.unpaidArriveOtherFee,t.unpaidArriveOtherFee)}},{label:"司机电话",prop:"dirverMobile",width:"120",fixed:!1},{label:"车牌号",prop:"truckIdNumber",width:"120",fixed:!1},{label:"司机姓名",prop:"dirverName",width:"120",fixed:!1},{label:"配载件数",prop:"loadAmountall",width:"120",fixed:!1},{label:"配载重量",prop:"loadWeightall",width:"120",fixed:!1},{label:"配载体积",prop:"loadVolumeall",width:"120",fixed:!1},{label:"备注",prop:"remark",width:"120",fixed:!1}]),s()(e,"tableColumnRight",[{label:"发车批次",prop:"batchNo",width:"120",fixed:!0},{label:"批次状态",prop:"batchTypeName",width:"120",fixed:!1},{label:"发车网点",prop:"orgName",width:"120",fixed:!1},{label:"达到网点",prop:"arriveOrgName",width:"120",fixed:!1},{label:"发车时间",prop:"departureTime",width:"180",fixed:!1,slot:function(e){return""+Object(u.parseTime)(e.row.departureTime,"{y}-{m}-{d} {h}:{i}:{s}")}},{label:"到达时间",prop:"receivingTime",width:"180",fixed:!1,slot:function(e){return""+Object(u.parseTime)(e.row.receivingTime,"{y}-{m}-{d} {h}:{i}:{s}")}},{label:"到付运费",prop:"arrivepayCarriage",width:"100",fixed:!1},{label:"已结到付运费",prop:"paidArrivepayCarriage",width:"180",fixed:!1,slot:function(e){var t=e.row;return i._setTextColor(t.arrivepayCarriage,t.paidArrivepayCarriage,t.unpaidArrivepayCarriage,t.paidArrivepayCarriage)}},{label:"未结到付运费",prop:"unpaidArrivepayCarriage",width:"150",fixed:!1,slot:function(e){var t=e.row;return i._setTextColor(t.arrivepayCarriage,t.paidArrivepayCarriage,t.unpaidArrivepayCarriage,t.unpaidArrivepayCarriage)}},{label:"实结到付运费",prop:"amountArrivepayCarriage",width:"120",fixed:!1,expand:!0,slot:function(e){return e.row.amountArrivepayCarriage}},{label:"到付油卡",prop:"arrivepayOilCard",width:"150",fixed:!1},{label:"已结到付油卡",prop:"paidArrivepayOilCard",width:"180",fixed:!1,slot:function(e){var t=e.row;return i._setTextColor(t.arrivepayOilCard,t.paidArrivepayOilCard,t.unpaidArrivepayOilCard,t.paidArrivepayOilCard)}},{label:"未结到付油卡",prop:"unpaidArrivepayOilCard",width:"150",fixed:!1,slot:function(e){var t=e.row;return i._setTextColor(t.arrivepayOilCard,t.paidArrivepayOilCard,t.unpaidArrivepayOilCard,t.unpaidArrivepayOilCard)}},{label:"实结到付油卡",prop:"amountArrivepayOilCard",width:"120",fixed:!1,expand:!0,slot:function(e){return e.row.amountArrivepayOilCard}},{label:"到站装卸费",prop:"arriveHandlingFee",width:"150",fixed:!1},{label:"已结到站装卸费",prop:"paidArriveHandlingFee",width:"180",fixed:!1,slot:function(e){var t=e.row;return i._setTextColor(t.arriveHandlingFee,t.paidArriveHandlingFee,t.unpaidArriveHandlingFee,t.paidArriveHandlingFee)}},{label:"未结到站装卸费",prop:"unpaidArriveHandlingFee",width:"150",fixed:!1,slot:function(e){var t=e.row;return i._setTextColor(t.arriveHandlingFee,t.paidArriveHandlingFee,t.unpaidArriveHandlingFee,t.unpaidArriveHandlingFee)}},{label:"实结到站装卸费",prop:"amountArriveHandlingFee",width:"120",fixed:!1,expand:!0,slot:function(e){return e.row.amountArriveHandlingFee}},{label:"到站其他费",prop:"arriveOtherFee",width:"150",fixed:!1},{label:"已结到站其他费",prop:"paidArriveOtherFee",width:"180",fixed:!1,slot:function(e){var t=e.row;return i._setTextColor(t.arriveOtherFee,t.paidArriveOtherFee,t.unpaidArriveOtherFee,t.paidArriveOtherFee)}},{label:"未结到站其他运费",prop:"unpaidArriveOtherFee",width:"150",fixed:!1,slot:function(e){var t=e.row;return i._setTextColor(t.arriveOtherFee,t.paidArriveOtherFee,t.unpaidArriveOtherFee,t.unpaidArriveOtherFee)}},{label:"实结到站其他费",prop:"amountArriveOtherFee",width:"120",fixed:!1,expand:!0,slot:function(e){return e.row.amountArriveOtherFee}},{label:"司机电话",prop:"dirverMobile",width:"120",fixed:!1},{label:"车牌号",prop:"truckIdNumber",width:"120",fixed:!1},{label:"司机姓名",prop:"dirverName",width:"120",fixed:!1},{label:"配载件数",prop:"loadAmountall",width:"120",fixed:!1},{label:"配载重量",prop:"loadWeightall",width:"120",fixed:!1},{label:"配载体积",prop:"loadVolumeall",width:"120",fixed:!1},{label:"备注",prop:"remark",width:"120",fixed:!1}]),e},computed:o()({},Object(c.b)(["otherinfo"]),{getRouteInfo:function(){return JSON.parse(this.$route.query.searchQuery)},totalLeft:function(){return this.leftTable.length},totalRight:function(){return this.rightTable.length}}),mounted:function(){for(var e=50;e--<50;)this.textChangeDanger.push({});this.getList()},methods:{handlePageChangeLeft:function(e){this.searchQuery.currentPage=e.pageNum,this.searchQuery.pageSize=e.pageSize},initLeftParams:function(){this.$set(this.searchQuery.vo,"orgid",this.getRouteInfo.vo.orgid),this.$set(this.searchQuery.vo,"ascriptionOrgid",this.getRouteInfo.vo.ascriptionOrgid),this.$set(this.searchQuery.vo,"sign",this.sign),this.$set(this.searchQuery.vo,"status","NOSETTLEMENT,PARTSETTLEMENT")},getList:function(){var i=this,e=JSON.parse(this.$route.query.selectListBatchNos),t=Object(u.objectMerge2)([],e);this.$route.query.selectListBatchNos?this.isModify=!0:this.isModify=!1,this.leftTable=this.$options.data().leftTable,this.rightTable=this.$options.data().rightTable,this.tableReceiptInfo=this.$options.data().tableReceiptInfo,this.orgLeftTable=this.$options.data().orgLeftTable,this.initLeftParams(),Object(h.i)(this.searchQuery).then(function(e){i.leftTable=n()([],e.list),t.forEach(function(t){i.leftTable.forEach(function(e){t===e.batchNo&&i.rightTable.push(e)})}),i.rightTable.length<1?i.isGoReceipt=!0:i.isGoReceipt=!1,i.rightTable.forEach(function(e){var t=i.leftTable.indexOf(e);-1!==t&&i.leftTable.splice(t,1),e.amountArrivepayCarriage=e.unpaidArrivepayCarriage,e.amountArrivepayOilCard=e.unpaidArrivepayOilCard,e.amountArriveHandlingFee=e.unpaidArriveHandlingFee,e.amountArriveOtherFee=e.unpaidArriveOtherFee}),i.orgLeftTable=Object(u.objectMerge2)([],i.leftTable)}).catch(function(e){i.loading=!1,i._handlerCatchMsg(e)})},changLoadData:function(e,t,i){this.rightTable[e][t]=Number(i);var a="unpaid"+t.substring(6),l=Number(this.rightTable[e][a]),o=this.rightTable[e][t];o!==l?this.$set(this.rightTable[e],t+"lyy",!0):this.$set(this.rightTable[e],t+"lyy",!1),o<0||l<o?(this.isGoReceipt=!0,this.$set(this.rightTable,e,n()(this.rightTable[e],s()({},t,l))),this.$message({type:"warning",message:"【"+this.FEE_TYPE[t]+"】 实结费用不小于0，不大于未结费用。"})):(this.isGoReceipt=!1,this.$set(this.rightTable,e,n()(this.rightTable[e],s()({},t,this.rightTable[e][t])))),console.log(this.rightTable[e][t],o,a,this.rightTable[e][a],this.rightTable[e])},clickDetailsRight:function(e){this.$refs.multipleTableRight.toggleRowSelection(e)},clickDetailsLeft:function(e){this.$refs.multipleTableLeft.toggleRowSelection(e)},getSelectionRight:function(e){this.selectedRight=e},getSelectionLeft:function(e){this.selectedLeft=e},changeTableKey:function(){this.tablekey=Math.random()},doAction:function(e){switch(e){case"goLeft":this.goLeft();break;case"goRight":this.goRight()}},goLeft:function(){var t=this;0===this.selectedRight.length||(this.selectedRight.forEach(function(i,e){i.amountArrivepayCarriage=i.unpaidArrivepayCarriage,i.amountArrivepayOilCard=i.unpaidArrivepayOilCard,i.amountArriveHandlingFee=i.unpaidArriveHandlingFee,i.amountArriveOtherFee=i.unpaidArriveOtherFee,t.rightTable=Object(u.objectMerge2)([],t.rightTable).filter(function(e){return e.batchNo!==i.batchNo}),t.rightTable.push(i),t.leftTable=Object(u.objectMerge2)([],t.leftTable).filter(function(e,t){return e.batchNo!==i.batchNo}),t.orgLeftTable=Object(u.objectMerge2)([],t.orgLeftTable).filter(function(e,t){return e.batchNo!==i.batchNo})}),this.selectedRight=[]),this.rightTable.length<1?this.isGoReceipt=!0:this.isGoReceipt=!1},goRight:function(){var i=this;0===this.selectedLeft.length?this.$message({type:"warning",message:"请在右边表格选择数据"}):(this.selectedLeft.forEach(function(t,e){i.leftTable=Object(u.objectMerge2)([],i.leftTable).filter(function(e){return e.batchNo!==t.batchNo}),i.orgLeftTable=Object(u.objectMerge2)([],i.orgLeftTable).filter(function(e){return e.batchNo!==t.batchNo}),i.leftTable.push(t),i.orgLeftTable.push(t),i.rightTable=i.rightTable.filter(function(e){return e.batchNo!==t.batchNo})}),this.selectedLeft=[]),this.rightTable.length<1?this.isGoReceipt=!0:this.isGoReceipt=!1},selectCurrent:function(e,t){this.addItem(e,t)},dclickAddItem:function(e,t){this.selectedRight=[],this.selectedRight.push(e),this.doAction("goLeft")},dclickMinusItem:function(e,t){this.selectedLeft=[],this.selectedLeft.push(e),this.doAction("goRight")},addItem:function(e,t){this.selectedRight=[],this.selectedRight[t]=e,this.doAction("goLeft")},minusItem:function(e,t){this.selectedLeft=[],this.selectedLeft[t]=e,this.doAction("goRight")},addALLList:function(){this.selectedRight=n()([],this.leftTable),this.doAction("goLeft")},minusAllList:function(){this.selectedLeft=n()([],this.rightTable),this.doAction("goRight")},searchShip:function(e){console.log("searchShip",e)},closeDialog:function(){this.popVisibleDialog=!1},openDialog:function(){this.popVisibleDialog=!0},goReceipt:function(){var n=this;this.tableReceiptInfo=this.$options.data().tableReceiptInfo,this.isGoReceipt||(this.rightTable.forEach(function(e,t){var i={id:e.id,amount:e.amountArrivepayCarriage,feeTypeId:23,dataName:"到付运费"},a={id:e.id,amount:e.amountArrivepayOilCard,feeTypeId:24,dataName:"到付油卡"},l={id:e.id,amount:e.amountArriveHandlingFee,feeTypeId:28,dataName:"到站装卸费"},o={id:e.id,amount:e.amountArriveOtherFee,feeTypeId:29,dataName:"到站其他费"};0<i.amount&&i.amount<=e.unpaidArrivepayCarriage&&n.tableReceiptInfo.push(i),0<a.amount&&a.amount<=e.unpaidArrivepayOilCard&&n.tableReceiptInfo.push(a),0<l.amount&&l.amount<=e.unpaidArriveHandlingFee&&n.tableReceiptInfo.push(l),0<o.amount&&o.amount<=e.unpaidArriveOtherFee&&n.tableReceiptInfo.push(o),i={},a={},l={},o={}}),0<this.tableReceiptInfo.length?this.openDialog():this.$message({type:"warning",message:"暂无可结算项！实结费用不小于0，不大于未结费用。"}))},getSumRight:function(e){return Object(m.getSummaries)(e,["_index|2|单","arrivepayCarriage","paidArrivepayCarriage","unpaidArrivepayCarriage","arrivepayOilCard","paidArrivepayOilCard","unpaidArrivepayOilCard","arriveHandlingFee","paidArriveHandlingFee","unpaidArriveHandlingFee","arriveOtherFee","paidArriveOtherFee","unpaidArriveOtherFee","loadAmountall|","loadWeightall|","loadVolumeall|"])},getSumLeft:function(e){return Object(m.getSummaries)(e,["_index|2|单","arrivepayCarriage","paidArrivepayCarriage","unpaidArrivepayCarriage","amountArrivepayCarriage","arrivepayOilCard","paidArrivepayOilCard","unpaidArrivepayOilCard","amountArrivepayOilCard","arriveHandlingFee","paidArriveHandlingFee","unpaidArriveHandlingFee","amountArriveHandlingFee","arriveOtherFee","paidArriveOtherFee","unpaidArriveOtherFee","amountArriveOtherFee","loadAmountall|","loadWeightall|","loadVolumeall|"])}}}},WhIk:function(e,t,i){"use strict";var a=i("woOf"),n=i.n(a),l=i("Dd8w"),o=i.n(l),r=i("bOdI"),s=i.n(r),c=i("NYxO"),h=i("JW1v"),d=i("IcMT"),u=i("0xDb"),p=i("pAQG"),f=i("u/8D"),b=i("1onU"),g=i("DT23"),m=i("0xDb");t.a={components:{transferTable:d.a,querySelect:p.a,Receipt:f.default,Pager:b.a,currentSearch:g.default},data:function(){var e,i=this;return e={textChangeDanger:[],tablekey:"",loadTruck:"",truckMessage:"",formModel:{}},s()(e,"loadTruck","loadTruckOne"),s()(e,"loading",!1),s()(e,"popVisibleDialog",!1),s()(e,"btnsize","mini"),s()(e,"tableReceiptInfo",[]),s()(e,"selectedRight",[]),s()(e,"selectedLeft",[]),s()(e,"isGoReceipt",!0),s()(e,"leftTable",[]),s()(e,"rightTable",[]),s()(e,"orgLeftTable",[]),s()(e,"orgData",{left:[],right:[]}),s()(e,"isFresh",!1),s()(e,"feeType",8),s()(e,"searchQuery",{currentPage:1,pageSize:100,vo:{}}),s()(e,"tableColumnLeft",[{label:"发车批次",prop:"batchNo",width:"120",fixed:!0},{label:"发车网点",prop:"orgName",width:"120",fixed:!1},{label:"结算状态",prop:"statusName",width:"120",fixed:!1},{label:"发车时间",prop:"departureTime",width:"180",fixed:!1,slot:function(e){return""+Object(u.parseTime)(e.row.departureTime,"{y}-{m}-{d} {h}:{i}:{s}")}},{label:"到达时间",prop:"receivingTime",width:"180",fixed:!1,slot:function(e){return""+Object(u.parseTime)(e.row.receivingTime,"{y}-{m}-{d} {h}:{i}:{s}")}},{label:"整车保险费",prop:"fee",width:"120",fixed:!1},{label:"已结整车保险费",prop:"paidFee",width:"120",fixed:!1,slot:function(e){var t=e.row;return i._setTextColor(t.fee,t.paidFee,t.unpaidFee,t.paidFee)}},{label:"未结整车保险费",prop:"unpaidFee",width:"120",fixed:!1,slot:function(e){var t=e.row;return i._setTextColor(t.fee,t.paidFee,t.unpaidFee,t.unpaidFee)}},{label:"司机电话",prop:"dirverMobile",width:"120",fixed:!1},{label:"车牌号",prop:"truckIdNumber",width:"120",fixed:!1},{label:"司机姓名",prop:"dirverName",width:"120",fixed:!1},{label:"达到网点",prop:"arriveOrgName",width:"120",fixed:!1},{label:"配载件数",prop:"loadAmountall",width:"120",fixed:!1},{label:"配载重量",prop:"loadWeightall",width:"120",fixed:!1},{label:"配载体积",prop:"loadVolumeall",width:"120",fixed:!1},{label:"备注",prop:"remark",width:"120",fixed:!1}]),s()(e,"tableColumnRight",[{label:"发车批次",prop:"batchNo",width:"120",fixed:!0},{label:"结算状态",prop:"statusName",width:"120",fixed:!1},{label:"发车网点",prop:"orgName",width:"120",fixed:!1},{label:"达到网点",prop:"arriveOrgName",width:"120",fixed:!1},{label:"发车时间",prop:"departureTime",width:"180",fixed:!1,slot:function(e){return""+Object(u.parseTime)(e.row.departureTime,"{y}-{m}-{d} {h}:{i}:{s}")}},{label:"整车保险费",prop:"fee",width:"120",fixed:!1},{label:"已结整车保险费",prop:"paidFee",width:"120",fixed:!1,slot:function(e){var t=e.row;return i._setTextColor(t.fee,t.paidFee,t.unpaidFee,t.paidFee)}},{label:"未结整车保险费",prop:"unpaidFee",width:"120",fixed:!1,slot:function(e){var t=e.row;return i._setTextColor(t.fee,t.paidFee,t.unpaidFee,t.unpaidFee)}},{label:"实结整车保险费",prop:"amount",width:"120",fixed:!1,expand:!0,slot:function(e){return e.row.amount}},{label:"司机电话",prop:"dirverMobile",width:"120",fixed:!1},{label:"车牌号",prop:"truckIdNumber",width:"120",fixed:!1},{label:"司机姓名",prop:"dirverName",width:"120",fixed:!1},{label:"配载件数",prop:"loadAmountall",width:"120",fixed:!1},{label:"配载重量",prop:"loadWeightall",width:"120",fixed:!1},{label:"配载体积",prop:"loadVolumeall",width:"120",fixed:!1},{label:"备注",prop:"remark",width:"120",fixed:!1}]),e},computed:o()({},Object(c.b)(["otherinfo"]),{getRouteInfo:function(){return JSON.parse(this.$route.query.searchQuery)},totalLeft:function(){return this.leftTable.length},totalRight:function(){return this.rightTable.length}}),mounted:function(){this.getList()},methods:{handlePageChangeLeft:function(e){this.searchQuery.currentPage=e.pageNum,this.searchQuery.pageSize=e.pageSize},initLeftParams:function(){this.$set(this.searchQuery.vo,"orgid",this.getRouteInfo.vo.orgid),this.$set(this.searchQuery.vo,"ascriptionOrgid",this.getRouteInfo.vo.ascriptionOrgid),this.$set(this.searchQuery.vo,"feeTypeId",this.getRouteInfo.vo.feeTypeId),this.$set(this.searchQuery.vo,"status","NOSETTLEMENT,PARTSETTLEMENT")},getList:function(){var i=this,t=Object(u.objectMerge2)([],JSON.parse(this.$route.query.selectListBatchNos));this.$route.query.selectListBatchNos?this.isModify=!0:this.isModify=!1,this.leftTable=this.$options.data().leftTable,this.rightTable=this.$options.data().rightTable,this.tableReceiptInfo=this.$options.data().tableReceiptInfo,this.orgLeftTable=this.$options.data().orgLeftTable,this.initLeftParams(),Object(h.h)(this.searchQuery).then(function(e){i.leftTable=n()([],e.list),t.forEach(function(t){i.leftTable.forEach(function(e){t===e.batchNo&&i.rightTable.push(e)})}),i.rightTable.length<1?i.isGoReceipt=!0:i.isGoReceipt=!1,i.rightTable.forEach(function(e){var t=i.leftTable.indexOf(e);-1!==t&&i.leftTable.splice(t,1),e.amount=e.unpaidFee}),i.orgLeftTable=Object(u.objectMerge2)([],i.leftTable)}).catch(function(e){i.loading=!1,i._handlerCatchMsg(e)})},changLoadData:function(e,t,i){this.rightTable[e][t]=Number(i);var a="unpaidFee",l=Number(this.rightTable[e][a]),o=this.rightTable[e][t];o!==l?this.$set(this.textChangeDanger,e,!0):this.$set(this.textChangeDanger,e,!1),o<0||l<o?(this.isGoReceipt=!0,this.$message({type:"warning",message:"实结费用不小于0，不大于未结费用。"})):(this.isGoReceipt=!1,this.$set(this.rightTable,e,n()(this.rightTable[e],s()({},t,this.rightTable[e][t])))),console.log(this.rightTable[e][t],o,a,this.rightTable[e][a],this.rightTable[e])},clickDetailsRight:function(e){this.$refs.multipleTableRight.toggleRowSelection(e)},clickDetailsLeft:function(e){this.$refs.multipleTableLeft.toggleRowSelection(e)},getSelectionRight:function(e){this.selectedRight=e},getSelectionLeft:function(e){this.selectedLeft=e},changeTableKey:function(){this.tablekey=Math.random()},doAction:function(e){switch(e){case"goLeft":this.goLeft();break;case"goRight":this.goRight()}},goLeft:function(){var i=this;0===this.selectedRight.length||(this.selectedRight.forEach(function(t,e){t.amount=t.unpaidFee,i.rightTable=Object(u.objectMerge2)([],i.rightTable).filter(function(e){return e.batchNo!==t.batchNo}),i.rightTable.push(t),i.leftTable=Object(u.objectMerge2)([],i.leftTable).filter(function(e){return e.batchNo!==t.batchNo}),i.orgLeftTable=Object(u.objectMerge2)([],i.orgLeftTable).filter(function(e){return e.batchNo!==t.batchNo})}),this.selectedRight=[]),this.rightTable.length<1?this.isGoReceipt=!0:this.isGoReceipt=!1},goRight:function(){var i=this;0===this.selectedLeft.length?this.$message({type:"warning",message:"请在右边表格选择数据"}):(this.selectedLeft.forEach(function(t,e){i.leftTable=Object(u.objectMerge2)([],i.leftTable).filter(function(e){return e.batchNo!==t.batchNo}),i.orgLeftTable=Object(u.objectMerge2)([],i.orgLeftTable).filter(function(e){return e.batchNo!==t.batchNo}),i.leftTable.push(t),i.orgLeftTable.push(t),i.rightTable=Object(u.objectMerge2)([],i.rightTable).filter(function(e){return e.batchNo!==t.batchNo})}),this.selectedLeft=[]),this.rightTable.length<1?this.isGoReceipt=!0:this.isGoReceipt=!1},selectCurrent:function(e,t){this.addItem(e,t)},dclickAddItem:function(e,t){this.selectedRight=[],this.selectedRight.push(e),this.doAction("goLeft")},dclickMinusItem:function(e,t){this.selectedLeft=[],this.selectedLeft.push(e),this.doAction("goRight")},addItem:function(e,t){this.selectedRight=[],this.selectedRight[t]=e,this.doAction("goLeft")},minusItem:function(e,t){this.selectedLeft=[],this.selectedLeft[t]=e,this.doAction("goRight")},addALLList:function(){this.selectedRight=n()([],this.leftTable),this.doAction("goLeft")},minusAllList:function(){this.selectedLeft=n()([],this.rightTable),this.doAction("goRight")},searchShip:function(e){console.log("searchShip",e)},closeDialog:function(){this.popVisibleDialog=!1},openDialog:function(){this.popVisibleDialog=!0},goReceipt:function(){var a=this,i=0;if(1<this.rightTable.length&&Object(u.objectMerge2)([],this.rightTable).forEach(function(t){Object(u.objectMerge2)([],a.rightTable).forEach(function(e){t.ascriptionOrgid!==e.ascriptionOrgid&&i++})}),0<i)return i=0,this.$message({type:"warning",message:"不能同时结算两个网点"}),!1;this.tableReceiptInfo=[],this.isGoReceipt||(this.rightTable.forEach(function(e,t){var i={id:e.id,amount:e.amount,feeTypeId:e.feeTypeId};0<i.amount&&i.amount<=e.unpaidFee&&a.tableReceiptInfo.push(i),i={}}),0<this.tableReceiptInfo.length?this.openDialog():this.$message({type:"warning",message:"暂无可结算项！实结费用不小于0，不大于未结费用。"}))},getSumRight:function(e){return Object(m.getSummaries)(e,["_index|2|单","fee","unpaidFee","paidFee","loadAmountall|","loadWeightall|","loadVolumeall|"])},getSumLeft:function(e){return Object(m.getSummaries)(e,["_index|2|单","fee","unpaidFee","paidFee","loadAmountall|","amount","loadWeightall|","loadVolumeall|"])}}}},WrCW:function(e,t,i){"use strict";var a={render:function(){var a=this,e=a.$createElement,l=a._self._c||e;return l("div",{staticClass:"accountsLoad_table"},[l("div",{staticClass:"transferTable_search clearfix"},[l("currentSearch",{attrs:{info:a.orgLeftTable},on:{change:a.selectCurrent}})],1),a._v(" "),l("transferTable",{staticStyle:{height:"calc(100% - 40px)",padding:"10px"}},[l("div",{attrs:{slot:"btnsBox"},slot:"btnsBox"},[l("el-button",{attrs:{type:a.isGoReceipt?"info":"success",size:"mini",icon:"el-icon-sort",disabled:a.isGoReceipt},on:{click:a.goReceipt}},[a._v("回扣结算")])],1),a._v(" "),l("div",{staticClass:"tableHeadItemBtn",staticStyle:{height:"100%"},attrs:{slot:"tableLeft"},slot:"tableLeft"},[l("el-button",{staticClass:"tableAllBtn",attrs:{size:"mini"},on:{click:a.addALLList}}),a._v(" "),l("el-table",{key:a.tablekey,ref:"multipleTableRight",attrs:{data:a.leftTable,border:"","tooltip-effect":"dark",triped:"",height:"100%","summary-method":a.getSumRight,"default-sort":{prop:"id",order:"ascending"},"show-overflow-tooltip":!0,"show-summary":!0},on:{"row-click":a.clickDetailsRight,"selection-change":a.getSelectionRight,"row-dblclick":a.dclickAddItem}},[l("el-table-column",{attrs:{fixed:"",width:"50",label:"序号"},scopedSlots:a._u([{key:"default",fn:function(e){return[a._v("\n            "+a._s(e.$index+1)+"\n          ")]}}])}),a._v(" "),l("el-table-column",{attrs:{fixed:"",width:"50"},scopedSlots:a._u([{key:"default",fn:function(t){return[l("el-button",{staticClass:"tableItemBtn",attrs:{size:"mini"},on:{click:function(e){a.addItem(t.row,t.$index)}}})]}}])}),a._v(" "),a._l(a.tableColumnLeft,function(i){return[i.slot?l("el-table-column",{key:i.id,attrs:{fixed:i.fixed,sortable:"",label:i.label,width:i.width,prop:i.prop},scopedSlots:a._u([{key:"default",fn:function(t){return[i.expand?l("div",[l("el-input",{class:{textChangeDanger:a.textChangeDanger[t.$index]},attrs:{type:"number",size:a.btnsize},on:{change:function(e){return a.changLoadData(t.$index,i.prop,e)}},nativeOn:{dblclick:function(e){e.stopPropagation(),e.preventDefault()}},model:{value:i.slot(t),callback:function(e){a.$set(i,"slot(scope)",a._n(e))},expression:"column.slot(scope)"}})],1):l("div",[i.click?l("span",{staticClass:"clickitem",domProps:{innerHTML:a._s(i.slot(t))},on:{click:function(e){e.stopPropagation(),i.click(t)}}}):l("span",{domProps:{innerHTML:a._s(i.slot(t))}})])]}}])}):l("el-table-column",{key:i.id,attrs:{fixed:i.fixed,sortable:"",label:i.label,prop:i.prop,width:i.width}})]})],2)],1),a._v(" "),l("div",{staticClass:"tableHeadItemBtn",attrs:{slot:"tableRight"},slot:"tableRight"},[l("el-button",{staticClass:"tableAllBtnMinus",attrs:{size:"mini"},on:{click:a.minusAllList}}),a._v(" "),l("el-table",{key:a.tablekey,ref:"multipleTableLeft",staticStyle:{height:"100%"},attrs:{data:a.rightTable,border:"","tooltip-effect":"dark",triped:"",height:"100%","summary-method":a.getSumLeft,"default-sort":{prop:"id",order:"ascending"},"show-summary":!0},on:{"row-click":a.clickDetailsLeft,"selection-change":a.getSelectionLeft,"row-dblclick":a.dclickMinusItem}},[l("el-table-column",{attrs:{fixed:"",width:"50",label:"序号"},scopedSlots:a._u([{key:"default",fn:function(e){return[a._v("\n            "+a._s(e.$index+1)+"\n          ")]}}])}),a._v(" "),l("el-table-column",{attrs:{fixed:"",width:"50"},scopedSlots:a._u([{key:"default",fn:function(t){return[l("el-button",{staticClass:"tableItemBtnMinus",attrs:{size:"mini"},on:{click:function(e){a.minusItem(t.row,t.$index)}}})]}}])}),a._v(" "),a._l(a.tableColumnRight,function(i){return[i.slot?l("el-table-column",{key:i.id,attrs:{fixed:i.fixed,sortable:"",label:i.label,width:i.width,prop:i.prop},scopedSlots:a._u([{key:"default",fn:function(t){return[i.expand?l("div",[l("el-input",{class:{textChangeDanger:a.textChangeDanger[t.$index]},attrs:{type:"number",size:a.btnsize},on:{change:function(e){return a.changLoadData(t.$index,i.prop,e)}},nativeOn:{dblclick:function(e){e.stopPropagation(),e.preventDefault()},click:function(e){e.stopPropagation(),e.preventDefault()}},model:{value:i.slot(t),callback:function(e){a.$set(i,"slot(scope)",a._n(e))},expression:"column.slot(scope)"}})],1):l("div",[i.click?l("span",{staticClass:"clickitem",domProps:{innerHTML:a._s(i.slot(t))},on:{click:function(e){e.stopPropagation(),i.click(t)}}}):l("span",{domProps:{innerHTML:a._s(i.slot(t))}})])]}}])}):l("el-table-column",{key:i.id,attrs:{fixed:i.fixed,sortable:"",label:i.label,prop:i.prop,width:i.width}})]})],2)],1)]),a._v(" "),l("Receipt",{attrs:{popVisible:a.popVisibleDialog,info:a.tableReceiptInfo},on:{close:a.closeDialog}})],1)},staticRenderFns:[]};t.a=a},Y1Ji:function(e,t,i){"use strict";var a=i("bOdI"),o=i.n(a),l=i("woOf"),n=i.n(l),r=i("Dd8w"),s=i.n(r),c=i("NYxO"),h=i("JW1v"),d=i("IcMT"),u=i("0xDb"),p=i("pAQG"),f=i("i5L8"),b=i("1onU"),g=i("DT23"),m=i("0xDb");t.a={components:{transferTable:d.a,querySelect:p.a,Receipt:f.default,Pager:b.a,currentSearch:g.default},data:function(){var i=this;return{textChangeDanger:[],tablekey:"",truckMessage:"",formModel:{},loading:!1,popVisibleDialog:!1,btnsize:"mini",tableReceiptInfo:[],selectedRight:[],selectedLeft:[],isGoReceipt:!0,orgLeftTable:[],leftTable:[],rightTable:[],orgData:{left:[],right:[]},isFresh:!1,feeType:11,searchQuery:{currentPage:1,pageSize:100,vo:{}},tableColumnLeft:[{label:"运单号",prop:"shipSn",width:"120",fixed:!0},{label:"开单网点",prop:"shipFromOrgName",width:"120",fixed:!1},{label:"结算状态",prop:"statusName",width:"120",fixed:!1},{label:"签收状态",prop:"signStatusName",width:"100",fixed:!1},{label:"发货人",prop:"senderCustomerName",width:"120",fixed:!1},{label:"收货人",prop:"receiverCustomerName",width:"120",fixed:!1},{label:"异动费用",prop:"fee",width:"120",fixed:!1},{label:"已结异动费用",prop:"closeFee",width:"120",fixed:!1,slot:function(e){var t=e.row;return i._setTextColor(t.fee,t.closeFee,t.unpaidFee,t.closeFee)}},{label:"未结异动费用",prop:"unpaidFee",width:"120",fixed:!1,slot:function(e){var t=e.row;return i._setTextColor(t.fee,t.closeFee,t.unpaidFee,t.unpaidFee)}},{label:"发货方",prop:"senderUnit",width:"120",fixed:!1},{label:"收货方",prop:"receiverUnit",width:"120",fixed:!1},{label:"货号",prop:"shipGoodsSn",width:"120",fixed:!1},{label:"货品名",prop:"cargoName",width:"120",fixed:!1},{label:"开单时间",prop:"createTime",width:"120",fixed:!1,slot:function(e){return""+Object(u.parseTime)(e.row.createTime,"{y}-{m}-{d} {h}:{i}:{s}")}},{label:"出发城市",prop:"shipFromCityName",width:"120",fixed:!1},{label:"到达城市",prop:"shipToCityName",width:"120",fixed:!1},{label:"件数",prop:"cargoAmount",width:"120",fixed:!1},{label:"重量",prop:"cargoWeight",width:"120",fixed:!1},{label:"体积",prop:"cargoVolume",width:"120",fixed:!1},{label:"运单备注",prop:"shipRemarks",width:"120",fixed:!1}],tableColumnRight:[{label:"运单号",prop:"shipSn",width:"120",fixed:!0},{label:"开单网点",prop:"shipFromOrgName",width:"120",fixed:!1},{label:"结算状态",prop:"statusName",width:"120",fixed:!1},{label:"签收状态",prop:"signStatusName",width:"100",fixed:!1},{label:"发货人",prop:"senderCustomerName",width:"120",fixed:!1},{label:"收货人",prop:"receiverCustomerName",width:"120",fixed:!1},{label:"异动费用",prop:"fee",width:"120",fixed:!1},{label:"已结异动费用",prop:"closeFee",width:"120",fixed:!1,slot:function(e){var t=e.row;return i._setTextColor(t.fee,t.closeFee,t.unpaidFee,t.closeFee)}},{label:"未结异动费用",prop:"unpaidFee",width:"120",fixed:!1,slot:function(e){var t=e.row;return i._setTextColor(t.fee,t.closeFee,t.unpaidFee,t.unpaidFee)}},{label:"实结异动费用",prop:"inputChangeFee",width:"120",fixed:!1,expand:!0,slot:function(e){return e.row.inputChangeFee}},{label:"发货方",prop:"senderUnit",width:"120",fixed:!1},{label:"收货方",prop:"receiverUnit",width:"120",fixed:!1},{label:"货号",prop:"shipGoodsSn",width:"120",fixed:!1},{label:"货品名",prop:"cargoName",width:"120",fixed:!1},{label:"开单时间",prop:"createTime",width:"180",fixed:!1,slot:function(e){return""+Object(u.parseTime)(e.row.createTime,"{y}-{m}-{d} {h}:{i}:{s}")}},{label:"出发城市",prop:"shipFromCityName",width:"120",fixed:!1},{label:"到达城市",prop:"shipToCityName",width:"120",fixed:!1},{label:"件数",prop:"cargoAmount",width:"120",fixed:!1},{label:"重量",prop:"cargoWeight",width:"120",fixed:!1},{label:"体积",prop:"cargoVolume",width:"120",fixed:!1},{label:"运单备注",prop:"shipRemarks",width:"120",fixed:!1}]}},computed:s()({},Object(c.b)(["otherinfo"]),{getRouteInfo:function(){return JSON.parse(this.$route.query.searchQuery)},totalLeft:function(){return this.leftTable.length},totalRight:function(){return this.rightTable.length}}),mounted:function(){this.getList()},methods:{handlePageChangeLeft:function(e){this.searchQuery.currentPage=e.pageNum,this.searchQuery.pageSize=e.pageSize},initLeftParams:function(){this.searchQuery=n()({},this.getRouteInfo),this.$set(this.searchQuery.vo,"status","NOSETTLEMENT,PARTSETTLEMENT")},getList:function(){var i=this,e=this.$route.query.selectListShipSns,t=n()([],e);this.$route.query.selectListShipSns?this.isModify=!0:this.isModify=!1,this.leftTable=this.$options.data().leftTable,this.rightTable=this.$options.data().rightTable,this.tableReceiptInfo=this.$options.data().tableReceiptInfo,this.orgLeftTable=this.$options.data().orgLeftTable,this.initLeftParams(),Object(h.d)(this.searchQuery).then(function(e){i.leftTable=n()([],e.list),t.forEach(function(t){i.leftTable.forEach(function(e){t===e.shipSn&&i.rightTable.push(e)})}),i.rightTable.length<1?i.isGoReceipt=!0:i.isGoReceipt=!1,i.rightTable.forEach(function(e){var t=i.leftTable.indexOf(e);-1!==t&&i.leftTable.splice(t,1),e.inputChangeFee=e.unpaidFee}),i.orgLeftTable=n()([],i.leftTable)}).catch(function(e){i.loading=!1,i._handlerCatchMsg(e)})},changLoadData:function(e,t,i){this.rightTable[e][t]=Number(i);var a=Number(this.rightTable[e].unpaidFee),l=this.rightTable[e][t];l!==a?this.$set(this.textChangeDanger,e,!0):this.$set(this.textChangeDanger,e,!1),l<0||a<l?this.$message({type:"warning",message:"实结费用不小于0，不大于未结费用。"}):this.$set(this.rightTable,e,n()(this.rightTable[e],o()({},t,this.rightTable[e][t])))},clickDetailsRight:function(e){this.$refs.multipleTableRight.toggleRowSelection(e)},clickDetailsLeft:function(e){this.$refs.multipleTableLeft.toggleRowSelection(e)},getSelectionRight:function(e){this.selectedRight=e},getSelectionLeft:function(e){this.selectedLeft=e},changeTableKey:function(){this.tablekey=Math.random()},doAction:function(e){switch(e){case"goLeft":this.goLeft();break;case"goRight":this.goRight()}},goLeft:function(){var i=this;0===this.selectedRight.length||(this.selectedRight.forEach(function(t,e){t.inputChangeFee=t.unpaidFee,i.rightTable=Object(u.objectMerge2)([],i.rightTable).filter(function(e){return e.shipSn!==t.shipSn}),i.rightTable.push(t),i.leftTable=Object(u.objectMerge2)([],i.leftTable).filter(function(e){return e.shipSn!==t.shipSn}),i.orgLeftTable=Object(u.objectMerge2)([],i.orgLeftTable).filter(function(e){return e.shipSn!==t.shipSn})}),this.selectedRight=[]),this.rightTable.length<1?this.isGoReceipt=!0:this.isGoReceipt=!1},goRight:function(){var i=this;0===this.selectedLeft.length?this.$message({type:"warning",message:"请在右边表格选择数据"}):(this.selectedLeft.forEach(function(t,e){i.leftTable=Object(u.objectMerge2)([],i.leftTable).filter(function(e){return e.shipSn!==t.shipSn}),i.orgLeftTable=Object(u.objectMerge2)([],i.orgLeftTable).filter(function(e){return e.shipSn!==t.shipSn}),i.leftTable.push(t),i.orgLeftTable.push(t),i.rightTable=Object(u.objectMerge2)([],i.rightTable).filter(function(e){return e.shipSn!==t.shipSn})}),this.selectedLeft=[]),this.rightTable.length<1?this.isGoReceipt=!0:this.isGoReceipt=!1},dclickAddItem:function(e,t){this.selectedRight=[],this.selectedRight.push(e),this.doAction("goLeft")},dclickMinusItem:function(e,t){this.selectedLeft=[],this.selectedLeft.push(e),this.doAction("goRight")},selectCurrent:function(e,t){this.addItem(e,t)},addItem:function(e,t){this.selectedRight=[],this.selectedRight[t]=e,this.doAction("goLeft")},minusItem:function(e,t){this.selectedLeft=[],this.selectedLeft[t]=e,this.doAction("goRight")},addALLList:function(){this.selectedRight=n()([],this.leftTable),this.doAction("goLeft")},minusAllList:function(){this.selectedLeft=n()([],this.rightTable),this.doAction("goRight")},searchShip:function(e){console.log("searchShip",e)},closeDialog:function(){this.popVisibleDialog=!1},openDialog:function(){this.popVisibleDialog=!0},goReceipt:function(){var a=this;this.tableReceiptInfo=[],this.isGoReceipt||(this.rightTable.forEach(function(e,t){var i={shipId:e.shipId,amount:e.inputChangeFee,inputChangeFee:e.inputChangeFee,shipSn:e.shipSn,dataName:"异动费用"};0<i.amount&&i.amount<=e.unpaidFee&&a.tableReceiptInfo.push(i),i={}}),0<this.tableReceiptInfo.length?this.openDialog():this.$message({type:"warning",message:"暂无可结算项！实结费用不小于0，不大于未结费用。"}))},getSumRight:function(e){return Object(m.getSummaries)(e,["_index|2|单","fee","unpaidFee","closeFee","cargoAmount|","cargoWeight|","cargoVolume|"])},getSumLeft:function(e){return Object(m.getSummaries)(e,["_index|2|单","fee","unpaidFee","closeFee","inputChangeFee","cargoAmount|","cargoWeight|","cargoVolume|"])}}}},at5C:function(e,t,i){"use strict";var a=i("woOf"),n=i.n(a),l=i("Dd8w"),o=i.n(l),r=i("bOdI"),s=i.n(r),c=i("NYxO"),h=i("JW1v"),d=i("IcMT"),u=i("0xDb"),p=i("pAQG"),f=i("u/8D"),b=i("1onU"),g=i("DT23"),m=i("0xDb");t.a={components:{transferTable:d.a,querySelect:p.a,Receipt:f.default,Pager:b.a,currentSearch:g.default},data:function(){var e,i=this;return e={textChangeDanger:[],tablekey:"",loadTruck:"",truckMessage:"",formModel:{}},s()(e,"loadTruck","loadTruckOne"),s()(e,"loading",!1),s()(e,"popVisibleDialog",!1),s()(e,"btnsize","mini"),s()(e,"tableReceiptInfo",[]),s()(e,"selectedRight",[]),s()(e,"selectedLeft",[]),s()(e,"orgLeftTable",[]),s()(e,"isGoReceipt",!0),s()(e,"leftTable",[]),s()(e,"rightTable",[]),s()(e,"orgData",{left:[],right:[]}),s()(e,"isFresh",!1),s()(e,"feeType",8),s()(e,"searchQuery",{currentPage:1,pageSize:100,vo:{}}),s()(e,"tableColumnLeft",[{label:"发车批次",prop:"batchNo",width:"120",fixed:!0},{label:"发车网点",prop:"orgName",width:"120",fixed:!1},{label:"达到网点",prop:"arriveOrgName",width:"120",fixed:!1},{label:"结算状态",prop:"statusName",width:"120",fixed:!1},{label:"发车时间",prop:"departureTime",width:"180",fixed:!1,slot:function(e){return""+Object(u.parseTime)(e.row.departureTime,"{y}-{m}-{d} {h}:{i}:{s}")}},{label:"到达时间",prop:"receivingTime",width:"180",fixed:!1,slot:function(e){return""+Object(u.parseTime)(e.row.receivingTime,"{y}-{m}-{d} {h}:{i}:{s}")}},{label:"到站其他费",prop:"fee",width:"120",fixed:!1},{label:"已结到站其他费",prop:"paidFee",width:"120",fixed:!1,slot:function(e){var t=e.row;return i._setTextColor(t.fee,t.paidFee,t.unpaidFee,t.paidFee)}},{label:"未结到站其他费",prop:"unpaidFee",width:"120",fixed:!1,slot:function(e){var t=e.row;return i._setTextColor(t.fee,t.paidFee,t.unpaidFee,t.unpaidFee)}},{label:"司机电话",prop:"dirverMobile",width:"120",fixed:!1},{label:"车牌号",prop:"truckIdNumber",width:"120",fixed:!1},{label:"司机姓名",prop:"dirverName",width:"120",fixed:!1},{label:"配载件数",prop:"loadAmountall",width:"120",fixed:!1},{label:"配载重量",prop:"loadWeightall",width:"120",fixed:!1},{label:"配载体积",prop:"loadVolumeall",width:"120",fixed:!1},{label:"备注",prop:"remark",width:"120",fixed:!1}]),s()(e,"tableColumnRight",[{label:"发车批次",prop:"batchNo",width:"120",fixed:!0},{label:"结算状态",prop:"statusName",width:"120",fixed:!1},{label:"发车网点",prop:"orgName",width:"120",fixed:!1},{label:"达到网点",prop:"arriveOrgName",width:"120",fixed:!1},{label:"发车时间",prop:"departureTime",width:"180",fixed:!1,slot:function(e){return""+Object(u.parseTime)(e.row.departureTime,"{y}-{m}-{d} {h}:{i}:{s}")}},{label:"到站其他费",prop:"fee",width:"120",fixed:!1},{label:"已结到站其他费",prop:"paidFee",width:"120",fixed:!1,slot:function(e){var t=e.row;return i._setTextColor(t.fee,t.paidFee,t.unpaidFee,t.paidFee)}},{label:"未结到站其他费",prop:"unpaidFee",width:"120",fixed:!1,slot:function(e){var t=e.row;return i._setTextColor(t.fee,t.paidFee,t.unpaidFee,t.unpaidFee)}},{label:"实结到站其他费",prop:"amount",width:"120",fixed:!1,expand:!0,slot:function(e){return e.row.amount}},{label:"司机电话",prop:"dirverMobile",width:"120",fixed:!1},{label:"车牌号",prop:"truckIdNumber",width:"120",fixed:!1},{label:"司机姓名",prop:"dirverName",width:"120",fixed:!1},{label:"配载件数",prop:"loadAmountall",width:"120",fixed:!1},{label:"配载重量",prop:"loadWeightall",width:"120",fixed:!1},{label:"配载体积",prop:"loadVolumeall",width:"120",fixed:!1},{label:"备注",prop:"remark",width:"120",fixed:!1}]),e},computed:o()({},Object(c.b)(["otherinfo"]),{getRouteInfo:function(){return JSON.parse(this.$route.query.searchQuery)},totalLeft:function(){return this.leftTable.length},totalRight:function(){return this.rightTable.length}}),mounted:function(){this.getList()},methods:{handlePageChangeLeft:function(e){this.searchQuery.currentPage=e.pageNum,this.searchQuery.pageSize=e.pageSize},initLeftParams:function(){console.log(this.getRouteInfo.vo),this.$set(this.searchQuery.vo,"orgid",this.getRouteInfo.vo.orgid),this.$set(this.searchQuery.vo,"ascriptionOrgid",this.getRouteInfo.vo.ascriptionOrgid),this.$set(this.searchQuery.vo,"feeTypeId",this.getRouteInfo.vo.feeTypeId),this.$set(this.searchQuery.vo,"status","NOSETTLEMENT,PARTSETTLEMENT")},getList:function(){var i=this,e=JSON.parse(this.$route.query.selectListBatchNos),t=Object(u.objectMerge2)([],e);this.$route.query.selectListBatchNos?this.isModify=!0:this.isModify=!1,this.leftTable=this.$options.data().leftTable,this.rightTable=this.$options.data().rightTable,this.tableReceiptInfo=this.$options.data().tableReceiptInfo,this.orgLeftTable=this.$options.data().orgLeftTable,this.initLeftParams(),Object(h.h)(this.searchQuery).then(function(e){i.leftTable=n()([],e.list),t.forEach(function(t){i.leftTable.forEach(function(e){t===e.batchNo&&i.rightTable.push(e)})}),i.rightTable.length<1?i.isGoReceipt=!0:i.isGoReceipt=!1,i.rightTable.forEach(function(e){var t=i.leftTable.indexOf(e);-1!==t&&i.leftTable.splice(t,1),e.amount=e.unpaidFee}),i.orgLeftTable=Object(u.objectMerge2)([],i.leftTable)}).catch(function(e){i.loading=!1,i._handlerCatchMsg(e)})},changLoadData:function(e,t,i){this.rightTable[e][t]=Number(i);var a="unpaidFee",l=Number(this.rightTable[e][a]),o=this.rightTable[e][t];o!==l?this.$set(this.textChangeDanger,e,!0):this.$set(this.textChangeDanger,e,!1),o<0||l<o?(this.isGoReceipt=!0,this.$message({type:"warning",message:"实结费用不小于0，不大于未结费用。"})):(this.isGoReceipt=!1,this.$set(this.rightTable,e,n()(this.rightTable[e],s()({},t,this.rightTable[e][t])))),console.log(this.rightTable[e][t],o,a,this.rightTable[e][a],this.rightTable[e])},clickDetailsRight:function(e){this.$refs.multipleTableRight.toggleRowSelection(e)},clickDetailsLeft:function(e){this.$refs.multipleTableLeft.toggleRowSelection(e)},getSelectionRight:function(e){this.selectedRight=e},getSelectionLeft:function(e){this.selectedLeft=e},changeTableKey:function(){this.tablekey=Math.random()},doAction:function(e){switch(e){case"goLeft":this.goLeft();break;case"goRight":this.goRight()}},goLeft:function(){var i=this;0===this.selectedRight.length||(this.selectedRight.forEach(function(t,e){t.amount=t.unpaidFee,i.rightTable=Object(u.objectMerge2)([],i.rightTable).filter(function(e){return e.batchNo!==t.batchNo}),i.rightTable.push(t),i.leftTable=Object(u.objectMerge2)([],i.leftTable).filter(function(e){return e.batchNo!==t.batchNo}),i.orgLeftTable=Object(u.objectMerge2)([],i.orgLeftTable).filter(function(e){return e.batchNo!==t.batchNo})}),this.selectedRight=[]),this.rightTable.length<1?this.isGoReceipt=!0:this.isGoReceipt=!1},goRight:function(){var i=this;0===this.selectedLeft.length?this.$message({type:"warning",message:"请在右边表格选择数据"}):(this.selectedLeft.forEach(function(t,e){i.leftTable=Object(u.objectMerge2)([],i.leftTable).filter(function(e){return e.batchNo!==t.batchNo}),i.orgLeftTable=Object(u.objectMerge2)([],i.orgLeftTable).filter(function(e){return e.batchNo!==t.batchNo}),i.leftTable.push(t),i.orgLeftTable.push(t),i.rightTable=Object(u.objectMerge2)([],i.rightTable).filter(function(e){return e.batchNo!==t.batchNo})}),this.selectedLeft=[]),this.rightTable.length<1?this.isGoReceipt=!0:this.isGoReceipt=!1},selectCurrent:function(e,t){this.addItem(e,t)},dclickAddItem:function(e,t){this.selectedRight=[],this.selectedRight.push(e),this.doAction("goLeft")},dclickMinusItem:function(e,t){this.selectedLeft=[],this.selectedLeft.push(e),this.doAction("goRight")},addItem:function(e,t){this.selectedRight=[],this.selectedRight[t]=e,this.doAction("goLeft")},minusItem:function(e,t){this.selectedLeft=[],this.selectedLeft[t]=e,this.doAction("goRight")},addALLList:function(){this.selectedRight=n()([],this.leftTable),this.doAction("goLeft")},minusAllList:function(){this.selectedLeft=n()([],this.rightTable),this.doAction("goRight")},searchShip:function(e){console.log("searchShip",e)},closeDialog:function(){this.popVisibleDialog=!1},openDialog:function(){this.popVisibleDialog=!0},goReceipt:function(){var a=this;this.tableReceiptInfo=[],this.isGoReceipt||(this.rightTable.forEach(function(e,t){var i={id:e.id,amount:e.amount,feeTypeId:e.feeTypeId};0<i.amount&&i.amount<=e.unpaidFee&&a.tableReceiptInfo.push(i),i={}}),0<this.tableReceiptInfo.length?this.openDialog():this.$message({type:"warning",message:"暂无可结算项！实结费用不小于0，不大于未结费用。"}))},getSumRight:function(e){return Object(m.getSummaries)(e,["_index|2|单","fee","unpaidFee","paidFee","loadAmountall|","loadWeightall|","loadVolumeall|"])},getSumLeft:function(e){return Object(m.getSummaries)(e,["_index|2|单","fee","unpaidFee","paidFee","loadAmountall|","amount","loadWeightall|","loadVolumeall|"])}}}},bOdI:function(e,t,i){"use strict";t.__esModule=!0;var a,l=i("C4MV"),o=(a=l)&&a.__esModule?a:{default:a};t.default=function(e,t,i){return t in e?(0,o.default)(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}},bUT0:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("DTdt"),l=i("5/nr"),o=i("VU/8")(a.a,l.a,null,null,null);t.default=o.exports},dBnW:function(e,t,i){"use strict";var a=i("bOdI"),n=i.n(a),l=i("woOf"),r=i.n(l),o=i("Dd8w"),s=i.n(o),c=i("NYxO"),h=i("JW1v"),d=i("IcMT"),u=i("0xDb"),p=i("pAQG"),f=i("i5L8"),b=i("1onU"),g=i("DT23"),m=i("0xDb");t.a={components:{transferTable:d.a,querySelect:p.a,Receipt:f.default,Pager:b.a,currentSearch:g.default},data:function(){var i=this;return{textChangeDanger:[],currentSearch:"",tablekey:"",truckMessage:"",formModel:{},loading:!1,popVisibleDialog:!1,btnsize:"mini",tableReceiptInfo:[],orgLeftTable:[],selectedRight:[],selectedLeft:[],isGoReceipt:!0,leftTable:[],rightTable:[],orgData:{left:[],right:[]},feeType:8,searchQuery:{currentPage:1,pageSize:100,vo:{}},tableColumnLeft:[{label:"运单号",prop:"shipSn",width:"120",fixed:!0},{label:"开单网点",prop:"shipFromOrgName",width:"120",fixed:!1},{label:"结算状态",prop:"statusName",width:"120",fixed:!1},{label:"签收状态",prop:"signStatusName",width:"100",fixed:!1},{label:"发货人",prop:"senderCustomerName",width:"120",fixed:!1},{label:"收货人",prop:"receiverCustomerName",width:"120",fixed:!1},{label:"回扣",prop:"fee",width:"120",fixed:!1},{label:"已结回扣",prop:"closeFee",width:"100",fixed:!1,slot:function(e){var t=e.row;return i._setTextColor(t.fee,t.closeFee,t.unpaidFee,t.closeFee)}},{label:"未结回扣",prop:"unpaidFee",width:"100",fixed:!1,slot:function(e){var t=e.row;return i._setTextColor(t.fee,t.closeFee,t.unpaidFee,t.unpaidFee)}},{label:"发货方",prop:"senderUnit",width:"120",fixed:!1},{label:"收货方",prop:"receiverUnit",width:"120",fixed:!1},{label:"货号",prop:"shipGoodsSn",width:"120",fixed:!1},{label:"货品名",prop:"cargoName",width:"120",fixed:!1},{label:"开单时间",prop:"createTime",width:"120",fixed:!1,slot:function(e){return""+Object(u.parseTime)(e.row.createTime,"{y}-{m}-{d} {h}:{i}:{s}")}},{label:"出发城市",prop:"shipFromCityName",width:"120",fixed:!1},{label:"到达城市",prop:"shipToCityName",width:"120",fixed:!1},{label:"件数",prop:"cargoAmount",width:"120",fixed:!1},{label:"重量",prop:"cargoWeight",width:"120",fixed:!1},{label:"体积",prop:"cargoVolume",width:"120",fixed:!1},{label:"运单备注",prop:"shipRemarks",width:"120",fixed:!1}],tableColumnRight:[{label:"运单号",prop:"shipSn",width:"120",fixed:!0},{label:"开单网点",prop:"shipFromOrgName",width:"120",fixed:!1},{label:"结算状态",prop:"statusName",width:"120",fixed:!1},{label:"签收状态",prop:"signStatusName",width:"100",fixed:!1},{label:"发货人",prop:"senderCustomerName",width:"120",fixed:!1},{label:"收货人",prop:"receiverCustomerName",width:"120",fixed:!1},{label:"回扣",prop:"fee",width:"120",fixed:!1},{label:"已结回扣",prop:"closeFee",width:"100",fixed:!1,slot:function(e){var t=e.row;return i._setTextColor(t.fee,t.closeFee,t.unpaidFee,t.closeFee)}},{label:"未结回扣",prop:"unpaidFee",width:"100",fixed:!1,slot:function(e){var t=e.row;return i._setTextColor(t.fee,t.closeFee,t.unpaidFee,t.unpaidFee)}},{label:"实结回扣",prop:"inputBrokerageFee",width:"120",fixed:!1,expand:!0,slot:function(e){return e.row.inputBrokerageFee}},{label:"发货方",prop:"senderUnit",width:"120",fixed:!1},{label:"收货方",prop:"receiverUnit",width:"120",fixed:!1},{label:"货号",prop:"shipGoodsSn",width:"120",fixed:!1},{label:"货品名",prop:"cargoName",width:"120",fixed:!1},{label:"开单时间",prop:"createTime",width:"180",fixed:!1,slot:function(e){return""+Object(u.parseTime)(e.row.createTime,"{y}-{m}-{d} {h}:{i}:{s}")}},{label:"出发城市",prop:"shipFromCityName",width:"120",fixed:!1},{label:"到达城市",prop:"shipToCityName",width:"120",fixed:!1},{label:"件数",prop:"cargoAmount",width:"120",fixed:!1},{label:"重量",prop:"cargoWeight",width:"120",fixed:!1},{label:"体积",prop:"cargoVolume",width:"120",fixed:!1},{label:"运单备注",prop:"shipRemarks",width:"120",fixed:!1}]}},computed:s()({},Object(c.b)(["otherinfo"]),{getRouteInfo:function(){return JSON.parse(this.$route.query.searchQuery)},totalLeft:function(){return this.leftTable.length},totalRight:function(){return this.rightTable.length}}),mounted:function(){this.getList()},methods:{handlePageChangeLeft:function(e){this.searchQuery.currentPage=e.pageNum,this.searchQuery.pageSize=e.pageSize},initLeftParams:function(){this.searchQuery=r()({},this.getRouteInfo),this.$set(this.searchQuery.vo,"feeType",this.feeType),this.$set(this.searchQuery.vo,"status","NOSETTLEMENT,PARTSETTLEMENT")},getList:function(){var i=this,e=JSON.parse(this.$route.query.selectListShipSns),t=r()([],e);this.$route.query.selectListShipSns?this.isModify=!0:this.isModify=!1,this.leftTable=this.$options.data().leftTable,this.rightTable=this.$options.data().rightTable,this.tableReceiptInfo=this.$options.data().tableReceiptInfo,this.orgLeftTable=this.$options.data().orgLeftTable,this.initLeftParams(),Object(h.e)(this.searchQuery).then(function(e){i.leftTable=r()([],e.list),t.forEach(function(t){i.leftTable.forEach(function(e){t===e.shipSn&&i.rightTable.push(e)})}),i.rightTable.length<1?i.isGoReceipt=!0:i.isGoReceipt=!1,i.rightTable.forEach(function(e){e.inputBrokerageFee=e.unpaidFee;var t=i.leftTable.indexOf(e);-1!==t&&i.leftTable.splice(t,1)}),i.orgLeftTable=r()([],i.leftTable)}).catch(function(e){i.loading=!1,i._handlerCatchMsg(e)})},changLoadData:function(e,t,i){this.rightTable[e][t]=Number(i);var a="unpaidFee",l=Number(this.rightTable[e][a]),o=this.rightTable[e][t];o<0||l<o?this.$message({type:"warning",message:"实结费用不小于0，不大于未结费用。"}):this.$set(this.rightTable,e,r()(this.rightTable[e],n()({},t,this.rightTable[e][t]))),o!==l?this.$set(this.textChangeDanger,e,!0):this.$set(this.textChangeDanger,e,!1),console.log(e,o,l,a,this.rightTable[e][a],this.rightTable[e])},clickDetailsRight:function(e){this.$refs.multipleTableRight.toggleRowSelection(e)},clickDetailsLeft:function(e){this.$refs.multipleTableLeft.toggleRowSelection(e)},getSelectionRight:function(e){this.selectedRight=e},getSelectionLeft:function(e){this.selectedLeft=e},changeTableKey:function(){this.tablekey=Math.random()},doAction:function(e){switch(e){case"goLeft":this.goLeft();break;case"goRight":this.goRight()}},goLeft:function(){var i=this;0===this.selectedRight.length||(this.selectedRight.forEach(function(t,e){t.inputBrokerageFee=t.unpaidFee,i.rightTable=Object(u.objectMerge2)([],i.rightTable).filter(function(e){return e.shipSn!==t.shipSn}),i.rightTable.push(t),i.leftTable=Object(u.objectMerge2)([],i.leftTable).filter(function(e){return e.shipSn!==t.shipSn}),i.orgLeftTable=Object(u.objectMerge2)([],i.orgLeftTable).filter(function(e){return e.shipSn!==t.shipSn})}),this.selectedRight=[]),this.rightTable.length<1?this.isGoReceipt=!0:this.isGoReceipt=!1},goRight:function(){var i=this;0===this.selectedLeft.length?this.$message({type:"warning",message:"请在右边表格选择数据"}):(this.selectedLeft.forEach(function(t,e){i.leftTable=Object(u.objectMerge2)([],i.leftTable).filter(function(e){return e.shipSn!==t.shipSn}),i.orgLeftTable=Object(u.objectMerge2)([],i.orgLeftTable).filter(function(e){return e.shipSn!==t.shipSn}),i.leftTable.push(t),i.orgLeftTable.push(t),i.rightTable=Object(u.objectMerge2)([],i.rightTable).filter(function(e){return e.shipSn!==t.shipSn})}),this.selectedLeft=[]),this.rightTable.length<1?this.isGoReceipt=!0:this.isGoReceipt=!1},dclickAddItem:function(e,t){this.selectedRight=[],this.selectedRight.push(e),this.doAction("goLeft")},dclickMinusItem:function(e,t){this.selectedLeft=[],this.selectedLeft.push(e),this.doAction("goRight")},selectCurrent:function(e,t){this.addItem(e,t)},addItem:function(e,t){this.selectedRight=[],this.selectedRight[t]=e,this.doAction("goLeft")},minusItem:function(e,t){this.selectedLeft=[],this.selectedLeft[t]=e,this.doAction("goRight")},addALLList:function(){this.selectedRight=r()([],this.leftTable),this.doAction("goLeft")},minusAllList:function(){this.selectedLeft=r()([],this.rightTable),this.doAction("goRight")},closeDialog:function(){this.popVisibleDialog=!1},openDialog:function(){this.popVisibleDialog=!0},goReceipt:function(){var a=this;this.tableReceiptInfo=[],this.isGoReceipt||(this.rightTable.forEach(function(e,t){var i={shipId:e.shipId,amount:e.inputBrokerageFee,inputBrokerageFee:e.inputBrokerageFee,shipSn:e.shipSn,dataName:"回扣"};0<i.amount&&i.amount<=e.unpaidFee&&a.tableReceiptInfo.push(i),i={}}),0<this.tableReceiptInfo.length?this.openDialog():this.$message({type:"warning",message:"暂无可结算项！实结费用不小于0，不大于未结费用。"}))},getSumRight:function(e){return Object(m.getSummaries)(e,["_index|2|单","fee","unpaidFee","closeFee","cargoAmount|","cargoWeight|","cargoVolume|"])},getSumLeft:function(e){return Object(m.getSummaries)(e,["_index|2|单","fee","unpaidFee","closeFee","inputBrokerageFee","cargoAmount|","cargoWeight|","cargoVolume|"])}}}},"ft/e":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("WhIk"),l=i("vgOo"),o=i("VU/8")(a.a,l.a,null,null,null);t.default=o.exports},gcAZ:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("dBnW"),l=i("WrCW"),o=i("VU/8")(a.a,l.a,null,null,null);t.default=o.exports},gxDK:function(e,t,i){"use strict";var a={render:function(){var a=this,e=a.$createElement,l=a._self._c||e;return l("div",{staticClass:"accountsLoad_table"},[l("div",{staticClass:"transferTable_search clearfix"},[l("currentSearch",{attrs:{info:a.orgLeftTable},on:{change:a.selectCurrent}})],1),a._v(" "),l("transferTable",{staticStyle:{height:"calc(100% - 40px)",padding:"10px"}},[l("div",{attrs:{slot:"btnsBox"},slot:"btnsBox"},[l("el-button",{attrs:{type:a.isGoReceipt?"info":"success",size:"mini",icon:"el-icon-sort",disabled:a.isGoReceipt},on:{click:a.goReceipt}},[a._v("短驳费结算")])],1),a._v(" "),l("div",{staticClass:"tableHeadItemBtn",staticStyle:{height:"100%"},attrs:{slot:"tableLeft"},slot:"tableLeft"},[l("el-button",{staticClass:"tableAllBtn",attrs:{size:"mini"},on:{click:a.addALLList}}),a._v(" "),l("el-table",{key:a.tablekey,ref:"multipleTableRight",attrs:{data:a.leftTable,border:"","tooltip-effect":"dark",triped:"",height:"100%","summary-method":a.getSumRight,"default-sort":{prop:"id",order:"ascending"},"show-overflow-tooltip":!0,"show-summary":!0},on:{"row-click":a.clickDetailsRight,"selection-change":a.getSelectionRight,"row-dblclick":a.dclickAddItem}},[l("el-table-column",{attrs:{fixed:"",width:"50",type:"index",label:"序号"},scopedSlots:a._u([{key:"default",fn:function(e){return[a._v("\n            "+a._s(e.$index+1)+"\n          ")]}}])}),a._v(" "),l("el-table-column",{attrs:{fixed:"",width:"50"},scopedSlots:a._u([{key:"default",fn:function(t){return[l("el-button",{staticClass:"tableItemBtn",attrs:{size:"mini"},on:{click:function(e){a.addItem(t.row,t.$index)}}})]}}])}),a._v(" "),a._l(a.tableColumnLeft,function(i){return[i.slot?l("el-table-column",{key:i.id,attrs:{fixed:i.fixed,sortable:"",label:i.label,width:i.width},scopedSlots:a._u([{key:"default",fn:function(t){return[i.click?l("span",{staticClass:"clickitem",domProps:{innerHTML:a._s(i.slot(t))},on:{click:function(e){e.stopPropagation(),i.click(t)}}}):l("span",{domProps:{innerHTML:a._s(i.slot(t))}})]}}])}):l("el-table-column",{key:i.id,attrs:{fixed:i.fixed,sortable:"",label:i.label,prop:i.prop,width:i.width}})]})],2)],1),a._v(" "),l("div",{staticClass:"tableHeadItemBtn",attrs:{slot:"tableRight"},slot:"tableRight"},[l("el-button",{staticClass:"tableAllBtnMinus",attrs:{size:"mini"},on:{click:a.minusAllList}}),a._v(" "),l("el-table",{key:a.tablekey,ref:"multipleTableLeft",staticStyle:{height:"100%"},attrs:{data:a.rightTable,border:"","tooltip-effect":"dark",triped:"",height:"100%","summary-method":a.getSumLeft,"default-sort":{prop:"id",order:"ascending"},"show-summary":!0},on:{"row-click":a.clickDetailsLeft,"selection-change":a.getSelectionLeft,"row-dblclick":a.dclickMinusItem}},[l("el-table-column",{attrs:{fixed:"",width:"50",type:"index",label:"序号"},scopedSlots:a._u([{key:"default",fn:function(e){return[a._v("\n            "+a._s(e.$index+1)+"\n          ")]}}])}),a._v(" "),l("el-table-column",{attrs:{fixed:"",width:"50"},scopedSlots:a._u([{key:"default",fn:function(t){return[l("el-button",{staticClass:"tableItemBtnMinus",attrs:{size:"mini"},on:{click:function(e){a.minusItem(t.row,t.$index)}}})]}}])}),a._v(" "),a._l(a.tableColumnRight,function(i){return[i.slot?l("el-table-column",{key:i.id,attrs:{fixed:i.fixed,sortable:"",label:i.label,width:i.width,prop:i.prop},scopedSlots:a._u([{key:"default",fn:function(t){return[i.expand?l("div",[l("el-input",{class:{textChangeDanger:a.textChangeDanger[t.$index]},attrs:{type:"number",size:a.btnsize},on:{change:function(e){return a.changLoadData(t.$index,i.prop,e)}},nativeOn:{dblclick:function(e){e.stopPropagation(),e.preventDefault()},click:function(e){e.stopPropagation(),e.preventDefault()}},model:{value:i.slot(t),callback:function(e){a.$set(i,"slot(scope)",a._n(e))},expression:"column.slot(scope)"}})],1):l("div",[i.click?l("span",{staticClass:"clickitem",domProps:{innerHTML:a._s(i.slot(t))},on:{click:function(e){e.stopPropagation(),i.click(t)}}}):l("span",{domProps:{innerHTML:a._s(i.slot(t))}})])]}}])}):l("el-table-column",{key:i.id,attrs:{fixed:i.fixed,sortable:"",label:i.label,prop:i.prop,width:i.width}})]})],2)],1)]),a._v(" "),l("Receipt",{attrs:{popVisible:a.popVisibleDialog,info:a.tableReceiptInfo},on:{close:a.closeDialog}})],1)},staticRenderFns:[]};t.a=a},hOuF:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("82Yg"),l=i("O1Io"),o=i("VU/8")(a.a,l.a,null,null,null);t.default=o.exports},haBU:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("H0TN"),l=i("GNo3"),o=i("VU/8")(a.a,l.a,null,null,null);t.default=o.exports},i5L8:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("pH7i"),l=i("6PPo"),o=i("VU/8")(a.a,l.a,null,null,null);t.default=o.exports},jCPK:function(e,t){},jUWc:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("zyrS"),l=i("4ttV"),o=i("VU/8")(a.a,l.a,null,null,null);t.default=o.exports},jiXf:function(e,t,i){"use strict";var a={render:function(){var i=this,e=i.$createElement,a=i._self._c||e;return a("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:i.loading,expression:"loading"}],staticClass:"receiptDialog",attrs:{title:i.dialogTitle,visible:i.isShow,"close-on-click-modal":!1,"before-close":i.closeMe},on:{"update:visible":function(e){i.isShow=e}}},[a("el-form",{ref:"formModel",attrs:{model:i.formModel,rules:i.rules}},[a("div",{staticClass:"receiptDialog_head"},[a("div",{staticClass:"receiptDialog_head_item"},[a("label",[i._v("单据号")]),i._v(" "),a("el-input",{attrs:{placeholder:"请输入",size:i.btnsize,disabled:""},model:{value:i.formModel.settlementSn,callback:function(e){i.$set(i.formModel,"settlementSn",e)},expression:"formModel.settlementSn"}})],1),i._v(" "),a("div",{staticClass:"receiptDialog_head_item"},[a("label",[i._v("发生时间")]),i._v(" "),a("el-date-picker",{attrs:{size:i.btnsize,"value-format":"yyyy-MM-dd HH:mm:ss",type:"date"},model:{value:i.formModel.settlementTime,callback:function(e){i.$set(i.formModel,"settlementTime",e)},expression:"formModel.settlementTime"}})],1),i._v(" "),a("div",{staticClass:"receiptDialog_head_item"},[a("label",[i._v("经办人")]),i._v(" "),a("querySelect",{attrs:{size:i.btnsize,valuekey:"name",show:"select",search:"name",label:"name"},model:{value:i.formModel.settlementBy,callback:function(e){i.$set(i.formModel,"settlementBy",e)},expression:"formModel.settlementBy"}})],1)]),i._v(" "),a("div",{staticClass:"receiptDialog_table"},[a("el-table",{staticStyle:{width:"100%",height:"100%"},attrs:{data:i.formModel.detailDtoList2,height:"100%",stripe:"","show-summary":"","summary-method":i.getSum}},[a("el-table-column",{attrs:{prop:"date",label:"序号",type:"index",width:"70"}}),i._v(" "),a("el-table-column",{attrs:{prop:"dataName",label:"费用项"}}),i._v(" "),a("el-table-column",[a("el-table-column",{attrs:{prop:"tenMillion",label:"千",width:"40"}}),i._v(" "),a("el-table-column",{attrs:{prop:"million",label:"百",width:"40"}}),i._v(" "),a("el-table-column",{attrs:{prop:"oneHundrenThousand",label:"十",width:"40"}}),i._v(" "),a("el-table-column",{attrs:{prop:"tenThousand",label:"万",width:"40"}}),i._v(" "),a("el-table-column",{attrs:{prop:"thousand",label:"千",width:"40"}}),i._v(" "),a("el-table-column",{attrs:{prop:"hundren",label:"百",width:"40"}}),i._v(" "),a("el-table-column",{attrs:{prop:"ten",label:"十",width:"40"}}),i._v(" "),a("el-table-column",{attrs:{prop:"yuan",label:"元",width:"40"}}),i._v(" "),a("el-table-column",{attrs:{prop:"jiao",label:"角",width:"40"}}),i._v(" "),a("el-table-column",{attrs:{prop:"fen",label:"分",width:"40"}})],1)],1)],1),i._v(" "),a("div",{staticClass:"receiptDialog_todo"},[a("el-button",{staticClass:"tableBtnAdd",attrs:{size:"mini"},on:{click:i.plusItem}}),i._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:i.formModel.szDtoList,border:"",height:"100%",stripe:""}},[a("el-table-column",{attrs:{fixed:"",width:"50"},scopedSlots:i._u([{key:"default",fn:function(t){return[a("el-button",{staticClass:"tableBtnMinus",attrs:{size:"mini"},on:{click:function(e){i.minusItem(t.row,t.$index)}}})]}}])}),i._v(" "),a("el-table-column",{attrs:{prop:"financialWay",label:"收支方式",width:"80"},scopedSlots:i._u([{key:"default",fn:function(t){return[a("el-autocomplete",{attrs:{"popper-class":"querySelectItem",size:i.btnsize,"fetch-suggestions":i.querySearch,placeholder:"支付方式"},on:{select:function(e){return i.sender(e,t.$index)}},scopedSlots:i._u([{key:"default",fn:function(e){var t=e.item;return i._l(i.BANK_INFO,function(e){return a("span",[i._v(i._s(t[e]))])})}}]),model:{value:t.row.financialWay,callback:function(e){i.$set(t.row,"financialWay",e)},expression:"props.row.financialWay"}})]}}])}),i._v(" "),a("el-table-column",{attrs:{prop:"bankName",label:"银行名称"},scopedSlots:i._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{size:i.btnsize,maxlength:i.maxlength},model:{value:t.row.bankName,callback:function(e){i.$set(t.row,"bankName",e)},expression:"props.row.bankName"}})]}}])}),i._v(" "),a("el-table-column",{attrs:{prop:"bankAccount",label:"银行卡号",width:"200"},scopedSlots:i._u([{key:"default",fn:function(t){return[a("el-input",{directives:[{name:"numberOnly",rawName:"v-numberOnly"}],attrs:{size:i.btnsize,maxlength:i.maxlength},model:{value:t.row.bankAccount,callback:function(e){i.$set(t.row,"bankAccount",e)},expression:"props.row.bankAccount"}})]}}])}),i._v(" "),a("el-table-column",{attrs:{prop:"bankAccountName",label:"开户人",width:"80"},scopedSlots:i._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{size:i.btnsize,maxlength:i.maxlength},model:{value:t.row.bankAccountName,callback:function(e){i.$set(t.row,"bankAccountName",e)},expression:"props.row.bankAccountName"}})]}}])}),i._v(" "),a("el-table-column",{attrs:{prop:"chequeNumber",label:"支票号码"},scopedSlots:i._u([{key:"default",fn:function(t){return[a("el-input",{directives:[{name:"numberOnly",rawName:"v-numberOnly"}],attrs:{size:i.btnsize,maxlength:i.maxlength},model:{value:t.row.chequeNumber,callback:function(e){i.$set(t.row,"chequeNumber",e)},expression:"props.row.chequeNumber"}})]}}])}),i._v(" "),a("el-table-column",{attrs:{prop:"receivableNumber",label:"汇款号码"},scopedSlots:i._u([{key:"default",fn:function(t){return[a("el-input",{directives:[{name:"numberOnly",rawName:"v-numberOnly"}],attrs:{size:i.btnsize,maxlength:i.maxlength},model:{value:t.row.receivableNumber,callback:function(e){i.$set(t.row,"receivableNumber",e)},expression:"props.row.receivableNumber"}})]}}])}),i._v(" "),a("el-table-column",{attrs:{prop:"wechatAccount",label:"微信号"},scopedSlots:i._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{size:i.btnsize,maxlength:i.maxlength},model:{value:t.row.wechatAccount,callback:function(e){i.$set(t.row,"wechatAccount",e)},expression:"props.row.wechatAccount"}})]}}])}),i._v(" "),a("el-table-column",{attrs:{prop:"alipayAccount",label:"支付宝号"},scopedSlots:i._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{size:i.btnsize,maxlength:i.maxlength},model:{value:t.row.alipayAccount,callback:function(e){i.$set(t.row,"alipayAccount",e)},expression:"props.row.alipayAccount"}})]}}])}),i._v(" "),a("el-table-column",{attrs:{prop:"agent",label:"经办人",width:"80"},scopedSlots:i._u([{key:"default",fn:function(t){return[a("querySelect",{attrs:{size:i.btnsize,valuekey:"name",show:"select",search:"name",label:"name",maxlength:i.maxlength},model:{value:t.row.agent,callback:function(e){i.$set(t.row,"agent",e)},expression:"props.row.agent"}})]}}])})],1)],1),i._v(" "),a("div",{staticClass:"receiptDialog_remark"},[a("label",[i._v("备注")]),i._v(" "),a("el-input",{attrs:{placeholder:"最多可输入300个字符",size:i.btnsize,maxlength:300},model:{value:i.formModel.remark,callback:function(e){i.$set(i.formModel,"remark",e)},expression:"formModel.remark"}})],1)]),i._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary",size:i.btnsize,icon:"el-icon-document"},on:{click:function(e){i.submitForm("formModel")}}},[i._v("保存")]),i._v(" "),a("el-button",{attrs:{type:"primary",size:i.btnsize,icon:"el-icon-printer"},on:{click:i.print}},[i._v("保存并打印")]),i._v(" "),a("el-button",{attrs:{type:"danger",size:i.btnsize,icon:"el-icon-circle-close-outline"},on:{click:i.closeMe}},[i._v("取 消")])],1)],1)},staticRenderFns:[]};t.a=a},kvAx:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("Y1Ji"),l=i("yleT"),o=i("VU/8")(a.a,l.a,null,null,null);t.default=o.exports},o3Wq:function(e,t,i){"use strict";var a=i("NDph"),l=i("r4mk"),o=i("ft/e"),n=i("I55L"),r=i("hOuF"),s=i("haBU"),c=i("z88V"),h=i("CnA4"),d=i("77V8"),u=i("gcAZ"),p=i("jUWc"),f=i("bUT0"),b=i("rvZI"),g=i("xCVL"),m=i("kvAx");t.a={components:{batchShort:a.default,batchDeliver:l.default,batchInsurance:o.default,batchStationLoad:n.default,batchStationOther:r.default,batchArrivalLoad:s.default,batchArrivalOther:c.default,batchArrivalAll:d.default,batchTruckAll:h.default,waybillKickback:u.default,waybillTicket:p.default,waybillOther:f.default,waybillTransfer:b.default,waybillAbnormal:g.default,waybillUnusual:m.default},props:{isShow:{type:Boolean,default:!1}},data:function(){return{}},computed:{parentPage:function(){return this.$route.query.currentPage},component:function(){switch(this.$route.query.currentPage){case"batchShort":return"batchShort";case"batchDeliver":return"batchDeliver";case"batchInsurance":return"batchInsurance";case"batchStationLoad":return"batchStationLoad";case"batchStationOther":return"batchStationOther";case"batchArriveLoad":return"batchArrivalLoad";case"batchArrivalOther":return"batchArrivalOther";case"batchArrivalAll":return"batchArrivalAll";case"batchTruckAll":return"batchTruckAll";case"waybillKickback":return"waybillKickback";case"waybillTicket":return"waybillTicket";case"waybillOther":return"waybillOther";case"waybillTransfer":return"waybillTransfer";case"waybillAbnormal":return"waybillAbnormal";case"waybillUnusual":return"waybillUnusual"}},pageName:function(){var e="";switch(this.$route.query.currentPage){case"batchShort":e="短驳费结算";break;case"batchDeliver":e="送货费结算";break;case"batchInsurance":e="整车保险费结算";break;case"batchStationLoad":e="发站装卸费";break;case"batchStationOther":e="发站其他费";break;case"batchArriveLoad":e="到站装卸费";break;case"batchArrivalOther":e="到站其他费";break;case"batchArrivalAll":e="发车汇总";break;case"batchTruckAll":e="到车汇总";break;case"waybillKickback":e="回扣";break;case"waybillTicket":e="单票提货费";break;case"waybillOther":e="其他费用支出";break;case"waybillTransfer":return void(e="中转费");case"waybillAbnormal":return void(e="异常理赔");case"waybillUnusual":return void(e="异动费用")}return e}},methods:{}}},pH7i:function(e,t,i){"use strict";var a=i("woOf"),l=i.n(a),o=i("Dd8w"),n=i.n(o),r=(i("E4LH"),i("NYxO")),s=i("JW1v"),c=i("t5DY"),h=i("0xDb"),d=i("Q0Ca"),u=i("pAQG"),p=i("UQm2"),f=i("xAap");t.a={components:{querySelect:u.a},data:function(){return{maxlength:30,amount:0,amountMessage:"",formModel:{detailDtoList2:[],settlementBy:""},loading:!0,financialWalList:[],rules:{},btnsize:"mini",dialogTitle:"结 算 付 款 单",submitData:{},BANK_INFO:["financialWay","bankName","bankAccount","bankAccountName","chequeNumber","receivableNumber","wechatAccount","alipayAccount","agent"],paymentsType:1}},computed:n()({},Object(r.b)(["otherinfo"]),{isShow:{get:function(){return this.popVisible},set:function(){}},getRouteInfo:function(){return JSON.parse(this.$route.query.searchQuery)},settlementTypeId:function(){switch(this.$route.query.currentPage){case"batchArrivalAll":return 179}},dataName:function(){switch(this.$route.query.currentPage){case"waybillKickback":return"回扣";case"waybillTicket":return"单票提货费";case"waybillOther":return"其他费用支出";case"waybillTransfer":return"中转费";case"waybillAbnormal":return"异常理赔";case"waybillUnusual":return"异动费用结算"}},currentPage:function(){var e=this.$route.query.currentPage;return e.substr(7,e.length)}}),props:{popVisible:{type:Boolean,default:!1},info:{type:Array,default:[]}},watch:{popVisible:function(){this.popVisible?(this.isShow=!0,this.getFeeInfo()):this.isShow=!1},info:function(e){if(e)return this.info}},mounted:function(){var e=this;this.postTmsFfinancialwayList(),this.$nextTick(function(){e.init()})},methods:{valueNumber:function(e){return e.replace(/[^\d]/g,"")},print:function(){var e=l()(this.formModel);this.$set(e,"amountMessage",this.amountMessage),Object(p.f)(e),this.submitForm("formModel")},postTmsFfinancialwayList:function(){var t=this,e={currentPage:1,pageSize:100,vo:{financialWay:"",financialWayTypeId:"",orgId:this.otherinfo.orgid,status:""}};Object(f.b)(e).then(function(e){t.financialWalList=[],e.list.forEach(function(e){"启用"===e.statusStr&&t.financialWalList.push(e)})}).catch(function(e){t.loading=!1,t._handlerCatchMsg(e)})},querySearch:function(e,t){var i=this.financialWalList;t(e?i.filter(this.createFilter(e)):i)},createFilter:function(t){return function(e){return 0===e.financialWay.toLowerCase().indexOf(t.toLowerCase())}},init:function(){this.loading=!1},getFeeInfo:function(){var t=this,e=this.otherinfo.orgid;return Object(s.a)(e,this.paymentsType).then(function(e){t.formModel=e.data,t.formModel.detailDtoList2=[],t.formModel.settlementTime=Object(h.parseTime)(new Date),t.formModel.settlementBy=t.otherinfo.name,t.initDetailDtoList(),t.formModel.szDtoList.forEach(function(e){e.agent=t.otherinfo.name}),t.formModel.szDtoList.length<1&&t.plusItem()}).catch(function(e){t.loading=!1,t._handlerCatchMsg(e)})},initDetailDtoList:function(){var l=this;this.formModel.amount=0,this.formModel.detailDtoList=Object(h.objectMerge2)([],this.info);var t={};for(var e in this.formModel.detailDtoList.map(function(e){t[e.dataName]?t[e.dataName].amount+=e.amount:t[e.dataName]=e}),t)this.formModel.detailDtoList2.push(t[e]);t={},this.formModel.detailDtoList2.forEach(function(e,t){l.formModel.amount+=e.amount;var i=Number(e.amount).toFixed(2).toString().split("").reverse(),a=i.indexOf(".");-1!==a&&i.splice(a,1),e.fen=i[0],e.jiao=i[1],e.yuan=i[2],e.ten=i[3],e.hundren=i[4],e.thousand=i[5],e.tenThousand=i[6],e.oneHundrenThousand=i[7],e.million=i[8],e.tenMillion=i[9]}),this.amountMessage=Object(d.smalltoBIG)(this.formModel.amount),this.amount=this.formModel.amount.toFixed(2).toString().split("").reverse();var i=this.amount.indexOf(".");-1!==i&&this.amount.splice(i,1)},sender:function(e,t){this.$set(this.formModel.szDtoList,t,l()(this.formModel.szDtoList[t],e))},getSystemTime:function(){var t=this;Object(c.f)().then(function(e){t.formModel.settlementTime=new Date(e.trim())}).catch(function(e){t.loading=!1,t._handlerCatchMsg(e)})},closeMe:function(e){this.$emit("close"),"function"==typeof e&&e()},setData:function(){var e={},t=[],i=[];"中转费"===this.dataName?this.$set(e,"orgId",this.getRouteInfo.vo.transferOrgid):"异常理赔"===this.dataName?this.$set(e,"orgId",this.getRouteInfo.vo.orgid):this.$set(e,"orgId",this.getRouteInfo.vo.shipFromOrgid),this.$set(e,"settlementSn",this.formModel.settlementSn),this.$set(e,"settlementBy",this.formModel.settlementBy),this.$set(e,"settlementTime",this.formModel.settlementTime),this.$set(e,"remark",this.formModel.remark),this.$set(e,"detailDtoList",this.formModel.detailDtoList),this.$set(e,"szDtoList",this.formModel.szDtoList),t=l()([],this.formModel.szDtoList),i=l()([],this.info),this.$set(this.submitData,"capitalFlow",e),this.$set(this.submitData,"financialWayLogs",t),this.$set(this.submitData,"shipPayableFeeDtos",i),e={},t=[],i=[]},submitForm:function(e){var i=this;this.$refs[e].validate(function(e){if(e){i.setData(),console.log("submitData",i.submitData);var t="";t="中转费"===i.dataName?i.getRouteInfo.vo.transferOrgid:"异常理赔"===i.dataName?i.getRouteInfo.vo.orgid:i.getRouteInfo.vo.shipFromOrgid,Object(s.b)(t,i.submitData).then(function(e){i.$message({type:"success",message:"保存成功"}),i.closeMe();var t=i.currentPage.substring(0,1).toLowerCase()+i.currentPage.substring(1);i.$router.push({path:"./accountsPayable/waybill/"+t})}).catch(function(e){i._handlerCatchMsg(e)})}})},minusItem:function(e,t){var i=this.formModel.szDtoList.indexOf(e);-1!==i&&this.formModel.szDtoList.splice(i,1)},plusItem:function(){var e={agent:this.otherinfo.name,alipayAccount:"",bankAccount:"",bankAccountName:"",bankName:"",chequeNumber:"",financialWay:"",flowId:"",receivableNumber:"",rnum:"",wechatAccount:""};this.formModel.szDtoList.push(e)},getSum:function(e){var o=this,t=e.columns,n=e.data,r=[];return this.$nextTick(function(){}),t.forEach(function(t,e){if(0!==e)if(1!==e){for(var i=-2,a=12;2<a;a--)if(i++,e===a)return void(r[e]=o.amount[i]);var l=n.map(function(e){return Number(e[t.property])});l.every(function(e){return isNaN(e)})?r[e]="":(r[e]=l.reduce(function(e,t){var i=Number(t);return isNaN(i)?e:e+t},0),r[e]+="")}else r[e]=o.amountMessage;else r[e]="合计"}),r}}}},r4mk:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("JX6T"),l=i("4JAb"),o=i("VU/8")(a.a,l.a,null,null,null);t.default=o.exports},rWRR:function(e,t,i){"use strict";var a={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"customer-manager tab-wrapper tab-wrapper-100"},[t("keep-alive",[t(this.component,{tag:"component"})],1)],1)},staticRenderFns:[]};t.a=a},rvZI:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("ExFJ"),l=i("JDn5"),o=i("VU/8")(a.a,l.a,null,null,null);t.default=o.exports},"u/8D":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("9uTz"),l=i("BbNw"),o=i("VU/8")(a.a,l.a,null,null,null);t.default=o.exports},vgOo:function(e,t,i){"use strict";var a={render:function(){var a=this,e=a.$createElement,l=a._self._c||e;return l("div",{staticClass:"accountsLoad_table"},[l("div",{staticClass:"transferTable_search clearfix"},[l("currentSearch",{attrs:{info:a.orgLeftTable},on:{change:a.selectCurrent}})],1),a._v(" "),l("transferTable",{staticStyle:{height:"calc(100% - 40px)",padding:"10px"}},[l("div",{attrs:{slot:"btnsBox"},slot:"btnsBox"},[l("el-button",{attrs:{type:a.isGoReceipt?"info":"success",size:"mini",icon:"el-icon-sort",disabled:a.isGoReceipt},on:{click:a.goReceipt}},[a._v("整车保险费结算")])],1),a._v(" "),l("div",{staticClass:"tableHeadItemBtn",staticStyle:{height:"100%"},attrs:{slot:"tableLeft"},slot:"tableLeft"},[l("el-button",{staticClass:"tableAllBtn",attrs:{size:"mini"},on:{click:a.addALLList}}),a._v(" "),l("el-table",{key:a.tablekey,ref:"multipleTableRight",attrs:{data:a.leftTable,border:"","tooltip-effect":"dark",triped:"",height:"100%","summary-method":a.getSumRight,"default-sort":{prop:"id",order:"ascending"},"show-overflow-tooltip":!0,"show-summary":!0},on:{"row-click":a.clickDetailsRight,"selection-change":a.getSelectionRight,"row-dblclick":a.dclickAddItem}},[l("el-table-column",{attrs:{fixed:"",width:"50",type:"index",label:"序号"},scopedSlots:a._u([{key:"default",fn:function(e){return[a._v("\n            "+a._s(e.$index+1)+"\n          ")]}}])}),a._v(" "),l("el-table-column",{attrs:{fixed:"",width:"50"},scopedSlots:a._u([{key:"default",fn:function(t){return[l("el-button",{staticClass:"tableItemBtn",attrs:{size:"mini"},on:{click:function(e){a.addItem(t.row,t.$index)}}})]}}])}),a._v(" "),a._l(a.tableColumnLeft,function(i){return[i.slot?l("el-table-column",{key:i.id,attrs:{fixed:i.fixed,sortable:"",label:i.label,width:i.width},scopedSlots:a._u([{key:"default",fn:function(t){return[i.click?l("span",{staticClass:"clickitem",domProps:{innerHTML:a._s(i.slot(t))},on:{click:function(e){e.stopPropagation(),i.click(t)}}}):l("span",{domProps:{innerHTML:a._s(i.slot(t))}})]}}])}):l("el-table-column",{key:i.id,attrs:{fixed:i.fixed,sortable:"",label:i.label,prop:i.prop,width:i.width}})]})],2)],1),a._v(" "),l("div",{staticClass:"tableHeadItemBtn",attrs:{slot:"tableRight"},slot:"tableRight"},[l("el-button",{staticClass:"tableAllBtnMinus",attrs:{size:"mini"},on:{click:a.minusAllList}}),a._v(" "),l("el-table",{key:a.tablekey,ref:"multipleTableLeft",staticStyle:{height:"100%"},attrs:{data:a.rightTable,border:"","tooltip-effect":"dark",triped:"",height:"100%","summary-method":a.getSumLeft,"default-sort":{prop:"id",order:"ascending"},"show-summary":!0},on:{"row-click":a.clickDetailsLeft,"selection-change":a.getSelectionLeft,"row-dblclick":a.dclickMinusItem}},[l("el-table-column",{attrs:{fixed:"",width:"50",type:"index",label:"序号"},scopedSlots:a._u([{key:"default",fn:function(e){return[a._v("\n            "+a._s(e.$index+1)+"\n          ")]}}])}),a._v(" "),l("el-table-column",{attrs:{fixed:"",width:"50"},scopedSlots:a._u([{key:"default",fn:function(t){return[l("el-button",{staticClass:"tableItemBtnMinus",attrs:{size:"mini"},on:{click:function(e){a.minusItem(t.row,t.$index)}}})]}}])}),a._v(" "),a._l(a.tableColumnRight,function(i){return[i.slot?l("el-table-column",{key:i.id,attrs:{fixed:i.fixed,sortable:"",label:i.label,width:i.width,prop:i.prop},scopedSlots:a._u([{key:"default",fn:function(t){return[i.expand?l("div",[l("el-input",{class:{textChangeDanger:a.textChangeDanger[t.$index]},attrs:{type:"number",size:a.btnsize},on:{"":function(e){},change:function(e){return a.changLoadData(t.$index,i.prop,e)}},nativeOn:{dblclick:function(e){e.stopPropagation(),e.preventDefault()},click:function(e){e.stopPropagation(),e.preventDefault()}},model:{value:i.slot(t),callback:function(e){a.$set(i,"slot(scope)",a._n(e))},expression:"column.slot(scope)"}})],1):l("div",[i.click?l("span",{staticClass:"clickitem",domProps:{innerHTML:a._s(i.slot(t))},on:{click:function(e){e.stopPropagation(),i.click(t)}}}):l("span",{domProps:{innerHTML:a._s(i.slot(t))}})])]}}])}):l("el-table-column",{key:i.id,attrs:{fixed:i.fixed,sortable:"",label:i.label,prop:i.prop,width:i.width}})]})],2)],1)]),a._v(" "),l("Receipt",{attrs:{popVisible:a.popVisibleDialog,info:a.tableReceiptInfo},on:{close:a.closeDialog}})],1)},staticRenderFns:[]};t.a=a},wjZe:function(e,t,i){"use strict";var a={render:function(){var a=this,e=a.$createElement,l=a._self._c||e;return l("div",{staticClass:"accountsLoad_table"},[l("div",{staticClass:"transferTable_search clearfix"},[l("currentSearch",{attrs:{info:a.orgLeftTable},on:{change:a.selectCurrent}})],1),a._v(" "),l("transferTable",{staticStyle:{height:"calc(100% - 40px)",padding:"10px"}},[l("div",{attrs:{slot:"btnsBox"},slot:"btnsBox"},[l("el-button",{attrs:{type:a.isGoReceipt?"info":"success",size:"mini",icon:"el-icon-sort",disabled:a.isGoReceipt},on:{click:a.goReceipt}},[a._v("到车汇总结算")])],1),a._v(" "),l("div",{staticClass:"tableHeadItemBtn",staticStyle:{height:"100%"},attrs:{slot:"tableLeft"},slot:"tableLeft"},[l("el-button",{staticClass:"tableAllBtn",attrs:{size:"mini"},on:{click:a.addALLList}}),a._v(" "),l("el-table",{key:a.tablekey,ref:"multipleTableRight",attrs:{data:a.leftTable,border:"","tooltip-effect":"dark",triped:"",height:"100%","summary-method":a.getSumRight,"default-sort":{prop:"id",order:"ascending"},"show-overflow-tooltip":!0,"show-summary":!0},on:{"row-click":a.clickDetailsRight,"selection-change":a.getSelectionRight,"row-dblclick":a.dclickAddItem}},[l("el-table-column",{attrs:{fixed:"",width:"50",label:"序号"},scopedSlots:a._u([{key:"default",fn:function(e){return[a._v("\n            "+a._s(e.$index+1)+"\n          ")]}}])}),a._v(" "),l("el-table-column",{attrs:{fixed:"",width:"50"},scopedSlots:a._u([{key:"default",fn:function(t){return[l("el-button",{staticClass:"tableItemBtn",attrs:{size:"mini"},on:{click:function(e){a.addItem(t.row,t.$index)}}})]}}])}),a._v(" "),a._l(a.tableColumnLeft,function(i){return[i.slot?l("el-table-column",{key:i.id,attrs:{fixed:i.fixed,sortable:"",label:i.label,width:i.width},scopedSlots:a._u([{key:"default",fn:function(t){return[i.click?l("span",{staticClass:"clickitem",domProps:{innerHTML:a._s(i.slot(t))},on:{click:function(e){e.stopPropagation(),i.click(t)}}}):l("span",{domProps:{innerHTML:a._s(i.slot(t))}})]}}])}):l("el-table-column",{key:i.id,attrs:{fixed:i.fixed,sortable:"",label:i.label,prop:i.prop,width:i.width}})]})],2)],1),a._v(" "),l("div",{staticClass:"tableHeadItemBtn",attrs:{slot:"tableRight"},slot:"tableRight"},[l("el-button",{staticClass:"tableAllBtnMinus",attrs:{size:"mini"},on:{click:a.minusAllList}}),a._v(" "),l("el-table",{key:a.tablekey,ref:"multipleTableLeft",staticStyle:{height:"100%"},attrs:{data:a.rightTable,border:"","tooltip-effect":"dark",triped:"",height:"100%","summary-method":a.getSumLeft,"default-sort":{prop:"id",order:"ascending"},"show-summary":!0},on:{"row-click":a.clickDetailsLeft,"selection-change":a.getSelectionLeft,"row-dblclick":a.dclickMinusItem}},[l("el-table-column",{attrs:{fixed:"",width:"50",type:"index",label:"序号"},scopedSlots:a._u([{key:"default",fn:function(e){return[a._v("\n            "+a._s(e.$index+1)+"\n          ")]}}])}),a._v(" "),l("el-table-column",{attrs:{fixed:"",width:"50"},scopedSlots:a._u([{key:"default",fn:function(t){return[l("el-button",{staticClass:"tableItemBtnMinus",attrs:{size:"mini"},on:{click:function(e){a.minusItem(t.row,t.$index)}}})]}}])}),a._v(" "),a._l(a.tableColumnRight,function(i){return[i.slot?l("el-table-column",{key:i.id,attrs:{fixed:i.fixed,sortable:"",label:i.label,width:i.width,prop:i.prop},scopedSlots:a._u([{key:"default",fn:function(t){return[i.expand?l("div",[l("el-input",{class:{textChangeDanger:a.rightTable[t.$index][i.prop+"lyy"]},attrs:{type:"number",size:a.btnsize},on:{change:function(e){return a.changLoadData(t.$index,i.prop,e)}},nativeOn:{dblclick:function(e){e.stopPropagation(),e.preventDefault()},click:function(e){e.stopPropagation(),e.preventDefault()}},model:{value:i.slot(t),callback:function(e){a.$set(i,"slot(scope)",a._n(e))},expression:"column.slot(scope)"}})],1):l("div",[i.click?l("span",{staticClass:"clickitem",domProps:{innerHTML:a._s(i.slot(t))},on:{click:function(e){e.stopPropagation(),i.click(t)}}}):l("span",{domProps:{innerHTML:a._s(i.slot(t))}})])]}}])}):l("el-table-column",{key:i.id,attrs:{fixed:i.fixed,sortable:"",label:i.label,prop:i.prop,width:i.width}})]})],2)],1)]),a._v(" "),l("Receipt",{attrs:{popVisible:a.popVisibleDialog,info:a.tableReceiptInfo},on:{close:a.closeDialog}})],1)},staticRenderFns:[]};t.a=a},xCVL:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("7ZmC"),l=i("Rhqk"),o=i("VU/8")(a.a,l.a,null,null,null);t.default=o.exports},xeif:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("o3Wq"),l=i("rWRR"),o=i("VU/8")(a.a,l.a,null,null,null);t.default=o.exports},yleT:function(e,t,i){"use strict";var a={render:function(){var a=this,e=a.$createElement,l=a._self._c||e;return l("div",{staticClass:"accountsLoad_table"},[l("div",{staticClass:"transferTable_search clearfix"},[l("currentSearch",{attrs:{info:a.orgLeftTable},on:{change:a.selectCurrent}})],1),a._v(" "),l("transferTable",{staticStyle:{height:"calc(100% - 40px)",padding:"10px"}},[l("div",{attrs:{slot:"btnsBox"},slot:"btnsBox"},[l("el-button",{attrs:{type:a.isGoReceipt?"info":"success",size:"mini",icon:"el-icon-sort",disabled:a.isGoReceipt},on:{click:a.goReceipt}},[a._v("异动费用结算")])],1),a._v(" "),l("div",{staticClass:"tableHeadItemBtn",staticStyle:{height:"100%"},attrs:{slot:"tableLeft"},slot:"tableLeft"},[l("el-button",{staticClass:"tableAllBtn",attrs:{size:"mini"},on:{click:a.addALLList}}),a._v(" "),l("el-table",{key:a.tablekey,ref:"multipleTableRight",attrs:{data:a.leftTable,border:"","tooltip-effect":"dark",triped:"",height:"100%","summary-method":a.getSumRight,"default-sort":{prop:"id",order:"ascending"},"show-overflow-tooltip":!0,"show-summary":!0},on:{"row-click":a.clickDetailsRight,"selection-change":a.getSelectionRight,"row-dblclick":a.dclickAddItem}},[l("el-table-column",{attrs:{fixed:"",width:"50",type:"index",label:"序号"},scopedSlots:a._u([{key:"default",fn:function(e){return[a._v("\n            "+a._s(e.$index+1)+"\n          ")]}}])}),a._v(" "),l("el-table-column",{attrs:{fixed:"",width:"50"},scopedSlots:a._u([{key:"default",fn:function(t){return[l("el-button",{staticClass:"tableItemBtn",attrs:{size:"mini"},on:{click:function(e){a.addItem(t.row,t.$index)}}})]}}])}),a._v(" "),a._l(a.tableColumnLeft,function(i){return[i.slot?l("el-table-column",{key:i.id,attrs:{fixed:i.fixed,sortable:"",label:i.label,width:i.width,prop:i.prop},scopedSlots:a._u([{key:"default",fn:function(t){return[i.expand?l("div",[l("el-input",{attrs:{type:"number",size:a.btnsize},on:{change:function(e){a.changLoadData(t.$index)}},model:{value:i.slot(t),callback:function(e){a.$set(i,"slot(scope)",a._n(e))},expression:"column.slot(scope)"}})],1):l("div",[i.click?l("span",{staticClass:"clickitem",domProps:{innerHTML:a._s(i.slot(t))},on:{click:function(e){e.stopPropagation(),i.click(t)}}}):l("span",{domProps:{innerHTML:a._s(i.slot(t))}})])]}}])}):l("el-table-column",{key:i.id,attrs:{fixed:i.fixed,sortable:"",label:i.label,prop:i.prop,width:i.width}})]})],2)],1),a._v(" "),l("div",{staticClass:"tableHeadItemBtn",attrs:{slot:"tableRight"},slot:"tableRight"},[l("el-button",{staticClass:"tableAllBtnMinus",attrs:{size:"mini"},on:{click:a.minusAllList}}),a._v(" "),l("el-table",{key:a.tablekey,ref:"multipleTableLeft",staticStyle:{height:"100%"},attrs:{data:a.rightTable,border:"","tooltip-effect":"dark",triped:"",height:"100%","summary-method":a.getSumLeft,"default-sort":{prop:"id",order:"ascending"},"show-summary":!0},on:{"row-click":a.clickDetailsLeft,"selection-change":a.getSelectionLeft,"row-dblclick":a.dclickMinusItem}},[l("el-table-column",{attrs:{fixed:"",width:"50",type:"index",label:"序号"},scopedSlots:a._u([{key:"default",fn:function(e){return[a._v("\n            "+a._s(e.$index+1)+"\n          ")]}}])}),a._v(" "),l("el-table-column",{attrs:{fixed:"",width:"50"},scopedSlots:a._u([{key:"default",fn:function(t){return[l("el-button",{staticClass:"tableItemBtnMinus",attrs:{size:"mini"},on:{click:function(e){a.minusItem(t.row,t.$index)}}})]}}])}),a._v(" "),a._l(a.tableColumnRight,function(i){return[i.slot?l("el-table-column",{key:i.id,attrs:{fixed:i.fixed,sortable:"",label:i.label,width:i.width,prop:i.prop},scopedSlots:a._u([{key:"default",fn:function(t){return[i.expand?l("div",[l("el-input",{class:{textChangeDanger:a.textChangeDanger[t.$index]},attrs:{type:"number",size:a.btnsize},on:{change:function(e){return a.changLoadData(t.$index,i.prop,e)}},nativeOn:{dblclick:function(e){e.stopPropagation(),e.preventDefault()},click:function(e){e.stopPropagation(),e.preventDefault()}},model:{value:i.slot(t),callback:function(e){a.$set(i,"slot(scope)",a._n(e))},expression:"column.slot(scope)"}})],1):l("div",[i.click?l("span",{staticClass:"clickitem",domProps:{innerHTML:a._s(i.slot(t))},on:{click:function(e){e.stopPropagation(),i.click(t)}}}):l("span",{domProps:{innerHTML:a._s(i.slot(t))}})])]}}])}):l("el-table-column",{key:i.id,attrs:{fixed:i.fixed,sortable:"",label:i.label,prop:i.prop,width:i.width}})]})],2)],1)]),a._v(" "),l("Receipt",{attrs:{popVisible:a.popVisibleDialog,info:a.tableReceiptInfo},on:{close:a.closeDialog}})],1)},staticRenderFns:[]};t.a=a},z88V:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("at5C"),l=i("O8qZ"),o=i("VU/8")(a.a,l.a,null,null,null);t.default=o.exports},zyrS:function(e,t,i){"use strict";var a=i("bOdI"),n=i.n(a),l=i("woOf"),r=i.n(l),o=i("Dd8w"),s=i.n(o),c=i("NYxO"),h=i("JW1v"),d=i("IcMT"),u=i("0xDb"),p=i("pAQG"),f=i("i5L8"),b=i("1onU"),g=i("DT23"),m=i("0xDb");t.a={components:{transferTable:d.a,querySelect:p.a,Receipt:f.default,Pager:b.a,currentSearch:g.default},data:function(){var i=this;return{textChangeDanger:[],tablekey:"",truckMessage:"",formModel:{},orgLeftTable:[],loading:!1,popVisibleDialog:!1,btnsize:"mini",tableReceiptInfo:[],selectedRight:[],selectedLeft:[],isGoReceipt:!0,leftTable:[],rightTable:[],orgData:{left:[],right:[]},isFresh:!1,feeType:10,searchQuery:{currentPage:1,pageSize:100,vo:{}},tableColumnLeft:[{label:"运单号",prop:"shipSn",width:"120",fixed:!0},{label:"开单网点",prop:"shipFromOrgName",width:"120",fixed:!1},{label:"结算状态",prop:"statusName",width:"120",fixed:!1},{label:"签收状态",prop:"signStatusName",width:"100",fixed:!1},{label:"发货人",prop:"senderCustomerName",width:"120",fixed:!1},{label:"收货人",prop:"receiverCustomerName",width:"120",fixed:!1},{label:"实际提货费",prop:"fee",width:"120",fixed:!1},{label:"已结实际提货费",prop:"closeFee",width:"120",fixed:!1,slot:function(e){var t=e.row;return i._setTextColor(t.fee,t.closeFee,t.unpaidFee,t.closeFee)}},{label:"未结实际提货费",prop:"unpaidFee",width:"120",fixed:!1,slot:function(e){var t=e.row;return i._setTextColor(t.fee,t.closeFee,t.unpaidFee,t.unpaidFee)}},{label:"发货方",prop:"senderUnit",width:"120",fixed:!1},{label:"收货方",prop:"receiverUnit",width:"120",fixed:!1},{label:"货号",prop:"shipGoodsSn",width:"120",fixed:!1},{label:"货品名",prop:"cargoName",width:"120",fixed:!1},{label:"开单时间",prop:"createTime",width:"120",fixed:!1,slot:function(e){return""+Object(u.parseTime)(e.row.createTime,"{y}-{m}-{d} {h}:{i}:{s}")}},{label:"出发城市",prop:"shipFromCityName",width:"120",fixed:!1},{label:"到达城市",prop:"shipToCityName",width:"120",fixed:!1},{label:"件数",prop:"cargoAmount",width:"120",fixed:!1},{label:"重量",prop:"cargoWeight",width:"120",fixed:!1},{label:"体积",prop:"cargoVolume",width:"120",fixed:!1},{label:"运单备注",prop:"shipRemarks",width:"120",fixed:!1}],tableColumnRight:[{label:"运单号",prop:"shipSn",width:"120",fixed:!0},{label:"开单网点",prop:"shipFromOrgName",width:"120",fixed:!1},{label:"结算状态",prop:"statusName",width:"120",fixed:!1},{label:"签收状态",prop:"signStatusName",width:"100",fixed:!1},{label:"发货人",prop:"senderCustomerName",width:"120",fixed:!1},{label:"收货人",prop:"receiverCustomerName",width:"120",fixed:!1},{label:"实际提货费",prop:"fee",width:"120",fixed:!1},{label:"已结实际提货费",prop:"closeFee",width:"120",fixed:!1,slot:function(e){var t=e.row;return i._setTextColor(t.fee,t.closeFee,t.unpaidFee,t.closeFee)}},{label:"未结实际提货费",prop:"unpaidFee",width:"120",fixed:!1,slot:function(e){var t=e.row;return i._setTextColor(t.fee,t.closeFee,t.unpaidFee,t.unpaidFee)}},{label:"实结实际提货费",prop:"inputPickupFee",width:"120",fixed:!1,expand:!0,slot:function(e){return e.row.inputPickupFee}},{label:"发货方",prop:"senderUnit",width:"120",fixed:!1},{label:"收货方",prop:"receiverUnit",width:"120",fixed:!1},{label:"货号",prop:"shipGoodsSn",width:"120",fixed:!1},{label:"货品名",prop:"cargoName",width:"120",fixed:!1},{label:"开单时间",prop:"createTime",width:"180",fixed:!1,slot:function(e){return""+Object(u.parseTime)(e.row.createTime,"{y}-{m}-{d} {h}:{i}:{s}")}},{label:"出发城市",prop:"shipFromCityName",width:"120",fixed:!1},{label:"到达城市",prop:"shipToCityName",width:"120",fixed:!1},{label:"件数",prop:"cargoAmount",width:"120",fixed:!1},{label:"重量",prop:"cargoWeight",width:"120",fixed:!1},{label:"体积",prop:"cargoVolume",width:"120",fixed:!1},{label:"运单备注",prop:"shipRemarks",width:"120",fixed:!1}]}},computed:s()({},Object(c.b)(["otherinfo"]),{getRouteInfo:function(){return JSON.parse(this.$route.query.searchQuery)},totalLeft:function(){return this.leftTable.length},totalRight:function(){return this.rightTable.length}}),mounted:function(){this.getList()},methods:{handlePageChangeLeft:function(e){this.searchQuery.currentPage=e.pageNum,this.searchQuery.pageSize=e.pageSize},initLeftParams:function(){this.searchQuery=r()({},this.getRouteInfo),this.$set(this.searchQuery.vo,"feeType",this.feeType),this.$set(this.searchQuery.vo,"status","NOSETTLEMENT,PARTSETTLEMENT")},getList:function(){var i=this;console.log(this.$route.query.selectListShipSns);var t=Object(u.objectMerge2)([],JSON.parse(this.$route.query.selectListShipSns));this.$route.query.selectListShipSns?this.isModify=!0:this.isModify=!1,this.leftTable=this.$options.data().leftTable,this.rightTable=this.$options.data().rightTable,this.tableReceiptInfo=this.$options.data().tableReceiptInfo,this.orgLeftTable=this.$options.data().orgLeftTable,this.initLeftParams(),Object(h.e)(this.searchQuery).then(function(e){i.leftTable=r()([],e.list),t.forEach(function(t){i.leftTable.forEach(function(e){t===e.shipSn&&i.rightTable.push(e)})}),i.rightTable.length<1?i.isGoReceipt=!0:i.isGoReceipt=!1,i.rightTable.forEach(function(e){var t=i.leftTable.indexOf(e);-1!==t&&i.leftTable.splice(t,1),e.inputPickupFee=e.unpaidFee}),i.orgLeftTable=Object(u.objectMerge2)([],i.leftTable)}).catch(function(e){i.loading=!1,i._handlerCatchMsg(e)})},changLoadData:function(e,t,i){this.rightTable[e][t]=Number(i);var a="unpaidFee",l=Number(this.rightTable[e][a]),o=this.rightTable[e][t];o!==l?this.$set(this.textChangeDanger,e,!0):this.$set(this.textChangeDanger,e,!1),o<0||l<o?this.$message({type:"warning",message:"实结费用不小于0，不大于未结费用。"}):this.$set(this.rightTable,e,r()(this.rightTable[e],n()({},t,this.rightTable[e][t]))),console.log(this.rightTable[e][t],o,a,this.rightTable[e][a],this.rightTable[e])},clickDetailsRight:function(e){this.$refs.multipleTableRight.toggleRowSelection(e)},clickDetailsLeft:function(e){this.$refs.multipleTableLeft.toggleRowSelection(e)},getSelectionRight:function(e){this.selectedRight=e},getSelectionLeft:function(e){this.selectedLeft=e},changeTableKey:function(){this.tablekey=Math.random()},doAction:function(e){switch(e){case"goLeft":this.goLeft();break;case"goRight":this.goRight()}},goLeft:function(){var i=this;0===this.selectedRight.length||(this.selectedRight.forEach(function(t,e){t.inputPickupFee=t.unpaidFee,i.rightTable=Object(u.objectMerge2)([],i.rightTable).filter(function(e){return e.shipSn!==t.shipSn}),i.rightTable.push(t),i.leftTable=Object(u.objectMerge2)([],i.leftTable).filter(function(e){return e.shipSn!==t.shipSn}),i.orgLeftTable=Object(u.objectMerge2)([],i.orgLeftTable).filter(function(e){return e.shipSn!==t.shipSn})}),this.selectedRight=[]),this.rightTable.length<1?this.isGoReceipt=!0:this.isGoReceipt=!1},goRight:function(){var i=this;0===this.selectedLeft.length?this.$message({type:"warning",message:"请在右边表格选择数据"}):(this.selectedLeft.forEach(function(t,e){i.leftTable=Object(u.objectMerge2)([],i.leftTable).filter(function(e){return e.shipSn!==t.shipSn}),i.orgLeftTable=Object(u.objectMerge2)([],i.orgLeftTable).filter(function(e){return e.shipSn!==t.shipSn}),i.leftTable.push(t),i.orgLeftTable.push(t),i.rightTable=Object(u.objectMerge2)([],i.rightTable).filter(function(e){return e.shipSn!==t.shipSn})}),this.selectedLeft=[]),this.rightTable.length<1?this.isGoReceipt=!0:this.isGoReceipt=!1},selectCurrent:function(e,t){this.addItem(e,t)},dclickAddItem:function(e,t){this.selectedRight=[],this.selectedRight.push(e),this.doAction("goLeft")},dclickMinusItem:function(e,t){this.selectedLeft=[],this.selectedLeft.push(e),this.doAction("goRight")},addItem:function(e,t){this.selectedRight=[],this.selectedRight[t]=e,this.doAction("goLeft")},minusItem:function(e,t){this.selectedLeft=[],this.selectedLeft[t]=e,this.doAction("goRight")},addALLList:function(){this.selectedRight=r()([],this.leftTable),this.doAction("goLeft")},minusAllList:function(){this.selectedLeft=r()([],this.rightTable),this.doAction("goRight")},searchShip:function(e){console.log("searchShip",e)},closeDialog:function(){this.popVisibleDialog=!1},openDialog:function(){this.popVisibleDialog=!0},goReceipt:function(){var a=this;this.tableReceiptInfo=[],this.isGoReceipt||(this.rightTable.forEach(function(e,t){var i={shipId:e.shipId,amount:e.inputPickupFee,inputPickupFee:e.inputPickupFee,shipSn:e.shipSn,dataName:"实际提货费"};0<i.amount&&i.amount<=e.unpaidFee&&a.tableReceiptInfo.push(i),i={}}),0<this.tableReceiptInfo.length?this.openDialog():this.$message({type:"warning",message:"暂无可结算项！实结费用不小于0，不大于未结费用。"}))},getSumRight:function(e){return Object(m.getSummaries)(e,["_index|2|单","fee","unpaidFee","closeFee","cargoAmount|","cargoWeight|","cargoVolume|"])},getSumLeft:function(e){return Object(m.getSummaries)(e,["_index|2|单","fee","unpaidFee","closeFee","inputPickupFee","cargoAmount|","cargoWeight|","cargoVolume|"])}}}}});
//# sourceMappingURL=4.29300dd61f6531759c91.js.map