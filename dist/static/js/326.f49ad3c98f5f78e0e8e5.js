webpackJsonp([326],{"8Hxk":function(e,r){},bZax:function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var i=t("frTf"),o=t("ubb7");var a=function(e){t("8Hxk")},n=t("VU/8")(i.a,o.a,a,null,null);r.default=n.exports},frTf:function(e,r,t){"use strict";var i=t("woOf"),o=t.n(i),a=t("Dd8w"),n=t.n(a),l=t("E4LH"),s=t("4UdH"),c=t("P5Di"),m=t("QbVN"),f=t("o9X6"),d=t("NYxO");r.a={components:{popRight:c.a,Upload:m.a,SelectTree:f.a},props:{popVisible:{type:Boolean,default:!1},orgid:{required:!0},isModify:{type:Boolean,default:!1},info:{type:Object,default:function(){}},issender:{type:Boolean,dafault:!1}},computed:n()({},Object(d.mapGetters)(["otherinfo"])),data:function(){var r=this;return{form:{carrierAddr:"",carrierMobile:"",carrierName:"",carrierRemarks:"",carrierSn:"",contractEndtime:"",contractStarttime:"",customerServicePhone:"",liableName:"",liablePhone:"",orgid:0},formLabelWidth:"100px",tooltip:!1,rules:{carrierName:[{required:!0,message:"请输入承运商名称"}],orgid:[{required:!0,message:"请选择所属机构"}],carrierMobile:[{required:!0,trigger:"change",validator:function(e,r,t){""!==r&&null!==r&&r&&void 0!==r?l.a.MOBILE.test(r)?t():t(new Error("请输11位手机号码")):t(new Error("不能为空"))}}],liablePhone:[],carrierSn:[{message:"仅限字母或数字组合",pattern:l.a.ONLY_NUMBER_AND_LETTER}]},popTitle:"新增承运商",orgArr:[],rolesArr:[],departmentArr:[],loading:!1,roles:[],departments:[],groups:[],inited:!1,pickOption:{firstDayOfWeek:1,disabledDate:function(e){return!!r.form.contractEndtime&&e.getTime()>r.form.contractEndtime}},pickOption2:{firstDayOfWeek:1,disabledDate:function(e){return!!r.form.contractStarttime&&e.getTime()<r.form.contractStarttime}}}},mounted:function(){this.form.orgid=this.orgid,this.inited||(this.inited=!0,this.initInfo())},watch:{popVisible:function(e,r){this.inited||(this.inited=!0,this.initInfo()),e&&!this.isModify&&this.getCarrierSn()},orgid:function(e){this.form.orgid=e},info:function(){if(this.isModify){this.popTitle="修改承运商";var e=o()({},this.info);for(var r in this.form)this.form[r]=e[r];this.form.carrierId=e.carrierId}else{for(var t in this.popTitle="新增承运商",this.getCarrierSn(),this.form)this.form[t]="";delete this.form.carrierId,this.form.orgid=this.orgid}}},methods:{getCarrierSn:function(){var r=this;return this.loading=!0,Object(s.c)().then(function(e){r.form.carrierSn=e.data,console.log(e.data),r.loading=!1}).catch(function(e){r._handlerCatchMsg(e)})},initInfo:function(){this.loading=!1},getOrgid:function(e){this.form.orgid=e},submitForm:function(e,t){var i=this;this.$refs[e].validate(function(e){if(!e)return!1;i.loading=!0;var r=o()({},i.form);r.fixPhone=i.fixPhone;(i.isModify?Object(s.e)(r):Object(s.d)(r)).then(function(e){i.loading=!1,i.$message.success("保存成功"),i.reset(),t?(i.form.orgid=i.orgid,i.getCarrierSn()):i.closeMe(),i.$emit("success")}).catch(function(e){i._handlerCatchMsg(e),i.loading=!1})})},reset:function(){var e=this.form.orgid;this.$refs.ruleForm.resetFields(),this.form.orgid=e},closeMe:function(e){this.reset(),this.$emit("update:popVisible",!1),"function"==typeof e&&e()}}}},ubb7:function(e,r,t){"use strict";var i={render:function(){var r=this,e=r.$createElement,t=r._self._c||e;return t("pop-right",{directives:[{name:"loading",rawName:"v-loading",value:r.loading,expression:"loading"}],staticClass:"addCarrierPop",attrs:{title:r.popTitle,isShow:r.popVisible},on:{close:r.closeMe}},[t("template",{staticClass:"addCarrierPop-content",slot:"content"},[t("el-form",{ref:"ruleForm",attrs:{model:r.form,rules:r.rules,"label-width":r.formLabelWidth,inline:!0,"label-position":"right",size:"mini"}},[t("el-form-item",{attrs:{label:"归属网点",prop:"orgid"}},[t("SelectTree",{attrs:{orgid:r.otherinfo.orgid},model:{value:r.form.orgid,callback:function(e){r.$set(r.form,"orgid",e)},expression:"form.orgid"}})],1),r._v(" "),t("el-form-item",{attrs:{label:"承运商编码",prop:"carrierSn"}},[t("el-input",{attrs:{maxlength:11,"auto-complete":"off"},model:{value:r.form.carrierSn,callback:function(e){r.$set(r.form,"carrierSn","string"==typeof e?e.trim():e)},expression:"form.carrierSn"}})],1),r._v(" "),t("el-form-item",{attrs:{label:"承运商",prop:"carrierName"}},[t("el-input",{attrs:{maxlength:20,"auto-complete":"off"},model:{value:r.form.carrierName,callback:function(e){r.$set(r.form,"carrierName","string"==typeof e?e.trim():e)},expression:"form.carrierName"}})],1),r._v(" "),t("el-form-item",{attrs:{label:"承运商电话",prop:"carrierMobile"}},[t("el-input",{attrs:{maxlength:11,"auto-complete":"off"},model:{value:r.form.carrierMobile,callback:function(e){r.$set(r.form,"carrierMobile",e)},expression:"form.carrierMobile"}})],1),r._v(" "),t("el-form-item",{attrs:{label:"负责人",prop:"liableName"}},[t("el-input",{attrs:{maxlength:25,"auto-complete":"off"},model:{value:r.form.liableName,callback:function(e){r.$set(r.form,"liableName",e)},expression:"form.liableName"}})],1),r._v(" "),t("el-form-item",{attrs:{label:"负责人手机",prop:"liablePhone"}},[t("el-input",{directives:[{name:"numberOnly",rawName:"v-numberOnly"}],attrs:{maxlength:11,"auto-complete":"off"},model:{value:r.form.liablePhone,callback:function(e){r.$set(r.form,"liablePhone",e)},expression:"form.liablePhone"}})],1),r._v(" "),t("el-form-item",{attrs:{label:"合同起始日",prop:"contractStarttime"}},[t("el-date-picker",{attrs:{align:"right",type:"date",placeholder:"选择日期","value-format":"timestamp","picker-options":r.pickOption},model:{value:r.form.contractStarttime,callback:function(e){r.$set(r.form,"contractStarttime",e)},expression:"form.contractStarttime"}})],1),r._v(" "),t("el-form-item",{attrs:{label:"合同终止日",prop:"contractEndtime"}},[t("el-date-picker",{attrs:{align:"right",type:"date","picker-options":r.pickOption2,placeholder:"选择日期","value-format":"timestamp"},model:{value:r.form.contractEndtime,callback:function(e){r.$set(r.form,"contractEndtime",e)},expression:"form.contractEndtime"}})],1),r._v(" "),t("el-form-item",{attrs:{label:"客服电话",prop:"customerServicePhone"}},[t("el-input",{directives:[{name:"numberOnly",rawName:"v-numberOnly"}],attrs:{maxlength:11,"auto-complete":"off"},model:{value:r.form.customerServicePhone,callback:function(e){r.$set(r.form,"customerServicePhone",e)},expression:"form.customerServicePhone"}})],1),r._v(" "),t("el-form-item",{attrs:{label:"地址",prop:"carrierAddr"}},[t("el-input",{attrs:{maxlength:50,"auto-complete":"off"},model:{value:r.form.carrierAddr,callback:function(e){r.$set(r.form,"carrierAddr","string"==typeof e?e.trim():e)},expression:"form.carrierAddr"}})],1),r._v(" "),t("el-form-item",{staticClass:"carrierRemarks",attrs:{label:"备注",prop:"carrierRemarks"}},[t("el-input",{attrs:{type:"textarea",maxlength:300},model:{value:r.form.carrierRemarks,callback:function(e){r.$set(r.form,"carrierRemarks",e)},expression:"form.carrierRemarks"}})],1)],1)],1),r._v(" "),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r.isModify?r._e():t("el-button",{attrs:{type:"primary"},on:{click:function(e){r.submitForm("ruleForm",!0)}}},[r._v("保存并添加")]),r._v(" "),t("el-button",{attrs:{type:"primary"},on:{click:function(e){r.submitForm("ruleForm")}}},[r._v("保 存")]),r._v(" "),t("el-button",{on:{click:r.closeMe}},[r._v("取 消")])],1)],2)},staticRenderFns:[]};r.a=i}});